<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="financial-asset-relationship-db " />
<meta property="og:image" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta property="og:description" content="financial-asset-relationship-db - Custom CSS theme for html-documentation with lots of customization parameters." />
<meta property="og:url" content="https://github.com/DashFin-FarDb/financial-asset-relationship-db" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta name="twitter:title" content="Doxygen Awesome" />
<meta name="twitter:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<!-- END twitter metadata -->
<title>financial-asset-relationship-db: Technical Specification</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.drawio.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/DashFin-FarDb/financial-asset-relationship-db" class="github-corner" title="View source on GitHub" target="_blank" rel="noopener noreferrer">
    <svg viewBox="0 0 250 250" width="40" height="40" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">financial-asset-relationship-db
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md__2app_2doc__state_2github__reposRepoArchDocGenContext_2DashFin-FarDb_2financial-asset-relationship-db_2docs_2tech__spec.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Technical Specification</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md1778"></a></p>
<h1><a class="anchor" id="autotoc_md1779"></a>
1. Introduction</h1>
<p>This Technical Specification document provides a comprehensive reference for the <b>Financial Asset Relationship Database</b>, an enterprise-grade system designed to visualize and analyze complex interconnections between financial assets across multiple asset classes. This introduction establishes the project's purpose, scope, and context for all stakeholders involved in development, deployment, and utilization of the system.</p>
<h2><a class="anchor" id="autotoc_md1780"></a>
1.1 Executive Summary</h2>
<h3><a class="anchor" id="autotoc_md1781"></a>
1.1.1 Project Overview</h3>
<p>The Financial Asset Relationship Database is a sophisticated 3D visualization and analytics platform that enables users to explore interconnected financial assets spanning Equities, Fixed Income (Bonds), Commodities, Currencies, and Regulatory Events. The system features a dual-UI architecture that accommodates diverse user preferences and deployment scenarios:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">UI Component   </th><th class="markdownTableHeadNone">Technology   </th><th class="markdownTableHeadNone">Port   </th><th class="markdownTableHeadNone">Target Users    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Legacy Interface   </td><td class="markdownTableBodyNone">Gradio (Python)   </td><td class="markdownTableBodyNone">7860   </td><td class="markdownTableBodyNone">Python developers, rapid prototyping    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Modern Interface   </td><td class="markdownTableBodyNone">Next.js + React   </td><td class="markdownTableBodyNone">3000   </td><td class="markdownTableBodyNone">Web developers, production deployments    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">REST API   </td><td class="markdownTableBodyNone">FastAPI   </td><td class="markdownTableBodyNone">8000   </td><td class="markdownTableBodyNone">System integrations, external applications   </td></tr>
</table>
<p>The platform delivers interactive network visualizations powered by Plotly, enabling intuitive exploration of asset relationships through rotation, zoom, and hover interactions. Both frontend experiences share a common backend logic layer (<code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code>) ensuring consistent analytical capabilities regardless of the chosen interface.</p>
<h3><a class="anchor" id="autotoc_md1782"></a>
1.1.2 Core Business Problem</h3>
<p>Financial markets present significant challenges in understanding the complex web of relationships between different asset types. The Financial Asset Relationship Database addresses several critical pain points:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Challenge   </th><th class="markdownTableHeadNone">Solution Provided    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Cross-Asset Complexity   </td><td class="markdownTableBodyNone">Automatic discovery of relationships across asset classes including sector affinity, corporate bond-to-equity links, commodity exposure, and currency risk    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Regulatory Impact Analysis   </td><td class="markdownTableBodyNone">Integration of regulatory events with scored impact modeling (-1 to +1 scale) affecting multiple assets    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Relationship Visualization   </td><td class="markdownTableBodyNone">Interactive 3D network graphs with deterministic layouts (seed=42) for reproducible analysis    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Portfolio Risk Assessment   </td><td class="markdownTableBodyNone">Network metrics calculation including relationship density, average degree, and asset class distributions   </td></tr>
</table>
<p>The system transforms raw financial data into actionable intelligence by surfacing hidden connections that traditional asset-by-asset analysis would miss.</p>
<h3><a class="anchor" id="autotoc_md1783"></a>
1.1.3 Key Stakeholders and Users</h3>
<p>The platform serves multiple user constituencies with varying technical backgrounds and analytical needs:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Stakeholder Group   </th><th class="markdownTableHeadNone">Primary Use Cases   </th><th class="markdownTableHeadNone">Preferred Interface    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Financial Analysts   </td><td class="markdownTableBodyNone">Cross-asset relationship insights, sector analysis   </td><td class="markdownTableBodyNone">Next.js UI, Gradio UI    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Portfolio Managers   </td><td class="markdownTableBodyNone">Diversification analysis, risk exposure visualization   </td><td class="markdownTableBodyNone">Next.js UI    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Data Scientists   </td><td class="markdownTableBodyNone">Network structure exploration, custom analytics   </td><td class="markdownTableBodyNone">REST API, Gradio UI    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration Developers   </td><td class="markdownTableBodyNone">Programmatic data access, workflow automation   </td><td class="markdownTableBodyNone">REST API    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Compliance Officers   </td><td class="markdownTableBodyNone">Regulatory event impact assessment   </td><td class="markdownTableBodyNone">Next.js UI   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1784"></a>
1.1.4 Value Proposition and Business Impact</h3>
<p>The Financial Asset Relationship Database delivers measurable business value through:</p>
<p><b>Analytical Capabilities:</b></p>
<ul>
<li>Cross-asset analysis with automatic relationship discovery via <code>_find_relationships()</code> and <code>build_relationships()</code> methods</li>
<li>Real-time network statistics with relationship strength normalization (0.0-1.0 scale)</li>
<li>Deterministic 3D layouts ensuring reproducible visualizations across sessions</li>
<li>Comprehensive schema and business rules documentation generation</li>
</ul>
<p><b>Technical Advantages:</b></p>
<ul>
<li>Modern REST API architecture enabling integration with external systems</li>
<li>Dual-UI strategy supporting both rapid prototyping (Gradio) and production deployments (Next.js)</li>
<li>Thread-safe graph initialization with double-checked locking for concurrent access</li>
<li>JWT-based authentication with configurable token expiration (30-minute default)</li>
</ul>
<p><b>Operational Benefits:</b></p>
<ul>
<li>Multiple deployment options: local development, Docker containerization, and Vercel serverless</li>
<li>Real market data integration via Yahoo Finance API (yfinance)</li>
<li>Offline exploration capability using comprehensive sample dataset</li>
</ul>
<h2><a class="anchor" id="autotoc_md1785"></a>
1.2 System Overview</h2>
<h3><a class="anchor" id="autotoc_md1786"></a>
1.2.1 Project Context</h3>
<h4><a class="anchor" id="autotoc_md1787"></a>
Business Context and Market Positioning</h4>
<p>The Financial Asset Relationship Database positions itself as a specialized analytical tool for financial professionals who require visibility into cross-asset relationships. Unlike traditional portfolio management systems that treat assets in isolation, this platform emphasizes the interconnected nature of financial markets.</p>
<p>The system operates within the broader financial technology landscape, providing:</p>
<ul>
<li>Network-based analysis complementing traditional fundamental and technical analysis</li>
<li>Regulatory event integration bridging compliance and investment functions</li>
<li>API-first architecture enabling ecosystem integration</li>
</ul>
<h4><a class="anchor" id="autotoc_md1788"></a>
Current System Architecture</h4>
<p>The platform implements a layered architecture separating concerns across presentation, API, business logic, and data layers:</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph Presentation[&quot;Presentation Layer&quot;]</div>
<div class="line">        GradioUI[&quot;Gradio UI&lt;br/&gt;(app.py)&quot;]</div>
<div class="line">        NextJS[&quot;Next.js Frontend&lt;br/&gt;(frontend/)&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph APILayer[&quot;API Layer&quot;]</div>
<div class="line">        FastAPI[&quot;FastAPI Backend&lt;br/&gt;(api/main.py)&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph BusinessLogic[&quot;Business Logic Layer&quot;]</div>
<div class="line">        GraphLogic[&quot;Asset Graph&lt;br/&gt;(src/logic/)&quot;]</div>
<div class="line">        Models[&quot;Domain Models&lt;br/&gt;(src/models/)&quot;]</div>
<div class="line">        Visualization[&quot;Visualization&lt;br/&gt;(src/visualizations/)&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph DataLayer[&quot;Data Layer&quot;]</div>
<div class="line">        SampleData[&quot;Sample Data&lt;br/&gt;(src/data/sample_data.py)&quot;]</div>
<div class="line">        YahooFinance[&quot;Yahoo Finance&lt;br/&gt;(yfinance)&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    GradioUI --&gt; GraphLogic</div>
<div class="line">    NextJS --&gt; FastAPI</div>
<div class="line">    FastAPI --&gt; GraphLogic</div>
<div class="line">    GraphLogic --&gt; Models</div>
<div class="line">    GraphLogic --&gt; Visualization</div>
<div class="line">    GraphLogic --&gt; SampleData</div>
<div class="line">    GraphLogic --&gt; YahooFinance</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md1789"></a>
Integration with Enterprise Landscape</h4>
<p>The system is designed for integration flexibility:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Integration Point   </th><th class="markdownTableHeadNone">Mechanism   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">External Data Sources   </td><td class="markdownTableBodyNone">Yahoo Finance via yfinance library   </td><td class="markdownTableBodyNone"><code>USE_REAL_DATA_FETCHER</code> environment variable    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Authentication Systems   </td><td class="markdownTableBodyNone">JWT token-based auth   </td><td class="markdownTableBodyNone">Environment variables for secret key and algorithm    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Frontend Applications   </td><td class="markdownTableBodyNone">RESTful JSON API   </td><td class="markdownTableBodyNone">CORS allowlist per environment    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Container Orchestration   </td><td class="markdownTableBodyNone">Docker Compose   </td><td class="markdownTableBodyNone"><code>docker-compose.yml</code> configuration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Serverless Platforms   </td><td class="markdownTableBodyNone">Vercel deployment   </td><td class="markdownTableBodyNone"><code>vercel.json</code> configuration   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1790"></a>
1.2.2 High-Level Description</h3>
<h4><a class="anchor" id="autotoc_md1791"></a>
Primary System Capabilities</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Capability   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3D Network Visualization   </td><td class="markdownTableBodyNone">Interactive Plotly-based graph rendering with rotation, zoom, and hover   </td><td class="markdownTableBodyNone"><code>src/visualizations/</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Cross-Asset Analysis   </td><td class="markdownTableBodyNone">Automatic relationship discovery between different asset classes   </td><td class="markdownTableBodyNone"><code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Regulatory Integration   </td><td class="markdownTableBodyNone">Corporate events and SEC filings with scored impact modeling   </td><td class="markdownTableBodyNone"><code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Real-time Metrics   </td><td class="markdownTableBodyNone">Network statistics, relationship density, distribution analysis   </td><td class="markdownTableBodyNone">API <code>/api/metrics</code> endpoint    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Asset Explorer   </td><td class="markdownTableBodyNone">Filterable table with asset class and sector filters   </td><td class="markdownTableBodyNone">Gradio and Next.js UIs    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Schema Reporting   </td><td class="markdownTableBodyNone">Auto-generated documentation of data models and business rules   </td><td class="markdownTableBodyNone"><code><a class="el" href="schema__report_8py.html">src/reports/schema_report.py</a></code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1792"></a>
Major System Components</h4>
<div class="fragment"><div class="line">flowchart LR</div>
<div class="line">    subgraph Frontend[&quot;Frontend Components&quot;]</div>
<div class="line">        A1[&quot;Gradio UI&quot;]</div>
<div class="line">        A2[&quot;Next.js App&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Backend[&quot;Backend Services&quot;]</div>
<div class="line">        B1[&quot;FastAPI Server&quot;]</div>
<div class="line">        B2[&quot;JWT Auth&quot;]</div>
<div class="line">        B3[&quot;Rate Limiter&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Core[&quot;Core Logic&quot;]</div>
<div class="line">        C1[&quot;Asset Graph Engine&quot;]</div>
<div class="line">        C2[&quot;Relationship Builder&quot;]</div>
<div class="line">        C3[&quot;Metrics Calculator&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Data[&quot;Data Sources&quot;]</div>
<div class="line">        D1[&quot;Sample Database&quot;]</div>
<div class="line">        D2[&quot;Yahoo Finance&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    A1 --&gt; C1</div>
<div class="line">    A2 --&gt; B1</div>
<div class="line">    B1 --&gt; B2</div>
<div class="line">    B1 --&gt; B3</div>
<div class="line">    B1 --&gt; C1</div>
<div class="line">    C1 --&gt; C2</div>
<div class="line">    C1 --&gt; C3</div>
<div class="line">    C2 --&gt; D1</div>
<div class="line">    C2 --&gt; D2</div>
<div class="line">end</div>
</div><!-- fragment --><p>The component architecture follows these responsibilities:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Location   </th><th class="markdownTableHeadNone">Responsibility    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Gradio UI   </td><td class="markdownTableBodyNone"><code><a class="el" href="app_8py.html">app.py</a></code>   </td><td class="markdownTableBodyNone">Legacy Python UI with tabbed interface for visualization, metrics, schema, and asset exploration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FastAPI Backend   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone">REST API with JWT authentication, CORS configuration, and rate limiting    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Next.js Frontend   </td><td class="markdownTableBodyNone"><code>frontend/app/</code>   </td><td class="markdownTableBodyNone">Modern React-based UI with TypeScript and Tailwind CSS    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Core Logic   </td><td class="markdownTableBodyNone"><code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code>   </td><td class="markdownTableBodyNone">Graph algorithms, relationship discovery, visualization data interface    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Domain Models   </td><td class="markdownTableBodyNone"><code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code>   </td><td class="markdownTableBodyNone">Asset dataclasses, enums, validation rules    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Layer   </td><td class="markdownTableBodyNone"><code>src/data/</code>   </td><td class="markdownTableBodyNone">Sample data (19 assets, 4 regulatory events) and real Yahoo Finance fetcher    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Visualization Layer   </td><td class="markdownTableBodyNone"><code>src/visualizations/</code>   </td><td class="markdownTableBodyNone">Plotly-based chart generation for 3D graphs, metrics, and 2D views    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Reports   </td><td class="markdownTableBodyNone"><code><a class="el" href="schema__report_8py.html">src/reports/schema_report.py</a></code>   </td><td class="markdownTableBodyNone">Schema documentation generator   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1793"></a>
Asset Classes and Domain Model</h4>
<p>The system supports five primary asset classes defined in the <code>AssetClass</code> enum:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Asset Class   </th><th class="markdownTableHeadNone">Key Attributes   </th><th class="markdownTableHeadNone">Example Use    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Equity   </td><td class="markdownTableBodyNone">P/E ratio, dividend yield, EPS, book value   </td><td class="markdownTableBodyNone">Stock analysis    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Fixed Income   </td><td class="markdownTableBodyNone">Yield to maturity, coupon rate, maturity date, credit rating, issuer_id   </td><td class="markdownTableBodyNone">Bond analysis    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Commodity   </td><td class="markdownTableBodyNone">Contract size, delivery date, volatility   </td><td class="markdownTableBodyNone">Commodity tracking    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Currency   </td><td class="markdownTableBodyNone">Exchange rate, country, central bank rate   </td><td class="markdownTableBodyNone">FX exposure    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Derivative   </td><td class="markdownTableBodyNone">Extensible attributes   </td><td class="markdownTableBodyNone">Future expansion   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1794"></a>
Relationship Types</h4>
<p>The relationship engine discovers and manages six primary relationship types:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Relationship Type   </th><th class="markdownTableHeadNone">Directionality   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>same_sector</code>   </td><td class="markdownTableBodyNone">Bidirectional   </td><td class="markdownTableBodyNone">Assets operating in the same industry sector    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>corporate_bond_to_equity</code>   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">Bonds issued by companies with traded stock    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>commodity_exposure</code>   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">Equity companies exposed to commodity price movements    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>currency_risk</code>   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">FX exposure for non-USD denominated assets    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>income_comparison</code>   </td><td class="markdownTableBodyNone">Bidirectional   </td><td class="markdownTableBodyNone">Dividend yields compared to bond yields    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>regulatory_impact</code>   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">Regulatory events affecting multiple assets   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1795"></a>
1.2.3 Technology Stack</h3>
<h4><a class="anchor" id="autotoc_md1796"></a>
Backend Technologies</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technology   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Python   </td><td class="markdownTableBodyNone">3.10+   </td><td class="markdownTableBodyNone">Runtime environment    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FastAPI   </td><td class="markdownTableBodyNone">0.127.0   </td><td class="markdownTableBodyNone">REST API framework    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Uvicorn   </td><td class="markdownTableBodyNone">≥0.24.0   </td><td class="markdownTableBodyNone">ASGI server    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Pydantic   </td><td class="markdownTableBodyNone">2.12.5   </td><td class="markdownTableBodyNone">Data validation and serialization    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">NumPy   </td><td class="markdownTableBodyNone">2.2.6   </td><td class="markdownTableBodyNone">Numerical computing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Pandas   </td><td class="markdownTableBodyNone">≥1.5.0   </td><td class="markdownTableBodyNone">Data analysis and manipulation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">yfinance   </td><td class="markdownTableBodyNone">≥0.2.51   </td><td class="markdownTableBodyNone">Yahoo Finance data acquisition    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Plotly   </td><td class="markdownTableBodyNone">≥6.0.0   </td><td class="markdownTableBodyNone">Visualization generation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SQLAlchemy   </td><td class="markdownTableBodyNone">≥2.0.0   </td><td class="markdownTableBodyNone">Database ORM    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Gradio   </td><td class="markdownTableBodyNone">≥4.0.0   </td><td class="markdownTableBodyNone">Legacy UI framework   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1797"></a>
Frontend Technologies</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technology   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">React   </td><td class="markdownTableBodyNone">18.2.0   </td><td class="markdownTableBodyNone">UI component framework    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Next.js   </td><td class="markdownTableBodyNone">14.2.x   </td><td class="markdownTableBodyNone">React framework with App Router    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">TypeScript   </td><td class="markdownTableBodyNone">Latest   </td><td class="markdownTableBodyNone">Type safety    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Tailwind CSS   </td><td class="markdownTableBodyNone">Latest   </td><td class="markdownTableBodyNone">Utility-first CSS framework    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Plotly.js   </td><td class="markdownTableBodyNone">Latest   </td><td class="markdownTableBodyNone">Client-side 3D visualization    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Axios   </td><td class="markdownTableBodyNone">Latest   </td><td class="markdownTableBodyNone">HTTP client for API communication   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1798"></a>
Infrastructure Technologies</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technology   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Configuration File    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Docker   </td><td class="markdownTableBodyNone">Containerization   </td><td class="markdownTableBodyNone"><code>Dockerfile</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Docker Compose   </td><td class="markdownTableBodyNone">Multi-container orchestration   </td><td class="markdownTableBodyNone"><code>docker-compose.yml</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Vercel   </td><td class="markdownTableBodyNone">Serverless deployment   </td><td class="markdownTableBodyNone"><code>vercel.json</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Jest   </td><td class="markdownTableBodyNone">Frontend testing   </td><td class="markdownTableBodyNone"><code>frontend/jest.config.js</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Pytest   </td><td class="markdownTableBodyNone">Backend testing   </td><td class="markdownTableBodyNone"><code>tests/</code> directory   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1799"></a>
1.2.4 Success Criteria</h3>
<h4><a class="anchor" id="autotoc_md1800"></a>
Measurable Objectives</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Objective   </th><th class="markdownTableHeadNone">Metric   </th><th class="markdownTableHeadNone">Target    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Response Time   </td><td class="markdownTableBodyNone">95th percentile latency   </td><td class="markdownTableBodyNone">&lt; 500ms for standard queries    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visualization Rendering   </td><td class="markdownTableBodyNone">Time to interactive   </td><td class="markdownTableBodyNone">&lt; 2 seconds for 3D graph    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Relationship Discovery   </td><td class="markdownTableBodyNone">Coverage   </td><td class="markdownTableBodyNone">100% of defined relationship types    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Accuracy   </td><td class="markdownTableBodyNone">Validation pass rate   </td><td class="markdownTableBodyNone">100% for all asset records   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1801"></a>
Critical Success Factors</h4>
<ol type="1">
<li><b>Accurate Relationship Discovery</b>: The system must correctly identify and categorize all relationship types between assets based on the defined business rules in <code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code></li>
<li><b>Reproducible Visualizations</b>: Deterministic 3D layouts using fixed seed (seed=42) must produce identical visual outputs across sessions</li>
<li><b>API Reliability</b>: Thread-safe graph initialization with double-checked locking must prevent race conditions under concurrent load</li>
<li><b>Security Compliance</b>: JWT authentication must enforce 30-minute token expiration with configurable rate limiting (5 requests/minute on <code>/token</code>)</li>
</ol>
<h4><a class="anchor" id="autotoc_md1802"></a>
Key Performance Indicators</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">KPI   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Measurement Source    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Network Density   </td><td class="markdownTableBodyNone">Ratio of actual to possible relationships   </td><td class="markdownTableBodyNone"><code>/api/metrics</code> endpoint    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Average Degree   </td><td class="markdownTableBodyNone">Mean number of connections per asset   </td><td class="markdownTableBodyNone"><code>/api/metrics</code> endpoint    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Max Degree   </td><td class="markdownTableBodyNone">Highest connected asset   </td><td class="markdownTableBodyNone"><code>/api/metrics</code> endpoint    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Asset Class Distribution   </td><td class="markdownTableBodyNone">Balance of asset types in network   </td><td class="markdownTableBodyNone"><code>/api/metrics</code> endpoint    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Relationship Strength Distribution   </td><td class="markdownTableBodyNone">Distribution of normalized weights   </td><td class="markdownTableBodyNone">Visualization layer   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md1803"></a>
1.3 Scope</h2>
<h3><a class="anchor" id="autotoc_md1804"></a>
1.3.1 In-Scope</h3>
<h4><a class="anchor" id="autotoc_md1805"></a>
Core Features and Functionalities</h4>
<p><b>Must-Have Capabilities:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Feature   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Status    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3D Network Visualization   </td><td class="markdownTableBodyNone">Interactive Plotly-based graph with rotation, zoom, hover   </td><td class="markdownTableBodyNone">Implemented    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2D Visualization   </td><td class="markdownTableBodyNone">Alternative flat network view   </td><td class="markdownTableBodyNone">Implemented    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Multi-Asset Class Support   </td><td class="markdownTableBodyNone">Equity, Fixed Income, Commodity, Currency, Derivative   </td><td class="markdownTableBodyNone">Implemented    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Automatic Relationship Discovery   </td><td class="markdownTableBodyNone">Rule-based detection via <code>_find_relationships()</code>   </td><td class="markdownTableBodyNone">Implemented    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Network Metrics   </td><td class="markdownTableBodyNone">Density, average/max degree, distributions   </td><td class="markdownTableBodyNone">Implemented    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Regulatory Event Modeling   </td><td class="markdownTableBodyNone">Impact scores (-1 to +1 scale)   </td><td class="markdownTableBodyNone">Implemented    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Relationship Strength Normalization   </td><td class="markdownTableBodyNone">Weights on 0.0-1.0 scale   </td><td class="markdownTableBodyNone">Implemented    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Schema Documentation   </td><td class="markdownTableBodyNone">Auto-generated business rules reference   </td><td class="markdownTableBodyNone">Implemented   </td></tr>
</table>
<p><b>Primary User Workflows:</b></p>
<div class="fragment"><div class="line">flowchart TD</div>
<div class="line">    subgraph Workflow1[&quot;Visualization Workflow&quot;]</div>
<div class="line">        W1A[&quot;Access UI&quot;] --&gt; W1B[&quot;Select 3D/2D View&quot;]</div>
<div class="line">        W1B --&gt; W1C[&quot;Interact with Graph&quot;]</div>
<div class="line">        W1C --&gt; W1D[&quot;Hover for Details&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Workflow2[&quot;Analytics Workflow&quot;]</div>
<div class="line">        W2A[&quot;View Metrics Dashboard&quot;] --&gt; W2B[&quot;Analyze Network Statistics&quot;]</div>
<div class="line">        W2B --&gt; W2C[&quot;Review Distributions&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Workflow3[&quot;Exploration Workflow&quot;]</div>
<div class="line">        W3A[&quot;Open Asset Explorer&quot;] --&gt; W3B[&quot;Apply Filters&quot;]</div>
<div class="line">        W3B --&gt; W3C[&quot;Select Asset&quot;]</div>
<div class="line">        W3C --&gt; W3D[&quot;View Relationships&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Workflow4[&quot;Integration Workflow&quot;]</div>
<div class="line">        W4A[&quot;Authenticate via /token&quot;] --&gt; W4B[&quot;Call REST Endpoints&quot;]</div>
<div class="line">        W4B --&gt; W4C[&quot;Process JSON Response&quot;]</div>
<div class="line">    end</div>
<div class="line">end</div>
</div><!-- fragment --><p><b>Essential Integrations:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Integration   </th><th class="markdownTableHeadNone">Technology   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Market Data   </td><td class="markdownTableBodyNone">Yahoo Finance (yfinance)   </td><td class="markdownTableBodyNone">Real-time and historical asset data    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visualization   </td><td class="markdownTableBodyNone">Plotly   </td><td class="markdownTableBodyNone">Chart and graph rendering    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Authentication   </td><td class="markdownTableBodyNone">JWT   </td><td class="markdownTableBodyNone">API security    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Database   </td><td class="markdownTableBodyNone">SQLite/PostgreSQL   </td><td class="markdownTableBodyNone">Optional persistence   </td></tr>
</table>
<p><b>REST API Endpoints:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/health</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">System health check    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/assets</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">List assets with optional filters    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/assets/{id}</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Retrieve single asset details    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/assets/{id}/relationships</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Get relationships for specific asset    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/relationships</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">List all relationships    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/metrics</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Network metrics and statistics    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/visualization</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">3D visualization data payload    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/asset-classes</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Enumerate available asset classes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/sectors</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">List industry sectors    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/token</code>   </td><td class="markdownTableBodyNone">POST   </td><td class="markdownTableBodyNone">JWT authentication   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1806"></a>
Implementation Boundaries</h4>
<p><b>System Boundaries:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Boundary   </th><th class="markdownTableHeadNone">Scope    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Deployment Model   </td><td class="markdownTableBodyNone">Standalone application with optional external data sources    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Persistence   </td><td class="markdownTableBodyNone">In-memory graph with optional database backing    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Authentication   </td><td class="markdownTableBodyNone">Single-user JWT; multi-user requires extension    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Network Protocol   </td><td class="markdownTableBodyNone">HTTPS (production), HTTP (development)   </td></tr>
</table>
<p><b>User Groups Covered:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">User Group   </th><th class="markdownTableHeadNone">Access Level   </th><th class="markdownTableHeadNone">Interface    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Analysts   </td><td class="markdownTableBodyNone">Full read access   </td><td class="markdownTableBodyNone">All UIs    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Developers   </td><td class="markdownTableBodyNone">API access with authentication   </td><td class="markdownTableBodyNone">REST API    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Administrators   </td><td class="markdownTableBodyNone">Configuration management   </td><td class="markdownTableBodyNone">Environment variables   </td></tr>
</table>
<p><b>Data Domains Included:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Domain   </th><th class="markdownTableHeadNone">Coverage    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Equities   </td><td class="markdownTableBodyNone">US market securities    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Fixed Income   </td><td class="markdownTableBodyNone">Corporate and government bonds    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Commodities   </td><td class="markdownTableBodyNone">Major commodity contracts    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Currencies   </td><td class="markdownTableBodyNone">Major currency pairs    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Regulatory Events   </td><td class="markdownTableBodyNone">SEC filings and corporate actions   </td></tr>
</table>
<p><b>Sample Dataset:</b></p>
<ul>
<li>19 assets across 4 asset classes</li>
<li>4 regulatory events with impact scores</li>
<li>Comprehensive relationship coverage for all defined types</li>
</ul>
<h3><a class="anchor" id="autotoc_md1807"></a>
1.3.2 Out-of-Scope</h3>
<h4><a class="anchor" id="autotoc_md1808"></a>
Explicitly Excluded Features</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Feature   </th><th class="markdownTableHeadNone">Exclusion Reason   </th><th class="markdownTableHeadNone">Future Consideration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Real-time Streaming Data   </td><td class="markdownTableBodyNone">Architectural complexity   </td><td class="markdownTableBodyNone">Phase 2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">WebSocket Live Updates   </td><td class="markdownTableBodyNone">Infrastructure requirements   </td><td class="markdownTableBodyNone">Phase 2    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Advanced Portfolio Optimization   </td><td class="markdownTableBodyNone">Beyond core visualization scope   </td><td class="markdownTableBodyNone">Not planned    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Historical Backtesting   </td><td class="markdownTableBodyNone">Requires time-series infrastructure   </td><td class="markdownTableBodyNone">Not planned    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Multi-User Role-Based Access   </td><td class="markdownTableBodyNone">Basic JWT auth only   </td><td class="markdownTableBodyNone">Phase 2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Mobile Native Applications   </td><td class="markdownTableBodyNone">Web-responsive only   </td><td class="markdownTableBodyNone">Not planned   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1809"></a>
Future Phase Considerations</h4>
<p>The following enhancements are identified for future development phases:</p>
<p><b>Phase 2 Enhancements (from <a class="el" href="INTEGRATION__SUMMARY_8md.html">INTEGRATION_SUMMARY.md</a>):</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Enhancement   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Enhanced Authentication   </td><td class="markdownTableBodyNone">Role-based access control    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Caching Layer   </td><td class="markdownTableBodyNone">Redis integration for performance    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Real-time Updates   </td><td class="markdownTableBodyNone">WebSocket-based live data    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Additional Visualizations   </td><td class="markdownTableBodyNone">Extended chart types    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Data Export   </td><td class="markdownTableBodyNone">CSV, JSON, PDF export capabilities    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CI/CD Pipeline   </td><td class="markdownTableBodyNone">Automated testing and deployment    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Monitoring &amp; Analytics   </td><td class="markdownTableBodyNone">Application performance monitoring   </td></tr>
</table>
<p><b>Feature Parity Roadmap (Next.js catching up to Gradio):</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Feature   </th><th class="markdownTableHeadNone">Gradio Status   </th><th class="markdownTableHeadNone">Next.js Status    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Schema Report   </td><td class="markdownTableBodyNone">✓ Implemented   </td><td class="markdownTableBodyNone">Pending    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Documentation Tab   </td><td class="markdownTableBodyNone">✓ Implemented   </td><td class="markdownTableBodyNone">Pending    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2D Visualization   </td><td class="markdownTableBodyNone">✓ Implemented   </td><td class="markdownTableBodyNone">Pending    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Formulaic Analysis   </td><td class="markdownTableBodyNone">✓ Implemented   </td><td class="markdownTableBodyNone">Pending    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Export Features   </td><td class="markdownTableBodyNone">✓ Implemented   </td><td class="markdownTableBodyNone">Pending   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1810"></a>
Integration Points Not Covered</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Integration   </th><th class="markdownTableHeadNone">Status   </th><th class="markdownTableHeadNone">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Bloomberg Terminal   </td><td class="markdownTableBodyNone">Out of scope   </td><td class="markdownTableBodyNone">Proprietary API    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Reuters Eikon   </td><td class="markdownTableBodyNone">Out of scope   </td><td class="markdownTableBodyNone">Licensing requirements    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Alternative data providers   </td><td class="markdownTableBodyNone">Out of scope   </td><td class="markdownTableBodyNone">yfinance standardized    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Third-party authentication (OAuth)   </td><td class="markdownTableBodyNone">Out of scope   </td><td class="markdownTableBodyNone">JWT only   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1811"></a>
Unsupported Use Cases</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Use Case   </th><th class="markdownTableHeadNone">Reason    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">High-Frequency Trading   </td><td class="markdownTableBodyNone">Latency requirements exceed design parameters    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Multi-Tenant SaaS   </td><td class="markdownTableBodyNone">Single-user architecture    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Offline Mobile   </td><td class="markdownTableBodyNone">Web-only responsive design    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Non-Financial Assets   </td><td class="markdownTableBodyNone">Domain model specific to financial instruments    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Real-time Market Making   </td><td class="markdownTableBodyNone">No order execution capability   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md1812"></a>
1.4 References</h2>
<h3><a class="anchor" id="autotoc_md1813"></a>
1.4.1 Documentation Files</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">File   </th><th class="markdownTableHeadNone">Relevance    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>README.md</code>   </td><td class="markdownTableBodyNone">Project overview, features, quick start guide, architecture summary    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="ARCHITECTURE_8md.html">ARCHITECTURE.md</a></code>   </td><td class="markdownTableBodyNone">Detailed system architecture, component diagrams, data flow    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="QUICK__START_8md.html">QUICK_START.md</a></code>   </td><td class="markdownTableBodyNone">User onboarding, development setup, usage examples    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="INTEGRATION__SUMMARY_8md.html">INTEGRATION_SUMMARY.md</a></code>   </td><td class="markdownTableBodyNone">Vercel integration, Next.js + FastAPI architecture, future roadmap    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="DEPLOYMENT_8md.html">DEPLOYMENT.md</a></code>   </td><td class="markdownTableBodyNone">Deployment procedures, API endpoints, environment configuration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="UI__COMPARISON_8md.html">UI_COMPARISON.md</a></code>   </td><td class="markdownTableBodyNone">Gradio vs Next.js feature comparison    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="SECURITY_8md.html">SECURITY.md</a></code>   </td><td class="markdownTableBodyNone">Security best practices, authentication patterns   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1814"></a>
1.4.2 Source Code Files</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">File   </th><th class="markdownTableHeadNone">Relevance    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="app_8py.html">app.py</a></code>   </td><td class="markdownTableBodyNone">Gradio UI implementation, tabs, visualization handlers    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone">FastAPI implementation, all endpoints, CORS, rate limiting, JWT auth    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code>   </td><td class="markdownTableBodyNone">Domain models, asset classes, validation rules, enums    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code>   </td><td class="markdownTableBodyNone">Core graph logic, relationship discovery, visualization data interface    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="sample__data_8py.html">src/data/sample_data.py</a></code>   </td><td class="markdownTableBodyNone">Sample asset data with 19 assets, 4 regulatory events    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="schema__report_8py.html">src/reports/schema_report.py</a></code>   </td><td class="markdownTableBodyNone">Schema documentation generator    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>requirements.txt</code>   </td><td class="markdownTableBodyNone">Python dependencies and versions   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1815"></a>
1.4.3 Configuration Files</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">File   </th><th class="markdownTableHeadNone">Relevance    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Dockerfile</code>   </td><td class="markdownTableBodyNone">Container configuration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>docker-compose.yml</code>   </td><td class="markdownTableBodyNone">Container orchestration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>vercel.json</code>   </td><td class="markdownTableBodyNone">Serverless deployment configuration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/package.json</code>   </td><td class="markdownTableBodyNone">Frontend dependencies    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/jest.config.js</code>   </td><td class="markdownTableBodyNone">Frontend test configuration   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1816"></a>
1.4.4 Source Directories</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Directory   </th><th class="markdownTableHeadNone">Relevance    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>src/</code>   </td><td class="markdownTableBodyNone">Core Python library packages    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>src/models/</code>   </td><td class="markdownTableBodyNone">Domain model definitions    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>src/logic/</code>   </td><td class="markdownTableBodyNone">Graph algorithm implementation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>src/data/</code>   </td><td class="markdownTableBodyNone">Data sources and persistence    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>src/visualizations/</code>   </td><td class="markdownTableBodyNone">Plotly visualization helpers    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>api/</code>   </td><td class="markdownTableBodyNone">FastAPI backend package    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/</code>   </td><td class="markdownTableBodyNone">Next.js application    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/app/</code>   </td><td class="markdownTableBodyNone">React components, API client, types    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>tests/</code>   </td><td class="markdownTableBodyNone">Test harness structure   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md1817"></a>
2. Product Requirements</h1>
<p>This section provides a comprehensive catalog of product requirements for the Financial Asset Relationship Database system. Each feature is documented with traceable requirements, acceptance criteria, and implementation considerations derived from the actual system implementation.</p>
<h2><a class="anchor" id="autotoc_md1818"></a>
2.1 Feature Catalog</h2>
<p>The feature catalog documents all discrete, testable features implemented in the Financial Asset Relationship Database. Features are categorized by functional domain and include complete metadata, descriptions, and dependency mappings.</p>
<h3><a class="anchor" id="autotoc_md1819"></a>
2.1.1 Feature Overview</h3>
<p>The system encompasses 17 primary features organized across five functional domains:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Domain   </th><th class="markdownTableHeadNone">Feature Count   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Data Model   </td><td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Asset types and regulatory events    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Core Engine   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Graph relationship processing    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Layer   </td><td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">REST endpoints, auth, security    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visualization   </td><td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">3D/2D graphs, metrics display    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">User Interface   </td><td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Gradio and Next.js frontends   </td></tr>
</table>
<div class="fragment"><div class="line">flowchart TD</div>
<div class="line">    subgraph DataModel[&quot;Data Model Domain&quot;]</div>
<div class="line">        F001[&quot;F-001&lt;br/&gt;Multi-Asset Data Model&quot;]</div>
<div class="line">        F002[&quot;F-002&lt;br/&gt;Regulatory Events&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph CoreEngine[&quot;Core Engine Domain&quot;]</div>
<div class="line">        F003[&quot;F-003&lt;br/&gt;Graph Engine&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph APILayer[&quot;API Layer Domain&quot;]</div>
<div class="line">        F004[&quot;F-004&lt;br/&gt;REST API&quot;]</div>
<div class="line">        F005[&quot;F-005&lt;br/&gt;JWT Auth&quot;]</div>
<div class="line">        F006[&quot;F-006&lt;br/&gt;CORS Config&quot;]</div>
<div class="line">        F007[&quot;F-007&lt;br/&gt;Rate Limiting&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Visualization[&quot;Visualization Domain&quot;]</div>
<div class="line">        F008[&quot;F-008&lt;br/&gt;3D Visualization&quot;]</div>
<div class="line">        F009[&quot;F-009&lt;br/&gt;2D Visualization&quot;]</div>
<div class="line">        F010[&quot;F-010&lt;br/&gt;Metrics Dashboard&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph UserInterface[&quot;User Interface Domain&quot;]</div>
<div class="line">        F011[&quot;F-011&lt;br/&gt;Asset Explorer&quot;]</div>
<div class="line">        F012[&quot;F-012&lt;br/&gt;Schema Report&quot;]</div>
<div class="line">        F016[&quot;F-016&lt;br/&gt;Gradio UI&quot;]</div>
<div class="line">        F017[&quot;F-017&lt;br/&gt;Next.js Frontend&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    F001 --&gt; F003</div>
<div class="line">    F002 --&gt; F003</div>
<div class="line">    F003 --&gt; F004</div>
<div class="line">    F003 --&gt; F008</div>
<div class="line">    F003 --&gt; F009</div>
<div class="line">    F003 --&gt; F010</div>
<div class="line">    F004 --&gt; F017</div>
<div class="line">    F005 --&gt; F004</div>
<div class="line">    F006 --&gt; F004</div>
<div class="line">    F007 --&gt; F004</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md1820"></a>
2.1.2 Data Model Features</h3>
<h4><a class="anchor" id="autotoc_md1821"></a>
F-001: Multi-Asset Class Data Model</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Feature ID   </td><td class="markdownTableBodyNone">F-001    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Feature Name   </td><td class="markdownTableBodyNone">Multi-Asset Class Data Model    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Category   </td><td class="markdownTableBodyNone">Data Model    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Priority   </td><td class="markdownTableBodyNone">Critical    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Status   </td><td class="markdownTableBodyNone">Completed   </td></tr>
</table>
<p><b>Description:</b></p>
<p>The Multi-Asset Class Data Model provides the foundational domain model supporting five distinct asset classes: Equity, Fixed Income (Bonds), Commodity, Currency, and Derivative. Each asset class extends a base <code>Asset</code> dataclass with specialized attributes relevant to that financial instrument type.</p>
<p><b>Business Value:</b></p>
<p>This feature enables comprehensive cross-asset analysis by providing a unified data structure that captures the unique characteristics of diverse financial instruments while maintaining a consistent interface for relationship discovery and visualization.</p>
<p><b>User Benefits:</b></p>
<ul>
<li>Analysts can explore relationships across heterogeneous asset types</li>
<li>Portfolio managers can assess diversification across asset classes</li>
<li>Data scientists can perform network analysis on a normalized dataset</li>
</ul>
<p><b>Technical Context:</b></p>
<p>The domain model is implemented in <code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code> using Python dataclasses. The <code>AssetClass</code> enum defines the five supported types, while specialized dataclasses (Equity, Bond, Commodity, Currency) extend the base <code>Asset</code> class with type-specific fields. Validation rules enforce data integrity constraints including non-empty identifiers, non-negative prices, and ISO currency code formatting.</p>
<p><b>Dependencies:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency Type   </th><th class="markdownTableHeadNone">Dependency    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Prerequisite Features   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">System Dependencies   </td><td class="markdownTableBodyNone">Python 3.10+, dataclasses    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">External Dependencies   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration Requirements   </td><td class="markdownTableBodyNone">Compatible with SQLAlchemy ORM mapping   </td></tr>
</table>
<hr  />
<h4><a class="anchor" id="autotoc_md1823"></a>
F-002: Regulatory Event Integration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Feature ID   </td><td class="markdownTableBodyNone">F-002    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Feature Name   </td><td class="markdownTableBodyNone">Regulatory Event Integration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Category   </td><td class="markdownTableBodyNone">Data Model    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Priority   </td><td class="markdownTableBodyNone">High    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Status   </td><td class="markdownTableBodyNone">Completed   </td></tr>
</table>
<p><b>Description:</b></p>
<p>Regulatory Event Integration models corporate and regulatory activities that impact multiple financial assets. Events include earnings reports, SEC filings, dividend announcements, bond issuances, acquisitions, and bankruptcy proceedings. Each event carries a scored impact value enabling quantitative assessment of regulatory influence on asset relationships.</p>
<p><b>Business Value:</b></p>
<p>This feature bridges compliance and investment functions by surfacing regulatory events that affect asset valuations and inter-asset relationships, enabling proactive risk management.</p>
<p><b>User Benefits:</b></p>
<ul>
<li>Compliance officers can track regulatory event propagation</li>
<li>Analysts can assess event impact across related assets</li>
<li>Portfolio managers can evaluate regulatory risk exposure</li>
</ul>
<p><b>Technical Context:</b></p>
<p>Implemented via the <code>RegulatoryEvent</code> dataclass and <code>RegulatoryActivity</code> enum in <code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code>. The impact_score field uses a normalized scale from -1.0 (highly negative) to +1.0 (highly positive). Events link to affected assets via the <code>asset_id</code> field and optionally through <code>related_assets</code> for multi-asset impacts.</p>
<p><b>Dependencies:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency Type   </th><th class="markdownTableHeadNone">Dependency    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Prerequisite Features   </td><td class="markdownTableBodyNone">F-001 (Multi-Asset Data Model)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">System Dependencies   </td><td class="markdownTableBodyNone">Python 3.10+, dataclasses    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">External Dependencies   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration Requirements   </td><td class="markdownTableBodyNone">Requires valid asset_id references   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md1825"></a>
2.1.3 Core Engine Features</h3>
<h4><a class="anchor" id="autotoc_md1826"></a>
F-003: Asset Relationship Graph Engine</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Feature ID   </td><td class="markdownTableBodyNone">F-003    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Feature Name   </td><td class="markdownTableBodyNone">Asset Relationship Graph Engine    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Category   </td><td class="markdownTableBodyNone">Core Logic    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Priority   </td><td class="markdownTableBodyNone">Critical    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Status   </td><td class="markdownTableBodyNone">Completed   </td></tr>
</table>
<p><b>Description:</b></p>
<p>The Asset Relationship Graph Engine is the central processing component that discovers, stores, and exposes relationships between financial assets. The engine implements rule-based relationship detection across eight relationship types, calculates network metrics, and provides visualization data interfaces.</p>
<p><b>Business Value:</b></p>
<p>This feature transforms raw financial data into actionable intelligence by surfacing hidden connections that traditional asset-by-asset analysis would miss, enabling superior risk assessment and portfolio construction.</p>
<p><b>User Benefits:</b></p>
<ul>
<li>Automatic discovery of non-obvious asset relationships</li>
<li>Reproducible visualizations via deterministic layouts</li>
<li>Network-based analysis complementing fundamental analysis</li>
</ul>
<p><b>Technical Context:</b></p>
<p>Implemented in <code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code>, the engine maintains a graph structure as <code>Dict[source_id, List[Tuple[target_id, rel_type, strength]]]</code>. Key methods include <code>add_asset()</code>, <code>add_regulatory_event()</code>, <code>build_relationships()</code>, <code>calculate_metrics()</code>, and <code>get_3d_visualization_data()</code>. The engine uses a fixed seed (42) for deterministic 3D layout generation.</p>
<p><b>Supported Relationship Types:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Relationship Type   </th><th class="markdownTableHeadNone">Directionality   </th><th class="markdownTableHeadNone">Detection Rule    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">same_sector   </td><td class="markdownTableBodyNone">Bidirectional   </td><td class="markdownTableBodyNone">Assets in identical sector    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">corporate_bond_to_equity   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">Bond issuer_id matches equity    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">commodity_exposure   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">Equity exposed to commodity    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">currency_risk   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">Non-USD currency exposure    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">income_comparison   </td><td class="markdownTableBodyNone">Bidirectional   </td><td class="markdownTableBodyNone">Dividend vs bond yield    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">regulatory_impact   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">Shared regulatory events    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">market_cap_similar   </td><td class="markdownTableBodyNone">Bidirectional   </td><td class="markdownTableBodyNone">Similar market capitalization    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">correlation   </td><td class="markdownTableBodyNone">Bidirectional   </td><td class="markdownTableBodyNone">Price correlation threshold   </td></tr>
</table>
<p><b>Dependencies:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency Type   </th><th class="markdownTableHeadNone">Dependency    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Prerequisite Features   </td><td class="markdownTableBodyNone">F-001, F-002    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">System Dependencies   </td><td class="markdownTableBodyNone">NumPy 2.2.6, Pandas ≥1.5.0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">External Dependencies   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration Requirements   </td><td class="markdownTableBodyNone">Thread-safe initialization   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md1828"></a>
2.1.4 API Layer Features</h3>
<h4><a class="anchor" id="autotoc_md1829"></a>
F-004: REST API Endpoints</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Feature ID   </td><td class="markdownTableBodyNone">F-004    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Feature Name   </td><td class="markdownTableBodyNone">REST API Endpoints    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Category   </td><td class="markdownTableBodyNone">API Layer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Priority   </td><td class="markdownTableBodyNone">Critical    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Status   </td><td class="markdownTableBodyNone">Completed   </td></tr>
</table>
<p><b>Description:</b></p>
<p>The REST API provides a comprehensive set of HTTP endpoints for programmatic access to asset data, relationships, network metrics, and visualization payloads. Built on FastAPI, the API implements OpenAPI specification compliance with automatic documentation generation.</p>
<p><b>Business Value:</b></p>
<p>Enables ecosystem integration, allowing external applications and automated workflows to consume financial relationship data programmatically.</p>
<p><b>User Benefits:</b></p>
<ul>
<li>Developers can integrate data into custom applications</li>
<li>Automated workflows can consume relationship data</li>
<li>Third-party tools can leverage visualization payloads</li>
</ul>
<p><b>Technical Context:</b></p>
<p>Implemented in <code><a class="el" href="api_2main_8py.html">api/main.py</a></code> using FastAPI 0.127.0. The API exposes 12 primary endpoints with Pydantic response models for type-safe serialization. Graph initialization occurs at startup via the lifespan context manager with thread-safe singleton access.</p>
<p><b>API Endpoints:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">API metadata and endpoint listing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/health</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">System health check    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/token</code>   </td><td class="markdownTableBodyNone">POST   </td><td class="markdownTableBodyNone">JWT authentication    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/users/me</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Current authenticated user    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/assets</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">List assets with filters    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/assets/{id}</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Single asset details    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/assets/{id}/relationships</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Asset-specific relationships    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/relationships</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">All relationships    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/metrics</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Network metrics    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/visualization</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">3D visualization payload    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/asset-classes</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Available asset classes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/sectors</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Available sectors   </td></tr>
</table>
<p><b>Dependencies:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency Type   </th><th class="markdownTableHeadNone">Dependency    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Prerequisite Features   </td><td class="markdownTableBodyNone">F-001, F-002, F-003    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">System Dependencies   </td><td class="markdownTableBodyNone">FastAPI 0.127.0, Pydantic 2.12.5    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">External Dependencies   </td><td class="markdownTableBodyNone">Uvicorn ≥0.24.0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration Requirements   </td><td class="markdownTableBodyNone">F-005 (Authentication), F-006 (CORS)   </td></tr>
</table>
<hr  />
<h4><a class="anchor" id="autotoc_md1831"></a>
F-005: JWT Authentication System</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Feature ID   </td><td class="markdownTableBodyNone">F-005    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Feature Name   </td><td class="markdownTableBodyNone">JWT Authentication System    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Category   </td><td class="markdownTableBodyNone">API Layer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Priority   </td><td class="markdownTableBodyNone">Critical    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Status   </td><td class="markdownTableBodyNone">Completed   </td></tr>
</table>
<p><b>Description:</b></p>
<p>The JWT Authentication System provides token-based security for API endpoints. Users authenticate via username/password credentials to receive a time-limited access token. The system uses HS256 algorithm for token signing with configurable expiration.</p>
<p><b>Business Value:</b></p>
<p>Ensures secure access to sensitive financial data by authenticating API consumers and enforcing token-based session management.</p>
<p><b>User Benefits:</b></p>
<ul>
<li>Secure programmatic API access</li>
<li>Stateless authentication enabling horizontal scaling</li>
<li>Configurable session duration</li>
</ul>
<p><b>Technical Context:</b></p>
<p>Implemented in <code><a class="el" href="auth_8py.html">api/auth.py</a></code> using PyJWT ≥2.8.0 and passlib for password hashing. Tokens expire after 30 minutes (ACCESS_TOKEN_EXPIRE_MINUTES). The system requires SECRET_KEY, ADMIN_USERNAME, and ADMIN_PASSWORD environment variables. Failed authentication returns HTTP 401 with "WWW-Authenticate: Bearer" header.</p>
<p><b>Dependencies:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency Type   </th><th class="markdownTableHeadNone">Dependency    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Prerequisite Features   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">System Dependencies   </td><td class="markdownTableBodyNone">PyJWT ≥2.8.0, passlib[bcrypt] ≥1.7.4    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">External Dependencies   </td><td class="markdownTableBodyNone">Environment variable configuration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration Requirements   </td><td class="markdownTableBodyNone">F-004 (REST API)   </td></tr>
</table>
<hr  />
<h4><a class="anchor" id="autotoc_md1833"></a>
F-006: CORS Configuration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Feature ID   </td><td class="markdownTableBodyNone">F-006    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Feature Name   </td><td class="markdownTableBodyNone">CORS Configuration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Category   </td><td class="markdownTableBodyNone">API Layer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Priority   </td><td class="markdownTableBodyNone">High    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Status   </td><td class="markdownTableBodyNone">Completed   </td></tr>
</table>
<p><b>Description:</b></p>
<p>CORS Configuration manages cross-origin resource sharing policies to enable secure frontend-backend communication across different origins. The configuration adapts between development and production modes with support for dynamic origin allowlists and Vercel preview deployments.</p>
<p><b>Business Value:</b></p>
<p>Enables secure browser-based API consumption while preventing unauthorized cross-origin requests.</p>
<p><b>User Benefits:</b></p>
<ul>
<li>Seamless frontend integration</li>
<li>Secure cross-origin communication</li>
<li>Support for preview deployments</li>
</ul>
<p><b>Technical Context:</b></p>
<p>Implemented in <code><a class="el" href="api_2main_8py.html">api/main.py</a></code> with environment-aware configuration. Development mode permits HTTP localhost:3000 and localhost:7860. Production mode restricts to HTTPS origins. Vercel preview domains are validated via regex pattern <code>^https://[a-zA-Z0-9\-\.]+\.vercel\.app$</code>. Custom origins are configurable via ALLOWED_ORIGINS environment variable.</p>
<p><b>Dependencies:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency Type   </th><th class="markdownTableHeadNone">Dependency    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Prerequisite Features   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">System Dependencies   </td><td class="markdownTableBodyNone">FastAPI CORSMiddleware    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">External Dependencies   </td><td class="markdownTableBodyNone">Environment configuration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration Requirements   </td><td class="markdownTableBodyNone">F-004 (REST API)   </td></tr>
</table>
<hr  />
<h4><a class="anchor" id="autotoc_md1835"></a>
F-007: Rate Limiting</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Feature ID   </td><td class="markdownTableBodyNone">F-007    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Feature Name   </td><td class="markdownTableBodyNone">Rate Limiting    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Category   </td><td class="markdownTableBodyNone">API Layer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Priority   </td><td class="markdownTableBodyNone">Medium    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Status   </td><td class="markdownTableBodyNone">Completed   </td></tr>
</table>
<p><b>Description:</b></p>
<p>Rate Limiting protects API endpoints from abuse by enforcing request frequency limits per client IP address. The feature uses the slowapi library integrated with FastAPI exception handlers.</p>
<p><b>Business Value:</b></p>
<p>Prevents denial-of-service attacks and ensures fair resource allocation among API consumers.</p>
<p><b>User Benefits:</b></p>
<ul>
<li>Consistent API availability</li>
<li>Protection from credential stuffing attacks</li>
<li>Fair usage enforcement</li>
</ul>
<p><b>Technical Context:</b></p>
<p>Implemented using slowapi ≥0.1.4 with <code>get_remote_address</code> as the key function. Current rate limits include 5 requests per minute on <code>/token</code> and 10 requests per minute on <code>/api/users/me</code>.</p>
<p><b>Dependencies:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency Type   </th><th class="markdownTableHeadNone">Dependency    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Prerequisite Features   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">System Dependencies   </td><td class="markdownTableBodyNone">slowapi ≥0.1.4    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">External Dependencies   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration Requirements   </td><td class="markdownTableBodyNone">F-004 (REST API)   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md1837"></a>
2.1.5 Visualization Features</h3>
<h4><a class="anchor" id="autotoc_md1838"></a>
F-008: 3D Network Visualization</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Feature ID   </td><td class="markdownTableBodyNone">F-008    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Feature Name   </td><td class="markdownTableBodyNone">3D Network Visualization    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Category   </td><td class="markdownTableBodyNone">Visualization    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Priority   </td><td class="markdownTableBodyNone">Critical    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Status   </td><td class="markdownTableBodyNone">Completed   </td></tr>
</table>
<p><b>Description:</b></p>
<p>3D Network Visualization renders the asset relationship graph as an interactive three-dimensional network using Plotly. Users can rotate, zoom, and hover over nodes and edges to explore asset relationships in an immersive spatial context.</p>
<p><b>Business Value:</b></p>
<p>Provides intuitive visual exploration of complex relationship networks that would be difficult to comprehend in tabular form, accelerating insight discovery.</p>
<p><b>User Benefits:</b></p>
<ul>
<li>Intuitive exploration of complex networks</li>
<li>Reproducible layouts for consistent analysis</li>
<li>Interactive hover details for deep dives</li>
</ul>
<p><b>Technical Context:</b></p>
<p>Implemented in <code><a class="el" href="graph__visuals_8py.html">src/visualizations/graph_visuals.py</a></code> with Plotly ≥6.0.0 (backend) and plotly.js ^2.27.0 (frontend). Nodes are color-coded by asset class: Blue (Equity), Green (Fixed Income), Orange (Commodity), Red (Currency), Purple (Derivative). Edge colors vary by relationship type. Deterministic layouts use seed=42. Frontend guardrails limit rendering to MAX_NODES (default 500) and MAX_EDGES (default 2000).</p>
<p><b>Dependencies:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency Type   </th><th class="markdownTableHeadNone">Dependency    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Prerequisite Features   </td><td class="markdownTableBodyNone">F-003 (Graph Engine)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">System Dependencies   </td><td class="markdownTableBodyNone">Plotly ≥6.0.0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">External Dependencies   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration Requirements   </td><td class="markdownTableBodyNone">Visualization data from F-003   </td></tr>
</table>
<hr  />
<h4><a class="anchor" id="autotoc_md1840"></a>
F-009: 2D Network Visualization</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Feature ID   </td><td class="markdownTableBodyNone">F-009    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Feature Name   </td><td class="markdownTableBodyNone">2D Network Visualization    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Category   </td><td class="markdownTableBodyNone">Visualization    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Priority   </td><td class="markdownTableBodyNone">High    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Status   </td><td class="markdownTableBodyNone">Completed   </td></tr>
</table>
<p><b>Description:</b></p>
<p>2D Network Visualization provides an alternative flat view of the asset relationship network with selectable layout algorithms. This view is optimized for static analysis and print output.</p>
<p><b>Business Value:</b></p>
<p>Offers an alternative visualization format suitable for reports, presentations, and users who prefer traditional 2D analysis.</p>
<p><b>User Benefits:</b></p>
<ul>
<li>Multiple layout options (spring, circular, grid)</li>
<li>Print-friendly output</li>
<li>Simplified interaction model</li>
</ul>
<p><b>Technical Context:</b></p>
<p>Implemented in <code><a class="el" href="graph__2d__visuals_8py.html">src/visualizations/graph_2d_visuals.py</a></code>. Supports the same filtering and relationship visibility toggles as 3D visualization. Layout options include spring (force-directed), circular, and grid arrangements.</p>
<p><b>Dependencies:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency Type   </th><th class="markdownTableHeadNone">Dependency    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Prerequisite Features   </td><td class="markdownTableBodyNone">F-003 (Graph Engine)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">System Dependencies   </td><td class="markdownTableBodyNone">Plotly ≥6.0.0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">External Dependencies   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration Requirements   </td><td class="markdownTableBodyNone">F-008 (shares visualization infrastructure)   </td></tr>
</table>
<hr  />
<h4><a class="anchor" id="autotoc_md1842"></a>
F-010: Metrics Dashboard</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Feature ID   </td><td class="markdownTableBodyNone">F-010    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Feature Name   </td><td class="markdownTableBodyNone">Metrics Dashboard    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Category   </td><td class="markdownTableBodyNone">Visualization    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Priority   </td><td class="markdownTableBodyNone">High    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Status   </td><td class="markdownTableBodyNone">Completed   </td></tr>
</table>
<p><b>Description:</b></p>
<p>The Metrics Dashboard displays network statistics and distribution analytics including total assets, total relationships, asset class distribution, average degree, maximum degree, network density, and relationship density.</p>
<p><b>Business Value:</b></p>
<p>Provides quantitative insight into network structure, enabling assessment of portfolio diversification and relationship concentration.</p>
<p><b>User Benefits:</b></p>
<ul>
<li>At-a-glance network health indicators</li>
<li>Asset class distribution analysis</li>
<li>Relationship concentration metrics</li>
</ul>
<p><b>Technical Context:</b></p>
<p>Backend metrics calculation in F-003 exposes data via <code>/api/metrics</code> endpoint. The MetricsResponse model includes: total_assets, total_relationships, asset_classes (Dict[str, int]), avg_degree, max_degree, network_density, and relationship_density. Frontend rendering in <code>frontend/app/components/MetricsDashboard.tsx</code>.</p>
<p><b>Dependencies:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency Type   </th><th class="markdownTableHeadNone">Dependency    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Prerequisite Features   </td><td class="markdownTableBodyNone">F-003 (Graph Engine)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">System Dependencies   </td><td class="markdownTableBodyNone">Plotly ≥6.0.0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">External Dependencies   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration Requirements   </td><td class="markdownTableBodyNone">F-004 (REST API)   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md1844"></a>
2.1.6 User Interface Features</h3>
<h4><a class="anchor" id="autotoc_md1845"></a>
F-011: Asset Explorer</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Feature ID   </td><td class="markdownTableBodyNone">F-011    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Feature Name   </td><td class="markdownTableBodyNone">Asset Explorer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Category   </td><td class="markdownTableBodyNone">User Interface    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Priority   </td><td class="markdownTableBodyNone">High    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Status   </td><td class="markdownTableBodyNone">Completed   </td></tr>
</table>
<p><b>Description:</b></p>
<p>Asset Explorer provides a filterable, paginated table view of all assets in the system. Users can filter by asset class and sector, view asset details, and navigate to relationship views.</p>
<p><b>Business Value:</b></p>
<p>Enables structured data exploration for users who prefer tabular interfaces or need to locate specific assets efficiently.</p>
<p><b>User Benefits:</b></p>
<ul>
<li>Efficient asset lookup by class or sector</li>
<li>Paginated navigation for large datasets</li>
<li>Direct access to asset details</li>
</ul>
<p><b>Technical Context:</b></p>
<p>Implemented in both Gradio (<code><a class="el" href="app_8py.html">app.py</a></code>) and Next.js (<code>frontend/app/components/AssetList.tsx</code>). API supports filtering via <code>asset_class</code> and <code>sector</code> query parameters. Pagination via <code>page</code> and <code>per_page</code> parameters. Display columns include symbol, name, asset class, sector, price, and market_cap.</p>
<p><b>Dependencies:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency Type   </th><th class="markdownTableHeadNone">Dependency    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Prerequisite Features   </td><td class="markdownTableBodyNone">F-003 (Graph Engine)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">System Dependencies   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">External Dependencies   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration Requirements   </td><td class="markdownTableBodyNone">F-004 (REST API) for Next.js   </td></tr>
</table>
<hr  />
<h4><a class="anchor" id="autotoc_md1847"></a>
F-012: Schema &amp; Rules Report</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Feature ID   </td><td class="markdownTableBodyNone">F-012    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Feature Name   </td><td class="markdownTableBodyNone">Schema &amp; Rules Report    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Category   </td><td class="markdownTableBodyNone">User Interface    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Priority   </td><td class="markdownTableBodyNone">Medium    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Status   </td><td class="markdownTableBodyNone">Completed   </td></tr>
</table>
<p><b>Description:</b></p>
<p>The Schema &amp; Rules Report generates human-readable documentation of the data model, relationship types, business rules, and calculated metrics. Output is formatted in Markdown for easy consumption and publication.</p>
<p><b>Business Value:</b></p>
<p>Provides self-documenting system capabilities, reducing onboarding time for new users and enabling compliance documentation.</p>
<p><b>User Benefits:</b></p>
<ul>
<li>Auto-generated data dictionary</li>
<li>Business rules reference</li>
<li>Data quality score visibility</li>
</ul>
<p><b>Technical Context:</b></p>
<p>Implemented in <code><a class="el" href="schema__report_8py.html">src/reports/schema_report.py</a></code>. Output includes entity type descriptions, relationship type definitions, business rules documentation, calculated metrics explanations, and data quality scores. Accessible via the Gradio UI's Schema &amp; Rules tab.</p>
<p><b>Dependencies:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency Type   </th><th class="markdownTableHeadNone">Dependency    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Prerequisite Features   </td><td class="markdownTableBodyNone">F-003 (Graph Engine)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">System Dependencies   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">External Dependencies   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration Requirements   </td><td class="markdownTableBodyNone">Gradio UI (F-016)   </td></tr>
</table>
<hr  />
<h4><a class="anchor" id="autotoc_md1849"></a>
F-013: Formulaic Analysis</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Feature ID   </td><td class="markdownTableBodyNone">F-013    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Feature Name   </td><td class="markdownTableBodyNone">Formulaic Analysis    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Category   </td><td class="markdownTableBodyNone">Analytics    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Priority   </td><td class="markdownTableBodyNone">Medium    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Status   </td><td class="markdownTableBodyNone">Completed   </td></tr>
</table>
<p><b>Description:</b></p>
<p>Formulaic Analysis provides a library of financial formulas with LaTeX rendering, variable definitions, example calculations, and R-squared values where applicable. Formula categories span fundamental analysis, correlation, valuation, risk/return, portfolio theory, and cross-asset relationships.</p>
<p><b>Business Value:</b></p>
<p>Educates users on the quantitative foundations underlying relationship analysis and enables validation of system calculations.</p>
<p><b>User Benefits:</b></p>
<ul>
<li>Formula library with mathematical notation</li>
<li>Category-organized reference material</li>
<li>Example calculations for verification</li>
</ul>
<p><b>Technical Context:</b></p>
<p>Implemented in <code><a class="el" href="formulaic__analysis_8py.html">src/analysis/formulaic_analysis.py</a></code>. The Formula dataclass includes: name, formula, latex, description, variables, example_calculation, category, and r_squared. The Gradio UI exposes this via the Formulaic Analysis tab with empirical relationship data including correlation matrices.</p>
<p><b>Dependencies:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency Type   </th><th class="markdownTableHeadNone">Dependency    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Prerequisite Features   </td><td class="markdownTableBodyNone">F-001, F-003    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">System Dependencies   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">External Dependencies   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration Requirements   </td><td class="markdownTableBodyNone">Gradio UI (F-016)   </td></tr>
</table>
<hr  />
<h4><a class="anchor" id="autotoc_md1851"></a>
F-014: Real Data Fetching</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Feature ID   </td><td class="markdownTableBodyNone">F-014    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Feature Name   </td><td class="markdownTableBodyNone">Real Data Fetching    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Category   </td><td class="markdownTableBodyNone">Data Layer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Priority   </td><td class="markdownTableBodyNone">Medium    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Status   </td><td class="markdownTableBodyNone">Completed   </td></tr>
</table>
<p><b>Description:</b></p>
<p>Real Data Fetching integrates with Yahoo Finance to retrieve live market data for a predefined set of symbols. When enabled, the system fetches current prices and attributes for equities, bond ETFs, commodities, and currency pairs.</p>
<p><b>Business Value:</b></p>
<p>Enables analysis of real-world market relationships rather than static sample data, providing actionable insights for production use.</p>
<p><b>User Benefits:</b></p>
<ul>
<li>Live market data analysis</li>
<li>Current price integration</li>
<li>Production-ready data source</li>
</ul>
<p><b>Technical Context:</b></p>
<p>Implemented in <code><a class="el" href="real__data__fetcher_8py.html">src/data/real_data_fetcher.py</a></code> using yfinance ≥0.2.51. Supported symbols include: AAPL, MSFT, XOM, JPM (equities); TLT, LQD, HYG (bond ETFs); GC=F, CL=F, SI=F (commodities); EURUSD=X, GBPUSD=X, JPYUSD=X (currencies). Enabled via USE_REAL_DATA_FETCHER environment variable. Implements atomic JSON file caching via NamedTemporaryFile and os.replace.</p>
<p><b>Dependencies:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency Type   </th><th class="markdownTableHeadNone">Dependency    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Prerequisite Features   </td><td class="markdownTableBodyNone">F-001    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">System Dependencies   </td><td class="markdownTableBodyNone">yfinance ≥0.2.51    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">External Dependencies   </td><td class="markdownTableBodyNone">Yahoo Finance API    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration Requirements   </td><td class="markdownTableBodyNone">Network connectivity   </td></tr>
</table>
<hr  />
<h4><a class="anchor" id="autotoc_md1853"></a>
F-015: Database Persistence</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Feature ID   </td><td class="markdownTableBodyNone">F-015    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Feature Name   </td><td class="markdownTableBodyNone">Database Persistence    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Category   </td><td class="markdownTableBodyNone">Data Layer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Priority   </td><td class="markdownTableBodyNone">Low    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Status   </td><td class="markdownTableBodyNone">Completed   </td></tr>
</table>
<p><b>Description:</b></p>
<p>Database Persistence provides optional SQLAlchemy-based storage for assets, relationships, and regulatory events. The persistence layer supports both SQLite (development) and PostgreSQL (production) backends.</p>
<p><b>Business Value:</b></p>
<p>Enables data persistence across sessions and supports larger datasets than in-memory storage allows.</p>
<p><b>User Benefits:</b></p>
<ul>
<li>Data survives application restarts</li>
<li>Scalable to larger datasets</li>
<li>Standard SQL query access</li>
</ul>
<p><b>Technical Context:</b></p>
<p>Implemented across <code><a class="el" href="src_2data_2database_8py.html">src/data/database.py</a></code>, <code><a class="el" href="db__models_8py.html">src/data/db_models.py</a></code>, and <code><a class="el" href="repository_8py.html">src/data/repository.py</a></code>. Uses SQLAlchemy 2.x with Mapped/mapped_column syntax. Tables include: assets, asset_relationships, regulatory_events, and regulatory_event_assets (junction). Migrations defined in <code>migrations/001_initial.sql</code>.</p>
<p><b>Dependencies:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency Type   </th><th class="markdownTableHeadNone">Dependency    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Prerequisite Features   </td><td class="markdownTableBodyNone">F-001, F-002    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">System Dependencies   </td><td class="markdownTableBodyNone">SQLAlchemy ≥2.0.0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">External Dependencies   </td><td class="markdownTableBodyNone">SQLite or PostgreSQL    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration Requirements   </td><td class="markdownTableBodyNone">DATABASE_URL configuration   </td></tr>
</table>
<hr  />
<h4><a class="anchor" id="autotoc_md1855"></a>
F-016: Gradio UI (Legacy Interface)</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Feature ID   </td><td class="markdownTableBodyNone">F-016    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Feature Name   </td><td class="markdownTableBodyNone">Gradio UI (Legacy Interface)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Category   </td><td class="markdownTableBodyNone">User Interface    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Priority   </td><td class="markdownTableBodyNone">High    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Status   </td><td class="markdownTableBodyNone">Completed   </td></tr>
</table>
<p><b>Description:</b></p>
<p>The Gradio UI provides a Python-native web interface with six tabbed sections covering 3D/2D visualization, metrics analytics, schema documentation, asset exploration, general documentation, and formulaic analysis. Designed for rapid prototyping and Python developer workflows.</p>
<p><b>Business Value:</b></p>
<p>Provides immediate visual access to system capabilities without frontend development, accelerating prototyping and Python-centric workflows.</p>
<p><b>User Benefits:</b></p>
<ul>
<li>Zero frontend setup required</li>
<li>Full feature coverage</li>
<li>Interactive controls for visualization</li>
</ul>
<p><b>Technical Context:</b></p>
<p>Implemented in <code><a class="el" href="app_8py.html">app.py</a></code> using Gradio ≥4.0.0,&lt;6.0.0. Exposes six tabs with interactive controls including view mode toggle (2D/3D), layout type selection, eight relationship visibility checkboxes, and direction arrows toggle. Runs on port 7860 by default.</p>
<p><b>Dependencies:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency Type   </th><th class="markdownTableHeadNone">Dependency    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Prerequisite Features   </td><td class="markdownTableBodyNone">F-003, F-008, F-009, F-010, F-011, F-012, F-013    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">System Dependencies   </td><td class="markdownTableBodyNone">Gradio ≥4.0.0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">External Dependencies   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration Requirements   </td><td class="markdownTableBodyNone">Direct core library access   </td></tr>
</table>
<hr  />
<h4><a class="anchor" id="autotoc_md1857"></a>
F-017: Next.js Frontend (Modern Interface)</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Feature ID   </td><td class="markdownTableBodyNone">F-017    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Feature Name   </td><td class="markdownTableBodyNone">Next.js Frontend (Modern Interface)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Category   </td><td class="markdownTableBodyNone">User Interface    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Priority   </td><td class="markdownTableBodyNone">High    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Status   </td><td class="markdownTableBodyNone">In Development   </td></tr>
</table>
<p><b>Description:</b></p>
<p>The Next.js Frontend provides a modern React-based interface with TypeScript type safety and Tailwind CSS styling. Currently implements visualization, metrics, and asset exploration tabs with additional features planned for parity with Gradio.</p>
<p><b>Business Value:</b></p>
<p>Provides production-ready web interface suitable for enterprise deployment with modern frontend tooling and performance optimization.</p>
<p><b>User Benefits:</b></p>
<ul>
<li>Modern, responsive user experience</li>
<li>TypeScript type safety</li>
<li>Production deployment readiness</li>
</ul>
<p><b>Technical Context:</b></p>
<p>Implemented in <code>frontend/</code> using Next.js 14.2.x, React 18.2.0, TypeScript, and Tailwind CSS 3.3.0. API communication via Axios. 3D visualization with react-plotly.js ^2.6.0. Components in <code>frontend/app/components/</code> include NetworkVisualization, MetricsDashboard, and AssetList.</p>
<p><b>Dependencies:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency Type   </th><th class="markdownTableHeadNone">Dependency    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Prerequisite Features   </td><td class="markdownTableBodyNone">F-004 (REST API)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">System Dependencies   </td><td class="markdownTableBodyNone">Node.js ≥18.0.0, Next.js 14.2.x    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">External Dependencies   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration Requirements   </td><td class="markdownTableBodyNone">F-004, F-006 (CORS)   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md1859"></a>
2.2 Functional Requirements Tables</h2>
<p>This section provides detailed requirements for each feature with acceptance criteria, technical specifications, and validation rules.</p>
<h3><a class="anchor" id="autotoc_md1860"></a>
2.2.1 Data Model Requirements</h3>
<h4><a class="anchor" id="autotoc_md1861"></a>
F-001 Requirements: Multi-Asset Class Data Model</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Requirement ID   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Priority    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-001-RQ-001   </td><td class="markdownTableBodyNone">Support five asset classes via AssetClass enum   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-001-RQ-002   </td><td class="markdownTableBodyNone">Validate required fields (id, symbol, name) as non-empty   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-001-RQ-003   </td><td class="markdownTableBodyNone">Enforce non-negative price values   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-001-RQ-004   </td><td class="markdownTableBodyNone">Validate currency against ISO 4217 format   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-001-RQ-005   </td><td class="markdownTableBodyNone">Support optional market_cap with non-negative validation   </td><td class="markdownTableBodyNone">Should-Have   </td></tr>
</table>
<p><b>F-001-RQ-001: Asset Class Enumeration</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement ID   </td><td class="markdownTableBodyNone">F-001-RQ-001    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">System shall support five asset classes: EQUITY, FIXED_INCOME, COMMODITY, CURRENCY, DERIVATIVE    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acceptance Criteria   </td><td class="markdownTableBodyNone">AssetClass enum contains all five values; assets can be created with each type    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">Low   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technical Specification   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Input Parameters   </td><td class="markdownTableBodyNone">asset_class: AssetClass enum value    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Output/Response   </td><td class="markdownTableBodyNone">Asset instance with valid asset_class    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Performance Criteria   </td><td class="markdownTableBodyNone">Instantiation &lt; 1ms    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Requirements   </td><td class="markdownTableBodyNone">Valid enum member selection   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Validation Rules   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Business Rules   </td><td class="markdownTableBodyNone">Only defined enum values accepted    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Validation   </td><td class="markdownTableBodyNone"><a class="el" href="classEnum.html">Enum</a> membership check    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Security Requirements   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Compliance Requirements   </td><td class="markdownTableBodyNone">None   </td></tr>
</table>
<p><b>F-001-RQ-002: Required Field Validation</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement ID   </td><td class="markdownTableBodyNone">F-001-RQ-002    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">System shall validate id, symbol, and name fields as non-empty strings    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acceptance Criteria   </td><td class="markdownTableBodyNone">Empty strings rejected with validation error; whitespace-only strings rejected    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">Low   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technical Specification   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Input Parameters   </td><td class="markdownTableBodyNone">id: str, symbol: str, name: str    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Output/Response   </td><td class="markdownTableBodyNone">ValidationError on empty values    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Performance Criteria   </td><td class="markdownTableBodyNone">Validation &lt; 1ms    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Requirements   </td><td class="markdownTableBodyNone">Non-empty string requirement   </td></tr>
</table>
<p><b>F-001-RQ-003: Price Validation</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement ID   </td><td class="markdownTableBodyNone">F-001-RQ-003    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">System shall enforce price values ≥ 0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acceptance Criteria   </td><td class="markdownTableBodyNone">Negative prices rejected; zero and positive values accepted    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">Low   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technical Specification   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Input Parameters   </td><td class="markdownTableBodyNone">price: float    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Output/Response   </td><td class="markdownTableBodyNone">ValidationError if price &lt; 0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Performance Criteria   </td><td class="markdownTableBodyNone">Validation &lt; 1ms    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Requirements   </td><td class="markdownTableBodyNone">Numeric type required   </td></tr>
</table>
<p><b>F-001-RQ-004: Currency Code Validation</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement ID   </td><td class="markdownTableBodyNone">F-001-RQ-004    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">System shall validate currency codes match pattern ^[A-Z]{3}$    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acceptance Criteria   </td><td class="markdownTableBodyNone">Three uppercase letters accepted; other formats rejected    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">Low   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technical Specification   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Input Parameters   </td><td class="markdownTableBodyNone">currency: str (default "USD")    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Output/Response   </td><td class="markdownTableBodyNone">ValidationError on pattern mismatch    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Performance Criteria   </td><td class="markdownTableBodyNone">Regex validation &lt; 1ms    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Requirements   </td><td class="markdownTableBodyNone">ISO 4217 format   </td></tr>
</table>
<hr  />
<h4><a class="anchor" id="autotoc_md1863"></a>
F-002 Requirements: Regulatory Event Integration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Requirement ID   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Priority    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-002-RQ-001   </td><td class="markdownTableBodyNone">Support six regulatory activity types   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-002-RQ-002   </td><td class="markdownTableBodyNone">Validate impact_score in range [-1, 1]   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-002-RQ-003   </td><td class="markdownTableBodyNone">Validate date format as ISO 8601   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-002-RQ-004   </td><td class="markdownTableBodyNone">Support multi-asset event relationships   </td><td class="markdownTableBodyNone">Should-Have   </td></tr>
</table>
<p><b>F-002-RQ-001: Regulatory Activity Types</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement ID   </td><td class="markdownTableBodyNone">F-002-RQ-001    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">System shall support: EARNINGS_REPORT, SEC_FILING, DIVIDEND_ANNOUNCEMENT, BOND_ISSUANCE, ACQUISITION, BANKRUPTCY    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acceptance Criteria   </td><td class="markdownTableBodyNone">RegulatoryActivity enum contains all six values    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">Low   </td></tr>
</table>
<p><b>F-002-RQ-002: Impact Score Validation</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement ID   </td><td class="markdownTableBodyNone">F-002-RQ-002    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">System shall validate impact_score as float in range [-1.0, 1.0]    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acceptance Criteria   </td><td class="markdownTableBodyNone">Values outside range rejected; boundary values accepted    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">Low   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technical Specification   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Input Parameters   </td><td class="markdownTableBodyNone">impact_score: float    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Output/Response   </td><td class="markdownTableBodyNone">ValidationError if outside [-1, 1]    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Performance Criteria   </td><td class="markdownTableBodyNone">Validation &lt; 1ms    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Requirements   </td><td class="markdownTableBodyNone">Normalized impact scale   </td></tr>
</table>
<p><b>F-002-RQ-003: Date Format Validation</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement ID   </td><td class="markdownTableBodyNone">F-002-RQ-003    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">System shall validate dates match pattern ^\d{4}-\d{2}-\d{2} (YYYY-MM-DD)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acceptance Criteria   </td><td class="markdownTableBodyNone">ISO 8601 dates accepted; other formats rejected    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">Low   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md1865"></a>
2.2.2 Core Engine Requirements</h3>
<h4><a class="anchor" id="autotoc_md1866"></a>
F-003 Requirements: Asset Relationship Graph Engine</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Requirement ID   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Priority    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-003-RQ-001   </td><td class="markdownTableBodyNone">Discover relationships across 8 defined types   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-003-RQ-002   </td><td class="markdownTableBodyNone">Generate deterministic 3D layouts with seed=42   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-003-RQ-003   </td><td class="markdownTableBodyNone">Provide thread-safe initialization   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-003-RQ-004   </td><td class="markdownTableBodyNone">Calculate network metrics accurately   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-003-RQ-005   </td><td class="markdownTableBodyNone">Normalize relationship strength to [0, 1]   </td><td class="markdownTableBodyNone">Should-Have   </td></tr>
</table>
<p><b>F-003-RQ-001: Relationship Discovery</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement ID   </td><td class="markdownTableBodyNone">F-003-RQ-001    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">System shall discover relationships: same_sector, corporate_bond_to_equity, commodity_exposure, currency_risk, income_comparison, regulatory_impact, market_cap_similar, correlation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acceptance Criteria   </td><td class="markdownTableBodyNone">All relationship types detected per business rules    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">High   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technical Specification   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Input Parameters   </td><td class="markdownTableBodyNone">Asset collection, RegulatoryEvent collection    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Output/Response   </td><td class="markdownTableBodyNone">Graph structure with typed edges    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Performance Criteria   </td><td class="markdownTableBodyNone">&lt; 500ms for 100 assets    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Requirements   </td><td class="markdownTableBodyNone">Valid asset instances   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Validation Rules   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Business Rules   </td><td class="markdownTableBodyNone">Bidirectional: same_sector, income_comparison, market_cap_similar, correlation; Directional: corporate_bond_to_equity, commodity_exposure, currency_risk, regulatory_impact    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Validation   </td><td class="markdownTableBodyNone">Valid asset and event IDs    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Security Requirements   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Compliance Requirements   </td><td class="markdownTableBodyNone">None   </td></tr>
</table>
<p><b>F-003-RQ-002: Deterministic Layout</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement ID   </td><td class="markdownTableBodyNone">F-003-RQ-002    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">System shall generate identical 3D coordinates for same input data using seed=42    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acceptance Criteria   </td><td class="markdownTableBodyNone">Repeated calls produce identical node positions    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">Medium   </td></tr>
</table>
<p><b>F-003-RQ-003: Thread-Safe Initialization</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement ID   </td><td class="markdownTableBodyNone">F-003-RQ-003    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">System shall use double-checked locking for graph singleton    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acceptance Criteria   </td><td class="markdownTableBodyNone">Concurrent requests receive same instance; no race conditions    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">Medium   </td></tr>
</table>
<p><b>F-003-RQ-004: Network Metrics Calculation</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement ID   </td><td class="markdownTableBodyNone">F-003-RQ-004    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">System shall calculate: total_assets, total_relationships, asset_classes distribution, avg_degree, max_degree, network_density, relationship_density    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acceptance Criteria   </td><td class="markdownTableBodyNone">All metrics returned with correct values    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">Medium   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md1868"></a>
2.2.3 API Layer Requirements</h3>
<h4><a class="anchor" id="autotoc_md1869"></a>
F-004 Requirements: REST API Endpoints</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Requirement ID   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Priority    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-004-RQ-001   </td><td class="markdownTableBodyNone">Expose 12 primary endpoints   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-004-RQ-002   </td><td class="markdownTableBodyNone">Return valid JSON responses   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-004-RQ-003   </td><td class="markdownTableBodyNone">Support filtering on /api/assets   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-004-RQ-004   </td><td class="markdownTableBodyNone">Provide OpenAPI documentation   </td><td class="markdownTableBodyNone">Should-Have   </td></tr>
</table>
<p><b>F-004-RQ-001: Endpoint Coverage</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement ID   </td><td class="markdownTableBodyNone">F-004-RQ-001    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">System shall expose all 12 documented endpoints with correct HTTP methods    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acceptance Criteria   </td><td class="markdownTableBodyNone">Each endpoint responds with appropriate status codes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">Medium   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technical Specification   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Input Parameters   </td><td class="markdownTableBodyNone">Per-endpoint query/path parameters    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Output/Response   </td><td class="markdownTableBodyNone">JSON with Pydantic model serialization    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Performance Criteria   </td><td class="markdownTableBodyNone">95th percentile &lt; 500ms    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Requirements   </td><td class="markdownTableBodyNone">Valid request parameters   </td></tr>
</table>
<p><b>F-004-RQ-003: Asset Filtering</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement ID   </td><td class="markdownTableBodyNone">F-004-RQ-003    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">/api/assets shall support asset_class and sector query parameters    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acceptance Criteria   </td><td class="markdownTableBodyNone">Filtered results match criteria; empty filters return all    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">Low   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technical Specification   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Input Parameters   </td><td class="markdownTableBodyNone">asset_class: str (optional), sector: str (optional), page: int, per_page: int    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Output/Response   </td><td class="markdownTableBodyNone">Paginated asset list    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Performance Criteria   </td><td class="markdownTableBodyNone">&lt; 100ms for typical queries    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Requirements   </td><td class="markdownTableBodyNone">Valid enum values for asset_class   </td></tr>
</table>
<hr  />
<h4><a class="anchor" id="autotoc_md1871"></a>
F-005 Requirements: JWT Authentication System</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Requirement ID   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Priority    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-005-RQ-001   </td><td class="markdownTableBodyNone">Issue JWT tokens via /token endpoint   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-005-RQ-002   </td><td class="markdownTableBodyNone">Enforce 30-minute token expiration   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-005-RQ-003   </td><td class="markdownTableBodyNone">Use HS256 signing algorithm   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-005-RQ-004   </td><td class="markdownTableBodyNone">Return 401 with WWW-Authenticate on failure   </td><td class="markdownTableBodyNone">Must-Have   </td></tr>
</table>
<p><b>F-005-RQ-001: Token Issuance</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement ID   </td><td class="markdownTableBodyNone">F-005-RQ-001    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">System shall issue JWT tokens upon valid username/password authentication    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acceptance Criteria   </td><td class="markdownTableBodyNone">Valid credentials return access_token; invalid credentials return 401    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">Medium   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technical Specification   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Input Parameters   </td><td class="markdownTableBodyNone">username: str, password: str (form data)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Output/Response   </td><td class="markdownTableBodyNone">{"access_token": "...", "token_type": "bearer"}    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Performance Criteria   </td><td class="markdownTableBodyNone">&lt; 200ms including password hash verification    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Requirements   </td><td class="markdownTableBodyNone">Matching credentials in user store   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Validation Rules   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Business Rules   </td><td class="markdownTableBodyNone">Passwords verified via pbkdf2_sha256    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Validation   </td><td class="markdownTableBodyNone">Non-empty username and password    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Security Requirements   </td><td class="markdownTableBodyNone">Constant-time password comparison    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Compliance Requirements   </td><td class="markdownTableBodyNone">Token-based stateless auth   </td></tr>
</table>
<hr  />
<h4><a class="anchor" id="autotoc_md1873"></a>
F-006 Requirements: CORS Configuration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Requirement ID   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Priority    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-006-RQ-001   </td><td class="markdownTableBodyNone">Allow localhost:3000 and localhost:7860 in development   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-006-RQ-002   </td><td class="markdownTableBodyNone">Restrict to HTTPS origins in production   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-006-RQ-003   </td><td class="markdownTableBodyNone">Support Vercel preview domain pattern   </td><td class="markdownTableBodyNone">Should-Have   </td></tr>
</table>
<p><b>F-006-RQ-001: Development Origins</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement ID   </td><td class="markdownTableBodyNone">F-006-RQ-001    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">Development mode shall allow HTTP origins: localhost:3000, localhost:7860    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acceptance Criteria   </td><td class="markdownTableBodyNone">Cross-origin requests from allowed origins succeed    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">Low   </td></tr>
</table>
<hr  />
<h4><a class="anchor" id="autotoc_md1875"></a>
F-007 Requirements: Rate Limiting</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Requirement ID   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Priority    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-007-RQ-001   </td><td class="markdownTableBodyNone">Limit /token to 5 requests per minute   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-007-RQ-002   </td><td class="markdownTableBodyNone">Limit /api/users/me to 10 requests per minute   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-007-RQ-003   </td><td class="markdownTableBodyNone">Return 429 when limit exceeded   </td><td class="markdownTableBodyNone">Must-Have   </td></tr>
</table>
<p><b>F-007-RQ-001: Token Endpoint Rate Limit</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement ID   </td><td class="markdownTableBodyNone">F-007-RQ-001    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">/token endpoint shall reject requests exceeding 5 per minute per IP    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acceptance Criteria   </td><td class="markdownTableBodyNone">6th request within minute returns 429    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">Low   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md1877"></a>
2.2.4 Visualization Requirements</h3>
<h4><a class="anchor" id="autotoc_md1878"></a>
F-008 Requirements: 3D Network Visualization</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Requirement ID   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Priority    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-008-RQ-001   </td><td class="markdownTableBodyNone">Render interactive 3D graph with Plotly   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-008-RQ-002   </td><td class="markdownTableBodyNone">Color-code nodes by asset class   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-008-RQ-003   </td><td class="markdownTableBodyNone">Support rotation, zoom, and hover   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-008-RQ-004   </td><td class="markdownTableBodyNone">Limit rendering to MAX_NODES/MAX_EDGES   </td><td class="markdownTableBodyNone">Should-Have   </td></tr>
</table>
<p><b>F-008-RQ-001: 3D Graph Rendering</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement ID   </td><td class="markdownTableBodyNone">F-008-RQ-001    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">System shall render asset network as 3D scatter plot with edges    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acceptance Criteria   </td><td class="markdownTableBodyNone">Graph displays with nodes positioned in 3D space    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">High   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technical Specification   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Input Parameters   </td><td class="markdownTableBodyNone">Visualization data from graph engine    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Output/Response   </td><td class="markdownTableBodyNone">Plotly Figure object / JSON payload    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Performance Criteria   </td><td class="markdownTableBodyNone">Time to interactive &lt; 2 seconds    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Requirements   </td><td class="markdownTableBodyNone">Valid node/edge data   </td></tr>
</table>
<p><b>F-008-RQ-002: Asset Class Color Coding</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement ID   </td><td class="markdownTableBodyNone">F-008-RQ-002    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">Nodes colored: Equity (Blue), Fixed Income (Green), Commodity (Orange), Currency (Red), Derivative (Purple)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acceptance Criteria   </td><td class="markdownTableBodyNone">Visual inspection confirms color mapping    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">Low   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md1880"></a>
2.2.5 User Interface Requirements</h3>
<h4><a class="anchor" id="autotoc_md1881"></a>
F-011 Requirements: Asset Explorer</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Requirement ID   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Priority    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-011-RQ-001   </td><td class="markdownTableBodyNone">Display asset table with key attributes   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-011-RQ-002   </td><td class="markdownTableBodyNone">Support filtering by asset_class and sector   </td><td class="markdownTableBodyNone">Must-Have    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-011-RQ-003   </td><td class="markdownTableBodyNone">Implement pagination   </td><td class="markdownTableBodyNone">Should-Have   </td></tr>
</table>
<p><b>F-011-RQ-001: Asset Table Display</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Requirement ID   </td><td class="markdownTableBodyNone">F-011-RQ-001    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">Display columns: symbol, name, asset_class, sector, price, market_cap    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Acceptance Criteria   </td><td class="markdownTableBodyNone">All columns render with correct data    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">Low   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md1883"></a>
2.3 Feature Relationships</h2>
<p>This section documents the dependencies, integration points, and shared components between features.</p>
<h3><a class="anchor" id="autotoc_md1884"></a>
2.3.1 Feature Dependency Map</h3>
<p>The following diagram illustrates the dependency relationships between features:</p>
<div class="fragment"><div class="line">flowchart TD</div>
<div class="line">    subgraph Foundation[&quot;Foundation Layer&quot;]</div>
<div class="line">        F001[&quot;F-001: Multi-Asset&lt;br/&gt;Data Model&quot;]</div>
<div class="line">        F002[&quot;F-002: Regulatory&lt;br/&gt;Events&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Core[&quot;Core Processing&quot;]</div>
<div class="line">        F003[&quot;F-003: Graph&lt;br/&gt;Engine&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph DataLayer[&quot;Data Layer&quot;]</div>
<div class="line">        F014[&quot;F-014: Real Data&lt;br/&gt;Fetching&quot;]</div>
<div class="line">        F015[&quot;F-015: Database&lt;br/&gt;Persistence&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Security[&quot;Security Layer&quot;]</div>
<div class="line">        F005[&quot;F-005: JWT Auth&quot;]</div>
<div class="line">        F006[&quot;F-006: CORS&quot;]</div>
<div class="line">        F007[&quot;F-007: Rate Limiting&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph API[&quot;API Layer&quot;]</div>
<div class="line">        F004[&quot;F-004: REST API&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Visualization[&quot;Visualization Layer&quot;]</div>
<div class="line">        F008[&quot;F-008: 3D Visualization&quot;]</div>
<div class="line">        F009[&quot;F-009: 2D Visualization&quot;]</div>
<div class="line">        F010[&quot;F-010: Metrics Dashboard&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Analytics[&quot;Analytics Layer&quot;]</div>
<div class="line">        F012[&quot;F-012: Schema Report&quot;]</div>
<div class="line">        F013[&quot;F-013: Formulaic Analysis&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Interface[&quot;Interface Layer&quot;]</div>
<div class="line">        F011[&quot;F-011: Asset Explorer&quot;]</div>
<div class="line">        F016[&quot;F-016: Gradio UI&quot;]</div>
<div class="line">        F017[&quot;F-017: Next.js Frontend&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    F001 --&gt; F003</div>
<div class="line">    F002 --&gt; F003</div>
<div class="line">    F014 --&gt; F001</div>
<div class="line">    F015 --&gt; F001</div>
<div class="line">    F015 --&gt; F002</div>
<div class="line">    F003 --&gt; F004</div>
<div class="line">    F005 --&gt; F004</div>
<div class="line">    F006 --&gt; F004</div>
<div class="line">    F007 --&gt; F004</div>
<div class="line">    F003 --&gt; F008</div>
<div class="line">    F003 --&gt; F009</div>
<div class="line">    F003 --&gt; F010</div>
<div class="line">    F003 --&gt; F012</div>
<div class="line">    F003 --&gt; F013</div>
<div class="line">    F001 --&gt; F013</div>
<div class="line">    F003 --&gt; F011</div>
<div class="line">    F004 --&gt; F017</div>
<div class="line">    F008 --&gt; F016</div>
<div class="line">    F009 --&gt; F016</div>
<div class="line">    F010 --&gt; F016</div>
<div class="line">    F011 --&gt; F016</div>
<div class="line">    F012 --&gt; F016</div>
<div class="line">    F013 --&gt; F016</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md1885"></a>
2.3.2 Dependency Matrix</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Feature   </th><th class="markdownTableHeadNone">Depends On   </th><th class="markdownTableHeadNone">Required By    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-001   </td><td class="markdownTableBodyNone">None   </td><td class="markdownTableBodyNone">F-002, F-003, F-013, F-014, F-015    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-002   </td><td class="markdownTableBodyNone">F-001   </td><td class="markdownTableBodyNone">F-003, F-015    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-003   </td><td class="markdownTableBodyNone">F-001, F-002   </td><td class="markdownTableBodyNone">F-004, F-008, F-009, F-010, F-011, F-012, F-013    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-004   </td><td class="markdownTableBodyNone">F-001, F-002, F-003, F-005, F-006, F-007   </td><td class="markdownTableBodyNone">F-017    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-005   </td><td class="markdownTableBodyNone">None   </td><td class="markdownTableBodyNone">F-004    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-006   </td><td class="markdownTableBodyNone">None   </td><td class="markdownTableBodyNone">F-004    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-007   </td><td class="markdownTableBodyNone">None   </td><td class="markdownTableBodyNone">F-004    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-008   </td><td class="markdownTableBodyNone">F-003   </td><td class="markdownTableBodyNone">F-016    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-009   </td><td class="markdownTableBodyNone">F-003   </td><td class="markdownTableBodyNone">F-016    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-010   </td><td class="markdownTableBodyNone">F-003   </td><td class="markdownTableBodyNone">F-016, F-017    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-011   </td><td class="markdownTableBodyNone">F-003   </td><td class="markdownTableBodyNone">F-016, F-017    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-012   </td><td class="markdownTableBodyNone">F-003   </td><td class="markdownTableBodyNone">F-016    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-013   </td><td class="markdownTableBodyNone">F-001, F-003   </td><td class="markdownTableBodyNone">F-016    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-014   </td><td class="markdownTableBodyNone">F-001   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-015   </td><td class="markdownTableBodyNone">F-001, F-002   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-016   </td><td class="markdownTableBodyNone">F-008, F-009, F-010, F-011, F-012, F-013   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-017   </td><td class="markdownTableBodyNone">F-004   </td><td class="markdownTableBodyNone">None   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1886"></a>
2.3.3 Integration Points</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Integration Point   </th><th class="markdownTableHeadNone">Features Involved   </th><th class="markdownTableHeadNone">Mechanism    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Graph Data Access   </td><td class="markdownTableBodyNone">F-003 ↔ F-004   </td><td class="markdownTableBodyNone">Python method calls    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visualization Data   </td><td class="markdownTableBodyNone">F-003 → F-008, F-009   </td><td class="markdownTableBodyNone">get_3d_visualization_data()    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Communication   </td><td class="markdownTableBodyNone">F-004 ↔ F-017   </td><td class="markdownTableBodyNone">HTTP/JSON via Axios    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Authentication Flow   </td><td class="markdownTableBodyNone">F-005 → F-004 → F-017   </td><td class="markdownTableBodyNone">JWT Bearer token    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Metrics Calculation   </td><td class="markdownTableBodyNone">F-003 → F-010   </td><td class="markdownTableBodyNone">calculate_metrics()    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Ingestion   </td><td class="markdownTableBodyNone">F-014 → F-001 → F-003   </td><td class="markdownTableBodyNone">Asset instantiation   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1887"></a>
2.3.4 Shared Components</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Used By Features   </th><th class="markdownTableHeadNone">Location    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">AssetClass enum   </td><td class="markdownTableBodyNone">F-001, F-003, F-004, F-008, F-011   </td><td class="markdownTableBodyNone"><code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Asset dataclasses   </td><td class="markdownTableBodyNone">F-001, F-003, F-014, F-015   </td><td class="markdownTableBodyNone"><code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Plotly rendering   </td><td class="markdownTableBodyNone">F-008, F-009, F-010   </td><td class="markdownTableBodyNone"><code>src/visualizations/</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Pydantic models   </td><td class="markdownTableBodyNone">F-004, F-017   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>, <code>frontend/app/types/</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Graph singleton   </td><td class="markdownTableBodyNone">F-003, F-004, F-016   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code> initialization   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1888"></a>
2.3.5 Common Services</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Service   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Consumer Features    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Graph Initialization   </td><td class="markdownTableBodyNone">Thread-safe singleton creation   </td><td class="markdownTableBodyNone">F-003, F-004    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Relationship Discovery   </td><td class="markdownTableBodyNone">Rule-based edge detection   </td><td class="markdownTableBodyNone">F-003, F-008, F-009    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Validation   </td><td class="markdownTableBodyNone">Data constraint enforcement   </td><td class="markdownTableBodyNone">F-001, F-002    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">JSON Serialization   </td><td class="markdownTableBodyNone">Pydantic model conversion   </td><td class="markdownTableBodyNone">F-004, F-017    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Password Hashing   </td><td class="markdownTableBodyNone">pbkdf2_sha256 via passlib   </td><td class="markdownTableBodyNone">F-005   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md1890"></a>
2.4 Implementation Considerations</h2>
<p>This section documents technical constraints, performance requirements, and operational considerations for each feature domain.</p>
<h3><a class="anchor" id="autotoc_md1891"></a>
2.4.1 Data Model Implementation</h3>
<p><b>F-001, F-002: Domain Model Considerations</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Consideration   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Technical Constraints   </td><td class="markdownTableBodyNone">Python 3.10+ required for dataclass features    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Performance Requirements   </td><td class="markdownTableBodyNone">Instantiation &lt; 1ms; validation &lt; 1ms    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Scalability Considerations   </td><td class="markdownTableBodyNone">Dataclass memory footprint scales linearly    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Security Implications   </td><td class="markdownTableBodyNone">Input validation prevents injection    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Maintenance Requirements   </td><td class="markdownTableBodyNone">Schema changes require migration   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1892"></a>
2.4.2 Core Engine Implementation</h3>
<p><b>F-003: Graph Engine Considerations</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Consideration   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Technical Constraints   </td><td class="markdownTableBodyNone">In-memory graph limits dataset size    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Performance Requirements   </td><td class="markdownTableBodyNone">Relationship discovery &lt; 500ms for 100 assets    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Scalability Considerations   </td><td class="markdownTableBodyNone">O(n²) relationship detection; partition for scale    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Security Implications   </td><td class="markdownTableBodyNone">No sensitive data in graph structure    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Maintenance Requirements   </td><td class="markdownTableBodyNone">New relationship types require rule additions   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1893"></a>
2.4.3 API Layer Implementation</h3>
<p><b>F-004, F-005, F-006, F-007: API Considerations</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Consideration   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Technical Constraints   </td><td class="markdownTableBodyNone">Single-threaded graph access    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Performance Requirements   </td><td class="markdownTableBodyNone">95th percentile response &lt; 500ms    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Scalability Considerations   </td><td class="markdownTableBodyNone">Horizontal scaling requires shared state    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Security Implications   </td><td class="markdownTableBodyNone">JWT expiration enforced; CORS restricted    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Maintenance Requirements   </td><td class="markdownTableBodyNone">OpenAPI docs auto-generated   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1894"></a>
2.4.4 Visualization Implementation</h3>
<p><b>F-008, F-009, F-010: Visualization Considerations</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Consideration   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Technical Constraints   </td><td class="markdownTableBodyNone">Browser memory limits visualization size    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Performance Requirements   </td><td class="markdownTableBodyNone">Time to interactive &lt; 2 seconds    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Scalability Considerations   </td><td class="markdownTableBodyNone">MAX_NODES=500, MAX_EDGES=2000 defaults    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Security Implications   </td><td class="markdownTableBodyNone">Client-side rendering; no server load    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Maintenance Requirements   </td><td class="markdownTableBodyNone">Plotly version compatibility   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1895"></a>
2.4.5 User Interface Implementation</h3>
<p><b>F-016, F-017: UI Considerations</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Consideration   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Technical Constraints   </td><td class="markdownTableBodyNone">Gradio: Python only; Next.js: Node.js required    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Performance Requirements   </td><td class="markdownTableBodyNone">Initial load &lt; 3 seconds    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Scalability Considerations   </td><td class="markdownTableBodyNone">Static assets cacheable; API stateless    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Security Implications   </td><td class="markdownTableBodyNone">CORS enforcement; XSS prevention    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Maintenance Requirements   </td><td class="markdownTableBodyNone">Dependency updates; feature parity   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md1897"></a>
2.5 Traceability Matrix</h2>
<p>This matrix links features to their implementing source files and test coverage.</p>
<h3><a class="anchor" id="autotoc_md1898"></a>
2.5.1 Feature-to-Source Traceability</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Feature ID   </th><th class="markdownTableHeadNone">Primary Source Files   </th><th class="markdownTableHeadNone">Test Files    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-001   </td><td class="markdownTableBodyNone"><code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code>   </td><td class="markdownTableBodyNone"><code>tests/unit/test_models.py</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-002   </td><td class="markdownTableBodyNone"><code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code>   </td><td class="markdownTableBodyNone"><code>tests/unit/test_models.py</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-003   </td><td class="markdownTableBodyNone"><code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code>   </td><td class="markdownTableBodyNone"><code>tests/unit/test_graph.py</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-004   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone"><code><a class="el" href="tests_2unit_2test__api_8py.html">tests/unit/test_api.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-005   </td><td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code>   </td><td class="markdownTableBodyNone"><code>tests/unit/test_auth.py</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-006   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone"><code>tests/unit/test_cors.py</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-007   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone"><code><a class="el" href="tests_2unit_2test__api_8py.html">tests/unit/test_api.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-008   </td><td class="markdownTableBodyNone"><code><a class="el" href="graph__visuals_8py.html">src/visualizations/graph_visuals.py</a></code>   </td><td class="markdownTableBodyNone"><code>tests/unit/test_visualizations.py</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-009   </td><td class="markdownTableBodyNone"><code><a class="el" href="graph__2d__visuals_8py.html">src/visualizations/graph_2d_visuals.py</a></code>   </td><td class="markdownTableBodyNone"><code>tests/unit/test_visualizations.py</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-010   </td><td class="markdownTableBodyNone"><code>frontend/app/components/MetricsDashboard.tsx</code>   </td><td class="markdownTableBodyNone"><code>frontend/__tests__/</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-011   </td><td class="markdownTableBodyNone"><code>frontend/app/components/AssetList.tsx</code>   </td><td class="markdownTableBodyNone"><code>frontend/__tests__/</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-012   </td><td class="markdownTableBodyNone"><code><a class="el" href="schema__report_8py.html">src/reports/schema_report.py</a></code>   </td><td class="markdownTableBodyNone"><code>tests/unit/test_reports.py</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-013   </td><td class="markdownTableBodyNone"><code><a class="el" href="formulaic__analysis_8py.html">src/analysis/formulaic_analysis.py</a></code>   </td><td class="markdownTableBodyNone"><code>tests/unit/test_analysis.py</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-014   </td><td class="markdownTableBodyNone"><code><a class="el" href="real__data__fetcher_8py.html">src/data/real_data_fetcher.py</a></code>   </td><td class="markdownTableBodyNone"><code>tests/unit/test_data.py</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-015   </td><td class="markdownTableBodyNone"><code><a class="el" href="src_2data_2database_8py.html">src/data/database.py</a></code>, <code><a class="el" href="repository_8py.html">src/data/repository.py</a></code>   </td><td class="markdownTableBodyNone"><code><a class="el" href="test__database_8py.html">tests/unit/test_database.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">F-016   </td><td class="markdownTableBodyNone"><code><a class="el" href="app_8py.html">app.py</a></code>   </td><td class="markdownTableBodyNone">Manual testing    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">F-017   </td><td class="markdownTableBodyNone"><code>frontend/app/page.tsx</code>, <code>frontend/app/components/</code>   </td><td class="markdownTableBodyNone"><code>frontend/__tests__/</code>   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1899"></a>
2.5.2 Requirement-to-Feature Traceability</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Requirement Category   </th><th class="markdownTableHeadNone">Feature IDs   </th><th class="markdownTableHeadNone">Count    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Data Validation   </td><td class="markdownTableBodyNone">F-001, F-002   </td><td class="markdownTableBodyNone">9    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Graph Processing   </td><td class="markdownTableBodyNone">F-003   </td><td class="markdownTableBodyNone">5    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Functionality   </td><td class="markdownTableBodyNone">F-004, F-005, F-006, F-007   </td><td class="markdownTableBodyNone">12    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visualization   </td><td class="markdownTableBodyNone">F-008, F-009, F-010   </td><td class="markdownTableBodyNone">7    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">User Interface   </td><td class="markdownTableBodyNone">F-011, F-012, F-013, F-016, F-017   </td><td class="markdownTableBodyNone">8   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md1901"></a>
2.6 Assumptions and Constraints</h2>
<h3><a class="anchor" id="autotoc_md1902"></a>
2.6.1 Assumptions</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">ID   </th><th class="markdownTableHeadNone">Assumption   </th><th class="markdownTableHeadNone">Impact    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">A-001   </td><td class="markdownTableBodyNone">Users have modern browser (Chrome, Firefox, Safari, Edge)   </td><td class="markdownTableBodyNone">Visualization features may not work on legacy browsers    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">A-002   </td><td class="markdownTableBodyNone">Network connectivity available for real data fetching   </td><td class="markdownTableBodyNone">System falls back to sample data when offline    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">A-003   </td><td class="markdownTableBodyNone">Single concurrent admin user sufficient   </td><td class="markdownTableBodyNone">Multi-user requires authentication extension    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">A-004   </td><td class="markdownTableBodyNone">Dataset size &lt; 500 nodes for optimal visualization   </td><td class="markdownTableBodyNone">Larger datasets require pagination or filtering   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1903"></a>
2.6.2 Constraints</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">ID   </th><th class="markdownTableHeadNone">Constraint   </th><th class="markdownTableHeadNone">Mitigation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">C-001   </td><td class="markdownTableBodyNone">In-memory graph limits scalability   </td><td class="markdownTableBodyNone">Database persistence option (F-015)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">C-002   </td><td class="markdownTableBodyNone">Single-user JWT authentication   </td><td class="markdownTableBodyNone">Role-based access planned for Phase 2    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">C-003   </td><td class="markdownTableBodyNone">Yahoo Finance API rate limits   </td><td class="markdownTableBodyNone">Caching with atomic file writes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">C-004   </td><td class="markdownTableBodyNone">Browser memory limits visualization   </td><td class="markdownTableBodyNone">MAX_NODES/MAX_EDGES guardrails   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md1905"></a>
2.7 References</h2>
<h3><a class="anchor" id="autotoc_md1906"></a>
2.7.1 Source Files Examined</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">File Path   </th><th class="markdownTableHeadNone">Relevance    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code>   </td><td class="markdownTableBodyNone">Domain model definitions, validation rules, enums    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code>   </td><td class="markdownTableBodyNone">Core graph container, relationship discovery    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone">FastAPI implementation, all REST endpoints    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code>   </td><td class="markdownTableBodyNone">JWT authentication, password hashing    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="app_8py.html">app.py</a></code>   </td><td class="markdownTableBodyNone">Gradio UI implementation, tabbed interface    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="sample__data_8py.html">src/data/sample_data.py</a></code>   </td><td class="markdownTableBodyNone">Sample database with 19 assets, 4 events    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="real__data__fetcher_8py.html">src/data/real_data_fetcher.py</a></code>   </td><td class="markdownTableBodyNone">Yahoo Finance integration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="src_2data_2database_8py.html">src/data/database.py</a></code>   </td><td class="markdownTableBodyNone">SQLAlchemy database configuration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="repository_8py.html">src/data/repository.py</a></code>   </td><td class="markdownTableBodyNone">Data access layer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="graph__visuals_8py.html">src/visualizations/graph_visuals.py</a></code>   </td><td class="markdownTableBodyNone">3D Plotly visualization    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="graph__2d__visuals_8py.html">src/visualizations/graph_2d_visuals.py</a></code>   </td><td class="markdownTableBodyNone">2D Plotly visualization    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="schema__report_8py.html">src/reports/schema_report.py</a></code>   </td><td class="markdownTableBodyNone">Schema documentation generator    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="formulaic__analysis_8py.html">src/analysis/formulaic_analysis.py</a></code>   </td><td class="markdownTableBodyNone">Financial formula library    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/app/types/api.ts</code>   </td><td class="markdownTableBodyNone">TypeScript API contracts    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/app/components/NetworkVisualization.tsx</code>   </td><td class="markdownTableBodyNone">3D graph React component    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/app/components/MetricsDashboard.tsx</code>   </td><td class="markdownTableBodyNone">Metrics display component    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/app/components/AssetList.tsx</code>   </td><td class="markdownTableBodyNone">Asset table component    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>requirements.txt</code>   </td><td class="markdownTableBodyNone">Python dependencies    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/package.json</code>   </td><td class="markdownTableBodyNone">Node.js dependencies    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>migrations/001_initial.sql</code>   </td><td class="markdownTableBodyNone">Database schema   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1907"></a>
2.7.2 Source Directories Examined</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Directory Path   </th><th class="markdownTableHeadNone">Contents    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>src/</code>   </td><td class="markdownTableBodyNone">Core Python library packages    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>src/models/</code>   </td><td class="markdownTableBodyNone">Domain model layer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>src/logic/</code>   </td><td class="markdownTableBodyNone">Graph algorithm implementation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>src/data/</code>   </td><td class="markdownTableBodyNone">Data persistence and ingestion    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>src/visualizations/</code>   </td><td class="markdownTableBodyNone">Plotly visualization layer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>src/analysis/</code>   </td><td class="markdownTableBodyNone">Formulaic financial analysis    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>src/reports/</code>   </td><td class="markdownTableBodyNone">Schema documentation generation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>api/</code>   </td><td class="markdownTableBodyNone">FastAPI backend package    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/</code>   </td><td class="markdownTableBodyNone">Next.js application root    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/app/</code>   </td><td class="markdownTableBodyNone">App Router source    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/app/components/</code>   </td><td class="markdownTableBodyNone">React UI components    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/app/types/</code>   </td><td class="markdownTableBodyNone">TypeScript API contracts    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>tests/</code>   </td><td class="markdownTableBodyNone">Test harness structure   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1908"></a>
2.7.3 Technical Specification Cross-References</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Section   </th><th class="markdownTableHeadNone">Relevance    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1.1 Executive Summary   </td><td class="markdownTableBodyNone">Business context, stakeholders, value proposition    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1.2 System Overview   </td><td class="markdownTableBodyNone">Architecture, technology stack, success criteria    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1.3 Scope   </td><td class="markdownTableBodyNone">In-scope/out-of-scope features, boundaries    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1.4 References   </td><td class="markdownTableBodyNone">Documentation and source file inventory   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md1909"></a>
3. Technology Stack</h1>
<p>This section documents the complete technology stack employed by the Financial Asset Relationship Database, including programming languages, frameworks, libraries, external services, data storage solutions, and development infrastructure. Each technology selection is justified based on system requirements, architectural constraints, and integration considerations.</p>
<h2><a class="anchor" id="autotoc_md1910"></a>
3.1 Technology Stack Overview</h2>
<h3><a class="anchor" id="autotoc_md1911"></a>
3.1.1 Stack Architecture Summary</h3>
<p>The Financial Asset Relationship Database employs a modern, polyglot architecture optimized for financial data visualization and API-driven consumption. The technology choices prioritize type safety, performance, and developer productivity while maintaining deployment flexibility.</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph Frontend[&quot;Frontend Layer&quot;]</div>
<div class="line">        NextJS[&quot;Next.js 14.2.35&lt;br/&gt;TypeScript ^5.3.0&quot;]</div>
<div class="line">        Gradio[&quot;Gradio ≥4.0.0&lt;br/&gt;Python UI&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Backend[&quot;Backend Layer&quot;]</div>
<div class="line">        FastAPI[&quot;FastAPI 0.127.0&lt;br/&gt;Python 3.11&quot;]</div>
<div class="line">        Uvicorn[&quot;Uvicorn ≥0.24.0&lt;br/&gt;ASGI Server&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Visualization[&quot;Visualization Layer&quot;]</div>
<div class="line">        PlotlyPy[&quot;Plotly ≥6.0.0&lt;br/&gt;Server-side&quot;]</div>
<div class="line">        PlotlyJS[&quot;plotly.js ^2.27.0&lt;br/&gt;Client-side&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Data[&quot;Data Layer&quot;]</div>
<div class="line">        SQLAlchemy[&quot;SQLAlchemy ≥2.0.0&lt;br/&gt;ORM&quot;]</div>
<div class="line">        yfinance[&quot;yfinance ≥0.2.51&lt;br/&gt;Market Data&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Infrastructure[&quot;Infrastructure&quot;]</div>
<div class="line">        Docker[&quot;Docker&lt;br/&gt;python:3.11-slim&quot;]</div>
<div class="line">        Vercel[&quot;Vercel&lt;br/&gt;Serverless&quot;]</div>
<div class="line">        GHACI[&quot;GitHub Actions&lt;br/&gt;CircleCI&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    NextJS --&gt; FastAPI</div>
<div class="line">    Gradio --&gt; PlotlyPy</div>
<div class="line">    FastAPI --&gt; Uvicorn</div>
<div class="line">    FastAPI --&gt; SQLAlchemy</div>
<div class="line">    FastAPI --&gt; yfinance</div>
<div class="line">    NextJS --&gt; PlotlyJS</div>
<div class="line">    FastAPI --&gt; Docker</div>
<div class="line">    NextJS --&gt; Vercel</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md1912"></a>
3.1.2 Technology Selection Criteria</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Criterion   </th><th class="markdownTableHeadNone">Priority   </th><th class="markdownTableHeadNone">Rationale    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Type Safety</b>   </td><td class="markdownTableBodyNone">Critical   </td><td class="markdownTableBodyNone">Financial data requires strict validation to prevent calculation errors    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Performance</b>   </td><td class="markdownTableBodyNone">High   </td><td class="markdownTableBodyNone">Sub-500ms API response times for interactive visualizations    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Developer Productivity</b>   </td><td class="markdownTableBodyNone">High   </td><td class="markdownTableBodyNone">Rapid prototyping with Gradio; production-ready with Next.js    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Ecosystem Maturity</b>   </td><td class="markdownTableBodyNone">High   </td><td class="markdownTableBodyNone">Well-maintained libraries with active security patching    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Deployment Flexibility</b>   </td><td class="markdownTableBodyNone">Medium   </td><td class="markdownTableBodyNone">Support for containerized, serverless, and local development    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Integration Capability</b>   </td><td class="markdownTableBodyNone">Medium   </td><td class="markdownTableBodyNone">REST API and MCP protocol support for ecosystem integration   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1913"></a>
3.1.3 Stack Deviations from Default Template</h3>
<p>The following default template technologies are <b>not used</b> in this project:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Default Technology   </th><th class="markdownTableHeadNone">Actual Implementation   </th><th class="markdownTableHeadNone">Rationale    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Flask   </td><td class="markdownTableBodyNone">FastAPI 0.127.0   </td><td class="markdownTableBodyNone">FastAPI provides automatic OpenAPI docs, native async support, and Pydantic integration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Auth0   </td><td class="markdownTableBodyNone">Custom JWT (PyJWT)   </td><td class="markdownTableBodyNone">Simpler single-user authentication without external service dependency    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">MongoDB   </td><td class="markdownTableBodyNone">SQLite/PostgreSQL (SQLAlchemy)   </td><td class="markdownTableBodyNone">Relational model better suited for asset relationships and regulatory event linkages    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LangChain   </td><td class="markdownTableBodyNone">Not applicable   </td><td class="markdownTableBodyNone">System is not an AI/LLM application    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">React-Native   </td><td class="markdownTableBodyNone">Web-responsive only   </td><td class="markdownTableBodyNone">Mobile native applications explicitly out of scope    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Terraform   </td><td class="markdownTableBodyNone">Docker Compose + Vercel   </td><td class="markdownTableBodyNone">Simplified infrastructure for single-application deployment   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md1915"></a>
3.2 Programming Languages</h2>
<h3><a class="anchor" id="autotoc_md1916"></a>
3.2.1 Python (Backend &amp; Core Logic)</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification   </th><th class="markdownTableHeadNone">Evidence    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Minimum Version</b>   </td><td class="markdownTableBodyNone">Python 3.10+   </td><td class="markdownTableBodyNone"><code>pyproject.toml</code>: <code>requires-python = "&gt;=3.10"</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Supported Versions</b>   </td><td class="markdownTableBodyNone">3.10, 3.11, 3.12   </td><td class="markdownTableBodyNone"><code>ci.yml</code> matrix configuration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Production Version</b>   </td><td class="markdownTableBodyNone">Python 3.11-slim   </td><td class="markdownTableBodyNone"><code>Dockerfile</code> base image    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Package Manager</b>   </td><td class="markdownTableBodyNone">pip with requirements files   </td><td class="markdownTableBodyNone"><code>requirements.txt</code>, <code>requirements-dev.txt</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1917"></a>
Selection Justification</h4>
<p>Python 3.10+ is required for the following technical reasons:</p>
<ol type="1">
<li><b>Modern Dataclass Features</b>: The domain model in <code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code> leverages enhanced dataclass functionality including <code>slots=True</code> for memory efficiency and <code>kw_only=True</code> for required parameter enforcement.</li>
<li><b>Type Annotation Improvements</b>: Python 3.10 introduced <code>ParamSpec</code> and <code>TypeAlias</code> which improve type checking for the FastAPI dependency injection system.</li>
<li><b>Performance Optimizations</b>: Python 3.11 provides approximately 25% faster execution through specialization improvements, benefiting compute-intensive relationship discovery operations.</li>
<li><b>Ecosystem Compatibility</b>: The pinned versions of NumPy 2.2.6, Pandas ≥1.5.0, and Plotly ≥6.0.0 all require Python 3.10+ for full feature support.</li>
</ol>
<h4><a class="anchor" id="autotoc_md1918"></a>
Primary Use Cases</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Location   </th><th class="markdownTableHeadNone">Python Usage    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">REST API Server   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone">FastAPI application with async handlers    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Core Graph Engine   </td><td class="markdownTableBodyNone"><code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code>   </td><td class="markdownTableBodyNone">Relationship discovery and metrics calculation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Domain Models   </td><td class="markdownTableBodyNone"><code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code>   </td><td class="markdownTableBodyNone">Dataclass definitions with validation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visualization Generation   </td><td class="markdownTableBodyNone"><code>src/visualizations/</code>   </td><td class="markdownTableBodyNone">Plotly figure construction    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Legacy UI   </td><td class="markdownTableBodyNone"><code><a class="el" href="app_8py.html">app.py</a></code>   </td><td class="markdownTableBodyNone">Gradio interface    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Fetching   </td><td class="markdownTableBodyNone"><code><a class="el" href="real__data__fetcher_8py.html">src/data/real_data_fetcher.py</a></code>   </td><td class="markdownTableBodyNone">Yahoo Finance integration   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1919"></a>
3.2.2 TypeScript/JavaScript (Frontend)</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification   </th><th class="markdownTableHeadNone">Evidence    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>TypeScript Version</b>   </td><td class="markdownTableBodyNone">^5.3.0   </td><td class="markdownTableBodyNone"><code>frontend/package.json</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Node.js Version</b>   </td><td class="markdownTableBodyNone">&gt;=18.0.0   </td><td class="markdownTableBodyNone"><code>frontend/package.json</code> engines    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>npm Version</b>   </td><td class="markdownTableBodyNone">&gt;=8.0.0   </td><td class="markdownTableBodyNone"><code>frontend/package.json</code> engines    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Module System</b>   </td><td class="markdownTableBodyNone">ES Modules   </td><td class="markdownTableBodyNone">Next.js App Router conventions    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Strict Mode</b>   </td><td class="markdownTableBodyNone">Enabled   </td><td class="markdownTableBodyNone"><code>frontend/tsconfig.json</code>: <code>strict: true</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1920"></a>
Selection Justification</h4>
<p>TypeScript is selected over plain JavaScript for the following reasons:</p>
<ol type="1">
<li><b>API Contract Enforcement</b>: The frontend consumes strongly-typed API responses (e.g., <code>MetricsResponse</code>, <code>AssetResponse</code>). TypeScript ensures compile-time validation of response handling.</li>
<li><b>Plotly Type Safety</b>: 3D visualization configuration requires precise coordinate arrays and layout objects. TypeScript prevents runtime errors from malformed visualization data.</li>
<li><b>React Component Props</b>: Complex component interfaces for <code>NetworkVisualization</code>, <code>MetricsDashboard</code>, and <code>AssetList</code> benefit from explicit prop type definitions.</li>
<li><b>IDE Productivity</b>: TypeScript provides enhanced code completion, refactoring support, and inline documentation in modern IDEs.</li>
</ol>
<h2><a class="anchor" id="autotoc_md1921"></a>
Node.js Version Requirements</h2>
<p>Node.js 18.0.0+ is required for:</p>
<ul>
<li>Next.js 14.x App Router architecture</li>
<li>Native Fetch API support (no polyfill required)</li>
<li>ES Module interoperability</li>
<li>V8 engine optimizations for Plotly.js rendering</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md1923"></a>
3.3 Frameworks &amp; Libraries</h2>
<h3><a class="anchor" id="autotoc_md1924"></a>
3.3.1 Backend Frameworks</h3>
<h4><a class="anchor" id="autotoc_md1925"></a>
FastAPI (REST API Framework)</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Version</b>   </td><td class="markdownTableBodyNone">0.127.0 (pinned)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Source</b>   </td><td class="markdownTableBodyNone"><code>requirements.txt</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Purpose</b>   </td><td class="markdownTableBodyNone">REST API framework with automatic validation and documentation   </td></tr>
</table>
<p><b>Key Features Utilized:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Feature   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Location    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Lifespan Context Manager   </td><td class="markdownTableBodyNone">Thread-safe graph initialization at startup   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code> lines 159-165    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Dependency Injection   </td><td class="markdownTableBodyNone">Authentication via <code>get_current_user</code>   </td><td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OAuth2PasswordBearer   </td><td class="markdownTableBodyNone">JWT token extraction from Authorization header   </td><td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">OpenAPI Generation   </td><td class="markdownTableBodyNone">Auto-generated Swagger UI at <code>/docs</code>   </td><td class="markdownTableBodyNone">FastAPI default    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Pydantic Integration   </td><td class="markdownTableBodyNone">Request/response validation   </td><td class="markdownTableBodyNone">All API endpoints   </td></tr>
</table>
<p><b>Version Pinning Rationale:</b></p>
<p>FastAPI 0.127.0 is explicitly pinned to ensure:</p>
<ul>
<li>Compatibility with Pydantic 2.12.5</li>
<li>Stable behavior for lifespan event handling</li>
<li>Consistent OpenAPI schema generation</li>
</ul>
<div class="fragment"><div class="line">flowchart LR</div>
<div class="line">    subgraph FastAPIApp[&quot;FastAPI Application&quot;]</div>
<div class="line">        Lifespan[&quot;Lifespan&lt;br/&gt;Manager&quot;]</div>
<div class="line">        Router[&quot;API&lt;br/&gt;Router&quot;]</div>
<div class="line">        Middleware[&quot;Middleware&lt;br/&gt;Stack&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph MiddlewareChain[&quot;Middleware Chain&quot;]</div>
<div class="line">        CORS[&quot;CORS&lt;br/&gt;Middleware&quot;]</div>
<div class="line">        RateLimit[&quot;SlowAPI&lt;br/&gt;Rate Limiter&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph DependencySystem[&quot;Dependency Injection&quot;]</div>
<div class="line">        Auth[&quot;OAuth2&lt;br/&gt;Bearer&quot;]</div>
<div class="line">        UserDep[&quot;get_current_user&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    Lifespan --&gt; Router</div>
<div class="line">    Middleware --&gt; MiddlewareChain</div>
<div class="line">    CORS --&gt; RateLimit</div>
<div class="line">    Router --&gt; DependencySystem</div>
<div class="line">    Auth --&gt; UserDep</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md1926"></a>
Pydantic (Data Validation)</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Version</b>   </td><td class="markdownTableBodyNone">2.12.5 (pinned)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Source</b>   </td><td class="markdownTableBodyNone"><code>requirements.txt</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Purpose</b>   </td><td class="markdownTableBodyNone">API request/response validation and serialization   </td></tr>
</table>
<p><b>Version Pinning Rationale:</b></p>
<p>Pydantic 2.12.5 is pinned for:</p>
<ul>
<li>FastAPI 0.127.0 compatibility</li>
<li>Consistent JSON schema generation for OpenAPI</li>
<li>Stable validation behavior across deployments</li>
</ul>
<h4><a class="anchor" id="autotoc_md1927"></a>
Uvicorn (ASGI Server)</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Version</b>   </td><td class="markdownTableBodyNone">&gt;=0.24.0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Package</b>   </td><td class="markdownTableBodyNone"><code>uvicorn[standard]</code> (includes full async support)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Default Port</b>   </td><td class="markdownTableBodyNone">8000   </td></tr>
</table>
<p><b>Configuration:</b></p>
<ul>
<li>Development: <code>uvicorn <a class="el" href="namespaceapi_1_1main.html">api.main</a>:app --reload --port 8000</code></li>
<li>Production: Managed via Docker CMD or Vercel serverless functions</li>
</ul>
<h4><a class="anchor" id="autotoc_md1928"></a>
Gradio (Legacy UI Framework)</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Version</b>   </td><td class="markdownTableBodyNone">&gt;=4.0.0,&lt;6.0.0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Source</b>   </td><td class="markdownTableBodyNone"><code>requirements.txt</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Default Port</b>   </td><td class="markdownTableBodyNone">7860    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Purpose</b>   </td><td class="markdownTableBodyNone">Python-native web interface for rapid prototyping   </td></tr>
</table>
<p><b>Selection Justification:</b></p>
<p>Gradio provides immediate visual access to system capabilities without frontend development overhead. It serves as:</p>
<ul>
<li>A rapid prototyping environment for Python developers</li>
<li>A reference implementation demonstrating all core features</li>
<li>A standalone UI option for Python-centric workflows</li>
</ul>
<h3><a class="anchor" id="autotoc_md1929"></a>
3.3.2 Frontend Frameworks</h3>
<h2><a class="anchor" id="autotoc_md1930"></a>
Next.js (React Meta-Framework)</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Version</b>   </td><td class="markdownTableBodyNone">14.2.35    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Source</b>   </td><td class="markdownTableBodyNone"><code>frontend/package.json</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Architecture</b>   </td><td class="markdownTableBodyNone">App Router (app/ directory)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Configuration</b>   </td><td class="markdownTableBodyNone"><code>reactStrictMode: true</code>   </td></tr>
</table>
<p><b>Selection Justification:</b></p>
<p>Next.js 14.x is selected over Create React App for:</p>
<ol type="1">
<li><b>App Router Architecture</b>: File-system based routing with React Server Components support</li>
<li><b>Build Optimizations</b>: Automatic code splitting, tree shaking, and bundle analysis</li>
<li><b>Vercel Integration</b>: First-class support for serverless deployment target</li>
<li><b>TypeScript Native</b>: Zero-configuration TypeScript support</li>
</ol>
<p><b>Key Configuration:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Setting   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>reactStrictMode</code>   </td><td class="markdownTableBodyNone"><code>true</code>   </td><td class="markdownTableBodyNone">Enables additional development checks    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>NEXT_PUBLIC_API_URL</code>   </td><td class="markdownTableBodyNone">Environment variable   </td><td class="markdownTableBodyNone">Backend API endpoint configuration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>NEXT_PUBLIC_MAX_NODES</code>   </td><td class="markdownTableBodyNone">500   </td><td class="markdownTableBodyNone">Visualization guardrail    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>NEXT_PUBLIC_MAX_EDGES</code>   </td><td class="markdownTableBodyNone">2000   </td><td class="markdownTableBodyNone">Visualization guardrail   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1931"></a>
React</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Version</b>   </td><td class="markdownTableBodyNone">^18.2.0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Source</b>   </td><td class="markdownTableBodyNone"><code>frontend/package.json</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Mode</b>   </td><td class="markdownTableBodyNone">Client Components with &lsquo;'use client&rsquo;` directive   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1932"></a>
Tailwind CSS</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Version</b>   </td><td class="markdownTableBodyNone">^3.3.0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Source</b>   </td><td class="markdownTableBodyNone"><code>frontend/package.json</code> devDependencies    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Purpose</b>   </td><td class="markdownTableBodyNone">Utility-first CSS framework   </td></tr>
</table>
<p><b>Selection Justification:</b></p>
<p>Tailwind CSS provides:</p>
<ul>
<li>Consistent design system without custom CSS maintenance</li>
<li>Responsive design utilities for visualization containers</li>
<li>Integration with Next.js JIT compiler for optimal bundle size</li>
</ul>
<h3><a class="anchor" id="autotoc_md1933"></a>
3.3.3 Visualization Libraries</h3>
<h4><a class="anchor" id="autotoc_md1934"></a>
Plotly (Exclusive Visualization Library)</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Context   </th><th class="markdownTableHeadNone">Package   </th><th class="markdownTableHeadNone">Version    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Backend (Python)</b>   </td><td class="markdownTableBodyNone">plotly   </td><td class="markdownTableBodyNone">&gt;=6.0.0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Frontend (React)</b>   </td><td class="markdownTableBodyNone">react-plotly.js   </td><td class="markdownTableBodyNone">^2.6.0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Frontend (Core)</b>   </td><td class="markdownTableBodyNone">plotly.js   </td><td class="markdownTableBodyNone">^2.27.0   </td></tr>
</table>
<p><b>Library Constraint:</b></p>
<p>Per project coding standards, Plotly is the <b>only approved charting and visualization library</b>. Alternative visualization libraries (e.g., D3, Chart.js, Matplotlib) are explicitly prohibited to maintain consistency across both UI implementations.</p>
<p><b>Visualization Capabilities:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Visualization Type   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3D Network Graph   </td><td class="markdownTableBodyNone"><code><a class="el" href="graph__visuals_8py.html">src/visualizations/graph_visuals.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2D Network Graph   </td><td class="markdownTableBodyNone"><code><a class="el" href="graph__2d__visuals_8py.html">src/visualizations/graph_2d_visuals.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Metrics Dashboard   </td><td class="markdownTableBodyNone"><code>src/visualizations/metrics_visuals.py</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Formulaic Visuals   </td><td class="markdownTableBodyNone"><code><a class="el" href="formulaic__visuals_8py.html">src/visualizations/formulaic_visuals.py</a></code>   </td></tr>
</table>
<p><b>Deterministic Layout:</b></p>
<p>All visualizations use <code>seed=42</code> for reproducible 3D node positioning, ensuring identical visual output across sessions.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md1936"></a>
3.4 Open Source Dependencies</h2>
<h3><a class="anchor" id="autotoc_md1937"></a>
3.4.1 Python Runtime Dependencies</h3>
<p><b>Source:</b> <code>requirements.txt</code></p>
<h4><a class="anchor" id="autotoc_md1938"></a>
Core Application Dependencies</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Package   </th><th class="markdownTableHeadNone">Version Constraint   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>fastapi</b>   </td><td class="markdownTableBodyNone">0.127.0 (pinned)   </td><td class="markdownTableBodyNone">REST API framework    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>uvicorn[standard]</b>   </td><td class="markdownTableBodyNone">&gt;=0.24.0   </td><td class="markdownTableBodyNone">ASGI server with async support    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>pydantic</b>   </td><td class="markdownTableBodyNone">2.12.5 (pinned)   </td><td class="markdownTableBodyNone">Data validation and serialization    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>gradio</b>   </td><td class="markdownTableBodyNone">&gt;=4.0.0,&lt;6.0.0   </td><td class="markdownTableBodyNone">Legacy UI framework   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1939"></a>
Data Processing Dependencies</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Package   </th><th class="markdownTableHeadNone">Version Constraint   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>numpy</b>   </td><td class="markdownTableBodyNone">2.2.6 (pinned)   </td><td class="markdownTableBodyNone">Numerical computing for graph coordinates    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>pandas</b>   </td><td class="markdownTableBodyNone">&gt;=1.5.0   </td><td class="markdownTableBodyNone">Tabular data manipulation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>plotly</b>   </td><td class="markdownTableBodyNone">&gt;=6.0.0   </td><td class="markdownTableBodyNone">Visualization generation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>dataclasses-json</b>   </td><td class="markdownTableBodyNone">&gt;=0.5.7   </td><td class="markdownTableBodyNone">JSON serialization for domain models   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1940"></a>
External Data Dependencies</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Package   </th><th class="markdownTableHeadNone">Version Constraint   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>yfinance</b>   </td><td class="markdownTableBodyNone">&gt;=0.2.51   </td><td class="markdownTableBodyNone">Yahoo Finance API integration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>requests</b>   </td><td class="markdownTableBodyNone">&gt;=2.32.2   </td><td class="markdownTableBodyNone">HTTP client for external requests   </td></tr>
</table>
<p><b>Library Constraint:</b></p>
<p>Per project coding standards, yfinance is the <b>only approved finance data API</b>. Alternative providers (e.g., Alpha Vantage, IEX Cloud) require explicit approval.</p>
<h4><a class="anchor" id="autotoc_md1941"></a>
Security Dependencies</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Package   </th><th class="markdownTableHeadNone">Version Constraint   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>PyJWT</b>   </td><td class="markdownTableBodyNone">&gt;=2.8.0   </td><td class="markdownTableBodyNone">JWT token signing and verification    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>passlib[bcrypt]</b>   </td><td class="markdownTableBodyNone">&gt;=1.7.4   </td><td class="markdownTableBodyNone">Password hashing (pbkdf2_sha256)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>slowapi</b>   </td><td class="markdownTableBodyNone">&gt;=0.1.4   </td><td class="markdownTableBodyNone">Rate limiting middleware   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1942"></a>
Database Dependencies</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Package   </th><th class="markdownTableHeadNone">Version Constraint   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>sqlalchemy</b>   </td><td class="markdownTableBodyNone">&gt;=2.0.0   </td><td class="markdownTableBodyNone">ORM with 2.x Mapped/mapped_column syntax    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>psycopg2-binary</b>   </td><td class="markdownTableBodyNone">&gt;=2.9.9   </td><td class="markdownTableBodyNone">PostgreSQL adapter for production   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1943"></a>
Serverless/Protocol Dependencies</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Package   </th><th class="markdownTableHeadNone">Version Constraint   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>mangum</b>   </td><td class="markdownTableBodyNone">&gt;=0.17.0   </td><td class="markdownTableBodyNone">AWS Lambda ASGI adapter    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>mcp</b>   </td><td class="markdownTableBodyNone">&gt;=1.0.0   </td><td class="markdownTableBodyNone">Model Context Protocol    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>fastmcp</b>   </td><td class="markdownTableBodyNone">&gt;=0.1.0   </td><td class="markdownTableBodyNone">FastMCP server implementation   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1944"></a>
Compatibility Pins</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Package   </th><th class="markdownTableHeadNone">Version Constraint   </th><th class="markdownTableHeadNone">Reason    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>h11</b>   </td><td class="markdownTableBodyNone">0.16.0 (pinned)   </td><td class="markdownTableBodyNone">HTTP/1.1 protocol compatibility with uvicorn/httpx    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>httpx</b>   </td><td class="markdownTableBodyNone">0.28.1 (pinned)   </td><td class="markdownTableBodyNone">Test HTTP client compatibility    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>anyio</b>   </td><td class="markdownTableBodyNone">4.12.0 (pinned)   </td><td class="markdownTableBodyNone">Async I/O compatibility with httpx   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1945"></a>
Security-Mandated Pins (Snyk)</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Package   </th><th class="markdownTableHeadNone">Version Constraint   </th><th class="markdownTableHeadNone">Vulnerability Mitigation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>urllib3</b>   </td><td class="markdownTableBodyNone">&gt;=2.6.0   </td><td class="markdownTableBodyNone">Known vulnerability patch    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>zipp</b>   </td><td class="markdownTableBodyNone">&gt;=3.19.1   </td><td class="markdownTableBodyNone">Known vulnerability patch   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1946"></a>
3.4.2 Python Development Dependencies</h3>
<p><b>Source:</b> <code>requirements-dev.txt</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Category   </th><th class="markdownTableHeadNone">Package   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Testing</b>   </td><td class="markdownTableBodyNone">pytest   </td><td class="markdownTableBodyNone">&gt;=7.0.0   </td><td class="markdownTableBodyNone">Test framework    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Testing</b>   </td><td class="markdownTableBodyNone">pytest-cov   </td><td class="markdownTableBodyNone">&gt;=4.0.0   </td><td class="markdownTableBodyNone">Coverage reporting    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Testing</b>   </td><td class="markdownTableBodyNone">pytest-asyncio   </td><td class="markdownTableBodyNone">&gt;=0.21.0   </td><td class="markdownTableBodyNone">Async test support    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Linting</b>   </td><td class="markdownTableBodyNone">flake8   </td><td class="markdownTableBodyNone">&gt;=6.0.0   </td><td class="markdownTableBodyNone">Style linting    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Linting</b>   </td><td class="markdownTableBodyNone">pylint   </td><td class="markdownTableBodyNone">&gt;=2.17.0   </td><td class="markdownTableBodyNone">Static analysis    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Type Checking</b>   </td><td class="markdownTableBodyNone">mypy   </td><td class="markdownTableBodyNone">&gt;=1.0.0   </td><td class="markdownTableBodyNone">Type checking    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Formatting</b>   </td><td class="markdownTableBodyNone">black   </td><td class="markdownTableBodyNone">&gt;=23.0.0   </td><td class="markdownTableBodyNone">Code formatting    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Formatting</b>   </td><td class="markdownTableBodyNone">isort   </td><td class="markdownTableBodyNone">&gt;=5.12.0   </td><td class="markdownTableBodyNone">Import sorting    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Git Hooks</b>   </td><td class="markdownTableBodyNone">pre-commit   </td><td class="markdownTableBodyNone">&gt;=3.0.0   </td><td class="markdownTableBodyNone">Pre-commit hook management    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Configuration</b>   </td><td class="markdownTableBodyNone">PyYAML   </td><td class="markdownTableBodyNone">&gt;=6.0   </td><td class="markdownTableBodyNone">YAML parsing    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Type Stubs</b>   </td><td class="markdownTableBodyNone">types-PyYAML   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">Type annotations for PyYAML   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1947"></a>
3.4.3 Frontend Runtime Dependencies</h3>
<p><b>Source:</b> <code>frontend/package.json</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Package   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>next</b>   </td><td class="markdownTableBodyNone">14.2.35   </td><td class="markdownTableBodyNone">React framework with App Router    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>react</b>   </td><td class="markdownTableBodyNone">^18.2.0   </td><td class="markdownTableBodyNone">UI component library    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>react-dom</b>   </td><td class="markdownTableBodyNone">^18.2.0   </td><td class="markdownTableBodyNone">React DOM renderer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>axios</b>   </td><td class="markdownTableBodyNone">^1.13.2   </td><td class="markdownTableBodyNone">HTTP client for API communication    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>plotly.js</b>   </td><td class="markdownTableBodyNone">^2.27.0   </td><td class="markdownTableBodyNone">3D visualization engine    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>react-plotly.js</b>   </td><td class="markdownTableBodyNone">^2.6.0   </td><td class="markdownTableBodyNone">React Plotly wrapper component    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>recharts</b>   </td><td class="markdownTableBodyNone">^2.10.0   </td><td class="markdownTableBodyNone">Additional charting (secondary)   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1948"></a>
3.4.4 Frontend Development Dependencies</h3>
<p><b>Source:</b> <code>frontend/package.json</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Category   </th><th class="markdownTableHeadNone">Package   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>TypeScript</b>   </td><td class="markdownTableBodyNone">typescript   </td><td class="markdownTableBodyNone">^5.3.0   </td><td class="markdownTableBodyNone">Type safety    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Styling</b>   </td><td class="markdownTableBodyNone">tailwindcss   </td><td class="markdownTableBodyNone">^3.3.0   </td><td class="markdownTableBodyNone">CSS framework    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Styling</b>   </td><td class="markdownTableBodyNone">postcss   </td><td class="markdownTableBodyNone">^8.4.31   </td><td class="markdownTableBodyNone">CSS processing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Styling</b>   </td><td class="markdownTableBodyNone">autoprefixer   </td><td class="markdownTableBodyNone">^10.4.16   </td><td class="markdownTableBodyNone">Vendor prefixing    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Testing</b>   </td><td class="markdownTableBodyNone">jest   </td><td class="markdownTableBodyNone">^29.7.0   </td><td class="markdownTableBodyNone">Test framework    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Testing</b>   </td><td class="markdownTableBodyNone">jest-environment-jsdom   </td><td class="markdownTableBodyNone">^29.7.0   </td><td class="markdownTableBodyNone">DOM testing environment    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Testing</b>   </td><td class="markdownTableBodyNone">@testing-library/react   </td><td class="markdownTableBodyNone">^14.1.2   </td><td class="markdownTableBodyNone">React component testing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Testing</b>   </td><td class="markdownTableBodyNone">@testing-library/jest-dom   </td><td class="markdownTableBodyNone">^6.1.5   </td><td class="markdownTableBodyNone">DOM assertion matchers    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Testing</b>   </td><td class="markdownTableBodyNone">@testing-library/user-event   </td><td class="markdownTableBodyNone">^14.5.1   </td><td class="markdownTableBodyNone">User interaction simulation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Linting</b>   </td><td class="markdownTableBodyNone">eslint   </td><td class="markdownTableBodyNone">^8.55.0   </td><td class="markdownTableBodyNone">Code linting    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Linting</b>   </td><td class="markdownTableBodyNone">eslint-config-next   </td><td class="markdownTableBodyNone">^14.0.0   </td><td class="markdownTableBodyNone">Next.js ESLint rules   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1949"></a>
3.4.5 Dependency Version Strategy</h3>
<div class="fragment"><div class="line">flowchart TD</div>
<div class="line">    subgraph VersionStrategy[&quot;Version Constraint Strategy&quot;]</div>
<div class="line">        Pinned[&quot;Pinned Versions&quot;]</div>
<div class="line">        Minimum[&quot;Minimum Versions&quot;]</div>
<div class="line">        Range[&quot;Version Ranges&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph PinnedPackages[&quot;Pinned (Critical Compatibility)&quot;]</div>
<div class="line">        FastAPIPkg[&quot;fastapi 0.127.0&quot;]</div>
<div class="line">        PydanticPkg[&quot;pydantic 2.12.5&quot;]</div>
<div class="line">        NumpyPkg[&quot;numpy 2.2.6&quot;]</div>
<div class="line">        H11Pkg[&quot;h11 0.16.0&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph MinimumPackages[&quot;Minimum (Security + Features)&quot;]</div>
<div class="line">        SQLAlchemyPkg[&quot;sqlalchemy &gt;=2.0.0&quot;]</div>
<div class="line">        PyJWTPkg[&quot;PyJWT &gt;=2.8.0&quot;]</div>
<div class="line">        Urllib3Pkg[&quot;urllib3 &gt;=2.6.0&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph RangePackages[&quot;Range (Compatibility)&quot;]</div>
<div class="line">        GradioPkg[&quot;gradio &gt;=4.0.0,&lt;6.0.0&quot;]</div>
<div class="line">        NextPkg[&quot;next ^14.2.35&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    Pinned --&gt; PinnedPackages</div>
<div class="line">    Minimum --&gt; MinimumPackages</div>
<div class="line">    Range --&gt; RangePackages</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md1951"></a>
3.5 Third-Party Services</h2>
<h3><a class="anchor" id="autotoc_md1952"></a>
3.5.1 External Data APIs</h3>
<h4><a class="anchor" id="autotoc_md1953"></a>
Yahoo Finance (via yfinance)</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Library</b>   </td><td class="markdownTableBodyNone">yfinance &gt;=0.2.51    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Enable Flag</b>   </td><td class="markdownTableBodyNone"><code>USE_REAL_DATA_FETCHER</code> environment variable    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Implementation</b>   </td><td class="markdownTableBodyNone"><code><a class="el" href="real__data__fetcher_8py.html">src/data/real_data_fetcher.py</a></code>   </td></tr>
</table>
<p><b>Supported Symbols:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Category   </th><th class="markdownTableHeadNone">Symbols    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Equities</b>   </td><td class="markdownTableBodyNone">AAPL, MSFT, XOM, JPM    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Bond ETFs</b>   </td><td class="markdownTableBodyNone">TLT, LQD, HYG    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Commodities</b>   </td><td class="markdownTableBodyNone">GC=F (Gold), CL=F (Crude Oil), SI=F (Silver)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Currencies</b>   </td><td class="markdownTableBodyNone">EURUSD=X, GBPUSD=X, JPYUSD=X   </td></tr>
</table>
<p><b>Rate Limit Mitigation:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Strategy   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>File Caching</b>   </td><td class="markdownTableBodyNone">JSON cache with atomic writes via <code>NamedTemporaryFile</code> + <code>os.replace</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Cache Path</b>   </td><td class="markdownTableBodyNone">Configurable via <code>REAL_DATA_CACHE_PATH</code> environment variable    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Fallback</b>   </td><td class="markdownTableBodyNone">Sample data when network disabled or unavailable   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1954"></a>
3.5.2 Authentication Services</h3>
<p>The system implements <b>custom JWT authentication</b> rather than external identity providers:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Technology   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Token Signing</b>   </td><td class="markdownTableBodyNone">PyJWT &gt;=2.8.0   </td><td class="markdownTableBodyNone">HS256 algorithm    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Token Expiration</b>   </td><td class="markdownTableBodyNone">30 minutes   </td><td class="markdownTableBodyNone"><code>ACCESS_TOKEN_EXPIRE_MINUTES</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Password Hashing</b>   </td><td class="markdownTableBodyNone">passlib (pbkdf2_sha256)   </td><td class="markdownTableBodyNone"><code>CryptContext</code> with pbkdf2_sha256 scheme    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Secret Management</b>   </td><td class="markdownTableBodyNone">Environment variables   </td><td class="markdownTableBodyNone"><code>SECRET_KEY</code> (required)   </td></tr>
</table>
<p><b>Authentication Flow:</b></p>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant Client</div>
<div class="line">    participant FastAPI</div>
<div class="line">    participant AuthModule</div>
<div class="line">    participant Database</div>
<div class="line"> </div>
<div class="line">    Client-&gt;&gt;FastAPI: POST /token (credentials)</div>
<div class="line">    FastAPI-&gt;&gt;AuthModule: Validate credentials</div>
<div class="line">    AuthModule-&gt;&gt;Database: Query user_credentials</div>
<div class="line">    Database--&gt;&gt;AuthModule: User record</div>
<div class="line">    AuthModule-&gt;&gt;AuthModule: Verify password hash</div>
<div class="line">    AuthModule-&gt;&gt;AuthModule: Create JWT (HS256)</div>
<div class="line">    AuthModule--&gt;&gt;FastAPI: Access token</div>
<div class="line">    FastAPI--&gt;&gt;Client: JWT token (30 min expiry)</div>
<div class="line"> </div>
<div class="line">    Client-&gt;&gt;FastAPI: GET /api/assets (Bearer token)</div>
<div class="line">    FastAPI-&gt;&gt;AuthModule: Validate JWT</div>
<div class="line">    AuthModule-&gt;&gt;AuthModule: Decode and verify</div>
<div class="line">    AuthModule--&gt;&gt;FastAPI: User identity</div>
<div class="line">    FastAPI--&gt;&gt;Client: Protected resource</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md1955"></a>
3.5.3 CI/CD &amp; Code Quality Services</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Service   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Integration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>GitHub Actions</b>   </td><td class="markdownTableBodyNone">Primary CI pipeline   </td><td class="markdownTableBodyNone"><code>.github/workflows/ci.yml</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>CircleCI</b>   </td><td class="markdownTableBodyNone">Secondary CI pipeline   </td><td class="markdownTableBodyNone"><code>.circleci/config.yml</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Codecov</b>   </td><td class="markdownTableBodyNone">Coverage reporting   </td><td class="markdownTableBodyNone">Uploads <code>coverage.xml</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>GitHub Advanced Security</b>   </td><td class="markdownTableBodyNone">Security analysis   </td><td class="markdownTableBodyNone">SARIF uploads    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Codacy</b>   </td><td class="markdownTableBodyNone">Code quality analysis   </td><td class="markdownTableBodyNone">Automated reviews    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Snyk</b>   </td><td class="markdownTableBodyNone">Dependency vulnerability scanning   </td><td class="markdownTableBodyNone">Version pins    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Bandit</b>   </td><td class="markdownTableBodyNone">Python security analysis   </td><td class="markdownTableBodyNone">CI security job    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Safety</b>   </td><td class="markdownTableBodyNone">Dependency security checks   </td><td class="markdownTableBodyNone">CI security job   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1956"></a>
3.5.4 Deployment Platforms</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Platform   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Vercel</b>   </td><td class="markdownTableBodyNone">Production hosting   </td><td class="markdownTableBodyNone"><code>vercel.json</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Docker Hub</b>   </td><td class="markdownTableBodyNone">Container registry   </td><td class="markdownTableBodyNone"><code>Dockerfile</code>, <code>docker-compose.yml</code>   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md1958"></a>
3.6 Databases &amp; Storage</h2>
<h3><a class="anchor" id="autotoc_md1959"></a>
3.6.1 Primary Storage: In-Memory Graph</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Data Structure</b>   </td><td class="markdownTableBodyNone"><code>Dict[source_id, List[Tuple[target_id, rel_type, strength]]]</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Implementation</b>   </td><td class="markdownTableBodyNone"><code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Thread Safety</b>   </td><td class="markdownTableBodyNone">Double-checked locking singleton pattern    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Size Constraint</b>   </td><td class="markdownTableBodyNone">Optimal performance for &lt; 500 nodes   </td></tr>
</table>
<p><b>Justification:</b></p>
<p>In-memory storage is selected for the primary graph due to:</p>
<ul>
<li>Sub-millisecond relationship traversal for visualization</li>
<li>No external database dependency for deployment simplicity</li>
<li>Sufficient capacity for the 19-asset sample dataset and moderate production workloads</li>
</ul>
<p><b>Thread-Safe Initialization:</b></p>
<div class="fragment"><div class="line">flowchart TD</div>
<div class="line">    subgraph Initialization[&quot;Graph Initialization&quot;]</div>
<div class="line">        Request[&quot;API Request&quot;]</div>
<div class="line">        CheckGlobal{&quot;Global&lt;br/&gt;graph exists?&quot;}</div>
<div class="line">        AcquireLock[&quot;Acquire&lt;br/&gt;Thread Lock&quot;]</div>
<div class="line">        DoubleCheck{&quot;Double-check&lt;br/&gt;inside lock?&quot;}</div>
<div class="line">        CreateGraph[&quot;Create Graph&lt;br/&gt;Instance&quot;]</div>
<div class="line">        BuildRelationships[&quot;Build&lt;br/&gt;Relationships&quot;]</div>
<div class="line">        SetGlobal[&quot;Set Global&lt;br/&gt;Reference&quot;]</div>
<div class="line">        ReleaseLock[&quot;Release&lt;br/&gt;Lock&quot;]</div>
<div class="line">        ReturnGraph[&quot;Return&lt;br/&gt;Graph&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    Request --&gt; CheckGlobal</div>
<div class="line">    CheckGlobal --&gt;|No| AcquireLock</div>
<div class="line">    CheckGlobal --&gt;|Yes| ReturnGraph</div>
<div class="line">    AcquireLock --&gt; DoubleCheck</div>
<div class="line">    DoubleCheck --&gt;|No| CreateGraph</div>
<div class="line">    DoubleCheck --&gt;|Yes| ReleaseLock</div>
<div class="line">    CreateGraph --&gt; BuildRelationships</div>
<div class="line">    BuildRelationships --&gt; SetGlobal</div>
<div class="line">    SetGlobal --&gt; ReleaseLock</div>
<div class="line">    ReleaseLock --&gt; ReturnGraph</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md1960"></a>
3.6.2 SQLite (API Authentication)</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Purpose</b>   </td><td class="markdownTableBodyNone">User credentials storage    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Implementation</b>   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2database_8py.html">api/database.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Environment Variable</b>   </td><td class="markdownTableBodyNone"><code>DATABASE_URL</code> (required for auth)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Features</b>   </td><td class="markdownTableBodyNone">Connection pooling, row factory, in-memory support   </td></tr>
</table>
<p><b>Schema:</b></p>
<div class="fragment"><div class="line">TABLE user_credentials (</div>
<div class="line">    username TEXT PRIMARY KEY,</div>
<div class="line">    email TEXT,</div>
<div class="line">    full_name TEXT,</div>
<div class="line">    hashed_password TEXT NOT NULL,</div>
<div class="line">    disabled BOOLEAN DEFAULT FALSE</div>
<div class="line">)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md1961"></a>
3.6.3 SQLAlchemy ORM (Optional Persistence)</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Version</b>   </td><td class="markdownTableBodyNone">SQLAlchemy &gt;=2.0.0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Syntax</b>   </td><td class="markdownTableBodyNone">2.x with <code>Mapped</code>/<code>mapped_column</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Implementation</b>   </td><td class="markdownTableBodyNone"><code><a class="el" href="src_2data_2database_8py.html">src/data/database.py</a></code>, <code><a class="el" href="db__models_8py.html">src/data/db_models.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Environment Variable</b>   </td><td class="markdownTableBodyNone"><code>ASSET_GRAPH_DATABASE_URL</code>   </td></tr>
</table>
<p><b>Supported Database Backends:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Backend   </th><th class="markdownTableHeadNone">Use Case   </th><th class="markdownTableHeadNone">Connection String    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>SQLite</b>   </td><td class="markdownTableBodyNone">Development   </td><td class="markdownTableBodyNone"><code>sqlite:///path/to/db.sqlite</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>SQLite In-Memory</b>   </td><td class="markdownTableBodyNone">Testing   </td><td class="markdownTableBodyNone"><code>sqlite:///:memory:</code> with <code>StaticPool</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>PostgreSQL</b>   </td><td class="markdownTableBodyNone">Production   </td><td class="markdownTableBodyNone"><code>postgresql://user:pass@host/db</code>   </td></tr>
</table>
<p><b>Database Schema (migrations/001_initial.sql):</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Table   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>assets</b>   </td><td class="markdownTableBodyNone">Primary entity table for financial instruments    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>asset_relationships</b>   </td><td class="markdownTableBodyNone">Directed edge table with unique constraint    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>regulatory_events</b>   </td><td class="markdownTableBodyNone">Event records with impact scoring    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>regulatory_event_assets</b>   </td><td class="markdownTableBodyNone">Many-to-many junction table   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1962"></a>
3.6.4 Caching Strategy</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Cache Type   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Real Data Cache</b>   </td><td class="markdownTableBodyNone">JSON file with atomic writes   </td><td class="markdownTableBodyNone"><code>REAL_DATA_CACHE_PATH</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Graph Cache</b>   </td><td class="markdownTableBodyNone">Optional JSON serialization   </td><td class="markdownTableBodyNone"><code>GRAPH_CACHE_PATH</code>   </td></tr>
</table>
<p><b>Atomic Write Pattern:</b></p>
<div class="fragment"><div class="line">1. Write to NamedTemporaryFile in same directory</div>
<div class="line">2. Flush and sync to disk</div>
<div class="line">3. os.replace() atomic rename to target path</div>
<div class="line">4. Guarantees no partial writes on failure</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md1964"></a>
3.7 Development &amp; Deployment</h2>
<h3><a class="anchor" id="autotoc_md1965"></a>
3.7.1 Development Tools</h3>
<h4><a class="anchor" id="autotoc_md1966"></a>
Makefile Commands</h4>
<p><b>Source:</b> <code>Makefile</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Command   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>make install</code>   </td><td class="markdownTableBodyNone">Install production dependencies    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>make install-dev</code>   </td><td class="markdownTableBodyNone">Install development dependencies    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>make test</code>   </td><td class="markdownTableBodyNone">Run pytest with coverage    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>make lint</code>   </td><td class="markdownTableBodyNone">Run flake8 + pylint    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>make format</code>   </td><td class="markdownTableBodyNone">Format with black + isort    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>make type-check</code>   </td><td class="markdownTableBodyNone">Run mypy type checking    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>make check</code>   </td><td class="markdownTableBodyNone">Full quality check pipeline    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>make docker-compose-up</code>   </td><td class="markdownTableBodyNone">Build and start containers   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1967"></a>
Pre-commit Hooks</h4>
<p><b>Source:</b> <code>.pre-commit-config.yaml</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Hook   </th><th class="markdownTableHeadNone">Tool   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Formatting</b>   </td><td class="markdownTableBodyNone">black   </td><td class="markdownTableBodyNone"><code>line-length: 120</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Import Sorting</b>   </td><td class="markdownTableBodyNone">isort   </td><td class="markdownTableBodyNone"><code>profile: black</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Linting</b>   </td><td class="markdownTableBodyNone">flake8   </td><td class="markdownTableBodyNone"><code>.flake8</code> config file   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1968"></a>
Code Quality Tools Configuration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Tool   </th><th class="markdownTableHeadNone">Config Source   </th><th class="markdownTableHeadNone">Key Settings    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>black</b>   </td><td class="markdownTableBodyNone"><code>pyproject.toml</code>   </td><td class="markdownTableBodyNone"><code>line-length = 120</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>isort</b>   </td><td class="markdownTableBodyNone"><code>pyproject.toml</code>   </td><td class="markdownTableBodyNone"><code>profile = "black"</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>mypy</b>   </td><td class="markdownTableBodyNone"><code>pyproject.toml</code>   </td><td class="markdownTableBodyNone">Strict type checking    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>flake8</b>   </td><td class="markdownTableBodyNone"><code>.flake8</code>   </td><td class="markdownTableBodyNone">E501 max-line-length    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>pylint</b>   </td><td class="markdownTableBodyNone"><code>.pylintrc</code>   </td><td class="markdownTableBodyNone">Customized rules   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1969"></a>
3.7.2 Build System</h3>
<h4><a class="anchor" id="autotoc_md1970"></a>
Python Build Configuration</h4>
<p><b>Source:</b> <code>pyproject.toml</code></p>
<div class="fragment"><div class="line">[build-system]</div>
<div class="line">requires = [&quot;setuptools&gt;=45&quot;, &quot;wheel&quot;]</div>
<div class="line">build-backend = &quot;setuptools.build_meta&quot;</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md1971"></a>
Frontend Build Scripts</h4>
<p><b>Source:</b> <code>frontend/package.json</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Script   </th><th class="markdownTableHeadNone">Command   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>npm run dev</code>   </td><td class="markdownTableBodyNone"><code>next dev</code>   </td><td class="markdownTableBodyNone">Development server with hot reload    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>npm run build</code>   </td><td class="markdownTableBodyNone"><code>next build</code>   </td><td class="markdownTableBodyNone">Production build    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>npm run start</code>   </td><td class="markdownTableBodyNone"><code>next start</code>   </td><td class="markdownTableBodyNone">Production server    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>npm run lint</code>   </td><td class="markdownTableBodyNone"><code>next lint</code>   </td><td class="markdownTableBodyNone">ESLint analysis    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>npm test</code>   </td><td class="markdownTableBodyNone"><code>jest --silent</code>   </td><td class="markdownTableBodyNone">Run test suite    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>npm test -- --coverage</code>   </td><td class="markdownTableBodyNone"><code>jest --coverage</code>   </td><td class="markdownTableBodyNone">Coverage report   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1972"></a>
3.7.3 Containerization</h3>
<h4><a class="anchor" id="autotoc_md1973"></a>
Docker Configuration</h4>
<p><b>Source:</b> <code>Dockerfile</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b><a class="el" href="classBase.html">Base</a> Image</b>   </td><td class="markdownTableBodyNone"><code>python:3.11-slim</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Working Directory</b>   </td><td class="markdownTableBodyNone"><code>/app</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>User</b>   </td><td class="markdownTableBodyNone">Non-root <code>appuser</code> (UID 1000)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Exposed Port</b>   </td><td class="markdownTableBodyNone">7860 (Gradio)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Health Check</b>   </td><td class="markdownTableBodyNone">HTTP probe every 30s   </td></tr>
</table>
<p><b>Security Considerations:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Practice   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Non-root User</b>   </td><td class="markdownTableBodyNone"><code>useradd -m -u 1000 appuser</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Minimal <a class="el" href="classBase.html">Base</a> Image</b>   </td><td class="markdownTableBodyNone"><code>python:3.11-slim</code> (no dev tools)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Health Monitoring</b>   </td><td class="markdownTableBodyNone"><code>HEALTHCHECK</code> instruction with curl   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1974"></a>
Docker Compose Configuration</h4>
<p><b>Source:</b> <code>docker-compose.yml</code></p>
<div class="fragment"><div class="line">version: &quot;3.8&quot;</div>
<div class="line">services:</div>
<div class="line">  app:</div>
<div class="line">    build: .</div>
<div class="line">    ports:</div>
<div class="line">      - &quot;7860:7860&quot;</div>
<div class="line">    environment:</div>
<div class="line">      - GRADIO_SERVER_NAME=0.0.0.0</div>
<div class="line">      - GRADIO_SERVER_PORT=7860</div>
<div class="line">    volumes:</div>
<div class="line">      - ./src:/app/src</div>
<div class="line">      - ./data:/app/data</div>
<div class="line">    restart: unless-stopped</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md1975"></a>
3.7.4 CI/CD Pipeline</h3>
<h4><a class="anchor" id="autotoc_md1976"></a>
GitHub Actions (Primary)</h4>
<p><b>Source:</b> <code>.github/workflows/ci.yml</code></p>
<div class="fragment"><div class="line">flowchart LR</div>
<div class="line">    subgraph TestJob[&quot;Test Job&quot;]</div>
<div class="line">        Matrix[&quot;Python Matrix&lt;br/&gt;3.10, 3.11, 3.12&quot;]</div>
<div class="line">        Lint[&quot;Linting&lt;br/&gt;flake8, black, isort&quot;]</div>
<div class="line">        Pylint[&quot;Static Analysis&lt;br/&gt;pylint&quot;]</div>
<div class="line">        Tests[&quot;pytest&lt;br/&gt;+ coverage&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph SecurityJob[&quot;Security Job&quot;]</div>
<div class="line">        Safety[&quot;safety check&quot;]</div>
<div class="line">        Bandit[&quot;bandit scan&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph CoverageJob[&quot;Coverage Job&quot;]</div>
<div class="line">        Codecov[&quot;Upload to&lt;br/&gt;Codecov&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    Matrix --&gt; Lint</div>
<div class="line">    Lint --&gt; Pylint</div>
<div class="line">    Pylint --&gt; Tests</div>
<div class="line">    Tests --&gt; SecurityJob</div>
<div class="line">    Tests --&gt; CoverageJob</div>
</div><!-- fragment --><p><b>Job Configuration:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Job   </th><th class="markdownTableHeadNone">Actions    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>test</b>   </td><td class="markdownTableBodyNone">Matrix Python 3.10/3.11/3.12, linting, pytest with coverage    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>security</b>   </td><td class="markdownTableBodyNone">safety check, bandit scan    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>coverage</b>   </td><td class="markdownTableBodyNone">Upload to Codecov (Python 3.11 only)   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1977"></a>
CircleCI (Secondary)</h4>
<p><b>Source:</b> <code>.circleci/config.yml</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Job   </th><th class="markdownTableHeadNone">Actions    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>python-lint</b>   </td><td class="markdownTableBodyNone">flake8 with <code>.flake8</code> config    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>python-test</b>   </td><td class="markdownTableBodyNone">pytest with parallelism=4, JUnit XML output    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>python-security</b>   </td><td class="markdownTableBodyNone">safety + bandit    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>frontend-lint</b>   </td><td class="markdownTableBodyNone">npm run lint    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>frontend-build</b>   </td><td class="markdownTableBodyNone">npm run build    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>docker-build</b>   </td><td class="markdownTableBodyNone">Build container + smoke test   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1978"></a>
Scheduled Security Scans</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Schedule   </th><th class="markdownTableHeadNone">Workflow   </th><th class="markdownTableHeadNone">Target    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Nightly (02:00 UTC)   </td><td class="markdownTableBodyNone">Security workflow   </td><td class="markdownTableBodyNone">main branch   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1979"></a>
3.7.5 Deployment Options</h3>
<h4><a class="anchor" id="autotoc_md1980"></a>
Local Development</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Command   </th><th class="markdownTableHeadNone">Port    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>FastAPI Backend</b>   </td><td class="markdownTableBodyNone"><code>uvicorn <a class="el" href="namespaceapi_1_1main.html">api.main</a>:app --reload --port 8000</code>   </td><td class="markdownTableBodyNone">8000    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Next.js Frontend</b>   </td><td class="markdownTableBodyNone"><code>cd frontend &amp;&amp; npm run dev</code>   </td><td class="markdownTableBodyNone">3000    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Gradio Legacy UI</b>   </td><td class="markdownTableBodyNone"><code>python <a class="el" href="app_8py.html">app.py</a></code>   </td><td class="markdownTableBodyNone">7860   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1981"></a>
Vercel Serverless</h4>
<p><b>Source:</b> <code>vercel.json</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Build   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Backend</b>   </td><td class="markdownTableBodyNone"><code>@vercel/python</code>, maxLambdaSize: 50mb    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Frontend</b>   </td><td class="markdownTableBodyNone"><code>@vercel/next</code>   </td></tr>
</table>
<p><b>Routes:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Pattern   </th><th class="markdownTableHeadNone">Destination    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/(.*)</code>   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/(.*)</code>   </td><td class="markdownTableBodyNone"><code>frontend/$1</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md1982"></a>
Docker Production</h4>
<div class="fragment"><div class="line">docker-compose up --build</div>
<div class="line"># OR</div>
<div class="line">make docker-compose-up</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md1984"></a>
3.8 Security Considerations</h2>
<h3><a class="anchor" id="autotoc_md1985"></a>
3.8.1 Authentication Security</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Aspect   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Algorithm</b>   </td><td class="markdownTableBodyNone">HS256 (HMAC-SHA256)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Secret Key</b>   </td><td class="markdownTableBodyNone">Environment variable (<code>SECRET_KEY</code>)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Token Expiration</b>   </td><td class="markdownTableBodyNone">30 minutes default    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Password Hashing</b>   </td><td class="markdownTableBodyNone">pbkdf2_sha256 via passlib   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1986"></a>
3.8.2 API Security</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Protection   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Rate Limiting</b>   </td><td class="markdownTableBodyNone">slowapi: 5 req/min on <code>/token</code>, 10 req/min on <code>/api/users/me</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>CORS</b>   </td><td class="markdownTableBodyNone">Environment-specific allowlists; no wildcard <code>*</code> origins    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Input Validation</b>   </td><td class="markdownTableBodyNone">Pydantic models with strict type enforcement   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1987"></a>
3.8.3 Deployment Security</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Practice   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Container User</b>   </td><td class="markdownTableBodyNone">Non-root <code>appuser</code> (UID 1000)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Secrets Management</b>   </td><td class="markdownTableBodyNone">Environment variables only; never committed    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Dependency Scanning</b>   </td><td class="markdownTableBodyNone">Snyk, Safety, Bandit in CI pipeline    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>HTTPS</b>   </td><td class="markdownTableBodyNone">Required in production; Vercel provides TLS termination   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1988"></a>
3.8.4 CORS Configuration</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Environment   </th><th class="markdownTableHeadNone">Allowed Origins    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Development</b>   </td><td class="markdownTableBodyNone"><code><a href="http://localhost:3000">http://localhost:3000</a></code>, <code><a href="http://localhost:7860">http://localhost:7860</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Production</b>   </td><td class="markdownTableBodyNone">HTTPS origins only; Vercel preview domains via regex validation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Custom</b>   </td><td class="markdownTableBodyNone"><code>ALLOWED_ORIGINS</code> environment variable (comma-separated)   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md1990"></a>
3.9 Integration Requirements</h2>
<h3><a class="anchor" id="autotoc_md1991"></a>
3.9.1 Frontend-Backend Communication</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Aspect   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Protocol</b>   </td><td class="markdownTableBodyNone">REST over HTTPS (production) / HTTP (development)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Data Format</b>   </td><td class="markdownTableBodyNone">JSON    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Authentication</b>   </td><td class="markdownTableBodyNone">Bearer token in <code>Authorization</code> header    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>API <a class="el" href="classBase.html">Base</a> URL</b>   </td><td class="markdownTableBodyNone"><code>NEXT_PUBLIC_API_URL</code> environment variable   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1992"></a>
3.9.2 Database Connectivity</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Backend   </th><th class="markdownTableHeadNone">Connection Handling    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>SQLite</b>   </td><td class="markdownTableBodyNone">Single connection for in-memory; file-based for persistence    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>PostgreSQL</b>   </td><td class="markdownTableBodyNone">psycopg2-binary with connection pooling    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>In-Memory Testing</b>   </td><td class="markdownTableBodyNone">SQLAlchemy <code>StaticPool</code> for connection reuse   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1993"></a>
3.9.3 External Data Source Integration</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Source   </th><th class="markdownTableHeadNone">Integration Pattern    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Yahoo Finance</b>   </td><td class="markdownTableBodyNone">Rate-limited with JSON file caching    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Fallback</b>   </td><td class="markdownTableBodyNone">Sample data generator when network unavailable    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Enable Flag</b>   </td><td class="markdownTableBodyNone"><code>USE_REAL_DATA_FETCHER</code> environment variable   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1994"></a>
3.9.4 Component Version Compatibility Matrix</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component A   </th><th class="markdownTableHeadNone">Component B   </th><th class="markdownTableHeadNone">Constraint    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FastAPI 0.127.0   </td><td class="markdownTableBodyNone">Pydantic 2.12.5   </td><td class="markdownTableBodyNone">Pinned together    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">NumPy 2.2.6   </td><td class="markdownTableBodyNone">Pandas &gt;=1.5.0   </td><td class="markdownTableBodyNone">NumPy 2.x compatibility    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Next.js 14.2.x   </td><td class="markdownTableBodyNone">React 18.2.0   </td><td class="markdownTableBodyNone">React 18 required    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Uvicorn &gt;=0.24.0   </td><td class="markdownTableBodyNone">h11 0.16.0   </td><td class="markdownTableBodyNone">HTTP protocol compatibility   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md1996"></a>
3.10 References</h2>
<h3><a class="anchor" id="autotoc_md1997"></a>
3.10.1 Configuration Files Examined</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">File   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>requirements.txt</code>   </td><td class="markdownTableBodyNone">Python runtime dependencies with pinned versions    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>requirements-dev.txt</code>   </td><td class="markdownTableBodyNone">Python development/testing dependencies    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>pyproject.toml</code>   </td><td class="markdownTableBodyNone">Python packaging, build config, tool configurations    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/package.json</code>   </td><td class="markdownTableBodyNone">Node.js/Next.js dependencies    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/tsconfig.json</code>   </td><td class="markdownTableBodyNone">TypeScript configuration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Dockerfile</code>   </td><td class="markdownTableBodyNone">Container configuration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>docker-compose.yml</code>   </td><td class="markdownTableBodyNone">Multi-container orchestration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>vercel.json</code>   </td><td class="markdownTableBodyNone">Serverless deployment configuration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.github/workflows/ci.yml</code>   </td><td class="markdownTableBodyNone">GitHub Actions CI pipeline    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.circleci/config.yml</code>   </td><td class="markdownTableBodyNone">CircleCI CI pipeline    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Makefile</code>   </td><td class="markdownTableBodyNone">Build automation commands    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.env.example</code>   </td><td class="markdownTableBodyNone">Environment variable templates    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.pre-commit-config.yaml</code>   </td><td class="markdownTableBodyNone">Pre-commit hook configuration   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1998"></a>
3.10.2 Source Files Examined</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">File   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone">FastAPI application with CORS, auth, rate limiting    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code>   </td><td class="markdownTableBodyNone">JWT authentication implementation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="api_2database_8py.html">api/database.py</a></code>   </td><td class="markdownTableBodyNone">SQLite database module for API auth    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="src_2data_2database_8py.html">src/data/database.py</a></code>   </td><td class="markdownTableBodyNone">SQLAlchemy ORM configuration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="real__data__fetcher_8py.html">src/data/real_data_fetcher.py</a></code>   </td><td class="markdownTableBodyNone">Yahoo Finance integration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code>   </td><td class="markdownTableBodyNone">Core graph engine    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code>   </td><td class="markdownTableBodyNone">Domain model dataclasses    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="app_8py.html">app.py</a></code>   </td><td class="markdownTableBodyNone">Gradio UI entry point    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="mcp__server_8py.html">mcp_server.py</a></code>   </td><td class="markdownTableBodyNone">FastMCP server for Model Context Protocol   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1999"></a>
3.10.3 Folders Explored</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Folder   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>api/</code>   </td><td class="markdownTableBodyNone">FastAPI backend application    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>src/</code>   </td><td class="markdownTableBodyNone">Core Python packages    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>src/data/</code>   </td><td class="markdownTableBodyNone">Data layer and database    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>src/visualizations/</code>   </td><td class="markdownTableBodyNone">Plotly visualization generators    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/</code>   </td><td class="markdownTableBodyNone">Next.js application    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/app/</code>   </td><td class="markdownTableBodyNone">App Router pages and components    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.github/workflows/</code>   </td><td class="markdownTableBodyNone">GitHub Actions configurations    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.circleci/</code>   </td><td class="markdownTableBodyNone">CircleCI configurations    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>migrations/</code>   </td><td class="markdownTableBodyNone">Database migration scripts   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2000"></a>
3.10.4 Technical Specification Cross-References</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Section   </th><th class="markdownTableHeadNone">Reference Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1.2 System Overview   </td><td class="markdownTableBodyNone">Architecture context and technology summary    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2.1 Feature Catalog   </td><td class="markdownTableBodyNone">Feature technology dependencies    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2.4 Implementation Considerations   </td><td class="markdownTableBodyNone">Technical constraints and requirements    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2.6 Assumptions and Constraints   </td><td class="markdownTableBodyNone">Scalability and operational constraints    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1.3 Scope   </td><td class="markdownTableBodyNone">System boundaries and excluded technologies   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md2001"></a>
4. Process Flowchart</h1>
<p>This section documents the complete process workflows, state transitions, and integration patterns that govern the Financial Asset Relationship Database system. Each workflow is presented with detailed Mermaid.js diagrams illustrating decision points, error handling paths, system boundaries, and timing considerations.</p>
<h2><a class="anchor" id="autotoc_md2002"></a>
4.1 High-Level System Workflow</h2>
<h3><a class="anchor" id="autotoc_md2003"></a>
4.1.1 End-to-End System Architecture Flow</h3>
<p>The Financial Asset Relationship Database operates through a layered architecture where user interactions flow from presentation layers through API services to core business logic and data sources. The following diagram illustrates the complete end-to-end data flow across all system components.</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph UserLayer[&quot;User Layer&quot;]</div>
<div class="line">        User([User])</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph PresentationLayer[&quot;Presentation Layer&quot;]</div>
<div class="line">        GradioUI[&quot;Gradio UI&lt;br/&gt;(app.py:7860)&quot;]</div>
<div class="line">        NextJS[&quot;Next.js Frontend&lt;br/&gt;(frontend/:3000)&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph APILayer[&quot;API Layer&quot;]</div>
<div class="line">        FastAPI[&quot;FastAPI Backend&lt;br/&gt;(api/main.py:8000)&quot;]</div>
<div class="line">        Auth[&quot;JWT Authentication&lt;br/&gt;(api/auth.py)&quot;]</div>
<div class="line">        RateLimit[&quot;Rate Limiter&lt;br/&gt;(slowapi)&quot;]</div>
<div class="line">        CORS[&quot;CORS Middleware&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph BusinessLogic[&quot;Business Logic Layer&quot;]</div>
<div class="line">        GraphEngine[&quot;Asset Graph Engine&lt;br/&gt;(src/logic/asset_graph.py)&quot;]</div>
<div class="line">        RelBuilder[&quot;Relationship Builder&lt;br/&gt;(8 relationship types)&quot;]</div>
<div class="line">        MetricsCalc[&quot;Metrics Calculator&quot;]</div>
<div class="line">        VizData[&quot;Visualization Data&lt;br/&gt;Generator&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph DataLayer[&quot;Data Layer&quot;]</div>
<div class="line">        SampleData[&quot;Sample Data&lt;br/&gt;(src/data/sample_data.py)&quot;]</div>
<div class="line">        RealData[&quot;Real Data Fetcher&lt;br/&gt;(src/data/real_data_fetcher.py)&quot;]</div>
<div class="line">        YahooFinance[&quot;Yahoo Finance&lt;br/&gt;(yfinance)&quot;]</div>
<div class="line">        Cache[&quot;JSON File Cache&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    User --&gt; GradioUI</div>
<div class="line">    User --&gt; NextJS</div>
<div class="line">    GradioUI --&gt; GraphEngine</div>
<div class="line">    NextJS --&gt; FastAPI</div>
<div class="line">    FastAPI --&gt; CORS</div>
<div class="line">    CORS --&gt; RateLimit</div>
<div class="line">    RateLimit --&gt; Auth</div>
<div class="line">    Auth --&gt; GraphEngine</div>
<div class="line">    GraphEngine --&gt; RelBuilder</div>
<div class="line">    GraphEngine --&gt; MetricsCalc</div>
<div class="line">    GraphEngine --&gt; VizData</div>
<div class="line">    RelBuilder --&gt; SampleData</div>
<div class="line">    RelBuilder --&gt; RealData</div>
<div class="line">    RealData --&gt; YahooFinance</div>
<div class="line">    RealData --&gt; Cache</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2004"></a>
4.1.2 Request Processing Pipeline</h3>
<p>All API requests traverse a standardized pipeline that enforces security policies, rate limits, and proper error handling. The pipeline ensures consistent request processing regardless of the specific endpoint being accessed.</p>
<div class="fragment"><div class="line">flowchart LR</div>
<div class="line">    subgraph RequestPipeline[&quot;Request Processing Pipeline&quot;]</div>
<div class="line">        A[Incoming&lt;br/&gt;Request] --&gt; B{CORS&lt;br/&gt;Valid?}</div>
<div class="line">        B --&gt;|Yes| C{Rate Limit&lt;br/&gt;OK?}</div>
<div class="line">        B --&gt;|No| D[403 Forbidden]</div>
<div class="line">        C --&gt;|Yes| E{Auth&lt;br/&gt;Required?}</div>
<div class="line">        C --&gt;|No| F[429 Too Many&lt;br/&gt;Requests]</div>
<div class="line">        E --&gt;|Yes| G{Token&lt;br/&gt;Valid?}</div>
<div class="line">        E --&gt;|No| H[Process&lt;br/&gt;Request]</div>
<div class="line">        G --&gt;|Yes| H</div>
<div class="line">        G --&gt;|No| I[401&lt;br/&gt;Unauthorized]</div>
<div class="line">        H --&gt; J{Success?}</div>
<div class="line">        J --&gt;|Yes| K[200 Response]</div>
<div class="line">        J --&gt;|No| L[Error Response&lt;br/&gt;4xx/5xx]</div>
<div class="line">    end</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2005"></a>
4.1.3 System Startup Sequence</h3>
<p>The system startup sequence orchestrates the initialization of all components in the correct order, ensuring dependencies are satisfied before dependent components activate.</p>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant Uvicorn as Uvicorn Server</div>
<div class="line">    participant FastAPI as FastAPI App</div>
<div class="line">    participant Lifespan as Lifespan Manager</div>
<div class="line">    participant Graph as Graph Singleton</div>
<div class="line">    participant Factory as Graph Factory</div>
<div class="line">    participant Data as Data Source</div>
<div class="line">    participant Cache as Cache Layer</div>
<div class="line"> </div>
<div class="line">    Uvicorn-&gt;&gt;FastAPI: Start Application</div>
<div class="line">    FastAPI-&gt;&gt;Lifespan: Enter Lifespan Context</div>
<div class="line">    Lifespan-&gt;&gt;Graph: get_graph()</div>
<div class="line">    Graph-&gt;&gt;Graph: Acquire Thread Lock</div>
<div class="line"> </div>
<div class="line">    alt Graph Not Initialized</div>
<div class="line">        Graph-&gt;&gt;Factory: Check Custom Factory</div>
<div class="line">        alt Custom Factory Set</div>
<div class="line">            Factory--&gt;&gt;Graph: Create Test Graph</div>
<div class="line">        else GRAPH_CACHE_PATH Set</div>
<div class="line">            Graph-&gt;&gt;Cache: Load Cached Graph</div>
<div class="line">            Cache--&gt;&gt;Graph: Return Cached Data</div>
<div class="line">        else USE_REAL_DATA_FETCHER</div>
<div class="line">            Graph-&gt;&gt;Data: RealDataFetcher.create_real_database()</div>
<div class="line">            Data--&gt;&gt;Graph: Return Live Data</div>
<div class="line">        else Default Mode</div>
<div class="line">            Graph-&gt;&gt;Data: SampleDatabase.create_sample_database()</div>
<div class="line">            Data--&gt;&gt;Graph: Return Sample Data</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    Graph-&gt;&gt;Graph: Release Thread Lock</div>
<div class="line">    Graph--&gt;&gt;Lifespan: Graph Ready</div>
<div class="line">    Lifespan--&gt;&gt;FastAPI: Startup Complete</div>
<div class="line">    FastAPI--&gt;&gt;Uvicorn: Accepting Requests</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2006"></a>
4.2 Core Business Process Flows</h2>
<h3><a class="anchor" id="autotoc_md2007"></a>
4.2.1 Authentication Workflow</h3>
<p>The JWT-based authentication system implements a complete credential validation and token management workflow with security controls including rate limiting, constant-time password comparison, and token expiration enforcement.</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph AuthFlow[&quot;Authentication Flow&quot;]</div>
<div class="line">        Start([User Submits&lt;br/&gt;Credentials]) --&gt; RateCheck{Rate Limit&lt;br/&gt;5/min OK?}</div>
<div class="line">        RateCheck --&gt;|No| RateError[429 Too Many&lt;br/&gt;Requests]</div>
<div class="line">        RateCheck --&gt;|Yes| ParseForm[Parse OAuth2&lt;br/&gt;Form Data]</div>
<div class="line">        ParseForm --&gt; LookupUser[Lookup User&lt;br/&gt;in Repository]</div>
<div class="line">        LookupUser --&gt; UserExists{User&lt;br/&gt;Found?}</div>
<div class="line">        UserExists --&gt;|No| AuthFail[401 Incorrect&lt;br/&gt;Username/Password]</div>
<div class="line">        UserExists --&gt;|Yes| VerifyPwd[Verify Password&lt;br/&gt;pbkdf2_sha256]</div>
<div class="line">        VerifyPwd --&gt; PwdValid{Password&lt;br/&gt;Valid?}</div>
<div class="line">        PwdValid --&gt;|No| AuthFail</div>
<div class="line">        PwdValid --&gt;|Yes| CheckActive{User&lt;br/&gt;Active?}</div>
<div class="line">        CheckActive --&gt;|No| InactiveError[400 Inactive&lt;br/&gt;User]</div>
<div class="line">        CheckActive --&gt;|Yes| CreateToken[Create JWT Token&lt;br/&gt;30min Expiry]</div>
<div class="line">        CreateToken --&gt; ReturnToken[Return&lt;br/&gt;access_token&lt;br/&gt;token_type: bearer]</div>
<div class="line">        ReturnToken --&gt; EndSuccess([Success])</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2008"></a>
Token Validation Subprocess</h4>
<p>Protected endpoints validate tokens through a standardized subprocess that checks token integrity, expiration, and user status.</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph TokenValidation[&quot;Token Validation Subprocess&quot;]</div>
<div class="line">        TokenStart([Protected&lt;br/&gt;Endpoint Called]) --&gt; ExtractToken[Extract Bearer&lt;br/&gt;Token from Header]</div>
<div class="line">        ExtractToken --&gt; HasToken{Token&lt;br/&gt;Present?}</div>
<div class="line">        HasToken --&gt;|No| NoToken[401 Not&lt;br/&gt;Authenticated]</div>
<div class="line">        HasToken --&gt;|Yes| DecodeJWT[Decode JWT&lt;br/&gt;with SECRET_KEY]</div>
<div class="line">        DecodeJWT --&gt; DecodeOK{Decode&lt;br/&gt;Successful?}</div>
<div class="line">        DecodeOK --&gt;|No| InvalidToken[401 Could Not&lt;br/&gt;Validate Credentials]</div>
<div class="line">        DecodeOK --&gt;|Yes| CheckExpiry{Token&lt;br/&gt;Expired?}</div>
<div class="line">        CheckExpiry --&gt;|Yes| ExpiredToken[401 Token&lt;br/&gt;Has Expired]</div>
<div class="line">        CheckExpiry --&gt;|No| ExtractUsername[Extract Username&lt;br/&gt;from Payload]</div>
<div class="line">        ExtractUsername --&gt; LookupUser2[Lookup User&lt;br/&gt;in Repository]</div>
<div class="line">        LookupUser2 --&gt; UserFound{User&lt;br/&gt;Found?}</div>
<div class="line">        UserFound --&gt;|No| InvalidToken</div>
<div class="line">        UserFound --&gt;|Yes| CheckActive2{User&lt;br/&gt;Active?}</div>
<div class="line">        CheckActive2 --&gt;|No| InactiveUser[400 Inactive&lt;br/&gt;User]</div>
<div class="line">        CheckActive2 --&gt;|Yes| ReturnUser[Return&lt;br/&gt;Authenticated User]</div>
<div class="line">        ReturnUser --&gt; TokenEnd([Proceed to&lt;br/&gt;Endpoint Logic])</div>
<div class="line">    end</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2009"></a>
4.2.2 Data Ingestion Workflow</h3>
<p>The data ingestion workflow manages the creation and population of the asset graph from various data sources, implementing caching, fallback mechanisms, and atomic write operations for data integrity.</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph DataIngestion[&quot;Data Ingestion Workflow&quot;]</div>
<div class="line">        IngestStart([Start Data&lt;br/&gt;Ingestion]) --&gt; CheckCache{Cache File&lt;br/&gt;Exists?}</div>
<div class="line">        CheckCache --&gt;|Yes| LoadCache[Load Cached&lt;br/&gt;Graph JSON]</div>
<div class="line">        LoadCache --&gt; CacheValid{Cache&lt;br/&gt;Valid?}</div>
<div class="line">        CacheValid --&gt;|Yes| UseCache[Use Cached&lt;br/&gt;Graph Data]</div>
<div class="line">        CacheValid --&gt;|No| FreshFetch[Proceed to&lt;br/&gt;Fresh Fetch]</div>
<div class="line">        CheckCache --&gt;|No| FreshFetch</div>
<div class="line">        FreshFetch --&gt; CheckNetwork{Network&lt;br/&gt;Enabled?}</div>
<div class="line">        CheckNetwork --&gt;|No| UseFallback[Use Fallback&lt;br/&gt;Sample Data]</div>
<div class="line">        CheckNetwork --&gt;|Yes| FetchEquities[Fetch Equities&lt;br/&gt;AAPL, MSFT, XOM, JPM]</div>
<div class="line">        FetchEquities --&gt; FetchBonds[Fetch Bond ETFs&lt;br/&gt;TLT, LQD, HYG]</div>
<div class="line">        FetchBonds --&gt; FetchCommodities[Fetch Commodities&lt;br/&gt;GC=F, CL=F, SI=F]</div>
<div class="line">        FetchCommodities --&gt; FetchCurrencies[Fetch Currencies&lt;br/&gt;EURUSD, GBPUSD, JPYUSD]</div>
<div class="line">        FetchCurrencies --&gt; CreateEvents[Create Regulatory&lt;br/&gt;Events]</div>
<div class="line">        CreateEvents --&gt; PopulateGraph[Populate Graph&lt;br/&gt;with Assets]</div>
<div class="line">        PopulateGraph --&gt; BuildRelations[Build&lt;br/&gt;Relationships]</div>
<div class="line">        BuildRelations --&gt; SaveCache[Save to Cache&lt;br/&gt;Atomic Write]</div>
<div class="line">        UseCache --&gt; IngestEnd([Graph&lt;br/&gt;Ready])</div>
<div class="line">        UseFallback --&gt; PopulateSample[Populate Sample&lt;br/&gt;Database]</div>
<div class="line">        PopulateSample --&gt; BuildRelations</div>
<div class="line">        SaveCache --&gt; IngestEnd</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2010"></a>
Atomic Cache Write Subprocess</h4>
<p>The atomic cache write operation ensures data integrity by using temporary files and atomic rename operations.</p>
<div class="fragment"><div class="line">flowchart LR</div>
<div class="line">    subgraph AtomicWrite[&quot;Atomic Cache Write&quot;]</div>
<div class="line">        WriteStart([Start&lt;br/&gt;Cache Write]) --&gt; CreateTemp[Create&lt;br/&gt;NamedTemporaryFile]</div>
<div class="line">        CreateTemp --&gt; WriteJSON[Write JSON&lt;br/&gt;to Temp File]</div>
<div class="line">        WriteJSON --&gt; CloseTemp[Close&lt;br/&gt;Temp File]</div>
<div class="line">        CloseTemp --&gt; AtomicReplace[os.replace()&lt;br/&gt;Atomic Rename]</div>
<div class="line">        AtomicReplace --&gt; WriteEnd([Cache Write&lt;br/&gt;Complete])</div>
<div class="line">    end</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2011"></a>
4.2.3 Relationship Discovery Workflow</h3>
<p>The relationship discovery engine processes all assets to identify eight distinct relationship types using rule-based detection algorithms.</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph RelDiscovery[&quot;Relationship Discovery Workflow&quot;]</div>
<div class="line">        RelStart([Start Relationship&lt;br/&gt;Discovery]) --&gt; GetAssets[Get All&lt;br/&gt;Assets]</div>
<div class="line">        GetAssets --&gt; InitRels[Initialize Empty&lt;br/&gt;Relationships Dict]</div>
<div class="line">        InitRels --&gt; SameSector[Detect&lt;br/&gt;same_sector&lt;br/&gt;Bidirectional]</div>
<div class="line">        SameSector --&gt; CorpBond[Detect&lt;br/&gt;corporate_bond_to_equity&lt;br/&gt;Directional]</div>
<div class="line">        CorpBond --&gt; CommodExp[Detect&lt;br/&gt;commodity_exposure&lt;br/&gt;Directional]</div>
<div class="line">        CommodExp --&gt; CurrRisk[Detect&lt;br/&gt;currency_risk&lt;br/&gt;Directional]</div>
<div class="line">        CurrRisk --&gt; IncomeComp[Detect&lt;br/&gt;income_comparison&lt;br/&gt;Bidirectional]</div>
<div class="line">        IncomeComp --&gt; RegImpact[Detect&lt;br/&gt;regulatory_impact&lt;br/&gt;Directional]</div>
<div class="line">        RegImpact --&gt; MarketCap[Detect&lt;br/&gt;market_cap_similar&lt;br/&gt;Bidirectional]</div>
<div class="line">        MarketCap --&gt; Correlation[Detect&lt;br/&gt;correlation&lt;br/&gt;Bidirectional]</div>
<div class="line">        Correlation --&gt; StoreRels[Store Relationships&lt;br/&gt;in Graph]</div>
<div class="line">        StoreRels --&gt; RelEnd([Relationships&lt;br/&gt;Built])</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2012"></a>
Relationship Detection Rules</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Relationship Type   </th><th class="markdownTableHeadNone">Detection Rule   </th><th class="markdownTableHeadNone">Directionality   </th><th class="markdownTableHeadNone">Strength Calculation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>same_sector</code>   </td><td class="markdownTableBodyNone">Assets share identical sector value   </td><td class="markdownTableBodyNone">Bidirectional   </td><td class="markdownTableBodyNone">Fixed: 0.8    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>corporate_bond_to_equity</code>   </td><td class="markdownTableBodyNone">Bond.issuer_id matches Equity.id   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">Based on credit rating    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>commodity_exposure</code>   </td><td class="markdownTableBodyNone">Equity sector linked to commodity type   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">Sector correlation coefficient    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>currency_risk</code>   </td><td class="markdownTableBodyNone">Asset currency ≠ USD   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">Exchange rate volatility    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>income_comparison</code>   </td><td class="markdownTableBodyNone">Dividend yield vs bond yield comparison   </td><td class="markdownTableBodyNone">Bidirectional   </td><td class="markdownTableBodyNone">Yield differential    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>regulatory_impact</code>   </td><td class="markdownTableBodyNone">Shared regulatory event with impact_score   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">Event impact_score    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>market_cap_similar</code>   </td><td class="markdownTableBodyNone">Market cap within 50% range   </td><td class="markdownTableBodyNone">Bidirectional   </td><td class="markdownTableBodyNone">Similarity ratio    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>correlation</code>   </td><td class="markdownTableBodyNone">Price correlation &gt; threshold   </td><td class="markdownTableBodyNone">Bidirectional   </td><td class="markdownTableBodyNone">Correlation coefficient   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md2013"></a>
4.3 API Request Workflows</h2>
<h3><a class="anchor" id="autotoc_md2014"></a>
4.3.1 Asset Listing Flow</h3>
<p>The asset listing endpoint (<code>GET /api/assets</code>) supports optional filtering by asset class and sector with efficient iteration over the in-memory graph.</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph AssetListing[&quot;GET /api/assets Workflow&quot;]</div>
<div class="line">        ListStart([GET /api/assets&lt;br/&gt;Request]) --&gt; ParseParams[Parse Query&lt;br/&gt;Parameters]</div>
<div class="line">        ParseParams --&gt; GetGraph[get_graph()&lt;br/&gt;Thread-Safe]</div>
<div class="line">        GetGraph --&gt; InitResults[Initialize&lt;br/&gt;Results List]</div>
<div class="line">        InitResults --&gt; IterAssets[Iterate&lt;br/&gt;graph.assets]</div>
<div class="line">        IterAssets --&gt; NextAsset{More&lt;br/&gt;Assets?}</div>
<div class="line">        NextAsset --&gt;|Yes| CheckClassFilter{asset_class&lt;br/&gt;Filter Set?}</div>
<div class="line">        CheckClassFilter --&gt;|Yes| MatchClass{Asset Matches&lt;br/&gt;Class?}</div>
<div class="line">        MatchClass --&gt;|No| IterAssets</div>
<div class="line">        MatchClass --&gt;|Yes| CheckSectorFilter</div>
<div class="line">        CheckClassFilter --&gt;|No| CheckSectorFilter{sector&lt;br/&gt;Filter Set?}</div>
<div class="line">        CheckSectorFilter --&gt;|Yes| MatchSector{Asset Matches&lt;br/&gt;Sector?}</div>
<div class="line">        MatchSector --&gt;|No| IterAssets</div>
<div class="line">        MatchSector --&gt;|Yes| Serialize[serialize_asset()]</div>
<div class="line">        CheckSectorFilter --&gt;|No| Serialize</div>
<div class="line">        Serialize --&gt; AddResult[Add to&lt;br/&gt;Results]</div>
<div class="line">        AddResult --&gt; IterAssets</div>
<div class="line">        NextAsset --&gt;|No| ReturnList[Return&lt;br/&gt;List of Assets]</div>
<div class="line">        ReturnList --&gt; ListEnd([200 OK&lt;br/&gt;JSON Response])</div>
<div class="line">    end</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2015"></a>
4.3.2 Visualization Data Flow</h3>
<p>The visualization endpoint (<code>GET /api/visualization</code>) generates complete 3D graph data including node positions, colors, and edge connections.</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph VizFlow[&quot;GET /api/visualization Workflow&quot;]</div>
<div class="line">        VizStart([GET /api/visualization&lt;br/&gt;Request]) --&gt; GetGraph2[get_graph()&lt;br/&gt;Thread-Safe]</div>
<div class="line">        GetGraph2 --&gt; CallViz[Call get_3d_visualization_data_enhanced()]</div>
<div class="line">        CallViz --&gt; GenPositions[Generate 3D&lt;br/&gt;Positions]</div>
<div class="line">        GenPositions --&gt; SetSeed[Set Random Seed=42&lt;br/&gt;Deterministic]</div>
<div class="line">        SetSeed --&gt; CalcPositions[Calculate Node&lt;br/&gt;Coordinates]</div>
<div class="line">        CalcPositions --&gt; GenColors[Generate Colors&lt;br/&gt;by Asset Class]</div>
<div class="line">        GenColors --&gt; GenHover[Generate&lt;br/&gt;Hover Text]</div>
<div class="line">        GenHover --&gt; BuildNodes[Build Nodes&lt;br/&gt;Array]</div>
<div class="line">        BuildNodes --&gt; BuildEdges[Build Edges&lt;br/&gt;from Relationships]</div>
<div class="line">        BuildEdges --&gt; SerializeViz[Serialize to&lt;br/&gt;VisualizationDataResponse]</div>
<div class="line">        SerializeViz --&gt; VizEnd([200 OK&lt;br/&gt;JSON Response])</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2016"></a>
Color Mapping for Asset Classes</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Asset Class   </th><th class="markdownTableHeadNone">Color Code   </th><th class="markdownTableHeadNone">Visual    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Equity   </td><td class="markdownTableBodyNone">Blue (#1f77b4)   </td><td class="markdownTableBodyNone">Standard equities    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Fixed Income   </td><td class="markdownTableBodyNone">Green (#2ca02c)   </td><td class="markdownTableBodyNone">Bonds and bond ETFs    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Commodity   </td><td class="markdownTableBodyNone">Orange (#ff7f0e)   </td><td class="markdownTableBodyNone">Commodity futures    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Currency   </td><td class="markdownTableBodyNone">Red (#d62728)   </td><td class="markdownTableBodyNone">Currency pairs    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Derivative   </td><td class="markdownTableBodyNone">Purple (#9467bd)   </td><td class="markdownTableBodyNone">Derivatives   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2017"></a>
4.3.3 Metrics Calculation Flow</h3>
<p>The metrics endpoint (<code>GET /api/metrics</code>) calculates and returns network statistics including density, degree distribution, and asset class breakdowns.</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph MetricsFlow[&quot;GET /api/metrics Workflow&quot;]</div>
<div class="line">        MetStart([GET /api/metrics&lt;br/&gt;Request]) --&gt; GetGraph3[get_graph()&lt;br/&gt;Thread-Safe]</div>
<div class="line">        GetGraph3 --&gt; CallMetrics[Call calculate_metrics()]</div>
<div class="line">        CallMetrics --&gt; CountAssets[Count Total&lt;br/&gt;Assets]</div>
<div class="line">        CountAssets --&gt; CountRels[Count Total&lt;br/&gt;Relationships]</div>
<div class="line">        CountRels --&gt; CalcByClass[Calculate Assets&lt;br/&gt;by Class]</div>
<div class="line">        CalcByClass --&gt; CalcDegree[Calculate&lt;br/&gt;Avg/Max Degree]</div>
<div class="line">        CalcDegree --&gt; CalcDensity[Calculate Network&lt;br/&gt;Density]</div>
<div class="line">        CalcDensity --&gt; BuildResponse[Build&lt;br/&gt;MetricsResponse]</div>
<div class="line">        BuildResponse --&gt; MetEnd([200 OK&lt;br/&gt;JSON Response])</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2018"></a>
Metrics Calculation Formulas</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Metric   </th><th class="markdownTableHeadNone">Formula   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Total Assets   </td><td class="markdownTableBodyNone"><code>len(graph.assets)</code>   </td><td class="markdownTableBodyNone">Count of all asset nodes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Total Relationships   </td><td class="markdownTableBodyNone"><code>sum(len(edges) for edges in graph.relationships.values())</code>   </td><td class="markdownTableBodyNone">Count of all edges    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Average Degree   </td><td class="markdownTableBodyNone"><code>(2 × total_relationships) / total_assets</code>   </td><td class="markdownTableBodyNone">Mean connections per node    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Max Degree   </td><td class="markdownTableBodyNone"><code>max(len(edges) for edges in graph.relationships.values())</code>   </td><td class="markdownTableBodyNone">Highest connected node    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Network Density   </td><td class="markdownTableBodyNone"><code>total_relationships / (total_assets × (total_assets - 1) / 2)</code>   </td><td class="markdownTableBodyNone">Ratio of actual to possible edges   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md2019"></a>
4.4 Frontend Workflows</h2>
<h3><a class="anchor" id="autotoc_md2020"></a>
4.4.1 Next.js Page Load Flow</h3>
<p>The Next.js frontend implements a client-side data loading pattern with error handling and retry capabilities.</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph NextJSFlow[&quot;Next.js Page Load Workflow&quot;]</div>
<div class="line">        PageStart([Page Mount&lt;br/&gt;useEffect]) --&gt; SetLoading[Set Loading&lt;br/&gt;State = true]</div>
<div class="line">        SetLoading --&gt; FetchData[Promise.all:&lt;br/&gt;getMetrics()&lt;br/&gt;getVisualizationData()]</div>
<div class="line">        FetchData --&gt; FetchResult{Fetch&lt;br/&gt;Successful?}</div>
<div class="line">        FetchResult --&gt;|Yes| StoreData[Store Data&lt;br/&gt;in State]</div>
<div class="line">        StoreData --&gt; ClearLoading[Clear Loading&lt;br/&gt;State]</div>
<div class="line">        ClearLoading --&gt; RenderUI[Render UI&lt;br/&gt;Components]</div>
<div class="line">        RenderUI --&gt; PageEnd([Page&lt;br/&gt;Ready])</div>
<div class="line">        FetchResult --&gt;|No| SetError[Set Error&lt;br/&gt;State]</div>
<div class="line">        SetError --&gt; ShowRetry[Show Retry&lt;br/&gt;Button]</div>
<div class="line">        ShowRetry --&gt; UserRetry{User Clicks&lt;br/&gt;Retry?}</div>
<div class="line">        UserRetry --&gt;|Yes| SetLoading</div>
<div class="line">        UserRetry --&gt;|No| WaitAction([Wait for&lt;br/&gt;User Action])</div>
<div class="line">    end</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2021"></a>
4.4.2 Gradio UI Event Flow</h3>
<p>The Gradio interface manages state and user interactions through an event-driven architecture with real-time visualization updates.</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph GradioFlow[&quot;Gradio UI Event Flow&quot;]</div>
<div class="line">        GradioStart([Gradio App&lt;br/&gt;Starts]) --&gt; InitGraph[Initialize&lt;br/&gt;Graph State]</div>
<div class="line">        InitGraph --&gt; CreateInterface[Create Blocks&lt;br/&gt;Interface]</div>
<div class="line">        CreateInterface --&gt; SetupTabs[Setup 6&lt;br/&gt;Tabs]</div>
<div class="line">        SetupTabs --&gt; WireEvents[Wire Event&lt;br/&gt;Handlers]</div>
<div class="line">        WireEvents --&gt; LaunchServer[Launch Server&lt;br/&gt;Port 7860]</div>
<div class="line">        LaunchServer --&gt; WaitEvent([Wait for&lt;br/&gt;User Event])</div>
<div class="line">        WaitEvent --&gt; UserAction{User&lt;br/&gt;Action Type}</div>
<div class="line">        UserAction --&gt;|Refresh| RefreshAll[refresh_all_outputs()]</div>
<div class="line">        UserAction --&gt;|Filter Change| UpdateViz[refresh_visualization()]</div>
<div class="line">        UserAction --&gt;|Tab Change| LoadTab[Load Tab&lt;br/&gt;Content]</div>
<div class="line">        UserAction --&gt;|Asset Select| UpdateAsset[update_asset_info()]</div>
<div class="line">        RefreshAll --&gt; WaitEvent</div>
<div class="line">        UpdateViz --&gt; WaitEvent</div>
<div class="line">        LoadTab --&gt; WaitEvent</div>
<div class="line">        UpdateAsset --&gt; WaitEvent</div>
<div class="line">    end</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2022"></a>
4.4.3 Tab Navigation State Machine</h3>
<div class="fragment"><div class="line">stateDiagram-v2</div>
<div class="line">    [*] --&gt; Visualization: Default Tab</div>
<div class="line"> </div>
<div class="line">    Visualization --&gt; Metrics: Tab Click</div>
<div class="line">    Visualization --&gt; SchemaRules: Tab Click</div>
<div class="line">    Visualization --&gt; AssetExplorer: Tab Click</div>
<div class="line">    Visualization --&gt; Documentation: Tab Click</div>
<div class="line">    Visualization --&gt; FormulaicAnalysis: Tab Click</div>
<div class="line"> </div>
<div class="line">    Metrics --&gt; Visualization: Tab Click</div>
<div class="line">    Metrics --&gt; SchemaRules: Tab Click</div>
<div class="line">    Metrics --&gt; AssetExplorer: Tab Click</div>
<div class="line">    Metrics --&gt; Documentation: Tab Click</div>
<div class="line">    Metrics --&gt; FormulaicAnalysis: Tab Click</div>
<div class="line"> </div>
<div class="line">    SchemaRules --&gt; Visualization: Tab Click</div>
<div class="line">    SchemaRules --&gt; Metrics: Tab Click</div>
<div class="line">    SchemaRules --&gt; AssetExplorer: Tab Click</div>
<div class="line">    SchemaRules --&gt; Documentation: Tab Click</div>
<div class="line">    SchemaRules --&gt; FormulaicAnalysis: Tab Click</div>
<div class="line"> </div>
<div class="line">    AssetExplorer --&gt; Visualization: Tab Click</div>
<div class="line">    AssetExplorer --&gt; Metrics: Tab Click</div>
<div class="line">    AssetExplorer --&gt; SchemaRules: Tab Click</div>
<div class="line">    AssetExplorer --&gt; Documentation: Tab Click</div>
<div class="line">    AssetExplorer --&gt; FormulaicAnalysis: Tab Click</div>
<div class="line"> </div>
<div class="line">    Documentation --&gt; Visualization: Tab Click</div>
<div class="line">    Documentation --&gt; Metrics: Tab Click</div>
<div class="line">    Documentation --&gt; SchemaRules: Tab Click</div>
<div class="line">    Documentation --&gt; AssetExplorer: Tab Click</div>
<div class="line">    Documentation --&gt; FormulaicAnalysis: Tab Click</div>
<div class="line"> </div>
<div class="line">    FormulaicAnalysis --&gt; Visualization: Tab Click</div>
<div class="line">    FormulaicAnalysis --&gt; Metrics: Tab Click</div>
<div class="line">    FormulaicAnalysis --&gt; SchemaRules: Tab Click</div>
<div class="line">    FormulaicAnalysis --&gt; AssetExplorer: Tab Click</div>
<div class="line">    FormulaicAnalysis --&gt; Documentation: Tab Click</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2023"></a>
4.5 Error Handling Workflows</h2>
<h3><a class="anchor" id="autotoc_md2024"></a>
4.5.1 API Error Handling Flow</h3>
<p>The API implements comprehensive error handling with proper HTTP status codes and informative error messages.</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph APIErrors[&quot;API Error Handling Flow&quot;]</div>
<div class="line">        ErrStart([Error&lt;br/&gt;Occurs]) --&gt; ErrType{Error&lt;br/&gt;Type?}</div>
<div class="line"> </div>
<div class="line">        ErrType --&gt;|HTTPException| HTTPErr[Return HTTP&lt;br/&gt;Error Code]</div>
<div class="line">        HTTPErr --&gt; HTTP401{401?}</div>
<div class="line">        HTTP401 --&gt;|Yes| AddAuth[Add WWW-Authenticate&lt;br/&gt;Bearer Header]</div>
<div class="line">        HTTP401 --&gt;|No| HTTP404{404?}</div>
<div class="line">        HTTP404 --&gt;|Yes| NotFound[Return&lt;br/&gt;Not Found Detail]</div>
<div class="line">        HTTP404 --&gt;|No| HTTP400{400?}</div>
<div class="line">        HTTP400 --&gt;|Yes| BadRequest[Return&lt;br/&gt;Bad Request Detail]</div>
<div class="line">        HTTP400 --&gt;|No| OtherHTTP[Return&lt;br/&gt;Error Detail]</div>
<div class="line"> </div>
<div class="line">        ErrType --&gt;|Rate Limit| RateErr[429 Too Many&lt;br/&gt;Requests]</div>
<div class="line">        RateErr --&gt; AddRetry[Add Retry-After&lt;br/&gt;Header]</div>
<div class="line"> </div>
<div class="line">        ErrType --&gt;|Validation| ValErr[422 Validation&lt;br/&gt;Error]</div>
<div class="line">        ValErr --&gt; PydanticDetail[Return Pydantic&lt;br/&gt;Error Details]</div>
<div class="line"> </div>
<div class="line">        ErrType --&gt;|Unexpected| UnexpErr[Log Exception]</div>
<div class="line">        UnexpErr --&gt; Return500[500 Internal&lt;br/&gt;Server Error]</div>
<div class="line"> </div>
<div class="line">        AddAuth --&gt; ErrEnd([Error Response&lt;br/&gt;Sent])</div>
<div class="line">        NotFound --&gt; ErrEnd</div>
<div class="line">        BadRequest --&gt; ErrEnd</div>
<div class="line">        OtherHTTP --&gt; ErrEnd</div>
<div class="line">        AddRetry --&gt; ErrEnd</div>
<div class="line">        PydanticDetail --&gt; ErrEnd</div>
<div class="line">        Return500 --&gt; ErrEnd</div>
<div class="line">    end</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2025"></a>
4.5.2 Authentication Error Scenarios</h3>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph AuthErrors[&quot;Authentication Error Scenarios&quot;]</div>
<div class="line">        AuthErrStart([Auth Error&lt;br/&gt;Detected]) --&gt; AuthErrType{Error&lt;br/&gt;Scenario}</div>
<div class="line"> </div>
<div class="line">        AuthErrType --&gt;|Invalid Credentials| InvalidCred[&quot;401: Incorrect&lt;br/&gt;username or password&quot;]</div>
<div class="line">        AuthErrType --&gt;|Expired Token| ExpiredTok[&quot;401: Token&lt;br/&gt;has expired&quot;]</div>
<div class="line">        AuthErrType --&gt;|Malformed Token| MalformedTok[&quot;401: Could not&lt;br/&gt;validate credentials&quot;]</div>
<div class="line">        AuthErrType --&gt;|Missing Token| MissingTok[&quot;401: Not&lt;br/&gt;authenticated&quot;]</div>
<div class="line">        AuthErrType --&gt;|Disabled Account| DisabledAcc[&quot;400: Inactive&lt;br/&gt;user&quot;]</div>
<div class="line">        AuthErrType --&gt;|Rate Limited| RateLimited[&quot;429: Too many&lt;br/&gt;requests&quot;]</div>
<div class="line"> </div>
<div class="line">        InvalidCred --&gt; RetryPrompt[Prompt User&lt;br/&gt;to Retry]</div>
<div class="line">        ExpiredTok --&gt; ReAuth[Redirect to&lt;br/&gt;Re-authenticate]</div>
<div class="line">        MalformedTok --&gt; ReAuth</div>
<div class="line">        MissingTok --&gt; LoginPrompt[Show Login&lt;br/&gt;Form]</div>
<div class="line">        DisabledAcc --&gt; ContactAdmin[Contact&lt;br/&gt;Administrator]</div>
<div class="line">        RateLimited --&gt; WaitRetry[Wait and&lt;br/&gt;Retry]</div>
<div class="line"> </div>
<div class="line">        RetryPrompt --&gt; AuthErrEnd([Error&lt;br/&gt;Handled])</div>
<div class="line">        ReAuth --&gt; AuthErrEnd</div>
<div class="line">        LoginPrompt --&gt; AuthErrEnd</div>
<div class="line">        ContactAdmin --&gt; AuthErrEnd</div>
<div class="line">        WaitRetry --&gt; AuthErrEnd</div>
<div class="line">    end</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2026"></a>
4.5.3 Graph Initialization Error Handling</h3>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph GraphErrors[&quot;Graph Initialization Error Handling&quot;]</div>
<div class="line">        GraphErrStart([Graph Init&lt;br/&gt;Error]) --&gt; ErrSource{Error&lt;br/&gt;Source}</div>
<div class="line"> </div>
<div class="line">        ErrSource --&gt;|Cache Load Failed| CacheErr[Log Cache&lt;br/&gt;Error]</div>
<div class="line">        CacheErr --&gt; FallbackFetch[Proceed to&lt;br/&gt;Standard Fetch]</div>
<div class="line"> </div>
<div class="line">        ErrSource --&gt;|Network Disabled| NetErr[Network&lt;br/&gt;Unavailable]</div>
<div class="line">        NetErr --&gt; UseSample[Use Sample&lt;br/&gt;Data Fallback]</div>
<div class="line"> </div>
<div class="line">        ErrSource --&gt;|Yahoo Finance Error| YFErr[Log Yahoo&lt;br/&gt;Finance Error]</div>
<div class="line">        YFErr --&gt; CheckPartial{Partial Data&lt;br/&gt;Retrieved?}</div>
<div class="line">        CheckPartial --&gt;|Yes| UsePartial[Use Available&lt;br/&gt;Data]</div>
<div class="line">        CheckPartial --&gt;|No| UseSample</div>
<div class="line"> </div>
<div class="line">        ErrSource --&gt;|Critical Failure| CritErr[Log Critical&lt;br/&gt;Error]</div>
<div class="line">        CritErr --&gt; AbortStartup[Abort&lt;br/&gt;Application Startup]</div>
<div class="line"> </div>
<div class="line">        FallbackFetch --&gt; GraphReady([Graph&lt;br/&gt;Initialized])</div>
<div class="line">        UseSample --&gt; GraphReady</div>
<div class="line">        UsePartial --&gt; GraphReady</div>
<div class="line">        AbortStartup --&gt; StartupFailed([Startup&lt;br/&gt;Failed])</div>
<div class="line">    end</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2027"></a>
4.5.4 Frontend Error Recovery Flow</h3>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph FrontendErrors[&quot;Frontend Error Recovery&quot;]</div>
<div class="line">        FEStart([Frontend Error&lt;br/&gt;Detected]) --&gt; ErrCategory{Error&lt;br/&gt;Category}</div>
<div class="line"> </div>
<div class="line">        ErrCategory --&gt;|Network Error| NetError[Set Error:&lt;br/&gt;Network Unavailable]</div>
<div class="line">        ErrCategory --&gt;|API Error| APIError[Set Error:&lt;br/&gt;API Error Message]</div>
<div class="line">        ErrCategory --&gt;|Render Error| RenderError[Set Error:&lt;br/&gt;Display Error]</div>
<div class="line"> </div>
<div class="line">        NetError --&gt; ShowRetryUI[Show Retry&lt;br/&gt;Button]</div>
<div class="line">        APIError --&gt; ShowRetryUI</div>
<div class="line">        RenderError --&gt; ShowRefresh[Show Refresh&lt;br/&gt;Page Option]</div>
<div class="line"> </div>
<div class="line">        ShowRetryUI --&gt; UserRetries{User&lt;br/&gt;Retries?}</div>
<div class="line">        UserRetries --&gt;|Yes| ClearError[Clear Error&lt;br/&gt;State]</div>
<div class="line">        ClearError --&gt; ReloadData[Reload&lt;br/&gt;Data]</div>
<div class="line">        ReloadData --&gt; Success{Success?}</div>
<div class="line">        Success --&gt;|Yes| Normal([Normal&lt;br/&gt;Operation])</div>
<div class="line">        Success --&gt;|No| NetError</div>
<div class="line">        UserRetries --&gt;|No| WaitUser([Wait for&lt;br/&gt;User])</div>
<div class="line"> </div>
<div class="line">        ShowRefresh --&gt; UserRefresh{User&lt;br/&gt;Refreshes?}</div>
<div class="line">        UserRefresh --&gt;|Yes| PageReload[Full Page&lt;br/&gt;Reload]</div>
<div class="line">        PageReload --&gt; Normal</div>
<div class="line">        UserRefresh --&gt;|No| WaitUser</div>
<div class="line">    end</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2028"></a>
4.6 Integration Sequence Diagrams</h2>
<h3><a class="anchor" id="autotoc_md2029"></a>
4.6.1 Frontend-Backend API Integration</h3>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant User as User Browser</div>
<div class="line">    participant NextJS as Next.js Frontend</div>
<div class="line">    participant Axios as Axios Client</div>
<div class="line">    participant CORS as CORS Middleware</div>
<div class="line">    participant FastAPI as FastAPI Backend</div>
<div class="line">    participant Graph as Graph Engine</div>
<div class="line"> </div>
<div class="line">    User-&gt;&gt;NextJS: Navigate to Page</div>
<div class="line">    NextJS-&gt;&gt;Axios: api.getMetrics()</div>
<div class="line">    Axios-&gt;&gt;CORS: GET /api/metrics</div>
<div class="line">    CORS-&gt;&gt;CORS: Validate Origin</div>
<div class="line"> </div>
<div class="line">    alt Origin Valid</div>
<div class="line">        CORS-&gt;&gt;FastAPI: Forward Request</div>
<div class="line">        FastAPI-&gt;&gt;Graph: get_graph()</div>
<div class="line">        Graph--&gt;&gt;FastAPI: Graph Instance</div>
<div class="line">        FastAPI-&gt;&gt;Graph: calculate_metrics()</div>
<div class="line">        Graph--&gt;&gt;FastAPI: Metrics Data</div>
<div class="line">        FastAPI--&gt;&gt;CORS: MetricsResponse</div>
<div class="line">        CORS--&gt;&gt;Axios: 200 OK + CORS Headers</div>
<div class="line">        Axios--&gt;&gt;NextJS: Response Data</div>
<div class="line">        NextJS--&gt;&gt;User: Render Metrics</div>
<div class="line">    else Origin Invalid</div>
<div class="line">        CORS--&gt;&gt;Axios: 403 Forbidden</div>
<div class="line">        Axios--&gt;&gt;NextJS: Error</div>
<div class="line">        NextJS--&gt;&gt;User: Show Error Message</div>
<div class="line">    end</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2030"></a>
4.6.2 Authentication Token Flow</h3>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant Client as API Client</div>
<div class="line">    participant RateLimiter as Rate Limiter</div>
<div class="line">    participant Auth as Auth Module</div>
<div class="line">    participant UserRepo as User Repository</div>
<div class="line">    participant JWT as JWT Library</div>
<div class="line"> </div>
<div class="line">    Client-&gt;&gt;RateLimiter: POST /token</div>
<div class="line">    RateLimiter-&gt;&gt;RateLimiter: Check 5/min limit</div>
<div class="line"> </div>
<div class="line">    alt Rate Limit OK</div>
<div class="line">        RateLimiter-&gt;&gt;Auth: Process Login</div>
<div class="line">        Auth-&gt;&gt;UserRepo: get_user(username)</div>
<div class="line">        UserRepo--&gt;&gt;Auth: User or None</div>
<div class="line"> </div>
<div class="line">        alt User Found</div>
<div class="line">            Auth-&gt;&gt;Auth: verify_password(plain, hashed)</div>
<div class="line"> </div>
<div class="line">            alt Password Valid</div>
<div class="line">                Auth-&gt;&gt;JWT: encode(payload, SECRET_KEY, HS256)</div>
<div class="line">                JWT--&gt;&gt;Auth: Access Token</div>
<div class="line">                Auth--&gt;&gt;Client: {&quot;access_token&quot;: &quot;...&quot;, &quot;token_type&quot;: &quot;bearer&quot;}</div>
<div class="line">            else Password Invalid</div>
<div class="line">                Auth--&gt;&gt;Client: 401 Incorrect username or password</div>
<div class="line">            end</div>
<div class="line">        else User Not Found</div>
<div class="line">            Auth--&gt;&gt;Client: 401 Incorrect username or password</div>
<div class="line">        end</div>
<div class="line">    else Rate Limit Exceeded</div>
<div class="line">        RateLimiter--&gt;&gt;Client: 429 Too Many Requests</div>
<div class="line">    end</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2031"></a>
4.6.3 Real Data Fetching Integration</h3>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant App as Application</div>
<div class="line">    participant Fetcher as RealDataFetcher</div>
<div class="line">    participant Cache as File Cache</div>
<div class="line">    participant YF as Yahoo Finance</div>
<div class="line">    participant Graph as Graph Engine</div>
<div class="line"> </div>
<div class="line">    App-&gt;&gt;Fetcher: create_real_database()</div>
<div class="line">    Fetcher-&gt;&gt;Cache: Check cache file</div>
<div class="line"> </div>
<div class="line">    alt Cache Exists</div>
<div class="line">        Cache--&gt;&gt;Fetcher: Cached JSON</div>
<div class="line">        Fetcher-&gt;&gt;Graph: Load from cache</div>
<div class="line">        Graph--&gt;&gt;App: Cached Graph</div>
<div class="line">    else No Cache</div>
<div class="line">        Fetcher-&gt;&gt;YF: Download AAPL, MSFT, XOM, JPM</div>
<div class="line">        YF--&gt;&gt;Fetcher: Equity Data</div>
<div class="line">        Fetcher-&gt;&gt;YF: Download TLT, LQD, HYG</div>
<div class="line">        YF--&gt;&gt;Fetcher: Bond ETF Data</div>
<div class="line">        Fetcher-&gt;&gt;YF: Download GC=F, CL=F, SI=F</div>
<div class="line">        YF--&gt;&gt;Fetcher: Commodity Data</div>
<div class="line">        Fetcher-&gt;&gt;YF: Download EURUSD=X, GBPUSD=X, JPYUSD=X</div>
<div class="line">        YF--&gt;&gt;Fetcher: Currency Data</div>
<div class="line"> </div>
<div class="line">        Fetcher-&gt;&gt;Graph: add_asset() × N</div>
<div class="line">        Fetcher-&gt;&gt;Graph: add_regulatory_event() × N</div>
<div class="line">        Fetcher-&gt;&gt;Graph: build_relationships()</div>
<div class="line"> </div>
<div class="line">        Fetcher-&gt;&gt;Cache: Write temp file</div>
<div class="line">        Cache-&gt;&gt;Cache: Atomic rename</div>
<div class="line">        Cache--&gt;&gt;Fetcher: Cache saved</div>
<div class="line"> </div>
<div class="line">        Graph--&gt;&gt;App: Fresh Graph</div>
<div class="line">    end</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2032"></a>
4.6.4 Visualization Rendering Pipeline</h3>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant User as User</div>
<div class="line">    participant UI as UI Component</div>
<div class="line">    participant API as API Layer</div>
<div class="line">    participant Graph as Graph Engine</div>
<div class="line">    participant Viz as Visualization Module</div>
<div class="line">    participant Plotly as Plotly Renderer</div>
<div class="line"> </div>
<div class="line">    User-&gt;&gt;UI: Request 3D Visualization</div>
<div class="line">    UI-&gt;&gt;API: GET /api/visualization</div>
<div class="line">    API-&gt;&gt;Graph: get_graph()</div>
<div class="line">    Graph--&gt;&gt;API: Graph Instance</div>
<div class="line">    API-&gt;&gt;Viz: get_3d_visualization_data_enhanced()</div>
<div class="line">    Viz-&gt;&gt;Viz: Set seed(42)</div>
<div class="line">    Viz-&gt;&gt;Viz: Calculate 3D positions</div>
<div class="line">    Viz-&gt;&gt;Viz: Assign colors by asset class</div>
<div class="line">    Viz-&gt;&gt;Viz: Generate hover text</div>
<div class="line">    Viz--&gt;&gt;API: (positions, ids, colors, hovers)</div>
<div class="line">    API-&gt;&gt;API: Build nodes array</div>
<div class="line">    API-&gt;&gt;API: Build edges array</div>
<div class="line">    API--&gt;&gt;UI: VisualizationDataResponse</div>
<div class="line">    UI-&gt;&gt;Plotly: Render 3D scatter</div>
<div class="line">    Plotly--&gt;&gt;User: Interactive 3D Graph</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2033"></a>
4.7 State Transition Diagrams</h2>
<h3><a class="anchor" id="autotoc_md2034"></a>
4.7.1 Graph Lifecycle State Machine</h3>
<div class="fragment"><div class="line">stateDiagram-v2</div>
<div class="line">    [*] --&gt; Uninitialized: Application Start</div>
<div class="line"> </div>
<div class="line">    Uninitialized --&gt; Initializing: get_graph() called</div>
<div class="line">    Initializing --&gt; Loading: Acquire Lock</div>
<div class="line"> </div>
<div class="line">    Loading --&gt; LoadingFromCache: Cache path set</div>
<div class="line">    Loading --&gt; LoadingFromNetwork: Real data enabled</div>
<div class="line">    Loading --&gt; LoadingFromSample: Default mode</div>
<div class="line"> </div>
<div class="line">    LoadingFromCache --&gt; Initialized: Cache loaded</div>
<div class="line">    LoadingFromCache --&gt; LoadingFromNetwork: Cache invalid</div>
<div class="line"> </div>
<div class="line">    LoadingFromNetwork --&gt; Initialized: Data fetched</div>
<div class="line">    LoadingFromNetwork --&gt; LoadingFromSample: Network error</div>
<div class="line"> </div>
<div class="line">    LoadingFromSample --&gt; Initialized: Sample created</div>
<div class="line"> </div>
<div class="line">    Initialized --&gt; Ready: Release Lock</div>
<div class="line">    Ready --&gt; Ready: Serving requests</div>
<div class="line"> </div>
<div class="line">    Ready --&gt; Resetting: reset_graph() called</div>
<div class="line">    Resetting --&gt; Uninitialized: Graph cleared</div>
<div class="line"> </div>
<div class="line">    Ready --&gt; FactoryOverride: set_graph_factory()</div>
<div class="line">    FactoryOverride --&gt; Resetting: Factory set</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2035"></a>
4.7.2 Request State Machine</h3>
<div class="fragment"><div class="line">stateDiagram-v2</div>
<div class="line">    [*] --&gt; Received: HTTP Request</div>
<div class="line"> </div>
<div class="line">    Received --&gt; ValidatingCORS: Check origin</div>
<div class="line">    ValidatingCORS --&gt; CORSRejected: Invalid origin</div>
<div class="line">    ValidatingCORS --&gt; CheckingRateLimit: Valid origin</div>
<div class="line"> </div>
<div class="line">    CORSRejected --&gt; [*]: 403 Forbidden</div>
<div class="line"> </div>
<div class="line">    CheckingRateLimit --&gt; RateLimited: Limit exceeded</div>
<div class="line">    CheckingRateLimit --&gt; CheckingAuth: Within limit</div>
<div class="line"> </div>
<div class="line">    RateLimited --&gt; [*]: 429 Too Many Requests</div>
<div class="line"> </div>
<div class="line">    CheckingAuth --&gt; Authenticated: Valid token</div>
<div class="line">    CheckingAuth --&gt; AuthRequired: Missing/invalid token</div>
<div class="line">    CheckingAuth --&gt; Processing: No auth required</div>
<div class="line"> </div>
<div class="line">    AuthRequired --&gt; [*]: 401 Unauthorized</div>
<div class="line"> </div>
<div class="line">    Authenticated --&gt; Processing: User validated</div>
<div class="line"> </div>
<div class="line">    Processing --&gt; Completed: Success</div>
<div class="line">    Processing --&gt; Failed: Exception</div>
<div class="line"> </div>
<div class="line">    Completed --&gt; [*]: 2xx Response</div>
<div class="line">    Failed --&gt; [*]: 4xx/5xx Response</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2036"></a>
4.7.3 User Session State Machine</h3>
<div class="fragment"><div class="line">stateDiagram-v2</div>
<div class="line">    [*] --&gt; Anonymous: Visit application</div>
<div class="line"> </div>
<div class="line">    Anonymous --&gt; Authenticating: Submit credentials</div>
<div class="line">    Authenticating --&gt; Authenticated: Valid credentials</div>
<div class="line">    Authenticating --&gt; Anonymous: Invalid credentials</div>
<div class="line"> </div>
<div class="line">    Authenticated --&gt; TokenExpired: 30 min elapsed</div>
<div class="line">    TokenExpired --&gt; Authenticating: Re-authenticate</div>
<div class="line">    TokenExpired --&gt; Anonymous: Session ended</div>
<div class="line"> </div>
<div class="line">    Authenticated --&gt; Anonymous: Logout</div>
<div class="line"> </div>
<div class="line">    Authenticated --&gt; Accessing: Request protected resource</div>
<div class="line">    Accessing --&gt; Authenticated: Request complete</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2037"></a>
4.8 Timing and SLA Considerations</h2>
<h3><a class="anchor" id="autotoc_md2038"></a>
4.8.1 Performance Targets by Operation</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Operation   </th><th class="markdownTableHeadNone">Target SLA   </th><th class="markdownTableHeadNone">Measurement Point    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Response (95th percentile)   </td><td class="markdownTableBodyNone">&lt; 500ms   </td><td class="markdownTableBodyNone">Request to response    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visualization Rendering   </td><td class="markdownTableBodyNone">&lt; 2 seconds   </td><td class="markdownTableBodyNone">Data load to interactive    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Relationship Discovery   </td><td class="markdownTableBodyNone">&lt; 500ms   </td><td class="markdownTableBodyNone">For 100 assets    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Token Generation   </td><td class="markdownTableBodyNone">&lt; 100ms   </td><td class="markdownTableBodyNone">Credential submission to token    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Graph Initialization   </td><td class="markdownTableBodyNone">&lt; 3 seconds   </td><td class="markdownTableBodyNone">Application startup    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Dataclass Instantiation   </td><td class="markdownTableBodyNone">&lt; 1ms   </td><td class="markdownTableBodyNone">Per object    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Validation   </td><td class="markdownTableBodyNone">&lt; 1ms   </td><td class="markdownTableBodyNone">Per object    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Initial Page Load   </td><td class="markdownTableBodyNone">&lt; 3 seconds   </td><td class="markdownTableBodyNone">Navigation to interactive   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2039"></a>
4.8.2 Timeout Configuration</h3>
<div class="fragment"><div class="line">flowchart LR</div>
<div class="line">    subgraph Timeouts[&quot;Timeout Configuration&quot;]</div>
<div class="line">        JWT[&quot;JWT Token&lt;br/&gt;30 min expiry&quot;]</div>
<div class="line">        RateLimit[&quot;Rate Limit Window&lt;br/&gt;1 minute&quot;]</div>
<div class="line">        HTTPTimeout[&quot;HTTP Client&lt;br/&gt;30 sec default&quot;]</div>
<div class="line">        YahooFinance[&quot;Yahoo Finance&lt;br/&gt;Request timeout&quot;]</div>
<div class="line">    end</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2040"></a>
4.8.3 Rate Limiting Constraints</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">Limit   </th><th class="markdownTableHeadNone">Window   </th><th class="markdownTableHeadNone">Key Function    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>POST /token</code>   </td><td class="markdownTableBodyNone">5 requests   </td><td class="markdownTableBodyNone">1 minute   </td><td class="markdownTableBodyNone">Client IP    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>GET /api/users/me</code>   </td><td class="markdownTableBodyNone">10 requests   </td><td class="markdownTableBodyNone">1 minute   </td><td class="markdownTableBodyNone">Client IP    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Other endpoints   </td><td class="markdownTableBodyNone">Unlimited   </td><td class="markdownTableBodyNone">N/A   </td><td class="markdownTableBodyNone">N/A   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md2041"></a>
4.9 Validation Rules and Checkpoints</h2>
<h3><a class="anchor" id="autotoc_md2042"></a>
4.9.1 Business Rules Validation Flow</h3>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph ValidationFlow[&quot;Validation Flow&quot;]</div>
<div class="line">        ValStart([Data&lt;br/&gt;Input]) --&gt; DomainVal{Domain&lt;br/&gt;Validation}</div>
<div class="line"> </div>
<div class="line">        DomainVal --&gt;|Asset| AssetRules[&quot;Asset Rules:&lt;br/&gt;• id non-empty&lt;br/&gt;• symbol non-empty&lt;br/&gt;• name non-empty&lt;br/&gt;• price ≥ 0&lt;br/&gt;• currency 3-letter ISO&quot;]</div>
<div class="line"> </div>
<div class="line">        DomainVal --&gt;|RegulatoryEvent| EventRules[&quot;Event Rules:&lt;br/&gt;• impact_score in [-1, 1]&lt;br/&gt;• date ISO 8601&lt;br/&gt;• id non-empty&quot;]</div>
<div class="line"> </div>
<div class="line">        AssetRules --&gt; ClassSpecific{Asset&lt;br/&gt;Class?}</div>
<div class="line">        ClassSpecific --&gt;|Equity| EquityRules[&quot;Equity Rules:&lt;br/&gt;• P/E ratio numeric&lt;br/&gt;• dividend_yield numeric&quot;]</div>
<div class="line">        ClassSpecific --&gt;|FixedIncome| BondRules[&quot;Bond Rules:&lt;br/&gt;• maturity_date valid&lt;br/&gt;• coupon_rate numeric&lt;br/&gt;• credit_rating valid&quot;]</div>
<div class="line">        ClassSpecific --&gt;|Commodity| CommodityRules[&quot;Commodity Rules:&lt;br/&gt;• contract_size positive&lt;br/&gt;• delivery_date valid&quot;]</div>
<div class="line">        ClassSpecific --&gt;|Currency| CurrencyRules[&quot;Currency Rules:&lt;br/&gt;• exchange_rate positive&lt;br/&gt;• country non-empty&quot;]</div>
<div class="line"> </div>
<div class="line">        EventRules --&gt; ValEnd([Validation&lt;br/&gt;Complete])</div>
<div class="line">        EquityRules --&gt; ValEnd</div>
<div class="line">        BondRules --&gt; ValEnd</div>
<div class="line">        CommodityRules --&gt; ValEnd</div>
<div class="line">        CurrencyRules --&gt; ValEnd</div>
<div class="line">    end</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2043"></a>
4.9.2 API Input Validation Checkpoints</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Checkpoint   </th><th class="markdownTableHeadNone">Validation   </th><th class="markdownTableHeadNone">Response on Failure    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Request Body   </td><td class="markdownTableBodyNone">Pydantic model parsing   </td><td class="markdownTableBodyNone">422 Validation Error    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Query Parameters   </td><td class="markdownTableBodyNone">Type coercion and constraints   </td><td class="markdownTableBodyNone">422 Validation Error    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Path Parameters   </td><td class="markdownTableBodyNone">Type validation   </td><td class="markdownTableBodyNone">422 Validation Error    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Authentication   </td><td class="markdownTableBodyNone">Token format and signature   </td><td class="markdownTableBodyNone">401 Unauthorized    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Authorization   </td><td class="markdownTableBodyNone">User active status   </td><td class="markdownTableBodyNone">400 Inactive User    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CORS Origin   </td><td class="markdownTableBodyNone">Allowlist and pattern matching   </td><td class="markdownTableBodyNone">403 Forbidden    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Rate Limit   </td><td class="markdownTableBodyNone">Request count per window   </td><td class="markdownTableBodyNone">429 Too Many Requests   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2044"></a>
4.9.3 Data Quality Validation</h3>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph DataQuality[&quot;Data Quality Validation&quot;]</div>
<div class="line">        DQStart([Data&lt;br/&gt;Received]) --&gt; Completeness[&quot;Completeness Check:&lt;br/&gt;Required fields present&quot;]</div>
<div class="line">        Completeness --&gt; Consistency[&quot;Consistency Check:&lt;br/&gt;Cross-field logic&quot;]</div>
<div class="line">        Consistency --&gt; Accuracy[&quot;Accuracy Check:&lt;br/&gt;Value ranges valid&quot;]</div>
<div class="line">        Accuracy --&gt; Uniqueness[&quot;Uniqueness Check:&lt;br/&gt;ID uniqueness&quot;]</div>
<div class="line">        Uniqueness --&gt; DQEnd([Quality&lt;br/&gt;Verified])</div>
<div class="line">    end</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2045"></a>
4.10 Transaction Boundaries and Persistence</h2>
<h3><a class="anchor" id="autotoc_md2046"></a>
4.10.1 Data Persistence Points</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Persistence Method   </th><th class="markdownTableHeadNone">Durability    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Graph State   </td><td class="markdownTableBodyNone">In-memory singleton   </td><td class="markdownTableBodyNone">Process lifetime    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">User Credentials   </td><td class="markdownTableBodyNone">SQLite database   </td><td class="markdownTableBodyNone">Persistent    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Cache Files   </td><td class="markdownTableBodyNone">JSON file system   </td><td class="markdownTableBodyNone">Persistent    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">JWT Tokens   </td><td class="markdownTableBodyNone">Stateless (client-held)   </td><td class="markdownTableBodyNone">Token lifetime    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Session State   </td><td class="markdownTableBodyNone">React/Gradio state   </td><td class="markdownTableBodyNone">Tab lifetime   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2047"></a>
4.10.2 Transaction Flow for Cache Updates</h3>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph CacheTransaction[&quot;Cache Update Transaction&quot;]</div>
<div class="line">        TxStart([Start Cache&lt;br/&gt;Update]) --&gt; CreateTemp[Create&lt;br/&gt;Temp File]</div>
<div class="line">        CreateTemp --&gt; WriteData[Write JSON&lt;br/&gt;Data]</div>
<div class="line">        WriteData --&gt; FlushSync[Flush and&lt;br/&gt;Sync to Disk]</div>
<div class="line">        FlushSync --&gt; CloseFile[Close&lt;br/&gt;File Handle]</div>
<div class="line">        CloseFile --&gt; AtomicRename[os.replace()&lt;br/&gt;Atomic Rename]</div>
<div class="line">        AtomicRename --&gt; TxEnd([Transaction&lt;br/&gt;Complete])</div>
<div class="line">    end</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2048"></a>
4.10.3 Thread Safety Boundaries</h3>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph ThreadSafety[&quot;Thread Safety Boundaries&quot;]</div>
<div class="line">        Request1[&quot;Request 1&quot;] --&gt; Lock[&quot;graph_lock&lt;br/&gt;Threading Lock&quot;]</div>
<div class="line">        Request2[&quot;Request 2&quot;] --&gt; Lock</div>
<div class="line">        Request3[&quot;Request 3&quot;] --&gt; Lock</div>
<div class="line"> </div>
<div class="line">        Lock --&gt; GraphAccess[&quot;Graph Singleton&lt;br/&gt;Access&quot;]</div>
<div class="line">        GraphAccess --&gt; ReadOps[&quot;Read Operations&lt;br/&gt;(Concurrent OK)&quot;]</div>
<div class="line">        GraphAccess --&gt; WriteOps[&quot;Write Operations&lt;br/&gt;(Serialized)&quot;]</div>
<div class="line"> </div>
<div class="line">        ReadOps --&gt; Response1[&quot;Response 1&quot;]</div>
<div class="line">        ReadOps --&gt; Response2[&quot;Response 2&quot;]</div>
<div class="line">        WriteOps --&gt; Response3[&quot;Response 3&quot;]</div>
<div class="line">    end</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2049"></a>
4.11 References</h2>
<h4><a class="anchor" id="autotoc_md2050"></a>
Files Examined</h4>
<ul>
<li><code><a class="el" href="api_2main_8py.html">api/main.py</a></code> - FastAPI backend with graph lifecycle, authentication flow, CORS, rate limiting, all REST endpoints, and error handling patterns</li>
<li><code><a class="el" href="auth_8py.html">api/auth.py</a></code> - JWT authentication flow, password hashing, token creation/validation, and user repository</li>
<li><code><a class="el" href="api_2database_8py.html">api/database.py</a></code> - SQLite database helpers and memory connection management</li>
<li><code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code> - Core graph class with relationships data structure and 3D visualization data</li>
<li><code><a class="el" href="sample__data_8py.html">src/data/sample_data.py</a></code> - Sample data creation workflow, asset/event registration, and relationship building</li>
<li><code><a class="el" href="real__data__fetcher_8py.html">src/data/real_data_fetcher.py</a></code> - Yahoo Finance data fetching, caching mechanism, and fallback patterns</li>
<li><code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code> - Domain models with validation rules</li>
<li><code><a class="el" href="app_8py.html">app.py</a></code> - Gradio UI controller with visualization workflows and event handlers</li>
<li><code>frontend/app/page.tsx</code> - Next.js home page with data loading, tab navigation, and error handling</li>
<li><code>frontend/app/lib/api.ts</code> - Frontend API client with all endpoint calls</li>
</ul>
<h4><a class="anchor" id="autotoc_md2051"></a>
Technical Specification Sections Referenced</h4>
<ul>
<li>1.2 System Overview - System architecture and component interactions</li>
<li>2.1 Feature Catalog - Feature definitions and dependencies</li>
<li>2.4 Implementation Considerations - Performance requirements and constraints</li>
<li>3.8 Security Considerations - Authentication and API security</li>
<li>3.9 Integration Requirements - Frontend-backend communication patterns</li>
</ul>
<h1><a class="anchor" id="autotoc_md2052"></a>
5. System Architecture</h1>
<p>This section provides a comprehensive technical reference for the Financial Asset Relationship Database system architecture, documenting the architectural patterns, component interactions, technical decisions, and cross-cutting concerns that define the system's structure and behavior.</p>
<h2><a class="anchor" id="autotoc_md2053"></a>
5.1 HIGH-LEVEL ARCHITECTURE</h2>
<h3><a class="anchor" id="autotoc_md2054"></a>
5.1.1 System Overview</h3>
<h4><a class="anchor" id="autotoc_md2055"></a>
Architectural Style and Rationale</h4>
<p>The Financial Asset Relationship Database implements a <b>layered architecture</b> with clear separation of concerns, optimizing for deployment flexibility, maintainability, and appropriate scalability for financial analysis workloads. The system follows an <b>API-first design</b> philosophy, enabling multiple presentation layers to consume the same business logic through standardized interfaces.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Architectural Characteristic   </th><th class="markdownTableHeadNone">Design Decision   </th><th class="markdownTableHeadNone">Rationale    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Layer Separation   </td><td class="markdownTableBodyNone">Four distinct layers (Presentation, API, Business Logic, Data)   </td><td class="markdownTableBodyNone">Enables independent evolution and testing of each concern    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Monolithic Core   </td><td class="markdownTableBodyNone">Single deployable Python process with modular packages   </td><td class="markdownTableBodyNone">Simplifies deployment for current scale (&lt;500 assets) while maintaining clear module boundaries    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API-First Design   </td><td class="markdownTableBodyNone">REST/JSON endpoints via FastAPI with automatic OpenAPI documentation   </td><td class="markdownTableBodyNone">Universal client compatibility and self-documenting interfaces    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Dual UI Strategy   </td><td class="markdownTableBodyNone">Legacy Gradio + Modern Next.js frontends   </td><td class="markdownTableBodyNone">Supports rapid prototyping and production-ready experiences   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2056"></a>
Key Architectural Principles</h4>
<p>The system adheres to the following architectural principles that guide all design decisions:</p>
<ul>
<li><b>Thread-Safe Singleton Pattern</b>: The graph engine uses double-checked locking to ensure safe concurrent access during initialization, preventing race conditions under multi-threaded workloads</li>
<li><b>Deterministic Visualization</b>: Fixed random seed (seed=42) ensures reproducible 3D layouts across sessions, critical for consistent user experience and debugging</li>
<li><b>Type Safety</b>: Python dataclasses with validation and Pydantic models enforce strict type contracts throughout the stack</li>
<li><b>Graceful Degradation</b>: Fallback mechanisms ensure the system remains operational when external data sources are unavailable</li>
<li><b>Atomic Operations</b>: Cache writes use temporary files with atomic rename operations to prevent data corruption</li>
</ul>
<h4><a class="anchor" id="autotoc_md2057"></a>
System Boundaries and Interfaces</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph External[External Systems]</div>
<div class="line">        YF[Yahoo Finance API]</div>
<div class="line">        Users[End Users]</div>
<div class="line">        Vercel[Vercel Platform]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph SystemBoundary[Financial Asset Relationship Database]</div>
<div class="line">        subgraph Presentation[Presentation Layer]</div>
<div class="line">            NextJS[Next.js Frontend&lt;br/&gt;Port 3000]</div>
<div class="line">            Gradio[Gradio UI&lt;br/&gt;Port 7860]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph API[API Layer]</div>
<div class="line">            FastAPI[FastAPI Backend&lt;br/&gt;Port 8000]</div>
<div class="line">            Auth[JWT Auth Module]</div>
<div class="line">            RateLimit[Rate Limiter]</div>
<div class="line">            CORS[CORS Middleware]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Core[Business Logic Layer]</div>
<div class="line">            Graph[Asset Graph Engine]</div>
<div class="line">            Models[Domain Models]</div>
<div class="line">            Viz[Visualization Module]</div>
<div class="line">            Metrics[Metrics Calculator]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Data[Data Layer]</div>
<div class="line">            Sample[Sample Data Generator]</div>
<div class="line">            Fetcher[Real Data Fetcher]</div>
<div class="line">            Cache[JSON File Cache]</div>
<div class="line">            SQLite[SQLite Auth DB]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    Users --&gt; NextJS</div>
<div class="line">    Users --&gt; Gradio</div>
<div class="line">    NextJS --&gt; FastAPI</div>
<div class="line">    FastAPI --&gt; CORS</div>
<div class="line">    CORS --&gt; RateLimit</div>
<div class="line">    RateLimit --&gt; Auth</div>
<div class="line">    Auth --&gt; Graph</div>
<div class="line">    Gradio --&gt; Graph</div>
<div class="line">    Graph --&gt; Models</div>
<div class="line">    Graph --&gt; Viz</div>
<div class="line">    Graph --&gt; Metrics</div>
<div class="line">    Graph --&gt; Sample</div>
<div class="line">    Graph --&gt; Fetcher</div>
<div class="line">    Fetcher --&gt; YF</div>
<div class="line">    Fetcher --&gt; Cache</div>
<div class="line">    Auth --&gt; SQLite</div>
<div class="line">    FastAPI --&gt; Vercel</div>
<div class="line">    NextJS --&gt; Vercel</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2058"></a>
5.1.2 Core Components</h3>
<p>The system comprises eight major components, each with distinct responsibilities and well-defined integration boundaries.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Primary Responsibility   </th><th class="markdownTableHeadNone">Key Dependencies   </th><th class="markdownTableHeadNone">Integration Points    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FastAPI Backend   </td><td class="markdownTableBodyNone">REST API server, request routing, middleware orchestration   </td><td class="markdownTableBodyNone">FastAPI 0.127.0, Uvicorn, slowapi, PyJWT   </td><td class="markdownTableBodyNone">Frontend via HTTP/JSON, Graph via Python calls    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Next.js Frontend   </td><td class="markdownTableBodyNone">Modern React-based UI with TypeScript   </td><td class="markdownTableBodyNone">Next.js 14.2.35, React 18.2.0, Axios, Plotly.js   </td><td class="markdownTableBodyNone">FastAPI via REST, Users via browser    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Gradio UI   </td><td class="markdownTableBodyNone">Legacy Python-native dashboard   </td><td class="markdownTableBodyNone">Gradio ≥4.0.0, Plotly ≥6.0.0   </td><td class="markdownTableBodyNone">Graph Engine via direct Python calls    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Graph Engine   </td><td class="markdownTableBodyNone">In-memory relationship storage, 3D layout calculation   </td><td class="markdownTableBodyNone">NumPy 2.2.6   </td><td class="markdownTableBodyNone">All layers via singleton accessor    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Domain Models   </td><td class="markdownTableBodyNone">Asset/Event dataclasses, validation rules   </td><td class="markdownTableBodyNone">Python standard library   </td><td class="markdownTableBodyNone">All components via imports    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Real Data Fetcher   </td><td class="markdownTableBodyNone">Yahoo Finance integration, caching   </td><td class="markdownTableBodyNone">yfinance ≥0.2.51   </td><td class="markdownTableBodyNone">Graph initialization pipeline    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Visualization Module   </td><td class="markdownTableBodyNone">Plotly chart generation, color mapping   </td><td class="markdownTableBodyNone">Plotly ≥6.0.0   </td><td class="markdownTableBodyNone">API endpoints, Gradio UI    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Auth Module   </td><td class="markdownTableBodyNone">JWT token management, user authentication   </td><td class="markdownTableBodyNone">PyJWT ≥2.8.0, passlib   </td><td class="markdownTableBodyNone">FastAPI protected endpoints   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2059"></a>
5.1.3 Data Flow Description</h3>
<h4><a class="anchor" id="autotoc_md2060"></a>
Primary Data Flow: API to Visualization</h4>
<p>The primary data flow begins with user interaction and culminates in rendered visualizations:</p>
<ol type="1">
<li><b>Request Initiation</b>: User navigates to a page in Next.js frontend or Gradio UI</li>
<li><b>API Communication</b>: Next.js client sends HTTP request via Axios to FastAPI backend</li>
<li><b>Security Pipeline</b>: Request traverses CORS validation → Rate limit check → JWT authentication (if protected)</li>
<li><b>Graph Access</b>: API endpoint calls <code>get_graph()</code> to retrieve thread-safe singleton instance</li>
<li><b>Data Processing</b>: Graph engine provides assets, relationships, and calculated positions</li>
<li><b>Serialization</b>: Pydantic models serialize Python objects to JSON response</li>
<li><b>Client Rendering</b>: Frontend receives data and renders Plotly.js 3D visualization</li>
</ol>
<h4><a class="anchor" id="autotoc_md2061"></a>
Data Ingestion Flow</h4>
<p>The data ingestion flow populates the graph from external or internal sources:</p>
<ol type="1">
<li><b>Cache Check</b>: On startup, <code>_initialize_graph()</code> checks for existing cache at <code>GRAPH_CACHE_PATH</code></li>
<li><b>Cache Loading</b>: If valid cache exists, JSON-serialized graph is loaded directly</li>
<li><b>Fresh Fetch</b>: Otherwise, <code>RealDataFetcher</code> retrieves data from Yahoo Finance (if enabled)</li>
<li><b>Fallback Mode</b>: If network unavailable, sample data generator creates representative dataset</li>
<li><b>Graph Population</b>: Assets added via <code>graph.add_asset()</code>, events via <code>graph.add_regulatory_event()</code></li>
<li><b>Relationship Building</b>: <code>graph.build_relationships()</code> discovers all eight relationship types</li>
<li><b>Cache Persistence</b>: Graph serialized to JSON using atomic write pattern</li>
</ol>
<h4><a class="anchor" id="autotoc_md2062"></a>
Relationship Discovery Data Flow</h4>
<p>The relationship discovery engine processes assets through rule-based algorithms:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Relationship Type   </th><th class="markdownTableHeadNone">Detection Rule   </th><th class="markdownTableHeadNone">Directionality   </th><th class="markdownTableHeadNone">Data Source    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>same_sector</code>   </td><td class="markdownTableBodyNone">Assets share identical sector   </td><td class="markdownTableBodyNone">Bidirectional   </td><td class="markdownTableBodyNone">Asset.sector field    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>corporate_bond_to_equity</code>   </td><td class="markdownTableBodyNone">Bond.issuer_id matches Equity.id   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">Cross-asset linkage    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>commodity_exposure</code>   </td><td class="markdownTableBodyNone">Equity sector linked to commodity   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">Sector-commodity mapping    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>currency_risk</code>   </td><td class="markdownTableBodyNone">Asset currency ≠ USD   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">Asset.currency field    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>income_comparison</code>   </td><td class="markdownTableBodyNone">Dividend yield vs bond yield   </td><td class="markdownTableBodyNone">Bidirectional   </td><td class="markdownTableBodyNone">Yield calculations    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>regulatory_impact</code>   </td><td class="markdownTableBodyNone">Shared regulatory event   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">Event.impact_score    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>market_cap_similar</code>   </td><td class="markdownTableBodyNone">Market cap within 50% range   </td><td class="markdownTableBodyNone">Bidirectional   </td><td class="markdownTableBodyNone">Asset.market_cap    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>correlation</code>   </td><td class="markdownTableBodyNone">Price correlation &gt; threshold   </td><td class="markdownTableBodyNone">Bidirectional   </td><td class="markdownTableBodyNone">Historical prices   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2063"></a>
5.1.4 External Integration Points</h3>
<p>The system integrates with external services through well-defined interfaces:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">System Name   </th><th class="markdownTableHeadNone">Integration Type   </th><th class="markdownTableHeadNone">Data Exchange Pattern   </th><th class="markdownTableHeadNone">Protocol/Format    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Yahoo Finance   </td><td class="markdownTableBodyNone">External data source   </td><td class="markdownTableBodyNone">HTTP pull with JSON caching   </td><td class="markdownTableBodyNone">yfinance Python library    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SQLite   </td><td class="markdownTableBodyNone">Local authentication store   </td><td class="markdownTableBodyNone">File-based SQL persistence   </td><td class="markdownTableBodyNone">sqlite3 driver    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PostgreSQL   </td><td class="markdownTableBodyNone">Optional production persistence   </td><td class="markdownTableBodyNone">Connection-pooled SQL   </td><td class="markdownTableBodyNone">SQLAlchemy ORM    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Vercel   </td><td class="markdownTableBodyNone">Serverless hosting platform   </td><td class="markdownTableBodyNone">HTTPS deployment   </td><td class="markdownTableBodyNone">Vercel CLI/JSON config   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2065"></a>
5.2 COMPONENT DETAILS</h2>
<h3><a class="anchor" id="autotoc_md2066"></a>
5.2.1 FastAPI Backend</h3>
<h4><a class="anchor" id="autotoc_md2067"></a>
Purpose and Responsibilities</h4>
<p>The FastAPI backend serves as the primary API gateway, exposing graph data through RESTful endpoints while enforcing security policies, rate limiting, and data validation.</p>
<p><b>Location</b>: <code><a class="el" href="api_2main_8py.html">api/main.py</a></code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Responsibility   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">REST API Routing   </td><td class="markdownTableBodyNone">FastAPI router with typed endpoint definitions    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Authentication   </td><td class="markdownTableBodyNone">JWT token issuance and validation via <code><a class="el" href="auth_8py.html">api/auth.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Rate Limiting   </td><td class="markdownTableBodyNone">slowapi integration with per-endpoint limits    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CORS Management   </td><td class="markdownTableBodyNone">Environment-specific origin allowlists    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Request Validation   </td><td class="markdownTableBodyNone">Pydantic models for automatic validation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Graph Lifecycle   </td><td class="markdownTableBodyNone">Thread-safe singleton management   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2068"></a>
Technologies and Frameworks</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technology   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FastAPI   </td><td class="markdownTableBodyNone">0.127.0   </td><td class="markdownTableBodyNone">REST framework with automatic OpenAPI    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Uvicorn   </td><td class="markdownTableBodyNone">≥0.24.0   </td><td class="markdownTableBodyNone">ASGI server with async support    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Pydantic   </td><td class="markdownTableBodyNone">2.12.5   </td><td class="markdownTableBodyNone">Request/response validation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">slowapi   </td><td class="markdownTableBodyNone">Latest   </td><td class="markdownTableBodyNone">Rate limiting middleware    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PyJWT   </td><td class="markdownTableBodyNone">≥2.8.0   </td><td class="markdownTableBodyNone">JWT token encoding/decoding    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">passlib   </td><td class="markdownTableBodyNone">Latest   </td><td class="markdownTableBodyNone">Password hashing (pbkdf2_sha256)   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2069"></a>
Key Interfaces and APIs</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Auth Required    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/token</code>   </td><td class="markdownTableBodyNone">POST   </td><td class="markdownTableBodyNone">JWT token issuance   </td><td class="markdownTableBodyNone">No (rate limited: 5/min)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/assets</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">List assets with optional filters   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/assets/{id}</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Single asset details   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/assets/{id}/relationships</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Asset relationships   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/relationships</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">All relationships   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/metrics</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Network statistics   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/visualization</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">3D visualization data   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/asset-classes</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Available asset class enum   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/sectors</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Available sectors   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/users/me</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Current user info   </td><td class="markdownTableBodyNone">Yes (rate limited: 10/min)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/health</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Health check   </td><td class="markdownTableBodyNone">No   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2070"></a>
Thread-Safe Graph Access Pattern</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph ThreadSafe[Thread-Safe Graph Initialization]</div>
<div class="line">        Request([API Request]) --&gt; CheckGlobal{Global graph&lt;br/&gt;exists?}</div>
<div class="line">        CheckGlobal --&gt;|Yes| ReturnGraph([Return Graph])</div>
<div class="line">        CheckGlobal --&gt;|No| AcquireLock[Acquire Thread Lock]</div>
<div class="line">        AcquireLock --&gt; DoubleCheck{Double-check&lt;br/&gt;inside lock?}</div>
<div class="line">        DoubleCheck --&gt;|Yes| ReleaseLock1[Release Lock]</div>
<div class="line">        ReleaseLock1 --&gt; ReturnGraph</div>
<div class="line">        DoubleCheck --&gt;|No| Initialize[Initialize Graph]</div>
<div class="line">        Initialize --&gt; SetGlobal[Set Global Reference]</div>
<div class="line">        SetGlobal --&gt; ReleaseLock2[Release Lock]</div>
<div class="line">        ReleaseLock2 --&gt; ReturnGraph</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2071"></a>
Scaling Considerations</h4>
<ul>
<li><b>Node Limit</b>: Optimal performance for &lt;500 nodes due to in-memory storage</li>
<li>**Rate Limiting**: Protects against abuse and ensures fair resource allocation</li>
<li>**Serverless Ready**: Mangum adapter enables Vercel Lambda deployment (50MB limit)</li>
<li>**Stateless Requests**: Each request is independent; session state managed via JWT</li>
</ul>
<h3><a class="anchor" id="autotoc_md2072"></a>
5.2.2 Next.js Frontend</h3>
<h4><a class="anchor" id="autotoc_md2073"></a>
Purpose and Responsibilities</h4>
<p>The Next.js frontend provides a modern, responsive user interface for exploring asset relationships and visualizing network data.</p>
<p>**Location**: `frontend/`</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Responsibility   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3D Visualization   </td><td class="markdownTableBodyNone">Plotly.js integration with SSR safety    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Asset Exploration   </td><td class="markdownTableBodyNone">Filterable tables with URL-synced state    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Metrics Dashboard   </td><td class="markdownTableBodyNone">Grid-based metrics display    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">API Communication   </td><td class="markdownTableBodyNone">Axios HTTP client with error handling    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Responsive Design   </td><td class="markdownTableBodyNone">Tailwind CSS utility classes   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2074"></a>
Technologies and Frameworks</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technology   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Next.js   </td><td class="markdownTableBodyNone">14.2.35   </td><td class="markdownTableBodyNone">React meta-framework with App Router    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">React   </td><td class="markdownTableBodyNone">18.2.0   </td><td class="markdownTableBodyNone">UI component library    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">TypeScript   </td><td class="markdownTableBodyNone">^5.3.0   </td><td class="markdownTableBodyNone">Type safety    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Tailwind CSS   </td><td class="markdownTableBodyNone">Latest   </td><td class="markdownTableBodyNone">Utility-first styling    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Plotly.js   </td><td class="markdownTableBodyNone">^2.27.0   </td><td class="markdownTableBodyNone">Client-side 3D rendering    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Axios   </td><td class="markdownTableBodyNone">Latest   </td><td class="markdownTableBodyNone">HTTP client   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2075"></a>
Key Components</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Location   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>NetworkVisualization</code>   </td><td class="markdownTableBodyNone"><code>frontend/app/components/NetworkVisualization.tsx</code>   </td><td class="markdownTableBodyNone">3D Plotly graph with dynamic import for SSR    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>MetricsDashboard</code>   </td><td class="markdownTableBodyNone"><code>frontend/app/components/MetricsDashboard.tsx</code>   </td><td class="markdownTableBodyNone">Metrics display grid    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>AssetList</code>   </td><td class="markdownTableBodyNone"><code>frontend/app/components/AssetList.tsx</code>   </td><td class="markdownTableBodyNone">Filterable asset table with pagination   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2076"></a>
Frontend Data Flow</h4>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant User as User Browser</div>
<div class="line">    participant Page as Next.js Page</div>
<div class="line">    participant API as API Client</div>
<div class="line">    participant Backend as FastAPI</div>
<div class="line">    participant Plotly as Plotly.js</div>
<div class="line"> </div>
<div class="line">    User-&gt;&gt;Page: Navigate to Page</div>
<div class="line">    Page-&gt;&gt;Page: useEffect on mount</div>
<div class="line">    Page-&gt;&gt;API: getMetrics()</div>
<div class="line">    Page-&gt;&gt;API: getVisualizationData()</div>
<div class="line">    API-&gt;&gt;Backend: GET /api/metrics</div>
<div class="line">    API-&gt;&gt;Backend: GET /api/visualization</div>
<div class="line">    Backend--&gt;&gt;API: JSON Response</div>
<div class="line">    API--&gt;&gt;Page: Data Objects</div>
<div class="line">    Page-&gt;&gt;Plotly: Render 3D Graph</div>
<div class="line">    Plotly--&gt;&gt;User: Interactive Visualization</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2077"></a>
Scaling Considerations</h4>
<ul>
<li><b>MAX_NODES/MAX_EDGES</b>: Environment-configurable limits (<code>NEXT_PUBLIC_MAX_NODES</code>, <code>NEXT_PUBLIC_MAX_EDGES</code>)</li>
<li><b>Default Limits</b>: 500 nodes, 2000 edges for client-side performance</li>
<li><b>SSR Safety</b>: Dynamic imports prevent server-side Plotly rendering errors</li>
<li><b>Client Hydration</b>: Data fetched client-side to avoid SSR data mismatches</li>
</ul>
<h3><a class="anchor" id="autotoc_md2078"></a>
5.2.3 Gradio UI</h3>
<h4><a class="anchor" id="autotoc_md2079"></a>
Purpose and Responsibilities</h4>
<p>The Gradio UI provides a legacy Python-native dashboard for rapid exploration and development, with direct integration to core Python modules.</p>
<p><b>Location</b>: <code><a class="el" href="app_8py.html">app.py</a></code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Responsibility   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Tabbed Interface   </td><td class="markdownTableBodyNone">Gradio Blocks with six tabs    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Real-time Updates   </td><td class="markdownTableBodyNone">Event handlers for refresh actions    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Direct Python Access   </td><td class="markdownTableBodyNone">No API intermediary for visualization    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Development Tool   </td><td class="markdownTableBodyNone">Rapid prototyping environment   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2080"></a>
Technologies and Frameworks</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technology   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Gradio   </td><td class="markdownTableBodyNone">≥4.0.0   </td><td class="markdownTableBodyNone">Python UI framework    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Plotly   </td><td class="markdownTableBodyNone">≥6.0.0   </td><td class="markdownTableBodyNone">Server-side visualization   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2081"></a>
Interface Structure</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Tab   </th><th class="markdownTableHeadNone">Content   </th><th class="markdownTableHeadNone">Data Source    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3D Visualization   </td><td class="markdownTableBodyNone">Interactive network graph   </td><td class="markdownTableBodyNone"><code><a class="el" href="graph__visuals_8py.html">src/visualizations/graph_visuals.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Metrics   </td><td class="markdownTableBodyNone">Network statistics   </td><td class="markdownTableBodyNone"><code><a class="el" href="metric__visuals_8py.html">src/visualizations/metric_visuals.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Schema &amp; Rules   </td><td class="markdownTableBodyNone">Data model documentation   </td><td class="markdownTableBodyNone"><code><a class="el" href="schema__report_8py.html">src/reports/schema_report.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Asset Explorer   </td><td class="markdownTableBodyNone">Filterable asset table   </td><td class="markdownTableBodyNone">Graph engine assets    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Documentation   </td><td class="markdownTableBodyNone">System documentation   </td><td class="markdownTableBodyNone">Static content    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Formulaic Analysis   </td><td class="markdownTableBodyNone">Analysis dashboard   </td><td class="markdownTableBodyNone"><code><a class="el" href="formulaic__visuals_8py.html">src/visualizations/formulaic_visuals.py</a></code>   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2082"></a>
5.2.4 Graph Engine</h3>
<h4><a class="anchor" id="autotoc_md2083"></a>
Purpose and Responsibilities</h4>
<p>The Graph Engine serves as the central data structure, managing asset storage, relationship discovery, and 3D layout calculations.</p>
<p><b>Location</b>: <code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Responsibility   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Asset Storage   </td><td class="markdownTableBodyNone">Dictionary-based in-memory storage    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Relationship Management   </td><td class="markdownTableBodyNone">Adjacency list with typed edges    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3D Layout Calculation   </td><td class="markdownTableBodyNone">NumPy-based coordinate generation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Metrics Computation   </td><td class="markdownTableBodyNone">Network statistics calculation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Singleton Access   </td><td class="markdownTableBodyNone">Thread-safe global instance   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2084"></a>
Data Structures</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Structure   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>assets</code>   </td><td class="markdownTableBodyNone"><code>Dict[str, Asset]</code>   </td><td class="markdownTableBodyNone">Asset ID to object mapping    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>relationships</code>   </td><td class="markdownTableBodyNone"><code>Dict[str, List[Tuple[str, str, float]]]</code>   </td><td class="markdownTableBodyNone">Source ID to (target, type, strength) edges    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>regulatory_events</code>   </td><td class="markdownTableBodyNone"><code>Dict[str, RegulatoryEvent]</code>   </td><td class="markdownTableBodyNone">Event ID to object mapping   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2085"></a>
Key Methods</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Parameters   </th><th class="markdownTableHeadNone">Returns   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>add_asset()</code>   </td><td class="markdownTableBodyNone"><code>Asset</code>   </td><td class="markdownTableBodyNone"><code>None</code>   </td><td class="markdownTableBodyNone">Register asset in graph    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>add_regulatory_event()</code>   </td><td class="markdownTableBodyNone"><code>RegulatoryEvent</code>   </td><td class="markdownTableBodyNone"><code>None</code>   </td><td class="markdownTableBodyNone">Register event    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>build_relationships()</code>   </td><td class="markdownTableBodyNone"><code>None</code>   </td><td class="markdownTableBodyNone"><code>None</code>   </td><td class="markdownTableBodyNone">Discover all relationship types    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>get_relationships()</code>   </td><td class="markdownTableBodyNone"><code>asset_id</code>   </td><td class="markdownTableBodyNone"><code>List[Tuple]</code>   </td><td class="markdownTableBodyNone">Get edges for asset    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>calculate_metrics()</code>   </td><td class="markdownTableBodyNone"><code>None</code>   </td><td class="markdownTableBodyNone"><code>Dict</code>   </td><td class="markdownTableBodyNone">Compute network statistics    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>get_3d_visualization_data_enhanced()</code>   </td><td class="markdownTableBodyNone"><code>filters</code>   </td><td class="markdownTableBodyNone"><code>Tuple</code>   </td><td class="markdownTableBodyNone">Generate visualization data   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2086"></a>
5.2.5 Domain Models</h3>
<h4><a class="anchor" id="autotoc_md2087"></a>
Purpose and Responsibilities</h4>
<p>Domain models define the type-safe data structures and validation rules that govern all financial entities in the system.</p>
<p><b>Location</b>: <code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code></p>
<h4><a class="anchor" id="autotoc_md2088"></a>
Asset Class Enumeration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Display Name   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>EQUITY</code>   </td><td class="markdownTableBodyNone">Equity   </td><td class="markdownTableBodyNone">Stocks and equity instruments    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>FIXED_INCOME</code>   </td><td class="markdownTableBodyNone">Fixed Income   </td><td class="markdownTableBodyNone">Bonds and debt instruments    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>COMMODITY</code>   </td><td class="markdownTableBodyNone">Commodity   </td><td class="markdownTableBodyNone">Physical commodity futures    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>CURRENCY</code>   </td><td class="markdownTableBodyNone">Currency   </td><td class="markdownTableBodyNone">Foreign exchange pairs    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>DERIVATIVE</code>   </td><td class="markdownTableBodyNone">Derivative   </td><td class="markdownTableBodyNone">Derivative instruments   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2089"></a>
Asset Type Hierarchy</h4>
<div class="fragment"><div class="line">classDiagram</div>
<div class="line">    class Asset {</div>
<div class="line">        +str id</div>
<div class="line">        +str symbol</div>
<div class="line">        +str name</div>
<div class="line">        +AssetClass asset_class</div>
<div class="line">        +str sector</div>
<div class="line">        +float price</div>
<div class="line">        +Optional[float] market_cap</div>
<div class="line">        +str currency</div>
<div class="line">        +__post_init__()</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    class Equity {</div>
<div class="line">        +Optional[float] pe_ratio</div>
<div class="line">        +Optional[float] dividend_yield</div>
<div class="line">        +Optional[float] earnings_per_share</div>
<div class="line">        +Optional[float] book_value</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    class Bond {</div>
<div class="line">        +Optional[float] yield_to_maturity</div>
<div class="line">        +Optional[float] coupon_rate</div>
<div class="line">        +Optional[str] maturity_date</div>
<div class="line">        +Optional[str] credit_rating</div>
<div class="line">        +Optional[str] issuer_id</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    class Commodity {</div>
<div class="line">        +Optional[float] contract_size</div>
<div class="line">        +Optional[str] delivery_date</div>
<div class="line">        +Optional[float] volatility</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    class Currency {</div>
<div class="line">        +Optional[float] exchange_rate</div>
<div class="line">        +Optional[str] country</div>
<div class="line">        +Optional[float] central_bank_rate</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    Asset &lt;|-- Equity</div>
<div class="line">    Asset &lt;|-- Bond</div>
<div class="line">    Asset &lt;|-- Commodity</div>
<div class="line">    Asset &lt;|-- Currency</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2090"></a>
Validation Rules</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Rule   </th><th class="markdownTableHeadNone">Error Handling    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>id</code>, <code>symbol</code>, <code>name</code>   </td><td class="markdownTableBodyNone">Non-empty string   </td><td class="markdownTableBodyNone"><code>ValueError</code> on empty    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>price</code>, <code>market_cap</code>   </td><td class="markdownTableBodyNone">Non-negative float   </td><td class="markdownTableBodyNone"><code>ValueError</code> on negative    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>currency</code>   </td><td class="markdownTableBodyNone">3-character ISO code   </td><td class="markdownTableBodyNone"><code>ValueError</code> on invalid    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>impact_score</code> (events)   </td><td class="markdownTableBodyNone">Range [-1, 1]   </td><td class="markdownTableBodyNone"><code>ValueError</code> on out of bounds    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>date</code> (events)   </td><td class="markdownTableBodyNone">ISO 8601 format   </td><td class="markdownTableBodyNone"><code>ValueError</code> on invalid format   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2091"></a>
5.2.6 Visualization Layer</h3>
<h4><a class="anchor" id="autotoc_md2092"></a>
Purpose and Responsibilities</h4>
<p>The Visualization Layer generates Plotly-compatible chart specifications for both server-side (Gradio) and client-side (Next.js) rendering.</p>
<p><b>Location</b>: <code>src/visualizations/</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Module   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="graph__visuals_8py.html">graph_visuals.py</a></code>   </td><td class="markdownTableBodyNone">3D network visualization with filtering    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="graph__2d__visuals_8py.html">graph_2d_visuals.py</a></code>   </td><td class="markdownTableBodyNone">2D network layouts    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="metric__visuals_8py.html">metric_visuals.py</a></code>   </td><td class="markdownTableBodyNone">Metrics bar charts and dashboards    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="formulaic__visuals_8py.html">formulaic_visuals.py</a></code>   </td><td class="markdownTableBodyNone">Formulaic analysis dashboard   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2093"></a>
Color Scheme Mapping</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Asset Class   </th><th class="markdownTableHeadNone">Node Color   </th><th class="markdownTableHeadNone">Relationship Type   </th><th class="markdownTableHeadNone">Edge Color    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Equity   </td><td class="markdownTableBodyNone">Blue (#1f77b4)   </td><td class="markdownTableBodyNone">same_sector   </td><td class="markdownTableBodyNone">Orange    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Fixed Income   </td><td class="markdownTableBodyNone">Green (#2ca02c)   </td><td class="markdownTableBodyNone">corporate_bond_to_equity   </td><td class="markdownTableBodyNone">Blue    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Commodity   </td><td class="markdownTableBodyNone">Orange (#ff7f0e)   </td><td class="markdownTableBodyNone">commodity_exposure   </td><td class="markdownTableBodyNone">Green    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Currency   </td><td class="markdownTableBodyNone">Red (#d62728)   </td><td class="markdownTableBodyNone">regulatory_impact   </td><td class="markdownTableBodyNone">Red    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Derivative   </td><td class="markdownTableBodyNone">Purple (#9467bd)   </td><td class="markdownTableBodyNone">market_cap_similar   </td><td class="markdownTableBodyNone">Gray   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2094"></a>
5.2.7 Component Interaction Diagram</h3>
<div class="fragment"><div class="line">flowchart LR</div>
<div class="line">    subgraph Frontend[Frontend Layer]</div>
<div class="line">        NextJS[Next.js]</div>
<div class="line">        Gradio[Gradio]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph API[API Layer]</div>
<div class="line">        FastAPI[FastAPI]</div>
<div class="line">        Auth[Auth]</div>
<div class="line">        Rate[Rate Limiter]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Business[Business Logic]</div>
<div class="line">        Graph[Graph Engine]</div>
<div class="line">        Viz[Visualization]</div>
<div class="line">        Models[Domain Models]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Data[Data Layer]</div>
<div class="line">        Sample[Sample Data]</div>
<div class="line">        Yahoo[Yahoo Finance]</div>
<div class="line">        Cache[Cache]</div>
<div class="line">        SQLite[SQLite]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    NextJS --&gt;|HTTP/JSON| FastAPI</div>
<div class="line">    Gradio --&gt;|Direct Call| Graph</div>
<div class="line">    FastAPI --&gt; Rate</div>
<div class="line">    Rate --&gt; Auth</div>
<div class="line">    Auth --&gt; Graph</div>
<div class="line">    Auth --&gt; SQLite</div>
<div class="line">    Graph --&gt; Viz</div>
<div class="line">    Graph --&gt; Models</div>
<div class="line">    Graph --&gt; Sample</div>
<div class="line">    Graph --&gt; Yahoo</div>
<div class="line">    Yahoo --&gt; Cache</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md2096"></a>
5.3 TECHNICAL DECISIONS</h2>
<h3><a class="anchor" id="autotoc_md2097"></a>
5.3.1 Architecture Style Decisions</h3>
<h4><a class="anchor" id="autotoc_md2098"></a>
Decision: Monolithic with API-First Design</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Aspect   </th><th class="markdownTableHeadNone">Choice   </th><th class="markdownTableHeadNone">Alternatives Considered    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Deployment Model   </td><td class="markdownTableBodyNone">Monolithic   </td><td class="markdownTableBodyNone">Microservices, Serverless-only    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">API Design   </td><td class="markdownTableBodyNone">REST/JSON   </td><td class="markdownTableBodyNone">GraphQL, gRPC    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Data Storage   </td><td class="markdownTableBodyNone">In-memory with optional persistence   </td><td class="markdownTableBodyNone">Database-first, Event-sourced   </td></tr>
</table>
<p><b>Rationale</b>:</p>
<ul>
<li><b>Simplified Deployment</b>: Single Python process reduces operational complexity for current scale</li>
<li><b>Module Boundaries</b>: Clear package structure (<code>src/logic/</code>, <code>src/data/</code>, <code>src/visualizations/</code>) enables future microservices migration</li>
<li><b>Adequate Scale</b>: &lt;500 assets fits comfortably in memory with sub-millisecond access</li>
<li>**Deployment Flexibility**: Same codebase deploys to Docker, Vercel, and local development</li>
</ul>
<p>**Tradeoffs**:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Benefit   </th><th class="markdownTableHeadNone">Cost    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Simpler operations   </td><td class="markdownTableBodyNone">Limited horizontal scaling of graph    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Faster development   </td><td class="markdownTableBodyNone">All components share runtime    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Lower latency   </td><td class="markdownTableBodyNone">Memory-bound capacity   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2099"></a>
5.3.2 Communication Pattern Decisions</h3>
<h4><a class="anchor" id="autotoc_md2100"></a>
Decision: REST/JSON over HTTP</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Criterion   </th><th class="markdownTableHeadNone">REST/JSON   </th><th class="markdownTableHeadNone">GraphQL   </th><th class="markdownTableHeadNone">gRPC    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Client Compatibility   </td><td class="markdownTableBodyNone">Universal   </td><td class="markdownTableBodyNone">Requires client   </td><td class="markdownTableBodyNone">Limited browser support    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Documentation   </td><td class="markdownTableBodyNone">Auto-generated OpenAPI   </td><td class="markdownTableBodyNone">Schema introspection   </td><td class="markdownTableBodyNone">Protobuf definitions    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Caching   </td><td class="markdownTableBodyNone">HTTP caching natural   </td><td class="markdownTableBodyNone">Complex caching   </td><td class="markdownTableBodyNone">Not applicable    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Complexity   </td><td class="markdownTableBodyNone">Low   </td><td class="markdownTableBodyNone">Medium   </td><td class="markdownTableBodyNone">High   </td></tr>
</table>
<p><b>Rationale</b>:</p>
<ul>
<li>FastAPI provides automatic OpenAPI documentation generation</li>
<li>JSON serialization handles complex types (dates as ISO strings)</li>
<li>Pydantic models enforce type safety at API boundaries</li>
<li>Stateless request handling simplifies scaling</li>
</ul>
<h3><a class="anchor" id="autotoc_md2101"></a>
5.3.3 Data Storage Decisions</h3>
<h4><a class="anchor" id="autotoc_md2102"></a>
Decision: In-Memory Graph with Optional Persistence</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph StorageOptions[Storage Decision Tree]</div>
<div class="line">        Start([Storage&lt;br/&gt;Requirement]) --&gt; Scale{Expected&lt;br/&gt;Scale?}</div>
<div class="line">        Scale --&gt;|&quot;&lt; 500 nodes&quot;| InMemory[In-Memory Graph]</div>
<div class="line">        Scale --&gt;|&quot;&gt; 500 nodes&quot;| Persistence{Persistence&lt;br/&gt;Required?}</div>
<div class="line">        Persistence --&gt;|No| InMemory</div>
<div class="line">        Persistence --&gt;|Yes| Database[SQLAlchemy + PostgreSQL]</div>
<div class="line">        InMemory --&gt; CacheNeeded{Cache&lt;br/&gt;Needed?}</div>
<div class="line">        CacheNeeded --&gt;|Yes| JSONCache[JSON File Cache]</div>
<div class="line">        CacheNeeded --&gt;|No| DirectUse[Direct Use]</div>
<div class="line">    end</div>
</div><!-- fragment --><p><b>Rationale</b>:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Storage Option   </th><th class="markdownTableHeadNone">Use Case   </th><th class="markdownTableHeadNone">Trade-off    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">In-Memory   </td><td class="markdownTableBodyNone">Development, Small Datasets   </td><td class="markdownTableBodyNone">Fast access, no persistence    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">JSON Cache   </td><td class="markdownTableBodyNone">Startup optimization   </td><td class="markdownTableBodyNone">Atomic writes, file I/O    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SQLite   </td><td class="markdownTableBodyNone">Authentication, Testing   </td><td class="markdownTableBodyNone">Simple setup, single-writer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PostgreSQL   </td><td class="markdownTableBodyNone">Production persistence   </td><td class="markdownTableBodyNone">Scalable, connection pooling   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2103"></a>
5.3.4 Caching Strategy Decisions</h3>
<h4><a class="anchor" id="autotoc_md2104"></a>
Decision: Atomic JSON File Cache</h4>
<p>The caching strategy uses atomic write operations to prevent data corruption:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Phase   </th><th class="markdownTableHeadNone">Operation   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Write to <code>NamedTemporaryFile</code>   </td><td class="markdownTableBodyNone">Isolate incomplete writes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Flush and sync to disk   </td><td class="markdownTableBodyNone">Ensure durability    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone"><code>os.replace()</code> atomic rename   </td><td class="markdownTableBodyNone">Single atomic operation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Delete temp on failure   </td><td class="markdownTableBodyNone">Clean up partial state   </td></tr>
</table>
<p><b>Configuration Variables</b>:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variable   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Default    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>REAL_DATA_CACHE_PATH</code>   </td><td class="markdownTableBodyNone">Yahoo Finance data cache   </td><td class="markdownTableBodyNone">None (disabled)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>GRAPH_CACHE_PATH</code>   </td><td class="markdownTableBodyNone">Serialized graph cache   </td><td class="markdownTableBodyNone">None (disabled)   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2105"></a>
5.3.5 Security Mechanism Decisions</h3>
<h4><a class="anchor" id="autotoc_md2106"></a>
Decision: JWT with HS256 and pbkdf2_sha256</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Security Layer   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Rationale    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Token Algorithm   </td><td class="markdownTableBodyNone">HS256 (HMAC-SHA256)   </td><td class="markdownTableBodyNone">Symmetric, fast, adequate for single-issuer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Password Hashing   </td><td class="markdownTableBodyNone">pbkdf2_sha256   </td><td class="markdownTableBodyNone">OWASP recommended, passlib integration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Token Expiration   </td><td class="markdownTableBodyNone">30 minutes   </td><td class="markdownTableBodyNone">Balance security and usability    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Rate Limiting   </td><td class="markdownTableBodyNone">slowapi per-endpoint   </td><td class="markdownTableBodyNone">Prevent brute force attacks   </td></tr>
</table>
<p><b>Security Configuration</b>:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Setting   </th><th class="markdownTableHeadNone">Source   </th><th class="markdownTableHeadNone">Default    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SECRET_KEY</code>   </td><td class="markdownTableBodyNone">Environment variable   </td><td class="markdownTableBodyNone">Required    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ALGORITHM</code>   </td><td class="markdownTableBodyNone">Environment variable   </td><td class="markdownTableBodyNone">HS256    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ACCESS_TOKEN_EXPIRE_MINUTES</code>   </td><td class="markdownTableBodyNone">Code constant   </td><td class="markdownTableBodyNone">30   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2108"></a>
5.4 CROSS-CUTTING CONCERNS</h2>
<h3><a class="anchor" id="autotoc_md2109"></a>
5.4.1 Monitoring and Observability</h3>
<h4><a class="anchor" id="autotoc_md2110"></a>
Logging Strategy</h4>
<p><b>Implementation</b>: Python standard logging with INFO level default</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Log Point   </th><th class="markdownTableHeadNone">Level   </th><th class="markdownTableHeadNone">Content    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Graph initialization   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">Success/failure status    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Application startup   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">Server binding, port    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Cache operations   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">Load/save success    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Request errors   </td><td class="markdownTableBodyNone">ERROR   </td><td class="markdownTableBodyNone">Exception details    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Authentication failures   </td><td class="markdownTableBodyNone">WARNING   </td><td class="markdownTableBodyNone">Failed login attempts   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2111"></a>
Metrics Endpoints</h4>
<p>The system exposes operational metrics through the <code>/api/metrics</code> endpoint:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Metric   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Source    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>total_assets</code>   </td><td class="markdownTableBodyNone">Count of nodes in graph   </td><td class="markdownTableBodyNone"><code>len(graph.assets)</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>total_relationships</code>   </td><td class="markdownTableBodyNone">Count of edges   </td><td class="markdownTableBodyNone">Sum of adjacency lists    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>average_degree</code>   </td><td class="markdownTableBodyNone">Mean connections per node   </td><td class="markdownTableBodyNone">Calculated statistic    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>max_degree</code>   </td><td class="markdownTableBodyNone">Highest connected node   </td><td class="markdownTableBodyNone">Maximum adjacency count    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>network_density</code>   </td><td class="markdownTableBodyNone">Edge ratio   </td><td class="markdownTableBodyNone">Actual/possible edges   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2112"></a>
Health Check</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">Response   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/health</code>   </td><td class="markdownTableBodyNone"><code>{"status": "healthy"}</code>   </td><td class="markdownTableBodyNone">Load balancer probe    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Docker HEALTHCHECK   </td><td class="markdownTableBodyNone">HTTP probe every 30s   </td><td class="markdownTableBodyNone">Container orchestration   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2113"></a>
5.4.2 Error Handling Patterns</h3>
<h4><a class="anchor" id="autotoc_md2114"></a>
API Error Categories</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Status Code   </th><th class="markdownTableHeadNone">Scenario   </th><th class="markdownTableHeadNone">Response Detail    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">400   </td><td class="markdownTableBodyNone">Bad Request   </td><td class="markdownTableBodyNone">Inactive user, invalid input    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">401   </td><td class="markdownTableBodyNone">Unauthorized   </td><td class="markdownTableBodyNone">Invalid/expired token, missing credentials    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">404   </td><td class="markdownTableBodyNone">Not Found   </td><td class="markdownTableBodyNone">Asset/resource not found    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">422   </td><td class="markdownTableBodyNone">Validation Error   </td><td class="markdownTableBodyNone">Pydantic validation failure    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">429   </td><td class="markdownTableBodyNone">Too Many Requests   </td><td class="markdownTableBodyNone">Rate limit exceeded    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">500   </td><td class="markdownTableBodyNone">Internal Error   </td><td class="markdownTableBodyNone">Unexpected exception   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2115"></a>
Error Handling Flow</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph ErrorHandling[Error Handling Flow]</div>
<div class="line">        Error([Error Occurs]) --&gt; ErrorType{Error Type}</div>
<div class="line"> </div>
<div class="line">        ErrorType --&gt;|HTTPException| HTTPHandle[Return HTTP Status]</div>
<div class="line">        HTTPHandle --&gt; Status401{401?}</div>
<div class="line">        Status401 --&gt;|Yes| AddWWW[Add WWW-Authenticate Header]</div>
<div class="line">        Status401 --&gt;|No| ReturnDetail[Return Error Detail]</div>
<div class="line">        AddWWW --&gt; ReturnDetail</div>
<div class="line"> </div>
<div class="line">        ErrorType --&gt;|Rate Limit| RateHandle[429 + Retry-After]</div>
<div class="line"> </div>
<div class="line">        ErrorType --&gt;|Validation| ValHandle[422 + Pydantic Details]</div>
<div class="line"> </div>
<div class="line">        ErrorType --&gt;|Unexpected| UnexpHandle[Log Exception]</div>
<div class="line">        UnexpHandle --&gt; Return500[500 Internal Error]</div>
<div class="line"> </div>
<div class="line">        ReturnDetail --&gt; Done([Response Sent])</div>
<div class="line">        RateHandle --&gt; Done</div>
<div class="line">        ValHandle --&gt; Done</div>
<div class="line">        Return500 --&gt; Done</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2116"></a>
Graph Initialization Error Handling</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Error Source   </th><th class="markdownTableHeadNone">Recovery Action   </th><th class="markdownTableHeadNone">Fallback    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Cache load failed   </td><td class="markdownTableBodyNone">Proceed to fresh fetch   </td><td class="markdownTableBodyNone">Standard initialization    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Network disabled   </td><td class="markdownTableBodyNone">Use sample data   </td><td class="markdownTableBodyNone">Offline mode    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Yahoo Finance error   </td><td class="markdownTableBodyNone">Check partial data   </td><td class="markdownTableBodyNone">Sample data fallback    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Critical failure   </td><td class="markdownTableBodyNone">Abort startup   </td><td class="markdownTableBodyNone">Application exit   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2117"></a>
Frontend Error Recovery</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Error Category   </th><th class="markdownTableHeadNone">User Feedback   </th><th class="markdownTableHeadNone">Recovery Option    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Network Error   </td><td class="markdownTableBodyNone">"Unable to connect"   </td><td class="markdownTableBodyNone">Retry button    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">API Error   </td><td class="markdownTableBodyNone">Error message display   </td><td class="markdownTableBodyNone">Retry button    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Render Error   </td><td class="markdownTableBodyNone">Display error state   </td><td class="markdownTableBodyNone">Refresh page   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2118"></a>
5.4.3 Authentication and Authorization Framework</h3>
<h4><a class="anchor" id="autotoc_md2119"></a>
Token Flow Sequence</h4>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant Client as API Client</div>
<div class="line">    participant Rate as Rate Limiter</div>
<div class="line">    participant Auth as Auth Module</div>
<div class="line">    participant Repo as User Repository</div>
<div class="line">    participant JWT as JWT Library</div>
<div class="line"> </div>
<div class="line">    Client-&gt;&gt;Rate: POST /token (credentials)</div>
<div class="line">    Rate-&gt;&gt;Rate: Check 5/min limit</div>
<div class="line"> </div>
<div class="line">    alt Within Limit</div>
<div class="line">        Rate-&gt;&gt;Auth: Process Login</div>
<div class="line">        Auth-&gt;&gt;Repo: get_user(username)</div>
<div class="line">        Repo--&gt;&gt;Auth: User or None</div>
<div class="line"> </div>
<div class="line">        alt User Found</div>
<div class="line">            Auth-&gt;&gt;Auth: verify_password()</div>
<div class="line"> </div>
<div class="line">            alt Password Valid</div>
<div class="line">                Auth-&gt;&gt;Auth: Check user active</div>
<div class="line">                Auth-&gt;&gt;JWT: encode(payload, SECRET_KEY)</div>
<div class="line">                JWT--&gt;&gt;Auth: Access Token</div>
<div class="line">                Auth--&gt;&gt;Client: {access_token, token_type: bearer}</div>
<div class="line">            else Invalid</div>
<div class="line">                Auth--&gt;&gt;Client: 401 Unauthorized</div>
<div class="line">            end</div>
<div class="line">        else Not Found</div>
<div class="line">            Auth--&gt;&gt;Client: 401 Unauthorized</div>
<div class="line">        end</div>
<div class="line">    else Exceeded</div>
<div class="line">        Rate--&gt;&gt;Client: 429 Too Many Requests</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2120"></a>
Protected Endpoint Validation</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Step   </th><th class="markdownTableHeadNone">Action   </th><th class="markdownTableHeadNone">Failure Response    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Extract Bearer token from header   </td><td class="markdownTableBodyNone">401 Not authenticated    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Decode JWT with SECRET_KEY   </td><td class="markdownTableBodyNone">401 Could not validate    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Check token expiration   </td><td class="markdownTableBodyNone">401 Token expired    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Lookup user in repository   </td><td class="markdownTableBodyNone">401 Invalid credentials    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">Verify user is active   </td><td class="markdownTableBodyNone">400 Inactive user   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2121"></a>
5.4.4 Performance Requirements and SLAs</h3>
<h4><a class="anchor" id="autotoc_md2122"></a>
Performance Targets</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Operation   </th><th class="markdownTableHeadNone">Target SLA   </th><th class="markdownTableHeadNone">Measurement    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Response (p95)   </td><td class="markdownTableBodyNone">&lt; 500ms   </td><td class="markdownTableBodyNone">Request to response    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visualization Rendering   </td><td class="markdownTableBodyNone">&lt; 2 seconds   </td><td class="markdownTableBodyNone">Data load to interactive    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Token Generation   </td><td class="markdownTableBodyNone">&lt; 100ms   </td><td class="markdownTableBodyNone">Credential to token    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Graph Initialization   </td><td class="markdownTableBodyNone">&lt; 3 seconds   </td><td class="markdownTableBodyNone">Application startup    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Relationship Discovery   </td><td class="markdownTableBodyNone">&lt; 500ms   </td><td class="markdownTableBodyNone">For 100 assets    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Initial Page Load   </td><td class="markdownTableBodyNone">&lt; 3 seconds   </td><td class="markdownTableBodyNone">Navigation to interactive   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2123"></a>
Rate Limiting Configuration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">Limit   </th><th class="markdownTableHeadNone">Window   </th><th class="markdownTableHeadNone">Key Function    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>POST /token</code>   </td><td class="markdownTableBodyNone">5 requests   </td><td class="markdownTableBodyNone">1 minute   </td><td class="markdownTableBodyNone">Client IP    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>GET /api/users/me</code>   </td><td class="markdownTableBodyNone">10 requests   </td><td class="markdownTableBodyNone">1 minute   </td><td class="markdownTableBodyNone">Client IP    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Other endpoints   </td><td class="markdownTableBodyNone">Unlimited   </td><td class="markdownTableBodyNone">N/A   </td><td class="markdownTableBodyNone">N/A   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2124"></a>
Timeout Configuration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Timeout   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">JWT Token   </td><td class="markdownTableBodyNone">30 minutes   </td><td class="markdownTableBodyNone">Session expiration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Rate Limit Window   </td><td class="markdownTableBodyNone">1 minute   </td><td class="markdownTableBodyNone">Request counting period    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HTTP Client   </td><td class="markdownTableBodyNone">30 seconds   </td><td class="markdownTableBodyNone">API request timeout    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Health Check   </td><td class="markdownTableBodyNone">30 seconds   </td><td class="markdownTableBodyNone">Container probe interval   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2125"></a>
5.4.5 CORS Configuration</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Environment   </th><th class="markdownTableHeadNone">Allowed Origins   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Development   </td><td class="markdownTableBodyNone"><code><a href="http://localhost:3000">http://localhost:3000</a></code>, <code><a href="http://localhost:7860">http://localhost:7860</a></code>   </td><td class="markdownTableBodyNone">Hardcoded    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Production   </td><td class="markdownTableBodyNone">HTTPS origins only   </td><td class="markdownTableBodyNone">Environment variable    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Custom   </td><td class="markdownTableBodyNone">Comma-separated list   </td><td class="markdownTableBodyNone"><code>ALLOWED_ORIGINS</code>   </td></tr>
</table>
<p><b>Security Notes</b>:</p>
<ul>
<li>Wildcard (<code>*</code>) origins are prohibited when authentication headers are used</li>
<li>Vercel preview domains validated via regex pattern matching</li>
<li>CORS configuration should be reviewed when promoting to production</li>
</ul>
<h3><a class="anchor" id="autotoc_md2126"></a>
5.4.6 Disaster Recovery Procedures</h3>
<h4><a class="anchor" id="autotoc_md2127"></a>
Recovery Scenarios</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Scenario   </th><th class="markdownTableHeadNone">Detection   </th><th class="markdownTableHeadNone">Recovery Action    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Graph corruption   </td><td class="markdownTableBodyNone">Validation failure   </td><td class="markdownTableBodyNone">Clear cache, reinitialize    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Cache file corruption   </td><td class="markdownTableBodyNone">JSON parse error   </td><td class="markdownTableBodyNone">Delete cache, fresh fetch    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Database unavailable   </td><td class="markdownTableBodyNone">Connection timeout   </td><td class="markdownTableBodyNone">Retry with exponential backoff    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Yahoo Finance outage   </td><td class="markdownTableBodyNone">Request timeout   </td><td class="markdownTableBodyNone">Fall back to sample data    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Authentication failure   </td><td class="markdownTableBodyNone">JWT decode error   </td><td class="markdownTableBodyNone">Re-authenticate user   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2128"></a>
Data Recovery Priority</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Priority   </th><th class="markdownTableHeadNone">Data   </th><th class="markdownTableHeadNone">Recovery Source    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">User credentials   </td><td class="markdownTableBodyNone">SQLite backup    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Graph state   </td><td class="markdownTableBodyNone">Cache file or Yahoo Finance    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Session state   </td><td class="markdownTableBodyNone">Stateless (no recovery needed)   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2130"></a>
5.5 DEPLOYMENT ARCHITECTURE</h2>
<h3><a class="anchor" id="autotoc_md2131"></a>
5.5.1 Local Development</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Command   </th><th class="markdownTableHeadNone">Port   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FastAPI Backend   </td><td class="markdownTableBodyNone"><code>uvicorn <a class="el" href="namespaceapi_1_1main.html">api.main</a>:app --reload --port 8000</code>   </td><td class="markdownTableBodyNone">8000   </td><td class="markdownTableBodyNone">API development    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Next.js Frontend   </td><td class="markdownTableBodyNone"><code>cd frontend &amp;&amp; npm run dev</code>   </td><td class="markdownTableBodyNone">3000   </td><td class="markdownTableBodyNone">UI development    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Gradio UI   </td><td class="markdownTableBodyNone"><code>python <a class="el" href="app_8py.html">app.py</a></code>   </td><td class="markdownTableBodyNone">7860   </td><td class="markdownTableBodyNone">Legacy interface   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2132"></a>
5.5.2 Docker Deployment</h3>
<p><b><a class="el" href="classBase.html">Base</a> Configuration</b> (from <code>Dockerfile</code>):</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Setting   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="classBase.html">Base</a> Image   </td><td class="markdownTableBodyNone"><code>python:3.11-slim</code>   </td><td class="markdownTableBodyNone">Minimal Python runtime    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Working Directory   </td><td class="markdownTableBodyNone"><code>/app</code>   </td><td class="markdownTableBodyNone">Application root    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">User   </td><td class="markdownTableBodyNone"><code>appuser</code> (UID 1000)   </td><td class="markdownTableBodyNone">Non-root security    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Exposed Port   </td><td class="markdownTableBodyNone">7860   </td><td class="markdownTableBodyNone">Gradio default    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Health Check   </td><td class="markdownTableBodyNone">HTTP probe every 30s   </td><td class="markdownTableBodyNone">Container health   </td></tr>
</table>
<p><b>Docker Compose</b> (from <code>docker-compose.yml</code>):</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Service   </th><th class="markdownTableHeadNone">Ports   </th><th class="markdownTableHeadNone">Volumes   </th><th class="markdownTableHeadNone">Restart Policy    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">app   </td><td class="markdownTableBodyNone">7860:7860   </td><td class="markdownTableBodyNone"><code>./src:/app/src</code>, <code>./data:/app/data</code>   </td><td class="markdownTableBodyNone">unless-stopped   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2133"></a>
5.5.3 Vercel Serverless</h3>
<p><b>Build Configuration</b> (from <code>vercel.json</code>):</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Builder   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Backend   </td><td class="markdownTableBodyNone"><code>@vercel/python</code>   </td><td class="markdownTableBodyNone">maxLambdaSize: 50mb    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Frontend   </td><td class="markdownTableBodyNone"><code>@vercel/next</code>   </td><td class="markdownTableBodyNone">Default Next.js settings   </td></tr>
</table>
<p><b>Route Configuration</b>:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Pattern   </th><th class="markdownTableHeadNone">Destination   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/(.*)</code>   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone">Backend API routes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/(.*)</code>   </td><td class="markdownTableBodyNone"><code>frontend/$1</code>   </td><td class="markdownTableBodyNone">Frontend static/SSR   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2134"></a>
5.5.4 Deployment Architecture Diagram</h3>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph Local[Local Development]</div>
<div class="line">        LocalFE[Next.js&lt;br/&gt;:3000]</div>
<div class="line">        LocalAPI[FastAPI&lt;br/&gt;:8000]</div>
<div class="line">        LocalGradio[Gradio&lt;br/&gt;:7860]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Docker[Docker Deployment]</div>
<div class="line">        DockerApp[app container&lt;br/&gt;:7860]</div>
<div class="line">        DockerVol[(Volumes)]</div>
<div class="line">        DockerApp --&gt; DockerVol</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Vercel[Vercel Serverless]</div>
<div class="line">        VercelEdge[Edge Network]</div>
<div class="line">        VercelLambda[Python Lambda]</div>
<div class="line">        VercelNext[Next.js SSR]</div>
<div class="line">        VercelEdge --&gt; VercelLambda</div>
<div class="line">        VercelEdge --&gt; VercelNext</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    Users([Users]) --&gt; Local</div>
<div class="line">    Users --&gt; Docker</div>
<div class="line">    Users --&gt; Vercel</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md2136"></a>
5.6 DATABASE SCHEMA</h2>
<h3><a class="anchor" id="autotoc_md2137"></a>
5.6.1 Schema Overview</h3>
<p>The database schema (from <code>migrations/001_initial.sql</code>) defines four tables for optional persistence:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Table   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Primary Key    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>assets</code>   </td><td class="markdownTableBodyNone">Financial instrument storage   </td><td class="markdownTableBodyNone"><code>id</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>asset_relationships</code>   </td><td class="markdownTableBodyNone">Relationship edges   </td><td class="markdownTableBodyNone"><code>source_id, target_id, relationship_type</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>regulatory_events</code>   </td><td class="markdownTableBodyNone">Event records   </td><td class="markdownTableBodyNone"><code>id</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>regulatory_event_assets</code>   </td><td class="markdownTableBodyNone">Event-asset junction   </td><td class="markdownTableBodyNone"><code>event_id, asset_id</code>   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2138"></a>
5.6.2 Entity Relationships</h3>
<div class="fragment"><div class="line">erDiagram</div>
<div class="line">    assets {</div>
<div class="line">        string id PK</div>
<div class="line">        string symbol</div>
<div class="line">        string name</div>
<div class="line">        string asset_class</div>
<div class="line">        string sector</div>
<div class="line">        float price</div>
<div class="line">        float market_cap</div>
<div class="line">        string currency</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    asset_relationships {</div>
<div class="line">        string source_id FK</div>
<div class="line">        string target_id FK</div>
<div class="line">        string relationship_type</div>
<div class="line">        float strength</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    regulatory_events {</div>
<div class="line">        string id PK</div>
<div class="line">        string event_type</div>
<div class="line">        date date</div>
<div class="line">        string description</div>
<div class="line">        float impact_score</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    regulatory_event_assets {</div>
<div class="line">        string event_id FK</div>
<div class="line">        string asset_id FK</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    assets ||--o{ asset_relationships : &quot;source&quot;</div>
<div class="line">    assets ||--o{ asset_relationships : &quot;target&quot;</div>
<div class="line">    assets ||--o{ regulatory_event_assets : &quot;affected_by&quot;</div>
<div class="line">    regulatory_events ||--o{ regulatory_event_assets : &quot;affects&quot;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2139"></a>
5.6.3 Cascade Behavior</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parent Deletion   </th><th class="markdownTableHeadNone">Cascade Target   </th><th class="markdownTableHeadNone">Behavior    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Asset   </td><td class="markdownTableBodyNone">asset_relationships   </td><td class="markdownTableBodyNone">Delete related edges    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Asset   </td><td class="markdownTableBodyNone">regulatory_event_assets   </td><td class="markdownTableBodyNone">Remove junction entries    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Regulatory Event   </td><td class="markdownTableBodyNone">regulatory_event_assets   </td><td class="markdownTableBodyNone">Remove junction entries   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2141"></a>
5.7 References</h2>
<h4><a class="anchor" id="autotoc_md2142"></a>
Files Examined</h4>
<ul>
<li><code><a class="el" href="api_2main_8py.html">api/main.py</a></code> - FastAPI application, routing, CORS, rate limiting, graph lifecycle</li>
<li><code><a class="el" href="auth_8py.html">api/auth.py</a></code> - JWT authentication, password verification, user repository</li>
<li><code><a class="el" href="api_2database_8py.html">api/database.py</a></code> - SQLite connection management for authentication</li>
<li><code><a class="el" href="app_8py.html">app.py</a></code> - Gradio UI entry point with tabbed interface</li>
<li><code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code> - Core graph container class, relationship storage</li>
<li><code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code> - Domain model dataclasses, enums, validation</li>
<li><code><a class="el" href="sample__data_8py.html">src/data/sample_data.py</a></code> - Sample database generator</li>
<li><code><a class="el" href="real__data__fetcher_8py.html">src/data/real_data_fetcher.py</a></code> - Yahoo Finance integration, caching</li>
<li><code><a class="el" href="repository_8py.html">src/data/repository.py</a></code> - SQLAlchemy repository pattern</li>
<li><code><a class="el" href="db__models_8py.html">src/data/db_models.py</a></code> - ORM model definitions</li>
<li><code><a class="el" href="graph__visuals_8py.html">src/visualizations/graph_visuals.py</a></code> - 3D Plotly visualization</li>
<li><code><a class="el" href="graph__2d__visuals_8py.html">src/visualizations/graph_2d_visuals.py</a></code> - 2D Plotly visualization</li>
<li><code><a class="el" href="metric__visuals_8py.html">src/visualizations/metric_visuals.py</a></code> - Metrics dashboard charts</li>
<li><code><a class="el" href="schema__report_8py.html">src/reports/schema_report.py</a></code> - Schema documentation generator</li>
<li><code>frontend/app/page.tsx</code> - Next.js home page component</li>
<li><code>frontend/app/lib/api.ts</code> - API client with Axios</li>
<li><code>frontend/app/components/NetworkVisualization.tsx</code> - 3D visualization component</li>
<li><code>frontend/app/components/MetricsDashboard.tsx</code> - Metrics display component</li>
<li><code>frontend/app/components/AssetList.tsx</code> - Asset table component</li>
<li><code>vercel.json</code> - Vercel deployment configuration</li>
<li><code>Dockerfile</code> - Container definition</li>
<li><code>docker-compose.yml</code> - Container orchestration</li>
<li><code>migrations/001_initial.sql</code> - Database schema definition</li>
<li><code>requirements.txt</code> - Python dependencies</li>
</ul>
<h4><a class="anchor" id="autotoc_md2143"></a>
Folders Explored</h4>
<ul>
<li><code>api/</code> - Backend API layer</li>
<li><code>src/logic/</code> - Core graph logic</li>
<li><code>src/models/</code> - Domain model definitions</li>
<li><code>src/data/</code> - Data layer components</li>
<li><code>src/visualizations/</code> - Visualization utilities</li>
<li><code>src/reports/</code> - Report generation</li>
<li><code>frontend/</code> - Next.js application</li>
<li><code>frontend/app/</code> - App Router source</li>
<li><code>frontend/app/components/</code> - React components</li>
<li><code>tests/</code> - Test harness</li>
</ul>
<h4><a class="anchor" id="autotoc_md2144"></a>
Technical Specification Sections Referenced</h4>
<ul>
<li>1.2 System Overview</li>
<li>3.1 Technology Stack Overview</li>
<li>3.6 Databases &amp; Storage</li>
<li>3.7 Development &amp; Deployment</li>
<li>3.8 Security Considerations</li>
<li>3.9 Integration Requirements</li>
<li>4.1 High-Level System Workflow</li>
<li>4.2 Core Business Process Flows</li>
<li>4.3 API Request Workflows</li>
<li>4.4 Frontend Workflows</li>
<li>4.5 Error Handling Workflows</li>
<li>4.6 Integration Sequence Diagrams</li>
<li>4.7 State Transition Diagrams</li>
<li>4.8 Timing and SLA Considerations</li>
</ul>
<h1><a class="anchor" id="autotoc_md2145"></a>
6. SYSTEM COMPONENTS DESIGN</h1>
<h2><a class="anchor" id="autotoc_md2146"></a>
6.1 Core Services Architecture</h2>
<h4><a class="anchor" id="autotoc_md2147"></a>
SERVICES ARCHITECTURE</h4>
<h2><a class="anchor" id="autotoc_md2148"></a>
6.1 Core Services Architecture</h2>
<h3><a class="anchor" id="autotoc_md2149"></a>
6.1.1 Architecture Classification Statement</h3>
<h4><a class="anchor" id="autotoc_md2150"></a>
Applicability Determination</h4>
<p><b>Core Services Architecture is not applicable for this system in the traditional microservices sense.</b> The Financial Asset Relationship Database is explicitly designed as a <b>monolithic layered architecture</b> with a single deployable Python process, not as a distributed microservices system.</p>
<p>This architectural decision is documented and intentional, based on the following rationale:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Evaluation Criteria   </th><th class="markdownTableHeadNone">System Characteristic   </th><th class="markdownTableHeadNone">Microservices Applicability    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Deployment Model   </td><td class="markdownTableBodyNone">Single Python process   </td><td class="markdownTableBodyNone">Not Applicable    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Service Decomposition   </td><td class="markdownTableBodyNone">Modular packages within monolith   </td><td class="markdownTableBodyNone">Not Applicable    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Inter-Service Communication   </td><td class="markdownTableBodyNone">Direct Python function calls   </td><td class="markdownTableBodyNone">Not Applicable    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Service Discovery   </td><td class="markdownTableBodyNone">No distributed services to discover   </td><td class="markdownTableBodyNone">Not Applicable    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Data Management   </td><td class="markdownTableBodyNone">Shared in-memory graph singleton   </td><td class="markdownTableBodyNone">Not Applicable   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2151"></a>
Explicit Architectural Decision</h4>
<p>The technical specification documents this as a deliberate design choice:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Aspect   </th><th class="markdownTableHeadNone">Choice   </th><th class="markdownTableHeadNone">Alternatives Considered    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Deployment Model   </td><td class="markdownTableBodyNone"><b>Monolithic</b>   </td><td class="markdownTableBodyNone">Microservices, Serverless-only    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">API Design   </td><td class="markdownTableBodyNone">REST/JSON   </td><td class="markdownTableBodyNone">GraphQL, gRPC    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Data Storage   </td><td class="markdownTableBodyNone">In-memory with optional persistence   </td><td class="markdownTableBodyNone">Database-first, Event-sourced   </td></tr>
</table>
<p><b>Documented Rationale from Architecture Decision Records:</b></p>
<ul>
<li>Single Python process reduces operational complexity for current scale</li>
<li>Module boundaries enable future microservices migration if needed</li>
<li>Dataset size (&lt;500 assets) fits comfortably in memory with sub-millisecond access</li>
<li>Same codebase deploys to Docker, Vercel, and local development environments</li>
</ul>
<h3><a class="anchor" id="autotoc_md2152"></a>
6.1.2 Monolithic Architecture Overview</h3>
<h4><a class="anchor" id="autotoc_md2153"></a>
Layered Architecture Design</h4>
<p>Instead of service decomposition, the system implements a **four-layer architecture** with clear separation of concerns within a single process:</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph MonolithicArchitecture[Monolithic Layered Architecture]</div>
<div class="line">        subgraph PresentationLayer[Presentation Layer]</div>
<div class="line">            NextJS[Next.js Frontend&lt;br/&gt;Port 3000]</div>
<div class="line">            GradioUI[Gradio UI&lt;br/&gt;Port 7860]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph APILayer[API Layer]</div>
<div class="line">            FastAPIApp[FastAPI Backend&lt;br/&gt;Port 8000]</div>
<div class="line">            AuthModule[Auth Module]</div>
<div class="line">            RateLimiter[Rate Limiter]</div>
<div class="line">            CORSMiddleware[CORS Middleware]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph BusinessLayer[Business Logic Layer]</div>
<div class="line">            GraphEngine[Asset Graph Engine]</div>
<div class="line">            DomainModels[Domain Models]</div>
<div class="line">            VizModule[Visualization Module]</div>
<div class="line">            MetricsCalc[Metrics Calculator]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph DataLayer[Data Layer]</div>
<div class="line">            SampleGen[Sample Data Generator]</div>
<div class="line">            RealFetcher[Real Data Fetcher]</div>
<div class="line">            JSONCache[JSON File Cache]</div>
<div class="line">            SQLiteDB[SQLite Auth DB]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    NextJS --&gt; FastAPIApp</div>
<div class="line">    GradioUI --&gt; GraphEngine</div>
<div class="line">    FastAPIApp --&gt; CORSMiddleware</div>
<div class="line">    CORSMiddleware --&gt; RateLimiter</div>
<div class="line">    RateLimiter --&gt; AuthModule</div>
<div class="line">    AuthModule --&gt; GraphEngine</div>
<div class="line">    GraphEngine --&gt; DomainModels</div>
<div class="line">    GraphEngine --&gt; VizModule</div>
<div class="line">    GraphEngine --&gt; MetricsCalc</div>
<div class="line">    GraphEngine --&gt; SampleGen</div>
<div class="line">    GraphEngine --&gt; RealFetcher</div>
<div class="line">    RealFetcher --&gt; JSONCache</div>
<div class="line">    AuthModule --&gt; SQLiteDB</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2154"></a>
Layer Responsibilities</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Layer   </th><th class="markdownTableHeadNone">Components   </th><th class="markdownTableHeadNone">Responsibility   </th><th class="markdownTableHeadNone">Communication Pattern    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Presentation   </td><td class="markdownTableBodyNone">Next.js, Gradio   </td><td class="markdownTableBodyNone">User interface rendering   </td><td class="markdownTableBodyNone">HTTP to API, Direct Python calls    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">API   </td><td class="markdownTableBodyNone">FastAPI, Auth, Rate Limiter   </td><td class="markdownTableBodyNone">Request routing, security enforcement   </td><td class="markdownTableBodyNone">Direct Python imports    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Business Logic   </td><td class="markdownTableBodyNone">Graph Engine, Models, Visualization   </td><td class="markdownTableBodyNone">Core domain logic, calculations   </td><td class="markdownTableBodyNone">Direct Python function calls    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data   </td><td class="markdownTableBodyNone">Fetcher, Cache, SQLite   </td><td class="markdownTableBodyNone">Data persistence and retrieval   </td><td class="markdownTableBodyNone">File I/O, SQL queries   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2155"></a>
6.1.3 Modular Package Structure</h3>
<h4><a class="anchor" id="autotoc_md2156"></a>
Package Organization (Alternative to Services)</h4>
<p>While the system does not use microservices, it maintains clean modular boundaries through Python packages that could theoretically be extracted into services in the future:</p>
<div class="fragment"><div class="line">flowchart LR</div>
<div class="line">    subgraph PackageStructure[Modular Package Organization]</div>
<div class="line">        subgraph APIPackage[api/ Package]</div>
<div class="line">            MainPy[main.py&lt;br/&gt;FastAPI App]</div>
<div class="line">            AuthPy[auth.py&lt;br/&gt;JWT Handler]</div>
<div class="line">            DatabasePy[database.py&lt;br/&gt;User Store]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph SrcPackage[src/ Package]</div>
<div class="line">            subgraph LogicPkg[logic/]</div>
<div class="line">                AssetGraph[asset_graph.py]</div>
<div class="line">            end</div>
<div class="line"> </div>
<div class="line">            subgraph ModelsPkg[models/]</div>
<div class="line">                FinModels[financial_models.py]</div>
<div class="line">            end</div>
<div class="line"> </div>
<div class="line">            subgraph DataPkg[data/]</div>
<div class="line">                RealFetch[real_data_fetcher.py]</div>
<div class="line">                SampleData[sample_database.py]</div>
<div class="line">            end</div>
<div class="line"> </div>
<div class="line">            subgraph VizPkg[visualizations/]</div>
<div class="line">                Graph3D[graph_visuals.py]</div>
<div class="line">                Metrics[metric_visuals.py]</div>
<div class="line">            end</div>
<div class="line"> </div>
<div class="line">            subgraph ReportsPkg[reports/]</div>
<div class="line">                SchemaRpt[schema_report.py]</div>
<div class="line">            end</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph FrontendPkg[frontend/ Package]</div>
<div class="line">            NextApp[Next.js Application]</div>
<div class="line">            Components[React Components]</div>
<div class="line">            APIClient[Axios API Client]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    APIPackage --&gt; SrcPackage</div>
<div class="line">    FrontendPkg --&gt; APIPackage</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2157"></a>
Module Boundary Definitions</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Module   </th><th class="markdownTableHeadNone">Location   </th><th class="markdownTableHeadNone">Future Service Potential   </th><th class="markdownTableHeadNone">Dependencies    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Graph Engine   </td><td class="markdownTableBodyNone"><code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code>   </td><td class="markdownTableBodyNone">Graph Service   </td><td class="markdownTableBodyNone">Domain Models only    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Domain Models   </td><td class="markdownTableBodyNone"><code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code>   </td><td class="markdownTableBodyNone">Shared Library   </td><td class="markdownTableBodyNone">Python stdlib    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Data Fetcher   </td><td class="markdownTableBodyNone"><code><a class="el" href="real__data__fetcher_8py.html">src/data/real_data_fetcher.py</a></code>   </td><td class="markdownTableBodyNone">Data Ingestion Service   </td><td class="markdownTableBodyNone">yfinance, cache    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visualization   </td><td class="markdownTableBodyNone"><code>src/visualizations/</code>   </td><td class="markdownTableBodyNone">Rendering Service   </td><td class="markdownTableBodyNone">Plotly, Graph Engine    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Auth Module   </td><td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code>   </td><td class="markdownTableBodyNone">Auth Service   </td><td class="markdownTableBodyNone">PyJWT, passlib    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">API Gateway   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone">API Gateway   </td><td class="markdownTableBodyNone">All modules   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2158"></a>
6.1.4 Communication Patterns Within Monolith</h3>
<h4><a class="anchor" id="autotoc_md2159"></a>
Internal Communication</h4>
<p>Since all components run within a single Python process, communication uses direct function calls rather than network protocols:</p>
<p>| Source | Target | Pattern | Example | | ------------&mdash; | -----------------&mdash; | --------------------------------------------&mdash; | ----&mdash; | | FastAPI → Graph | Direct import | <code>from src.logic.asset_graph import get_graph()</code> | | Gradio → Graph | Direct import | <code>graph.get_assets()</code> | | Graph → Models | Direct instantiation | <code>Asset(id=..., symbol=...)</code> | | Graph → Fetcher | Direct call | <code>fetcher.fetch_real_data()</code> | | API → Auth | Direct call | <code>authenticate_user(username, password)</code> |</p>
<h4><a class="anchor" id="autotoc_md2160"></a>
External Communication</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Interface   </th><th class="markdownTableHeadNone">Protocol   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Frontend → API   </td><td class="markdownTableBodyNone">REST/JSON over HTTP   </td><td class="markdownTableBodyNone">Client-server communication   </td><td class="markdownTableBodyNone"><code>NEXT_PUBLIC_API_URL</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">API → Yahoo Finance   </td><td class="markdownTableBodyNone">HTTP via yfinance   </td><td class="markdownTableBodyNone">External data fetching   </td><td class="markdownTableBodyNone"><code>USE_REAL_DATA_FETCHER</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API → SQLite   </td><td class="markdownTableBodyNone">SQL via sqlite3   </td><td class="markdownTableBodyNone">Authentication persistence   </td><td class="markdownTableBodyNone"><code>DATABASE_URL</code>   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2161"></a>
6.1.5 Thread-Safe Singleton Pattern</h3>
<h4><a class="anchor" id="autotoc_md2162"></a>
Graph Instance Management</h4>
<p>The system uses a thread-safe singleton pattern for the graph engine instead of distributed state management:</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph SingletonPattern[Thread-Safe Singleton Graph Access]</div>
<div class="line">        APIRequest([API Request&lt;br/&gt;Arrives]) --&gt; CheckGlobal{Global graph&lt;br/&gt;instance exists?}</div>
<div class="line"> </div>
<div class="line">        CheckGlobal --&gt;|Yes| ReturnExisting[Return Existing&lt;br/&gt;Graph Instance]</div>
<div class="line">        CheckGlobal --&gt;|No| AcquireLock[Acquire&lt;br/&gt;threading.Lock]</div>
<div class="line"> </div>
<div class="line">        AcquireLock --&gt; DoubleCheck{Double-check&lt;br/&gt;inside lock}</div>
<div class="line">        DoubleCheck --&gt;|Created by&lt;br/&gt;another thread| ReleaseReturn[Release Lock&lt;br/&gt;Return Graph]</div>
<div class="line">        DoubleCheck --&gt;|Still None| InitGraph[Initialize&lt;br/&gt;New Graph]</div>
<div class="line"> </div>
<div class="line">        InitGraph --&gt; LoadCache{Cache&lt;br/&gt;available?}</div>
<div class="line">        LoadCache --&gt;|Yes| LoadFromCache[Load from&lt;br/&gt;JSON Cache]</div>
<div class="line">        LoadCache --&gt;|No| FetchData[Fetch from&lt;br/&gt;Data Source]</div>
<div class="line"> </div>
<div class="line">        FetchData --&gt; BuildRelations[Build&lt;br/&gt;Relationships]</div>
<div class="line">        LoadFromCache --&gt; SetGlobal[Set Global&lt;br/&gt;Reference]</div>
<div class="line">        BuildRelations --&gt; SetGlobal</div>
<div class="line"> </div>
<div class="line">        SetGlobal --&gt; ReleaseLock[Release Lock]</div>
<div class="line">        ReleaseLock --&gt; ReturnNew[Return New&lt;br/&gt;Graph Instance]</div>
<div class="line"> </div>
<div class="line">        ReturnExisting --&gt; GraphReady([Graph Ready&lt;br/&gt;for Use])</div>
<div class="line">        ReleaseReturn --&gt; GraphReady</div>
<div class="line">        ReturnNew --&gt; GraphReady</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2163"></a>
Implementation Details</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Aspect   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Lock Type   </td><td class="markdownTableBodyNone"><code>threading.Lock()</code>   </td><td class="markdownTableBodyNone">Prevent race conditions    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Pattern   </td><td class="markdownTableBodyNone">Double-checked locking   </td><td class="markdownTableBodyNone">Minimize lock contention    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Scope   </td><td class="markdownTableBodyNone">Module-level global   </td><td class="markdownTableBodyNone">Single instance per process    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Factory Override   </td><td class="markdownTableBodyNone"><code>set_graph_factory()</code>   </td><td class="markdownTableBodyNone">Test isolation support   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2164"></a>
6.1.6 Resilience Patterns (Monolithic Context)</h3>
<h4><a class="anchor" id="autotoc_md2165"></a>
Graceful Degradation</h4>
<p>Although not a distributed system, the monolith implements resilience patterns for external dependencies:</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph GracefulDegradation[Graceful Degradation Flow]</div>
<div class="line">        StartInit([Initialize&lt;br/&gt;Graph]) --&gt; TryCache{Try Load&lt;br/&gt;from Cache}</div>
<div class="line"> </div>
<div class="line">        TryCache --&gt;|Success| CacheLoaded[Use Cached&lt;br/&gt;Graph Data]</div>
<div class="line">        TryCache --&gt;|Failure| LogCacheErr[Log Cache&lt;br/&gt;Error]</div>
<div class="line"> </div>
<div class="line">        LogCacheErr --&gt; TryNetwork{Network&lt;br/&gt;Available?}</div>
<div class="line">        TryNetwork --&gt;|Yes| TryYahoo{Fetch from&lt;br/&gt;Yahoo Finance}</div>
<div class="line">        TryNetwork --&gt;|No| UseSample1[Fall Back to&lt;br/&gt;Sample Data]</div>
<div class="line"> </div>
<div class="line">        TryYahoo --&gt;|Success| UseRealData[Use Real&lt;br/&gt;Market Data]</div>
<div class="line">        TryYahoo --&gt;|Partial| UsePartial[Use Available&lt;br/&gt;Partial Data]</div>
<div class="line">        TryYahoo --&gt;|Failure| UseSample2[Fall Back to&lt;br/&gt;Sample Data]</div>
<div class="line"> </div>
<div class="line">        CacheLoaded --&gt; GraphReady([Graph&lt;br/&gt;Initialized])</div>
<div class="line">        UseRealData --&gt; SaveCache[Save to&lt;br/&gt;Cache]</div>
<div class="line">        UsePartial --&gt; SaveCache</div>
<div class="line">        SaveCache --&gt; GraphReady</div>
<div class="line">        UseSample1 --&gt; GraphReady</div>
<div class="line">        UseSample2 --&gt; GraphReady</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2166"></a>
Resilience Pattern Summary</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Pattern   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Trigger Condition    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Cache Fallback   </td><td class="markdownTableBodyNone">JSON file cache   </td><td class="markdownTableBodyNone">Cache load failure    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Source Fallback   </td><td class="markdownTableBodyNone">Sample data generator   </td><td class="markdownTableBodyNone">Network unavailable    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Partial Data Recovery   </td><td class="markdownTableBodyNone">Use available data   </td><td class="markdownTableBodyNone">Partial Yahoo Finance fetch    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Atomic Cache Writes   </td><td class="markdownTableBodyNone"><code>NamedTemporaryFile</code> + <code>os.replace()</code>   </td><td class="markdownTableBodyNone">All cache operations    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Rate Limiting   </td><td class="markdownTableBodyNone">slowapi per-endpoint limits   </td><td class="markdownTableBodyNone">Request threshold exceeded    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Health Checks   </td><td class="markdownTableBodyNone"><code>/api/health</code> endpoint   </td><td class="markdownTableBodyNone">Container orchestration   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2167"></a>
Atomic Cache Write Pattern</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Phase   </th><th class="markdownTableHeadNone">Operation   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Write to <code>NamedTemporaryFile</code>   </td><td class="markdownTableBodyNone">Isolate incomplete writes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Flush and sync to disk   </td><td class="markdownTableBodyNone">Ensure durability    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone"><code>os.replace()</code> atomic rename   </td><td class="markdownTableBodyNone">Prevent corruption    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Delete temp on failure   </td><td class="markdownTableBodyNone">Clean up partial state   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2168"></a>
6.1.7 Error Handling Architecture</h3>
<h4><a class="anchor" id="autotoc_md2169"></a>
Error Categories and Responses</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Error Type   </th><th class="markdownTableHeadNone">HTTP Status   </th><th class="markdownTableHeadNone">Recovery Action   </th><th class="markdownTableHeadNone">User Feedback    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Validation Error   </td><td class="markdownTableBodyNone">422   </td><td class="markdownTableBodyNone">Return Pydantic details   </td><td class="markdownTableBodyNone">Field-level errors    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Authentication Error   </td><td class="markdownTableBodyNone">401   </td><td class="markdownTableBodyNone">Prompt re-authentication   </td><td class="markdownTableBodyNone">Login redirect    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Rate Limit Exceeded   </td><td class="markdownTableBodyNone">429   </td><td class="markdownTableBodyNone">Add Retry-After header   </td><td class="markdownTableBodyNone">Wait message    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Resource Not Found   </td><td class="markdownTableBodyNone">404   </td><td class="markdownTableBodyNone">Return error detail   </td><td class="markdownTableBodyNone">Item not found    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Internal Error   </td><td class="markdownTableBodyNone">500   </td><td class="markdownTableBodyNone">Log exception   </td><td class="markdownTableBodyNone">Generic error   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2170"></a>
Graph Initialization Error Recovery</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Error Source   </th><th class="markdownTableHeadNone">Detection   </th><th class="markdownTableHeadNone">Recovery Action   </th><th class="markdownTableHeadNone">Fallback    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Cache load failed   </td><td class="markdownTableBodyNone">JSON parse error   </td><td class="markdownTableBodyNone">Proceed to fresh fetch   </td><td class="markdownTableBodyNone">Standard initialization    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Network disabled   </td><td class="markdownTableBodyNone">Connection timeout   </td><td class="markdownTableBodyNone">Use sample data   </td><td class="markdownTableBodyNone">Offline mode    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Yahoo Finance error   </td><td class="markdownTableBodyNone">Request exception   </td><td class="markdownTableBodyNone">Check partial data   </td><td class="markdownTableBodyNone">Sample data fallback    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Critical failure   </td><td class="markdownTableBodyNone">Unrecoverable exception   </td><td class="markdownTableBodyNone">Abort startup   </td><td class="markdownTableBodyNone">Application exit   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2171"></a>
6.1.8 Scalability Approach (Monolithic Context)</h3>
<h4><a class="anchor" id="autotoc_md2172"></a>
Current Scale Characteristics</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Metric   </th><th class="markdownTableHeadNone">Current Capacity   </th><th class="markdownTableHeadNone">Limiting Factor    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Node Count   </td><td class="markdownTableBodyNone">&lt;500 assets optimal   </td><td class="markdownTableBodyNone">In-memory storage    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Concurrent Users   </td><td class="markdownTableBodyNone">Single-threaded graph   </td><td class="markdownTableBodyNone">Python GIL    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Response Time (p95)   </td><td class="markdownTableBodyNone">&lt;500ms   </td><td class="markdownTableBodyNone">API processing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visualization Nodes   </td><td class="markdownTableBodyNone">500 nodes, 2000 edges   </td><td class="markdownTableBodyNone">Browser memory   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2173"></a>
Scaling Tradeoffs</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Benefit of Monolithic   </th><th class="markdownTableHeadNone">Associated Cost    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Simpler operations   </td><td class="markdownTableBodyNone">Limited horizontal scaling of graph    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Faster development   </td><td class="markdownTableBodyNone">All components share runtime    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Lower latency   </td><td class="markdownTableBodyNone">Memory-bound capacity    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Single deployment   </td><td class="markdownTableBodyNone">Single point of failure   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2174"></a>
Future Scaling Path</h4>
<p>If the system grows beyond current scale constraints, the modular package structure enables migration to microservices:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Growth Trigger   </th><th class="markdownTableHeadNone">Recommended Action   </th><th class="markdownTableHeadNone">Module to Extract    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&gt;500 assets   </td><td class="markdownTableBodyNone">Database persistence   </td><td class="markdownTableBodyNone">Graph Engine → Graph Service    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Multi-tenant requirements   </td><td class="markdownTableBodyNone">Dedicated auth service   </td><td class="markdownTableBodyNone">Auth Module → Auth Service    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">High visualization load   </td><td class="markdownTableBodyNone">Separate rendering   </td><td class="markdownTableBodyNone">Visualization → Render Service    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data ingestion volume   </td><td class="markdownTableBodyNone">Async processing   </td><td class="markdownTableBodyNone">Data Fetcher → Ingestion Service   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2175"></a>
6.1.9 Performance Optimization</h3>
<h4><a class="anchor" id="autotoc_md2176"></a>
Performance Targets (SLAs)</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Operation   </th><th class="markdownTableHeadNone">Target   </th><th class="markdownTableHeadNone">Measurement    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Response (p95)   </td><td class="markdownTableBodyNone">&lt;500ms   </td><td class="markdownTableBodyNone">Request to response    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visualization Rendering   </td><td class="markdownTableBodyNone">&lt;2 seconds   </td><td class="markdownTableBodyNone">Data load to interactive    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Token Generation   </td><td class="markdownTableBodyNone">&lt;100ms   </td><td class="markdownTableBodyNone">Credential to token    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Graph Initialization   </td><td class="markdownTableBodyNone">&lt;3 seconds   </td><td class="markdownTableBodyNone">Application startup    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Relationship Discovery   </td><td class="markdownTableBodyNone">&lt;500ms   </td><td class="markdownTableBodyNone">For 100 assets    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Initial Page Load   </td><td class="markdownTableBodyNone">&lt;3 seconds   </td><td class="markdownTableBodyNone">Navigation to interactive   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2177"></a>
Optimization Techniques</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technique   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Impact    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Deterministic Layout   </td><td class="markdownTableBodyNone">Fixed seed (seed=42)   </td><td class="markdownTableBodyNone">Reproducible 3D positions    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Lazy Initialization   </td><td class="markdownTableBodyNone">Double-checked locking   </td><td class="markdownTableBodyNone">Fast startup    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">JSON Caching   </td><td class="markdownTableBodyNone">Atomic file cache   </td><td class="markdownTableBodyNone">Reduced API calls    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Rate Limiting   </td><td class="markdownTableBodyNone">Per-endpoint limits   </td><td class="markdownTableBodyNone">Fair resource allocation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Client-Side Limits   </td><td class="markdownTableBodyNone">MAX_NODES/MAX_EDGES   </td><td class="markdownTableBodyNone">Browser stability   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2178"></a>
6.1.10 Deployment Architecture Comparison</h3>
<h4><a class="anchor" id="autotoc_md2179"></a>
Deployment Options</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph DeploymentOptions[Deployment Architecture Options]</div>
<div class="line">        subgraph LocalDev[Local Development]</div>
<div class="line">            LocalFE[Next.js&lt;br/&gt;:3000]</div>
<div class="line">            LocalAPI[FastAPI&lt;br/&gt;:8000]</div>
<div class="line">            LocalGradio[Gradio&lt;br/&gt;:7860]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph DockerDeploy[Docker Deployment]</div>
<div class="line">            DockerContainer[Single Container&lt;br/&gt;:7860]</div>
<div class="line">            DockerVolumes[(Mounted&lt;br/&gt;Volumes)]</div>
<div class="line">            DockerContainer --&gt; DockerVolumes</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph VercelDeploy[Vercel Serverless]</div>
<div class="line">            VercelEdge[Edge&lt;br/&gt;Network]</div>
<div class="line">            VercelLambda[Python&lt;br/&gt;Lambda]</div>
<div class="line">            VercelSSR[Next.js&lt;br/&gt;SSR]</div>
<div class="line">            VercelEdge --&gt; VercelLambda</div>
<div class="line">            VercelEdge --&gt; VercelSSR</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    Users([End Users]) --&gt; LocalDev</div>
<div class="line">    Users --&gt; DockerDeploy</div>
<div class="line">    Users --&gt; VercelDeploy</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2180"></a>
Deployment Configuration Summary</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Environment   </th><th class="markdownTableHeadNone">Components   </th><th class="markdownTableHeadNone">Command   </th><th class="markdownTableHeadNone">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Local Dev   </td><td class="markdownTableBodyNone">FastAPI + Next.js + Gradio   </td><td class="markdownTableBodyNone">Multiple processes   </td><td class="markdownTableBodyNone">Full development environment    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Docker   </td><td class="markdownTableBodyNone">Single container   </td><td class="markdownTableBodyNone"><code>docker-compose up</code>   </td><td class="markdownTableBodyNone">Simplified deployment    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Vercel   </td><td class="markdownTableBodyNone">Lambda + SSR   </td><td class="markdownTableBodyNone"><code>vercel deploy</code>   </td><td class="markdownTableBodyNone">Serverless production   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2181"></a>
6.1.11 Constraints and Limitations</h3>
<h4><a class="anchor" id="autotoc_md2182"></a>
Documented System Constraints</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">ID   </th><th class="markdownTableHeadNone">Constraint   </th><th class="markdownTableHeadNone">Mitigation Strategy    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">C-001   </td><td class="markdownTableBodyNone">In-memory graph limits scalability   </td><td class="markdownTableBodyNone">Database persistence option planned    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">C-002   </td><td class="markdownTableBodyNone">Single-user JWT authentication   </td><td class="markdownTableBodyNone">Role-based access planned for Phase 2    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">C-003   </td><td class="markdownTableBodyNone">Yahoo Finance API rate limits   </td><td class="markdownTableBodyNone">Caching with atomic file writes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">C-004   </td><td class="markdownTableBodyNone">Browser memory limits visualization   </td><td class="markdownTableBodyNone">MAX_NODES/MAX_EDGES guardrails   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2183"></a>
Architectural Assumptions</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">ID   </th><th class="markdownTableHeadNone">Assumption   </th><th class="markdownTableHeadNone">Impact if Invalid    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">A-001   </td><td class="markdownTableBodyNone">Modern browser support   </td><td class="markdownTableBodyNone">Visualization features may fail    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">A-002   </td><td class="markdownTableBodyNone">Network connectivity available   </td><td class="markdownTableBodyNone">Falls back to sample data    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">A-003   </td><td class="markdownTableBodyNone">Single concurrent admin sufficient   </td><td class="markdownTableBodyNone">Multi-user requires extension    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">A-004   </td><td class="markdownTableBodyNone">Dataset size &lt;500 nodes   </td><td class="markdownTableBodyNone">Larger datasets need pagination   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2184"></a>
6.1.12 Microservices Migration Readiness</h3>
<h4><a class="anchor" id="autotoc_md2185"></a>
Module Extraction Feasibility</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Module   </th><th class="markdownTableHeadNone">Extraction Complexity   </th><th class="markdownTableHeadNone">Dependencies to Resolve   </th><th class="markdownTableHeadNone">Estimated Effort    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Auth Module   </td><td class="markdownTableBodyNone">Low   </td><td class="markdownTableBodyNone">JWT secret management   </td><td class="markdownTableBodyNone">1-2 weeks    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Fetcher   </td><td class="markdownTableBodyNone">Medium   </td><td class="markdownTableBodyNone">Cache sharing strategy   </td><td class="markdownTableBodyNone">2-4 weeks    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Visualization   </td><td class="markdownTableBodyNone">Medium   </td><td class="markdownTableBodyNone">Graph data access pattern   </td><td class="markdownTableBodyNone">2-4 weeks    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Graph Engine   </td><td class="markdownTableBodyNone">High   </td><td class="markdownTableBodyNone">State management overhaul   </td><td class="markdownTableBodyNone">4-8 weeks   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2186"></a>
Prerequisites for Migration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Prerequisite   </th><th class="markdownTableHeadNone">Current State   </th><th class="markdownTableHeadNone">Required for Migration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Database Persistence   </td><td class="markdownTableBodyNone">Optional (F-015)   </td><td class="markdownTableBodyNone">Required for shared state    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Message Queue   </td><td class="markdownTableBodyNone">Not implemented   </td><td class="markdownTableBodyNone">Required for async communication    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Service Mesh   </td><td class="markdownTableBodyNone">Not applicable   </td><td class="markdownTableBodyNone">Required for service discovery    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Distributed Tracing   </td><td class="markdownTableBodyNone">Not implemented   </td><td class="markdownTableBodyNone">Required for observability   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2187"></a>
6.1.13 References</h3>
<h4><a class="anchor" id="autotoc_md2188"></a>
Technical Specification Sections Referenced</h4>
<ul>
<li><b>5.1 HIGH-LEVEL ARCHITECTURE</b> - Layered architecture design and system boundaries</li>
<li><b>5.2 COMPONENT DETAILS</b> - Component responsibilities and interaction patterns</li>
<li><b>5.3 TECHNICAL DECISIONS</b> - Monolithic architecture choice rationale</li>
<li><b>5.4 CROSS-CUTTING CONCERNS</b> - Error handling, monitoring, authentication</li>
<li><b>5.5 DEPLOYMENT ARCHITECTURE</b> - Deployment options and configurations</li>
<li><b>2.4 Implementation Considerations</b> - Performance and scalability constraints</li>
<li><b>2.6 Assumptions and Constraints</b> - System limitations and mitigations</li>
<li><b>3.9 Integration Requirements</b> - Frontend-backend communication patterns</li>
<li><b>4.5 Error Handling Workflows</b> - Error recovery flows and patterns</li>
</ul>
<h4><a class="anchor" id="autotoc_md2189"></a>
Files and Folders Examined</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Path   </th><th class="markdownTableHeadNone">Relevance    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone">FastAPI application with thread-safe singleton graph pattern    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code>   </td><td class="markdownTableBodyNone">JWT authentication module implementation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code>   </td><td class="markdownTableBodyNone">Graph engine with in-memory storage    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="real__data__fetcher_8py.html">src/data/real_data_fetcher.py</a></code>   </td><td class="markdownTableBodyNone">Fallback mechanism and atomic caching    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code>   </td><td class="markdownTableBodyNone">Domain model definitions    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>src/visualizations/</code>   </td><td class="markdownTableBodyNone">Plotly visualization modules    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="app_8py.html">app.py</a></code>   </td><td class="markdownTableBodyNone">Gradio UI with direct Python function calls    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>docker-compose.yml</code>   </td><td class="markdownTableBodyNone">Single container deployment configuration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>vercel.json</code>   </td><td class="markdownTableBodyNone">Serverless deployment configuration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/</code>   </td><td class="markdownTableBodyNone">Next.js client application   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2190"></a>
Architectural Decision Records</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Decision   </th><th class="markdownTableHeadNone">Choice   </th><th class="markdownTableHeadNone">Rationale    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADR-001   </td><td class="markdownTableBodyNone">Monolithic over Microservices   </td><td class="markdownTableBodyNone">Operational simplicity at current scale    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ADR-002   </td><td class="markdownTableBodyNone">REST/JSON over GraphQL/gRPC   </td><td class="markdownTableBodyNone">Universal client compatibility    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADR-003   </td><td class="markdownTableBodyNone">In-memory over Database-first   </td><td class="markdownTableBodyNone">Sub-millisecond access for &lt;500 assets    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ADR-004   </td><td class="markdownTableBodyNone">Thread-safe Singleton   </td><td class="markdownTableBodyNone">Prevent race conditions, enable testing   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md2191"></a>
6.2 Database Design</h2>
<h3><a class="anchor" id="autotoc_md2192"></a>
6.2.1 Database Architecture Overview</h3>
<h4><a class="anchor" id="autotoc_md2193"></a>
6.2.1.1 Hybrid Storage Architecture</h4>
<p>The Financial Asset Relationship Database employs a <b>hybrid data architecture</b> that combines multiple complementary storage mechanisms optimized for different use cases. This design prioritizes in-memory performance for real-time graph operations while providing optional persistence for durability and scalability.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Storage Layer   </th><th class="markdownTableHeadNone">Technology   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Durability    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Primary Runtime   </td><td class="markdownTableBodyNone">In-Memory Graph   </td><td class="markdownTableBodyNone">Relationship traversal   </td><td class="markdownTableBodyNone">Process lifetime    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Authentication   </td><td class="markdownTableBodyNone">SQLite   </td><td class="markdownTableBodyNone">User credentials   </td><td class="markdownTableBodyNone">Persistent    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Asset Persistence   </td><td class="markdownTableBodyNone">SQLAlchemy ORM   </td><td class="markdownTableBodyNone">Optional durable storage   </td><td class="markdownTableBodyNone">Persistent    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">External Data Cache   </td><td class="markdownTableBodyNone">JSON Files   </td><td class="markdownTableBodyNone">Yahoo Finance data   </td><td class="markdownTableBodyNone">Persistent   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2194"></a>
6.2.1.2 Storage Layer Architecture Diagram</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph StorageArchitecture[Hybrid Storage Architecture]</div>
<div class="line">        subgraph RuntimeLayer[Runtime Layer]</div>
<div class="line">            InMemoryGraph[In-Memory Graph&lt;br/&gt;Dict-based Adjacency Lists]</div>
<div class="line">            GraphSingleton[Thread-Safe&lt;br/&gt;Singleton Pattern]</div>
<div class="line">            InMemoryGraph --&gt; GraphSingleton</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph PersistenceLayer[Persistence Layer]</div>
<div class="line">            subgraph AuthDB[Authentication Database]</div>
<div class="line">                SQLiteAuth[(SQLite&lt;br/&gt;user_credentials)]</div>
<div class="line">            end</div>
<div class="line"> </div>
<div class="line">            subgraph AssetDB[Asset Persistence]</div>
<div class="line">                SQLAORM[SQLAlchemy ORM]</div>
<div class="line">                PostgreSQL[(PostgreSQL&lt;br/&gt;Production)]</div>
<div class="line">                SQLiteDev[(SQLite&lt;br/&gt;Development)]</div>
<div class="line">                SQLAORM --&gt; PostgreSQL</div>
<div class="line">                SQLAORM --&gt; SQLiteDev</div>
<div class="line">            end</div>
<div class="line"> </div>
<div class="line">            subgraph CacheLayer[Cache Layer]</div>
<div class="line">                JSONCache[(JSON Files&lt;br/&gt;Atomic Writes)]</div>
<div class="line">            end</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    GraphSingleton --&gt; SQLAORM</div>
<div class="line">    GraphSingleton --&gt; JSONCache</div>
<div class="line">    AuthModule[Auth Module] --&gt; SQLiteAuth</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2195"></a>
6.2.1.3 Design Rationale</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Design Choice   </th><th class="markdownTableHeadNone">Rationale   </th><th class="markdownTableHeadNone">Trade-off    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">In-memory primary storage   </td><td class="markdownTableBodyNone">Sub-millisecond relationship traversal   </td><td class="markdownTableBodyNone">Memory-bound capacity    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Optional database persistence   </td><td class="markdownTableBodyNone">Flexibility for different deployment scales   </td><td class="markdownTableBodyNone">Additional complexity    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Wide table design   </td><td class="markdownTableBodyNone">Single-table queries for asset retrieval   </td><td class="markdownTableBodyNone">Nullable columns for type-specific fields    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Cascade deletes on all FKs   </td><td class="markdownTableBodyNone">Referential integrity without orphans   </td><td class="markdownTableBodyNone">Potential for bulk deletes   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2197"></a>
6.2.2 Schema Design</h3>
<h4><a class="anchor" id="autotoc_md2198"></a>
6.2.2.1 Core Entity Model</h4>
<p>The database schema is defined in <code>migrations/001_initial.sql</code> and implements a graph-oriented relational design supporting financial asset relationships.</p>
<h4><a class="anchor" id="autotoc_md2199"></a>
Entity Tables Summary</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Table   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Primary Key   </th><th class="markdownTableHeadNone">Record Count Expectation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>assets</code>   </td><td class="markdownTableBodyNone">Financial instrument storage   </td><td class="markdownTableBodyNone"><code>id</code> (TEXT)   </td><td class="markdownTableBodyNone">&lt;500 for optimal performance    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>asset_relationships</code>   </td><td class="markdownTableBodyNone">Directed relationship edges   </td><td class="markdownTableBodyNone"><code>id</code> (INTEGER)   </td><td class="markdownTableBodyNone">N × average_degree    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>regulatory_events</code>   </td><td class="markdownTableBodyNone">Regulatory event records   </td><td class="markdownTableBodyNone"><code>id</code> (TEXT)   </td><td class="markdownTableBodyNone">Events per asset    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>regulatory_event_assets</code>   </td><td class="markdownTableBodyNone">Many-to-many junction   </td><td class="markdownTableBodyNone"><code>id</code> (INTEGER)   </td><td class="markdownTableBodyNone">Events × affected assets   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2200"></a>
6.2.2.2 Assets Table Schema</h4>
<p>The <code>assets</code> table uses a <b>wide table design</b> with nullable type-specific columns rather than separate tables per asset class, enabling simpler queries at the cost of schema sparsity.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Column   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Constraints   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>id</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">PRIMARY KEY   </td><td class="markdownTableBodyNone">Unique asset identifier    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>symbol</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NOT NULL   </td><td class="markdownTableBodyNone">Trading symbol    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>name</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NOT NULL   </td><td class="markdownTableBodyNone">Display name    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>asset_class</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NOT NULL   </td><td class="markdownTableBodyNone"><a class="el" href="classEnum.html">Enum</a>: equity, fixed_income, commodity, currency, derivative    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>sector</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NOT NULL   </td><td class="markdownTableBodyNone">Industry sector classification    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>price</code>   </td><td class="markdownTableBodyNone">REAL   </td><td class="markdownTableBodyNone">NOT NULL   </td><td class="markdownTableBodyNone">Current market price    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>market_cap</code>   </td><td class="markdownTableBodyNone">REAL   </td><td class="markdownTableBodyNone">NULLABLE   </td><td class="markdownTableBodyNone">Market capitalization (equities)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>currency</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NOT NULL   </td><td class="markdownTableBodyNone">ISO 4217 currency code   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2201"></a>
Equity-Specific Columns</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Column   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Constraints   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>pe_ratio</code>   </td><td class="markdownTableBodyNone">REAL   </td><td class="markdownTableBodyNone">NULLABLE   </td><td class="markdownTableBodyNone">Price-to-earnings ratio    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>dividend_yield</code>   </td><td class="markdownTableBodyNone">REAL   </td><td class="markdownTableBodyNone">NULLABLE   </td><td class="markdownTableBodyNone">Annual dividend yield    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>earnings_per_share</code>   </td><td class="markdownTableBodyNone">REAL   </td><td class="markdownTableBodyNone">NULLABLE   </td><td class="markdownTableBodyNone">EPS value    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>book_value</code>   </td><td class="markdownTableBodyNone">REAL   </td><td class="markdownTableBodyNone">NULLABLE   </td><td class="markdownTableBodyNone">Book value per share   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2202"></a>
Fixed Income Columns</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Column   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Constraints   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>yield_to_maturity</code>   </td><td class="markdownTableBodyNone">REAL   </td><td class="markdownTableBodyNone">NULLABLE   </td><td class="markdownTableBodyNone">YTM percentage    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>coupon_rate</code>   </td><td class="markdownTableBodyNone">REAL   </td><td class="markdownTableBodyNone">NULLABLE   </td><td class="markdownTableBodyNone">Annual coupon rate    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>maturity_date</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NULLABLE   </td><td class="markdownTableBodyNone">ISO 8601 date    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>credit_rating</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NULLABLE   </td><td class="markdownTableBodyNone">Credit rating code    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>issuer_id</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NULLABLE   </td><td class="markdownTableBodyNone">FK to issuing entity   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2203"></a>
Commodity/Currency Columns</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Column   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Constraints   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>contract_size</code>   </td><td class="markdownTableBodyNone">REAL   </td><td class="markdownTableBodyNone">NULLABLE   </td><td class="markdownTableBodyNone">Commodity contract size    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>delivery_date</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NULLABLE   </td><td class="markdownTableBodyNone">Commodity delivery date    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>volatility</code>   </td><td class="markdownTableBodyNone">REAL   </td><td class="markdownTableBodyNone">NULLABLE   </td><td class="markdownTableBodyNone">Price volatility    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>exchange_rate</code>   </td><td class="markdownTableBodyNone">REAL   </td><td class="markdownTableBodyNone">NULLABLE   </td><td class="markdownTableBodyNone">Currency exchange rate    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>country</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NULLABLE   </td><td class="markdownTableBodyNone">Currency country    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>central_bank_rate</code>   </td><td class="markdownTableBodyNone">REAL   </td><td class="markdownTableBodyNone">NULLABLE   </td><td class="markdownTableBodyNone">Central bank interest rate   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2204"></a>
6.2.2.3 Asset Relationships Table Schema</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Column   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Constraints   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>id</code>   </td><td class="markdownTableBodyNone">INTEGER   </td><td class="markdownTableBodyNone">PRIMARY KEY AUTOINCREMENT   </td><td class="markdownTableBodyNone">Unique edge identifier    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>source_asset_id</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NOT NULL, FK → assets(id) ON DELETE CASCADE   </td><td class="markdownTableBodyNone">Origin node    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>target_asset_id</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NOT NULL, FK → assets(id) ON DELETE CASCADE   </td><td class="markdownTableBodyNone">Destination node    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>relationship_type</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NOT NULL   </td><td class="markdownTableBodyNone">Relationship classification    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>strength</code>   </td><td class="markdownTableBodyNone">REAL   </td><td class="markdownTableBodyNone">NOT NULL   </td><td class="markdownTableBodyNone">Edge weight [0.0, 1.0]    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>bidirectional</code>   </td><td class="markdownTableBodyNone">INTEGER   </td><td class="markdownTableBodyNone">NOT NULL DEFAULT 0   </td><td class="markdownTableBodyNone">Boolean flag (0/1)   </td></tr>
</table>
<p><b>Unique Constraint</b>: <code>(source_asset_id, target_asset_id, relationship_type)</code> prevents duplicate edges.</p>
<h4><a class="anchor" id="autotoc_md2205"></a>
6.2.2.4 Regulatory Events Tables</h4>
<h4><a class="anchor" id="autotoc_md2206"></a>
Regulatory Events Table</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Column   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Constraints   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>id</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">PRIMARY KEY   </td><td class="markdownTableBodyNone">Unique event identifier    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>asset_id</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NOT NULL, FK → assets(id) ON DELETE CASCADE   </td><td class="markdownTableBodyNone">Primary affected asset    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>event_type</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NOT NULL   </td><td class="markdownTableBodyNone">Event classification    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>date</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NOT NULL   </td><td class="markdownTableBodyNone">ISO 8601 date    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>description</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NOT NULL   </td><td class="markdownTableBodyNone">Event description    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>impact_score</code>   </td><td class="markdownTableBodyNone">REAL   </td><td class="markdownTableBodyNone">NOT NULL   </td><td class="markdownTableBodyNone">Impact range [-1.0, 1.0]   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2207"></a>
Regulatory Event Assets Junction Table</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Column   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Constraints   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>id</code>   </td><td class="markdownTableBodyNone">INTEGER   </td><td class="markdownTableBodyNone">PRIMARY KEY AUTOINCREMENT   </td><td class="markdownTableBodyNone">Junction record ID    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>event_id</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NOT NULL, FK → regulatory_events(id) ON DELETE CASCADE   </td><td class="markdownTableBodyNone">Event reference    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>asset_id</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NOT NULL, FK → assets(id) ON DELETE CASCADE   </td><td class="markdownTableBodyNone">Affected asset   </td></tr>
</table>
<p><b>Unique Constraint</b>: <code>(event_id, asset_id)</code> prevents duplicate associations.</p>
<h4><a class="anchor" id="autotoc_md2208"></a>
6.2.2.5 Authentication Schema</h4>
<p>Defined in <code><a class="el" href="api_2database_8py.html">api/database.py</a></code>, the authentication schema provides user credential storage separate from the asset database.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Column   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Constraints   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>id</code>   </td><td class="markdownTableBodyNone">INTEGER   </td><td class="markdownTableBodyNone">PRIMARY KEY AUTOINCREMENT   </td><td class="markdownTableBodyNone">User record ID    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>username</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">UNIQUE NOT NULL   </td><td class="markdownTableBodyNone">Login identifier    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>email</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NULLABLE   </td><td class="markdownTableBodyNone">Email address    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>full_name</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NULLABLE   </td><td class="markdownTableBodyNone">Display name    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>hashed_password</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">NOT NULL   </td><td class="markdownTableBodyNone">pbkdf2_sha256 hash    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>disabled</code>   </td><td class="markdownTableBodyNone">INTEGER   </td><td class="markdownTableBodyNone">NOT NULL DEFAULT 0   </td><td class="markdownTableBodyNone">Active flag (0=active, 1=disabled)   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2209"></a>
6.2.2.6 Entity Relationship Diagram</h4>
<div class="fragment"><div class="line">erDiagram</div>
<div class="line">    assets {</div>
<div class="line">        TEXT id PK &quot;Unique identifier&quot;</div>
<div class="line">        TEXT symbol &quot;NOT NULL&quot;</div>
<div class="line">        TEXT name &quot;NOT NULL&quot;</div>
<div class="line">        TEXT asset_class &quot;NOT NULL&quot;</div>
<div class="line">        TEXT sector &quot;NOT NULL&quot;</div>
<div class="line">        REAL price &quot;NOT NULL&quot;</div>
<div class="line">        REAL market_cap &quot;NULLABLE&quot;</div>
<div class="line">        TEXT currency &quot;NOT NULL (3-char ISO)&quot;</div>
<div class="line">        REAL pe_ratio &quot;NULLABLE - Equity&quot;</div>
<div class="line">        REAL dividend_yield &quot;NULLABLE - Equity&quot;</div>
<div class="line">        REAL yield_to_maturity &quot;NULLABLE - Bond&quot;</div>
<div class="line">        TEXT credit_rating &quot;NULLABLE - Bond&quot;</div>
<div class="line">        TEXT issuer_id &quot;NULLABLE - Bond FK&quot;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    asset_relationships {</div>
<div class="line">        INTEGER id PK &quot;AUTOINCREMENT&quot;</div>
<div class="line">        TEXT source_asset_id FK &quot;NOT NULL&quot;</div>
<div class="line">        TEXT target_asset_id FK &quot;NOT NULL&quot;</div>
<div class="line">        TEXT relationship_type &quot;NOT NULL&quot;</div>
<div class="line">        REAL strength &quot;NOT NULL [0-1]&quot;</div>
<div class="line">        INTEGER bidirectional &quot;DEFAULT 0&quot;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    regulatory_events {</div>
<div class="line">        TEXT id PK &quot;Unique identifier&quot;</div>
<div class="line">        TEXT asset_id FK &quot;Primary affected&quot;</div>
<div class="line">        TEXT event_type &quot;NOT NULL&quot;</div>
<div class="line">        TEXT date &quot;ISO 8601&quot;</div>
<div class="line">        TEXT description &quot;NOT NULL&quot;</div>
<div class="line">        REAL impact_score &quot;[-1, 1]&quot;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    regulatory_event_assets {</div>
<div class="line">        INTEGER id PK &quot;AUTOINCREMENT&quot;</div>
<div class="line">        TEXT event_id FK &quot;NOT NULL&quot;</div>
<div class="line">        TEXT asset_id FK &quot;NOT NULL&quot;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    user_credentials {</div>
<div class="line">        INTEGER id PK &quot;AUTOINCREMENT&quot;</div>
<div class="line">        TEXT username UK &quot;NOT NULL&quot;</div>
<div class="line">        TEXT email &quot;NULLABLE&quot;</div>
<div class="line">        TEXT full_name &quot;NULLABLE&quot;</div>
<div class="line">        TEXT hashed_password &quot;NOT NULL&quot;</div>
<div class="line">        INTEGER disabled &quot;DEFAULT 0&quot;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    assets ||--o{ asset_relationships : &quot;source_asset_id&quot;</div>
<div class="line">    assets ||--o{ asset_relationships : &quot;target_asset_id&quot;</div>
<div class="line">    assets ||--o{ regulatory_events : &quot;primary_asset&quot;</div>
<div class="line">    assets ||--o{ regulatory_event_assets : &quot;affected_asset&quot;</div>
<div class="line">    regulatory_events ||--o{ regulatory_event_assets : &quot;affects&quot;</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md2211"></a>
6.2.3 Indexing Strategy</h3>
<h4><a class="anchor" id="autotoc_md2212"></a>
6.2.3.1 Primary Key Indexes</h4>
<p>All primary keys are automatically indexed by the database engine:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Table   </th><th class="markdownTableHeadNone">Index   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>assets</code>   </td><td class="markdownTableBodyNone"><code>id</code>   </td><td class="markdownTableBodyNone">B-tree   </td><td class="markdownTableBodyNone">Direct asset lookup    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>asset_relationships</code>   </td><td class="markdownTableBodyNone"><code>id</code>   </td><td class="markdownTableBodyNone">B-tree   </td><td class="markdownTableBodyNone">Edge identification    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>regulatory_events</code>   </td><td class="markdownTableBodyNone"><code>id</code>   </td><td class="markdownTableBodyNone">B-tree   </td><td class="markdownTableBodyNone">Event lookup    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>regulatory_event_assets</code>   </td><td class="markdownTableBodyNone"><code>id</code>   </td><td class="markdownTableBodyNone">B-tree   </td><td class="markdownTableBodyNone">Junction lookup    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>user_credentials</code>   </td><td class="markdownTableBodyNone"><code>id</code>   </td><td class="markdownTableBodyNone">B-tree   </td><td class="markdownTableBodyNone">User record access   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2213"></a>
6.2.3.2 Unique Constraint Indexes</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Table   </th><th class="markdownTableHeadNone">Constraint   </th><th class="markdownTableHeadNone">Columns   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>asset_relationships</code>   </td><td class="markdownTableBodyNone"><code>uq_relationship</code>   </td><td class="markdownTableBodyNone"><code>(source_asset_id, target_asset_id, relationship_type)</code>   </td><td class="markdownTableBodyNone">Prevent duplicate edges    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>regulatory_event_assets</code>   </td><td class="markdownTableBodyNone"><code>uq_event_asset</code>   </td><td class="markdownTableBodyNone"><code>(event_id, asset_id)</code>   </td><td class="markdownTableBodyNone">Prevent duplicate associations    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>user_credentials</code>   </td><td class="markdownTableBodyNone"><code>username</code>   </td><td class="markdownTableBodyNone"><code>username</code>   </td><td class="markdownTableBodyNone">Unique login enforcement   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2214"></a>
6.2.3.3 Foreign Key Indexes</h4>
<p>Foreign key columns are indexed to support cascade delete operations and join queries:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Table   </th><th class="markdownTableHeadNone">Column   </th><th class="markdownTableHeadNone">References   </th><th class="markdownTableHeadNone">Index Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>asset_relationships</code>   </td><td class="markdownTableBodyNone"><code>source_asset_id</code>   </td><td class="markdownTableBodyNone"><code>assets(id)</code>   </td><td class="markdownTableBodyNone">Implicit FK index    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>asset_relationships</code>   </td><td class="markdownTableBodyNone"><code>target_asset_id</code>   </td><td class="markdownTableBodyNone"><code>assets(id)</code>   </td><td class="markdownTableBodyNone">Implicit FK index    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>regulatory_events</code>   </td><td class="markdownTableBodyNone"><code>asset_id</code>   </td><td class="markdownTableBodyNone"><code>assets(id)</code>   </td><td class="markdownTableBodyNone">Implicit FK index    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>regulatory_event_assets</code>   </td><td class="markdownTableBodyNone"><code>event_id</code>   </td><td class="markdownTableBodyNone"><code>regulatory_events(id)</code>   </td><td class="markdownTableBodyNone">Implicit FK index    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>regulatory_event_assets</code>   </td><td class="markdownTableBodyNone"><code>asset_id</code>   </td><td class="markdownTableBodyNone"><code>assets(id)</code>   </td><td class="markdownTableBodyNone">Implicit FK index   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2215"></a>
6.2.3.4 Recommended Production Indexes</h4>
<p>For PostgreSQL production deployments handling larger datasets:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Table   </th><th class="markdownTableHeadNone">Proposed Index   </th><th class="markdownTableHeadNone">Columns   </th><th class="markdownTableHeadNone">Rationale    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>assets</code>   </td><td class="markdownTableBodyNone"><code>idx_assets_sector</code>   </td><td class="markdownTableBodyNone"><code>sector</code>   </td><td class="markdownTableBodyNone">Sector-based filtering    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>assets</code>   </td><td class="markdownTableBodyNone"><code>idx_assets_class</code>   </td><td class="markdownTableBodyNone"><code>asset_class</code>   </td><td class="markdownTableBodyNone">Asset class filtering    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>asset_relationships</code>   </td><td class="markdownTableBodyNone"><code>idx_rel_type</code>   </td><td class="markdownTableBodyNone"><code>relationship_type</code>   </td><td class="markdownTableBodyNone">Relationship type queries    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>regulatory_events</code>   </td><td class="markdownTableBodyNone"><code>idx_events_date</code>   </td><td class="markdownTableBodyNone"><code>date</code>   </td><td class="markdownTableBodyNone">Date range queries   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2217"></a>
6.2.4 Data Flow Architecture</h3>
<h4><a class="anchor" id="autotoc_md2218"></a>
6.2.4.1 Data Flow Diagram</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph ExternalSources[External Data Sources]</div>
<div class="line">        YahooFinance[Yahoo Finance API]</div>
<div class="line">        SampleData[Sample Data Generator]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph DataIngestion[Data Ingestion Layer]</div>
<div class="line">        RealFetcher[RealDataFetcher&lt;br/&gt;src/data/real_data_fetcher.py]</div>
<div class="line">        SampleGen[Sample Database&lt;br/&gt;src/data/sample_data.py]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph CacheLayer[Cache Layer]</div>
<div class="line">        JSONCache[(JSON File Cache&lt;br/&gt;Atomic Writes)]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph GraphLayer[Graph Layer]</div>
<div class="line">        InMemoryGraph[AssetRelationshipGraph&lt;br/&gt;src/logic/asset_graph.py]</div>
<div class="line">        RelationshipBuilder[Relationship Builder&lt;br/&gt;Sector/Bond/Currency Links]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph PersistenceLayer[Persistence Layer]</div>
<div class="line">        Repository[AssetGraphRepository&lt;br/&gt;src/data/repository.py]</div>
<div class="line">        SQLAlchemyDB[(SQLAlchemy ORM&lt;br/&gt;PostgreSQL/SQLite)]</div>
<div class="line">        SQLiteAuth[(SQLite Auth&lt;br/&gt;user_credentials)]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph APILayer[API Layer]</div>
<div class="line">        FastAPI[FastAPI Endpoints&lt;br/&gt;api/main.py]</div>
<div class="line">        AuthModule[Auth Module&lt;br/&gt;api/auth.py]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    YahooFinance --&gt; RealFetcher</div>
<div class="line">    SampleData --&gt; SampleGen</div>
<div class="line">    RealFetcher --&gt; JSONCache</div>
<div class="line">    RealFetcher --&gt; InMemoryGraph</div>
<div class="line">    SampleGen --&gt; InMemoryGraph</div>
<div class="line">    JSONCache --&gt; RealFetcher</div>
<div class="line">    InMemoryGraph --&gt; RelationshipBuilder</div>
<div class="line">    RelationshipBuilder --&gt; InMemoryGraph</div>
<div class="line">    InMemoryGraph --&gt; Repository</div>
<div class="line">    Repository --&gt; SQLAlchemyDB</div>
<div class="line">    AuthModule --&gt; SQLiteAuth</div>
<div class="line">    FastAPI --&gt; InMemoryGraph</div>
<div class="line">    FastAPI --&gt; AuthModule</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2219"></a>
6.2.4.2 Data Flow Sequence</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Phase   </th><th class="markdownTableHeadNone">Operation   </th><th class="markdownTableHeadNone">Source   </th><th class="markdownTableHeadNone">Destination    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Data Fetch   </td><td class="markdownTableBodyNone">Yahoo Finance / Sample Generator   </td><td class="markdownTableBodyNone">Data Fetcher    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Cache Check   </td><td class="markdownTableBodyNone">JSON Cache   </td><td class="markdownTableBodyNone">Data Fetcher    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Graph Build   </td><td class="markdownTableBodyNone">Asset Data   </td><td class="markdownTableBodyNone">In-Memory Graph    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Relationship Discovery   </td><td class="markdownTableBodyNone">Graph Nodes   </td><td class="markdownTableBodyNone">Edge Creation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">Optional Persistence   </td><td class="markdownTableBodyNone">In-Memory Graph   </td><td class="markdownTableBodyNone">SQLAlchemy ORM    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6   </td><td class="markdownTableBodyNone">API Serving   </td><td class="markdownTableBodyNone">In-Memory Graph   </td><td class="markdownTableBodyNone">FastAPI Responses   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2221"></a>
6.2.5 ORM Layer Design</h3>
<h4><a class="anchor" id="autotoc_md2222"></a>
6.2.5.1 SQLAlchemy Configuration</h4>
<p>Implemented in <code><a class="el" href="src_2data_2database_8py.html">src/data/database.py</a></code>, the ORM layer supports multiple database backends:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Configuration   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SQLAlchemy Version   </td><td class="markdownTableBodyNone">&gt;=2.0.0   </td><td class="markdownTableBodyNone">Modern ORM syntax    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Syntax Style   </td><td class="markdownTableBodyNone">2.x with <code>Mapped</code>/<code>mapped_column</code>   </td><td class="markdownTableBodyNone">Type-safe mappings    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Environment Variable   </td><td class="markdownTableBodyNone"><code>ASSET_GRAPH_DATABASE_URL</code>   </td><td class="markdownTableBodyNone">Connection string    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Default Backend   </td><td class="markdownTableBodyNone">SQLite   </td><td class="markdownTableBodyNone">Development simplicity   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2223"></a>
6.2.5.2 Connection Configuration by Backend</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Backend   </th><th class="markdownTableHeadNone">Use Case   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SQLite (file)   </td><td class="markdownTableBodyNone">Development   </td><td class="markdownTableBodyNone"><code>sqlite:///path/to/db.sqlite</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SQLite (in-memory)   </td><td class="markdownTableBodyNone">Testing   </td><td class="markdownTableBodyNone"><code>sqlite:///:memory:</code> with <code>StaticPool</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PostgreSQL   </td><td class="markdownTableBodyNone">Production   </td><td class="markdownTableBodyNone"><code>postgresql://user:pass@host/db</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2224"></a>
6.2.5.3 ORM Model Classes</h4>
<p>Defined in <code><a class="el" href="db__models_8py.html">src/data/db_models.py</a></code>:</p>
<h4><a class="anchor" id="autotoc_md2225"></a>
AssetORM Model</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">SQLAlchemy Type   </th><th class="markdownTableHeadNone">Relationship    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>id</code>   </td><td class="markdownTableBodyNone"><code>Mapped[str]</code>   </td><td class="markdownTableBodyNone">Primary Key    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>outgoing_relationships</code>   </td><td class="markdownTableBodyNone"><code>Mapped[List["AssetRelationshipORM"]]</code>   </td><td class="markdownTableBodyNone">One-to-Many (cascade: all, delete-orphan)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>incoming_relationships</code>   </td><td class="markdownTableBodyNone"><code>Mapped[List["AssetRelationshipORM"]]</code>   </td><td class="markdownTableBodyNone">One-to-Many (cascade: all, delete-orphan)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>regulatory_events</code>   </td><td class="markdownTableBodyNone"><code>Mapped[List["RegulatoryEventORM"]]</code>   </td><td class="markdownTableBodyNone">One-to-Many (cascade: all, delete-orphan)   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2226"></a>
AssetRelationshipORM Model</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">SQLAlchemy Type   </th><th class="markdownTableHeadNone">Relationship    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>id</code>   </td><td class="markdownTableBodyNone"><code>Mapped[int]</code>   </td><td class="markdownTableBodyNone">Primary Key (autoincrement)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>source_asset</code>   </td><td class="markdownTableBodyNone"><code>Mapped["AssetORM"]</code>   </td><td class="markdownTableBodyNone">Many-to-One    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>target_asset</code>   </td><td class="markdownTableBodyNone"><code>Mapped["AssetORM"]</code>   </td><td class="markdownTableBodyNone">Many-to-One   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2227"></a>
RegulatoryEventORM Model</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">SQLAlchemy Type   </th><th class="markdownTableHeadNone">Relationship    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>id</code>   </td><td class="markdownTableBodyNone"><code>Mapped[str]</code>   </td><td class="markdownTableBodyNone">Primary Key    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>asset</code>   </td><td class="markdownTableBodyNone"><code>Mapped["AssetORM"]</code>   </td><td class="markdownTableBodyNone">Many-to-One    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>related_assets</code>   </td><td class="markdownTableBodyNone"><code>Mapped[List["RegulatoryEventAssetORM"]]</code>   </td><td class="markdownTableBodyNone">One-to-Many (cascade: all, delete-orphan)   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2228"></a>
6.2.5.4 Repository Pattern Implementation</h4>
<p>The <code>AssetGraphRepository</code> class in <code><a class="el" href="repository_8py.html">src/data/repository.py</a></code> provides the data access layer:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Operation   </th><th class="markdownTableHeadNone">Transaction Scope    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>upsert_asset()</code>   </td><td class="markdownTableBodyNone">Insert or update asset   </td><td class="markdownTableBodyNone">Caller manages    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>list_assets()</code>   </td><td class="markdownTableBodyNone">Retrieve all assets   </td><td class="markdownTableBodyNone">Read-only    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>get_assets_map()</code>   </td><td class="markdownTableBodyNone">Dict by asset ID   </td><td class="markdownTableBodyNone">Read-only    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>delete_asset()</code>   </td><td class="markdownTableBodyNone">Remove asset (cascades)   </td><td class="markdownTableBodyNone">Caller manages    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>add_or_update_relationship()</code>   </td><td class="markdownTableBodyNone">Upsert edge   </td><td class="markdownTableBodyNone">Caller manages    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>list_relationships()</code>   </td><td class="markdownTableBodyNone">Retrieve all edges   </td><td class="markdownTableBodyNone">Read-only    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>get_relationship()</code>   </td><td class="markdownTableBodyNone">Single edge lookup   </td><td class="markdownTableBodyNone">Read-only    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>delete_relationship()</code>   </td><td class="markdownTableBodyNone">Remove edge   </td><td class="markdownTableBodyNone">Caller manages    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>upsert_regulatory_event()</code>   </td><td class="markdownTableBodyNone">Insert/update event   </td><td class="markdownTableBodyNone">Caller manages    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>list_regulatory_events()</code>   </td><td class="markdownTableBodyNone">Retrieve all events   </td><td class="markdownTableBodyNone">Read-only    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>delete_regulatory_event()</code>   </td><td class="markdownTableBodyNone">Remove event   </td><td class="markdownTableBodyNone">Caller manages   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2230"></a>
6.2.6 Caching Architecture</h3>
<h4><a class="anchor" id="autotoc_md2231"></a>
6.2.6.1 JSON File Cache Design</h4>
<p>Implemented in <code><a class="el" href="real__data__fetcher_8py.html">src/data/real_data_fetcher.py</a></code>, the cache layer provides persistent storage for external API data:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Configuration   </th><th class="markdownTableHeadNone">Environment Variable   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Real Data Cache   </td><td class="markdownTableBodyNone"><code>REAL_DATA_CACHE_PATH</code>   </td><td class="markdownTableBodyNone">Yahoo Finance data    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Graph Cache   </td><td class="markdownTableBodyNone"><code>GRAPH_CACHE_PATH</code>   </td><td class="markdownTableBodyNone">Serialized graph state   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2232"></a>
6.2.6.2 Atomic Write Pattern</h4>
<p>The cache uses an atomic write pattern to prevent data corruption:</p>
<div class="fragment"><div class="line">flowchart LR</div>
<div class="line">    subgraph AtomicWrite[Atomic Write Sequence]</div>
<div class="line">        Start([Start Write]) --&gt; CreateTemp[Create NamedTemporaryFile&lt;br/&gt;in same directory]</div>
<div class="line">        CreateTemp --&gt; WriteJSON[Write JSON Data]</div>
<div class="line">        WriteJSON --&gt; FlushSync[Flush + Sync&lt;br/&gt;to Disk]</div>
<div class="line">        FlushSync --&gt; CloseHandle[Close File Handle]</div>
<div class="line">        CloseHandle --&gt; AtomicRename[os.replace()&lt;br/&gt;Atomic Rename]</div>
<div class="line">        AtomicRename --&gt; Complete([Write Complete])</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph FailurePath[Failure Recovery]</div>
<div class="line">        WriteJSON -.-&gt;|Exception| CleanupTemp[Delete Temp File]</div>
<div class="line">        FlushSync -.-&gt;|Exception| CleanupTemp</div>
<div class="line">        CleanupTemp --&gt; Failed([Write Failed&lt;br/&gt;Original Preserved])</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2233"></a>
6.2.6.3 Atomic Write Guarantees</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Phase   </th><th class="markdownTableHeadNone">Operation   </th><th class="markdownTableHeadNone">Failure Behavior    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Create temporary file   </td><td class="markdownTableBodyNone">No change to target    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Write JSON content   </td><td class="markdownTableBodyNone">Temp file only    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Flush and sync   </td><td class="markdownTableBodyNone">Data on disk in temp    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone"><code>os.replace()</code>   </td><td class="markdownTableBodyNone">Atomic swap or rollback   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2234"></a>
6.2.6.4 Cache Content Structure</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Element   </th><th class="markdownTableHeadNone">Serialization   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Assets   </td><td class="markdownTableBodyNone">JSON with <code>__type__</code> discriminator   </td><td class="markdownTableBodyNone">Type reconstruction    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Regulatory Events   </td><td class="markdownTableBodyNone"><a class="el" href="classEnum.html">Enum</a> values as strings   </td><td class="markdownTableBodyNone">Serialization compatibility    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Relationships   </td><td class="markdownTableBodyNone">Adjacency list format   </td><td class="markdownTableBodyNone">Graph reconstruction    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Metadata   </td><td class="markdownTableBodyNone">Timestamps, version info   </td><td class="markdownTableBodyNone">Cache validation   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2236"></a>
6.2.7 Replication and High Availability</h3>
<h4><a class="anchor" id="autotoc_md2237"></a>
6.2.7.1 Current Architecture Limitations</h4>
<p>As documented in the system constraints, the current architecture prioritizes simplicity over high availability:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Constraint ID   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Impact    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">C-001   </td><td class="markdownTableBodyNone">In-memory graph limits scalability   </td><td class="markdownTableBodyNone">No built-in replication    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">A-003   </td><td class="markdownTableBodyNone">Single concurrent admin sufficient   </td><td class="markdownTableBodyNone">Single-user authentication    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">A-004   </td><td class="markdownTableBodyNone">Dataset size &lt;500 nodes   </td><td class="markdownTableBodyNone">Memory-based storage viable   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2238"></a>
6.2.7.2 Replication Architecture Diagram</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph CurrentArchitecture[Current Single-Instance Architecture]</div>
<div class="line">        SingleProcess[Python Process]</div>
<div class="line">        InMemoryGraph[In-Memory Graph]</div>
<div class="line">        SQLiteAuth[(SQLite Auth)]</div>
<div class="line">        JSONCache[(JSON Cache)]</div>
<div class="line"> </div>
<div class="line">        SingleProcess --&gt; InMemoryGraph</div>
<div class="line">        SingleProcess --&gt; SQLiteAuth</div>
<div class="line">        SingleProcess --&gt; JSONCache</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph FutureScaling[Future Scaling Path]</div>
<div class="line">        LoadBalancer[Load Balancer]</div>
<div class="line">        Instance1[Instance 1]</div>
<div class="line">        Instance2[Instance 2]</div>
<div class="line">        SharedDB[(PostgreSQL&lt;br/&gt;Shared Database)]</div>
<div class="line">        DistCache[(Redis Cache)]</div>
<div class="line"> </div>
<div class="line">        LoadBalancer --&gt; Instance1</div>
<div class="line">        LoadBalancer --&gt; Instance2</div>
<div class="line">        Instance1 --&gt; SharedDB</div>
<div class="line">        Instance2 --&gt; SharedDB</div>
<div class="line">        Instance1 --&gt; DistCache</div>
<div class="line">        Instance2 --&gt; DistCache</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    CurrentArchitecture -.-&gt;|Migration Path| FutureScaling</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2239"></a>
6.2.7.3 Production Scaling Recommendations</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Growth Trigger   </th><th class="markdownTableHeadNone">Recommended Action   </th><th class="markdownTableHeadNone">Module Impact    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&gt;500 assets   </td><td class="markdownTableBodyNone">Enable PostgreSQL persistence   </td><td class="markdownTableBodyNone">Graph Engine    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Multi-user requirements   </td><td class="markdownTableBodyNone">Implement connection pooling   </td><td class="markdownTableBodyNone">Auth Module    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">High availability needs   </td><td class="markdownTableBodyNone">Deploy multiple instances   </td><td class="markdownTableBodyNone">All modules    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Session management   </td><td class="markdownTableBodyNone">Add Redis for shared state   </td><td class="markdownTableBodyNone">API Layer   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2241"></a>
6.2.8 Backup and Recovery Architecture</h3>
<h4><a class="anchor" id="autotoc_md2242"></a>
6.2.8.1 Data Durability by Component</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Durability Level   </th><th class="markdownTableHeadNone">Backup Method    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">In-Memory Graph   </td><td class="markdownTableBodyNone">Process lifetime   </td><td class="markdownTableBodyNone">JSON cache serialization    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SQLite Auth   </td><td class="markdownTableBodyNone">File-based persistence   </td><td class="markdownTableBodyNone">File system backup    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PostgreSQL (if used)   </td><td class="markdownTableBodyNone">Database-level   </td><td class="markdownTableBodyNone">pg_dump, WAL archiving    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">JSON Cache   </td><td class="markdownTableBodyNone">File-based   </td><td class="markdownTableBodyNone">File system backup   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2243"></a>
6.2.8.2 Recovery Scenarios</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Scenario   </th><th class="markdownTableHeadNone">Detection Method   </th><th class="markdownTableHeadNone">Recovery Action   </th><th class="markdownTableHeadNone">Data Loss    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Graph corruption   </td><td class="markdownTableBodyNone">Validation failure   </td><td class="markdownTableBodyNone">Reload from cache or fetch   </td><td class="markdownTableBodyNone">None (if cached)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Cache file corruption   </td><td class="markdownTableBodyNone">JSON parse error   </td><td class="markdownTableBodyNone">Fresh fetch from source   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Auth database loss   </td><td class="markdownTableBodyNone">Connection failure   </td><td class="markdownTableBodyNone">Restore from backup   </td><td class="markdownTableBodyNone">Potential    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Process restart   </td><td class="markdownTableBodyNone">N/A   </td><td class="markdownTableBodyNone">Graph reinitialization   </td><td class="markdownTableBodyNone">Session state   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2244"></a>
6.2.8.3 Disaster Recovery Flow</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph DisasterRecovery[Disaster Recovery Flow]</div>
<div class="line">        Failure([System Failure]) --&gt; DetectType{Failure Type}</div>
<div class="line"> </div>
<div class="line">        DetectType --&gt;|Graph Corruption| ClearGraph[Clear In-Memory&lt;br/&gt;Graph]</div>
<div class="line">        DetectType --&gt;|Cache Corruption| DeleteCache[Delete Cache&lt;br/&gt;File]</div>
<div class="line">        DetectType --&gt;|Database Loss| RestoreBackup[Restore from&lt;br/&gt;Backup]</div>
<div class="line">        DetectType --&gt;|Full System| FullRestore[Full System&lt;br/&gt;Recovery]</div>
<div class="line"> </div>
<div class="line">        ClearGraph --&gt; ReinitGraph[Reinitialize&lt;br/&gt;Graph]</div>
<div class="line">        DeleteCache --&gt; FreshFetch[Fresh Data&lt;br/&gt;Fetch]</div>
<div class="line">        RestoreBackup --&gt; VerifyData[Verify Data&lt;br/&gt;Integrity]</div>
<div class="line">        FullRestore --&gt; DeployNew[Deploy New&lt;br/&gt;Instance]</div>
<div class="line"> </div>
<div class="line">        ReinitGraph --&gt; CheckCache{Cache&lt;br/&gt;Available?}</div>
<div class="line">        CheckCache --&gt;|Yes| LoadCache[Load from&lt;br/&gt;Cache]</div>
<div class="line">        CheckCache --&gt;|No| FreshFetch</div>
<div class="line">        FreshFetch --&gt; BuildGraph[Build Graph&lt;br/&gt;from Source]</div>
<div class="line"> </div>
<div class="line">        LoadCache --&gt; Operational([System&lt;br/&gt;Operational])</div>
<div class="line">        BuildGraph --&gt; Operational</div>
<div class="line">        VerifyData --&gt; Operational</div>
<div class="line">        DeployNew --&gt; Operational</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2245"></a>
6.2.8.4 Data Recovery Priority</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Priority   </th><th class="markdownTableHeadNone">Data Type   </th><th class="markdownTableHeadNone">Recovery Source   </th><th class="markdownTableHeadNone">Maximum Acceptable Loss    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1 (Critical)   </td><td class="markdownTableBodyNone">User credentials   </td><td class="markdownTableBodyNone">SQLite backup   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2 (High)   </td><td class="markdownTableBodyNone">Graph state   </td><td class="markdownTableBodyNone">Cache or Yahoo Finance   </td><td class="markdownTableBodyNone">Minutes of updates    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3 (Medium)   </td><td class="markdownTableBodyNone">Cached data   </td><td class="markdownTableBodyNone">Fresh external fetch   </td><td class="markdownTableBodyNone">Cache refresh time    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4 (Low)   </td><td class="markdownTableBodyNone">Session state   </td><td class="markdownTableBodyNone">Stateless (no recovery)   </td><td class="markdownTableBodyNone">Full session   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2247"></a>
6.2.9 Compliance Considerations</h3>
<h4><a class="anchor" id="autotoc_md2248"></a>
6.2.9.1 Data Retention Policies</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Data Type   </th><th class="markdownTableHeadNone">Retention Period   </th><th class="markdownTableHeadNone">Disposal Method    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">User credentials   </td><td class="markdownTableBodyNone">Until explicitly deleted   </td><td class="markdownTableBodyNone">Secure database deletion    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Authentication logs   </td><td class="markdownTableBodyNone">Application runtime   </td><td class="markdownTableBodyNone">In-memory only    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Cached market data   </td><td class="markdownTableBodyNone">Configurable cache TTL   </td><td class="markdownTableBodyNone">File overwrite    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Graph state   </td><td class="markdownTableBodyNone">Process lifetime   </td><td class="markdownTableBodyNone">Memory deallocation   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2249"></a>
6.2.9.2 Access Control Matrix</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Role   </th><th class="markdownTableHeadNone">Authentication   </th><th class="markdownTableHeadNone">Asset Data   </th><th class="markdownTableHeadNone">User Management    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Anonymous   </td><td class="markdownTableBodyNone">None   </td><td class="markdownTableBodyNone">Read-only API access   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Authenticated User   </td><td class="markdownTableBodyNone">JWT token   </td><td class="markdownTableBodyNone">Full API access   </td><td class="markdownTableBodyNone">Self-profile only    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Admin   </td><td class="markdownTableBodyNone">JWT + admin flag   </td><td class="markdownTableBodyNone">Full access   </td><td class="markdownTableBodyNone">User CRUD   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2250"></a>
6.2.9.3 Privacy Controls</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Control   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Location    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Password hashing   </td><td class="markdownTableBodyNone">pbkdf2_sha256   </td><td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Token expiration   </td><td class="markdownTableBodyNone">30-minute JWT lifetime   </td><td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Secure transport   </td><td class="markdownTableBodyNone">HTTPS required in production   </td><td class="markdownTableBodyNone">Deployment config    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Secret management   </td><td class="markdownTableBodyNone">Environment variables only   </td><td class="markdownTableBodyNone">Never committed   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2251"></a>
6.2.9.4 Audit Mechanisms</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Audit Point   </th><th class="markdownTableHeadNone">Log Level   </th><th class="markdownTableHeadNone">Content    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Graph initialization   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">Success/failure status    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Authentication attempts   </td><td class="markdownTableBodyNone">WARNING   </td><td class="markdownTableBodyNone">Failed login attempts    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Request errors   </td><td class="markdownTableBodyNone">ERROR   </td><td class="markdownTableBodyNone">Exception details    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Cache operations   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">Load/save success   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2253"></a>
6.2.10 Performance Optimization</h3>
<h4><a class="anchor" id="autotoc_md2254"></a>
6.2.10.1 Query Optimization Patterns</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Pattern   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Benefit    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">In-memory primary storage   </td><td class="markdownTableBodyNone"><code>Dict[source_id, List[Tuple]]</code>   </td><td class="markdownTableBodyNone">Sub-millisecond traversal    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Thread-safe singleton   </td><td class="markdownTableBodyNone">Double-checked locking   </td><td class="markdownTableBodyNone">Minimal lock contention    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Lazy initialization   </td><td class="markdownTableBodyNone">On-demand graph creation   </td><td class="markdownTableBodyNone">Fast application startup    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Unique constraint indexes   </td><td class="markdownTableBodyNone">Composite unique keys   </td><td class="markdownTableBodyNone">O(1) duplicate detection   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2255"></a>
6.2.10.2 Performance Targets</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Operation   </th><th class="markdownTableHeadNone">Target SLA   </th><th class="markdownTableHeadNone">Measurement    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Relationship traversal   </td><td class="markdownTableBodyNone">&lt;1ms   </td><td class="markdownTableBodyNone">In-memory graph access    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Asset lookup   </td><td class="markdownTableBodyNone">&lt;10ms   </td><td class="markdownTableBodyNone">Indexed primary key    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Graph initialization   </td><td class="markdownTableBodyNone">&lt;3 seconds   </td><td class="markdownTableBodyNone">Application startup    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Relationship discovery   </td><td class="markdownTableBodyNone">&lt;500ms   </td><td class="markdownTableBodyNone">For 100 assets   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2256"></a>
6.2.10.3 Connection Management</h4>
<h4><a class="anchor" id="autotoc_md2257"></a>
SQLite Authentication Database</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Configuration   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>check_same_thread</code>   </td><td class="markdownTableBodyNone"><code>False</code>   </td><td class="markdownTableBodyNone">Multi-threaded access    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Connection sharing   </td><td class="markdownTableBodyNone">Locked shared connection   </td><td class="markdownTableBodyNone">In-memory database support    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Row factory   </td><td class="markdownTableBodyNone">Dict-style access   </td><td class="markdownTableBodyNone">Convenient result handling   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2258"></a>
SQLAlchemy ORM Connection</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Backend   </th><th class="markdownTableHeadNone">Pool Configuration   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SQLite in-memory   </td><td class="markdownTableBodyNone"><code>StaticPool</code>   </td><td class="markdownTableBodyNone">Single shared connection    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SQLite file   </td><td class="markdownTableBodyNone">Default pool   </td><td class="markdownTableBodyNone">Connection reuse    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PostgreSQL   </td><td class="markdownTableBodyNone">Default pool   </td><td class="markdownTableBodyNone">Connection pooling   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2259"></a>
6.2.10.4 Batch Processing Approach</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Operation   </th><th class="markdownTableHeadNone">Batch Strategy   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Graph initialization   </td><td class="markdownTableBodyNone">Bulk asset loading   </td><td class="markdownTableBodyNone">Single transaction    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Relationship building   </td><td class="markdownTableBodyNone">Iterate all assets once   </td><td class="markdownTableBodyNone">O(n) complexity    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Cache serialization   </td><td class="markdownTableBodyNone">Single JSON write   </td><td class="markdownTableBodyNone">Atomic file operation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Repository upserts   </td><td class="markdownTableBodyNone">Caller-managed batching   </td><td class="markdownTableBodyNone">Session scope pattern   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2261"></a>
6.2.11 Transaction Management</h3>
<h4><a class="anchor" id="autotoc_md2262"></a>
6.2.11.1 Transaction Boundaries</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph TransactionScope[Transaction Scope Management]</div>
<div class="line">        StartOp([Start Operation]) --&gt; AcquireSession[Acquire&lt;br/&gt;Session]</div>
<div class="line">        AcquireSession --&gt; BeginTx[Begin&lt;br/&gt;Transaction]</div>
<div class="line">        BeginTx --&gt; ExecuteOps[Execute&lt;br/&gt;Operations]</div>
<div class="line"> </div>
<div class="line">        ExecuteOps --&gt; CheckSuccess{Success?}</div>
<div class="line">        CheckSuccess --&gt;|Yes| CommitTx[Commit&lt;br/&gt;Transaction]</div>
<div class="line">        CheckSuccess --&gt;|No| RollbackTx[Rollback&lt;br/&gt;Transaction]</div>
<div class="line"> </div>
<div class="line">        CommitTx --&gt; CloseSession[Close&lt;br/&gt;Session]</div>
<div class="line">        RollbackTx --&gt; CloseSession</div>
<div class="line">        CloseSession --&gt; EndOp([End Operation])</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2263"></a>
6.2.11.2 Session Scope Context Manager</h4>
<p>The <code>session_scope</code> context manager in <code><a class="el" href="repository_8py.html">src/data/repository.py</a></code> provides transaction management:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Phase   </th><th class="markdownTableHeadNone">Action   </th><th class="markdownTableHeadNone">On Exception    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Entry   </td><td class="markdownTableBodyNone">Create session from factory   </td><td class="markdownTableBodyNone">N/A    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Yield   </td><td class="markdownTableBodyNone">Expose session for operations   </td><td class="markdownTableBodyNone">N/A    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Exit (success)   </td><td class="markdownTableBodyNone">Commit transaction   </td><td class="markdownTableBodyNone">N/A    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Exit (error)   </td><td class="markdownTableBodyNone">N/A   </td><td class="markdownTableBodyNone">Rollback transaction    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Finally   </td><td class="markdownTableBodyNone">Close session   </td><td class="markdownTableBodyNone">Close session   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2264"></a>
6.2.11.3 Cascade Delete Behavior</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parent Entity   </th><th class="markdownTableHeadNone">Child Entities   </th><th class="markdownTableHeadNone">Cascade Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Asset   </td><td class="markdownTableBodyNone">asset_relationships (outgoing)   </td><td class="markdownTableBodyNone">all, delete-orphan    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Asset   </td><td class="markdownTableBodyNone">asset_relationships (incoming)   </td><td class="markdownTableBodyNone">all, delete-orphan    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Asset   </td><td class="markdownTableBodyNone">regulatory_events   </td><td class="markdownTableBodyNone">all, delete-orphan    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Regulatory Event   </td><td class="markdownTableBodyNone">regulatory_event_assets   </td><td class="markdownTableBodyNone">all, delete-orphan   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2266"></a>
6.2.12 Domain Model Validation</h3>
<h4><a class="anchor" id="autotoc_md2267"></a>
6.2.12.1 Validation Rules</h4>
<p>Implemented in <code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code>:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Validation Rule   </th><th class="markdownTableHeadNone">Error Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>id</code>, <code>symbol</code>, <code>name</code>   </td><td class="markdownTableBodyNone">Non-empty string   </td><td class="markdownTableBodyNone"><code>ValueError</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>price</code>, <code>market_cap</code>   </td><td class="markdownTableBodyNone">Non-negative float   </td><td class="markdownTableBodyNone"><code>ValueError</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>currency</code>   </td><td class="markdownTableBodyNone">3-character ISO code   </td><td class="markdownTableBodyNone"><code>ValueError</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>impact_score</code>   </td><td class="markdownTableBodyNone">Range [-1.0, 1.0]   </td><td class="markdownTableBodyNone"><code>ValueError</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>date</code> (events)   </td><td class="markdownTableBodyNone">ISO 8601 format   </td><td class="markdownTableBodyNone"><code>ValueError</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2268"></a>
6.2.12.2 Validation Flow</h4>
<div class="fragment"><div class="line">flowchart LR</div>
<div class="line">    subgraph ValidationFlow[Domain Model Validation]</div>
<div class="line">        Input([Input Data]) --&gt; TypeCheck{Type&lt;br/&gt;Valid?}</div>
<div class="line">        TypeCheck --&gt;|No| TypeError([TypeError])</div>
<div class="line">        TypeCheck --&gt;|Yes| RangeCheck{Range&lt;br/&gt;Valid?}</div>
<div class="line">        RangeCheck --&gt;|No| ValueError([ValueError])</div>
<div class="line">        RangeCheck --&gt;|Yes| FormatCheck{Format&lt;br/&gt;Valid?}</div>
<div class="line">        FormatCheck --&gt;|No| FormatError([ValueError])</div>
<div class="line">        FormatCheck --&gt;|Yes| CreateModel([Create&lt;br/&gt;Domain Object])</div>
<div class="line">    end</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md2270"></a>
6.2.13 Environment Configuration</h3>
<h4><a class="anchor" id="autotoc_md2271"></a>
6.2.13.1 Database Environment Variables</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variable   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Example Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>DATABASE_URL</code>   </td><td class="markdownTableBodyNone">SQLite authentication database   </td><td class="markdownTableBodyNone"><code>sqlite:///auth.db</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ASSET_GRAPH_DATABASE_URL</code>   </td><td class="markdownTableBodyNone">SQLAlchemy ORM connection   </td><td class="markdownTableBodyNone"><code>postgresql://user:pass@host/db</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>GRAPH_CACHE_PATH</code>   </td><td class="markdownTableBodyNone">Graph cache file location   </td><td class="markdownTableBodyNone"><code>/data/graph_cache.json</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>REAL_DATA_CACHE_PATH</code>   </td><td class="markdownTableBodyNone">Yahoo Finance cache location   </td><td class="markdownTableBodyNone"><code>/data/real_data.json</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>USE_REAL_DATA_FETCHER</code>   </td><td class="markdownTableBodyNone">Enable live data fetching   </td><td class="markdownTableBodyNone"><code>true</code> or <code>false</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2272"></a>
6.2.13.2 Security Environment Variables</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variable   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Sensitivity    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SECRET_KEY</code>   </td><td class="markdownTableBodyNone">JWT signing key   </td><td class="markdownTableBodyNone">Critical - never commit    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ADMIN_USERNAME</code>   </td><td class="markdownTableBodyNone">Default admin user   </td><td class="markdownTableBodyNone">Sensitive    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ADMIN_PASSWORD</code>   </td><td class="markdownTableBodyNone">Default admin password   </td><td class="markdownTableBodyNone">Critical - never commit    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ADMIN_EMAIL</code>   </td><td class="markdownTableBodyNone">Admin email address   </td><td class="markdownTableBodyNone">Low    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ADMIN_FULL_NAME</code>   </td><td class="markdownTableBodyNone">Admin display name   </td><td class="markdownTableBodyNone">Low    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ADMIN_DISABLED</code>   </td><td class="markdownTableBodyNone">Admin disabled flag   </td><td class="markdownTableBodyNone">Low   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2274"></a>
6.2.14 Future Database Enhancements</h3>
<h4><a class="anchor" id="autotoc_md2275"></a>
6.2.14.1 Planned Improvements</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Enhancement   </th><th class="markdownTableHeadNone">Priority   </th><th class="markdownTableHeadNone">Complexity   </th><th class="markdownTableHeadNone">Impact    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PostgreSQL full support   </td><td class="markdownTableBodyNone">High   </td><td class="markdownTableBodyNone">Medium   </td><td class="markdownTableBodyNone">Production readiness    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Connection pooling   </td><td class="markdownTableBodyNone">Medium   </td><td class="markdownTableBodyNone">Low   </td><td class="markdownTableBodyNone">Improved concurrency    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Read replicas   </td><td class="markdownTableBodyNone">Low   </td><td class="markdownTableBodyNone">High   </td><td class="markdownTableBodyNone">Horizontal scaling    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Partitioning by asset class   </td><td class="markdownTableBodyNone">Low   </td><td class="markdownTableBodyNone">Medium   </td><td class="markdownTableBodyNone">Query performance   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2276"></a>
6.2.14.2 Migration Path to Microservices</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Current Component   </th><th class="markdownTableHeadNone">Future Service   </th><th class="markdownTableHeadNone">Database Change    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">In-memory graph   </td><td class="markdownTableBodyNone">Graph Service   </td><td class="markdownTableBodyNone">PostgreSQL + Redis cache    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SQLite auth   </td><td class="markdownTableBodyNone">Auth Service   </td><td class="markdownTableBodyNone">Dedicated auth database    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">JSON cache   </td><td class="markdownTableBodyNone">Cache Service   </td><td class="markdownTableBodyNone">Redis/Memcached    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Repository layer   </td><td class="markdownTableBodyNone">Data Service   </td><td class="markdownTableBodyNone">Dedicated asset database   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2278"></a>
6.2.15 References</h3>
<h4><a class="anchor" id="autotoc_md2279"></a>
6.2.15.1 Source Files</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Path   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>migrations/001_initial.sql</code>   </td><td class="markdownTableBodyNone">DDL schema definitions    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="api_2database_8py.html">api/database.py</a></code>   </td><td class="markdownTableBodyNone">SQLite authentication helpers    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code>   </td><td class="markdownTableBodyNone">JWT authentication and user management    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone">FastAPI application with graph lifecycle    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="src_2data_2database_8py.html">src/data/database.py</a></code>   </td><td class="markdownTableBodyNone">SQLAlchemy engine configuration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="db__models_8py.html">src/data/db_models.py</a></code>   </td><td class="markdownTableBodyNone">ORM model definitions    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="repository_8py.html">src/data/repository.py</a></code>   </td><td class="markdownTableBodyNone">Repository pattern implementation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="real__data__fetcher_8py.html">src/data/real_data_fetcher.py</a></code>   </td><td class="markdownTableBodyNone">Yahoo Finance caching with atomic writes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="sample__data_8py.html">src/data/sample_data.py</a></code>   </td><td class="markdownTableBodyNone">Sample database creation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code>   </td><td class="markdownTableBodyNone">In-memory graph structure    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code>   </td><td class="markdownTableBodyNone">Domain model validation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>requirements.txt</code>   </td><td class="markdownTableBodyNone">Database dependency declarations   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2280"></a>
6.2.15.2 Technical Specification Sections</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Section   </th><th class="markdownTableHeadNone">Relevance    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5.6 DATABASE SCHEMA   </td><td class="markdownTableBodyNone">Core schema definitions    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3.6 Databases &amp; Storage   </td><td class="markdownTableBodyNone">Technology stack details    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4.10 Transaction Boundaries and Persistence   </td><td class="markdownTableBodyNone">Transaction patterns    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3.8 Security Considerations   </td><td class="markdownTableBodyNone">Authentication security    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5.4 CROSS-CUTTING CONCERNS   </td><td class="markdownTableBodyNone">Error handling and monitoring    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">5.5 DEPLOYMENT ARCHITECTURE   </td><td class="markdownTableBodyNone">Deployment configurations    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">6.1 Core Services Architecture   </td><td class="markdownTableBodyNone">Monolithic architecture context    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2.6 Assumptions and Constraints   </td><td class="markdownTableBodyNone">System limitations   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2281"></a>
6.2.15.3 Dependencies</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Package   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SQLAlchemy   </td><td class="markdownTableBodyNone">&gt;=2.0.0   </td><td class="markdownTableBodyNone">ORM framework    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">passlib   </td><td class="markdownTableBodyNone">(bundled)   </td><td class="markdownTableBodyNone">Password hashing    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PyJWT   </td><td class="markdownTableBodyNone">(bundled)   </td><td class="markdownTableBodyNone">JWT token handling    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">sqlite3   </td><td class="markdownTableBodyNone">(stdlib)   </td><td class="markdownTableBodyNone">Authentication database   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md2282"></a>
6.3 Integration Architecture</h2>
<p>The Financial Asset Relationship Database implements a <b>REST/JSON API integration architecture</b> designed for seamless communication between frontend clients, backend services, and external data sources. While the system follows a monolithic layered design (as documented in Section 6.1), it exposes well-defined integration points that enable frontend applications, external data providers, and AI tool integrations to interact with the core graph engine.</p>
<h3><a class="anchor" id="autotoc_md2283"></a>
6.3.1 API DESIGN</h3>
<h4><a class="anchor" id="autotoc_md2284"></a>
6.3.1.1 Protocol Specifications</h4>
<p>The system implements RESTful API communication using modern web standards and type-safe serialization patterns.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Aspect   </th><th class="markdownTableHeadNone">Specification   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Protocol   </td><td class="markdownTableBodyNone">REST over HTTP/HTTPS   </td><td class="markdownTableBodyNone">HTTP for development, HTTPS for production    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Format   </td><td class="markdownTableBodyNone">JSON   </td><td class="markdownTableBodyNone">Content-Type: application/json    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Framework   </td><td class="markdownTableBodyNone">FastAPI 0.127.0   </td><td class="markdownTableBodyNone">Automatic OpenAPI documentation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ASGI Server   </td><td class="markdownTableBodyNone">Uvicorn ≥0.24.0   </td><td class="markdownTableBodyNone">Async request handling    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Serialization   </td><td class="markdownTableBodyNone">Pydantic 2.12.5   </td><td class="markdownTableBodyNone">Strict type validation   </td></tr>
</table>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph ProtocolStack[Protocol Stack Architecture]</div>
<div class="line">        Client([API Client]) --&gt; HTTPS[HTTPS/TLS Layer]</div>
<div class="line">        HTTPS --&gt; ASGI[Uvicorn ASGI Server]</div>
<div class="line">        ASGI --&gt; Middleware[FastAPI Middleware Stack]</div>
<div class="line"> </div>
<div class="line">        subgraph MiddlewareChain[Middleware Processing]</div>
<div class="line">            CORS[CORS Middleware]</div>
<div class="line">            RateLimit[Rate Limiter]</div>
<div class="line">            Auth[Auth Middleware]</div>
<div class="line">            CORS --&gt; RateLimit</div>
<div class="line">            RateLimit --&gt; Auth</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        Middleware --&gt; MiddlewareChain</div>
<div class="line">        Auth --&gt; Router[FastAPI Router]</div>
<div class="line">        Router --&gt; Pydantic[Pydantic Validation]</div>
<div class="line">        Pydantic --&gt; Handler[Endpoint Handler]</div>
<div class="line">        Handler --&gt; Graph[Graph Engine]</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2285"></a>
API Endpoint Catalog</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Auth   </th><th class="markdownTableHeadNone">Rate Limit    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">API metadata   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/token</code>   </td><td class="markdownTableBodyNone">POST   </td><td class="markdownTableBodyNone">JWT issuance   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">5/min    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/health</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Health check   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/assets</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">List assets   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/assets/{id}</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Asset details   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/assets/{id}/relationships</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Asset relationships   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/relationships</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">All relationships   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/metrics</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Network stats   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/visualization</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">3D visualization   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/asset-classes</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Asset classes   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/sectors</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Sectors   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/users/me</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Current user   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">10/min   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2286"></a>
6.3.1.2 Authentication Methods</h4>
<p>The system implements JWT-based authentication with secure password hashing for credential validation.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Token Type   </td><td class="markdownTableBodyNone">JWT (JSON Web Token)   </td><td class="markdownTableBodyNone">OAuth2 Bearer scheme    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Algorithm   </td><td class="markdownTableBodyNone">HS256 (HMAC-SHA256)   </td><td class="markdownTableBodyNone">PyJWT ≥2.8.0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Token Expiration   </td><td class="markdownTableBodyNone">30 minutes   </td><td class="markdownTableBodyNone"><code>ACCESS_TOKEN_EXPIRE_MINUTES</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Secret Key   </td><td class="markdownTableBodyNone">Environment variable   </td><td class="markdownTableBodyNone"><code>SECRET_KEY</code> (required)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Password Hashing   </td><td class="markdownTableBodyNone">pbkdf2_sha256   </td><td class="markdownTableBodyNone">passlib CryptContext    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Credential Storage   </td><td class="markdownTableBodyNone">SQLite database   </td><td class="markdownTableBodyNone"><code>user_credentials</code> table   </td></tr>
</table>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant Client as API Client</div>
<div class="line">    participant RateLimiter as Rate Limiter</div>
<div class="line">    participant Auth as Auth Module</div>
<div class="line">    participant UserRepo as User Repository</div>
<div class="line">    participant JWT as JWT Library</div>
<div class="line"> </div>
<div class="line">    Client-&gt;&gt;RateLimiter: POST /token (credentials)</div>
<div class="line">    RateLimiter-&gt;&gt;RateLimiter: Check 5/min limit</div>
<div class="line"> </div>
<div class="line">    alt Rate Limit OK</div>
<div class="line">        RateLimiter-&gt;&gt;Auth: Process Login</div>
<div class="line">        Auth-&gt;&gt;UserRepo: get_user(username)</div>
<div class="line">        UserRepo--&gt;&gt;Auth: User or None</div>
<div class="line"> </div>
<div class="line">        alt User Found</div>
<div class="line">            Auth-&gt;&gt;Auth: verify_password(plain, hashed)</div>
<div class="line"> </div>
<div class="line">            alt Password Valid</div>
<div class="line">                Auth-&gt;&gt;JWT: encode(payload, SECRET_KEY, HS256)</div>
<div class="line">                JWT--&gt;&gt;Auth: Access Token</div>
<div class="line">                Auth--&gt;&gt;Client: {&quot;access_token&quot;: &quot;...&quot;, &quot;token_type&quot;: &quot;bearer&quot;}</div>
<div class="line">            else Password Invalid</div>
<div class="line">                Auth--&gt;&gt;Client: 401 Incorrect username or password</div>
<div class="line">            end</div>
<div class="line">        else User Not Found</div>
<div class="line">            Auth--&gt;&gt;Client: 401 Incorrect username or password</div>
<div class="line">        end</div>
<div class="line">    else Rate Limit Exceeded</div>
<div class="line">        RateLimiter--&gt;&gt;Client: 429 Too Many Requests</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2287"></a>
6.3.1.3 Authorization Framework</h4>
<p>Protected endpoint validation follows a five-step verification process ensuring token integrity and user status.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Step   </th><th class="markdownTableHeadNone">Action   </th><th class="markdownTableHeadNone">Failure Response    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Extract Bearer token from header   </td><td class="markdownTableBodyNone">401 Not authenticated    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Decode JWT with SECRET_KEY   </td><td class="markdownTableBodyNone">401 Could not validate    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Check token expiration   </td><td class="markdownTableBodyNone">401 Token has expired    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Lookup user in repository   </td><td class="markdownTableBodyNone">401 Invalid credentials    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">Verify user is active   </td><td class="markdownTableBodyNone">400 Inactive user   </td></tr>
</table>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph Authorization[Authorization Validation Flow]</div>
<div class="line">        Request([Protected Request]) --&gt; ExtractToken{Bearer Token&lt;br/&gt;Present?}</div>
<div class="line">        ExtractToken --&gt;|No| Return401A[401 Not Authenticated]</div>
<div class="line">        ExtractToken --&gt;|Yes| DecodeJWT{Decode JWT&lt;br/&gt;Valid?}</div>
<div class="line">        DecodeJWT --&gt;|No| Return401B[401 Could Not Validate]</div>
<div class="line">        DecodeJWT --&gt;|Yes| CheckExpiry{Token&lt;br/&gt;Expired?}</div>
<div class="line">        CheckExpiry --&gt;|Yes| Return401C[401 Token Expired]</div>
<div class="line">        CheckExpiry --&gt;|No| LookupUser{User&lt;br/&gt;Exists?}</div>
<div class="line">        LookupUser --&gt;|No| Return401D[401 Invalid Credentials]</div>
<div class="line">        LookupUser --&gt;|Yes| CheckActive{User&lt;br/&gt;Active?}</div>
<div class="line">        CheckActive --&gt;|No| Return400[400 Inactive User]</div>
<div class="line">        CheckActive --&gt;|Yes| Authorized([Access Granted])</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2288"></a>
6.3.1.4 Rate Limiting Strategy</h4>
<p>The system implements endpoint-specific rate limiting using slowapi with client IP-based tracking.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">Limit   </th><th class="markdownTableHeadNone">Window   </th><th class="markdownTableHeadNone">Key Function    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>POST /token</code>   </td><td class="markdownTableBodyNone">5 requests   </td><td class="markdownTableBodyNone">1 minute   </td><td class="markdownTableBodyNone">Client IP    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>GET /api/users/me</code>   </td><td class="markdownTableBodyNone">10 requests   </td><td class="markdownTableBodyNone">1 minute   </td><td class="markdownTableBodyNone">Client IP    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Other endpoints   </td><td class="markdownTableBodyNone">Unlimited   </td><td class="markdownTableBodyNone">N/A   </td><td class="markdownTableBodyNone">N/A   </td></tr>
</table>
<p><b>Implementation Details:</b></p>
<ul>
<li><b>Library</b>: slowapi with <code>get_remote_address</code> key function</li>
<li><b>Exception Handling</b>: <code>RateLimitExceeded</code> → custom handler returning HTTP 429</li>
<li><b>Response Headers</b>: Includes <code>Retry-After</code> header indicating wait time</li>
</ul>
<h4><a class="anchor" id="autotoc_md2289"></a>
6.3.1.5 CORS Configuration</h4>
<p>Cross-Origin Resource Sharing is configured based on deployment environment with strict origin validation.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Environment   </th><th class="markdownTableHeadNone">Allowed Origins   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Development   </td><td class="markdownTableBodyNone"><code><a href="http://localhost:3000">http://localhost:3000</a></code>, <code><a href="http://localhost:7860">http://localhost:7860</a></code>   </td><td class="markdownTableBodyNone">Hardcoded    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Production   </td><td class="markdownTableBodyNone">HTTPS origins only   </td><td class="markdownTableBodyNone">Environment variable    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Custom   </td><td class="markdownTableBodyNone">Comma-separated list   </td><td class="markdownTableBodyNone"><code>ALLOWED_ORIGINS</code>   </td></tr>
</table>
<p><b>CORS Validation Rules:</b></p>
<ul>
<li>HTTP localhost allowed only in development mode</li>
<li>HTTPS localhost allowed in any environment</li>
<li>Vercel preview URLs validated via regex: <code>^https://[a-zA-Z0-9\-\.]+\.vercel\.app$</code></li>
<li>Wildcard (<code>*</code>) origins prohibited when authentication headers are used</li>
</ul>
<h4><a class="anchor" id="autotoc_md2290"></a>
6.3.1.6 Versioning Approach</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Aspect   </th><th class="markdownTableHeadNone">Current Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Version   </td><td class="markdownTableBodyNone">1.0.0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Version Exposure   </td><td class="markdownTableBodyNone">Root endpoint metadata    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">URL Versioning   </td><td class="markdownTableBodyNone">Not implemented (single version)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Future Path   </td><td class="markdownTableBodyNone">URL-based versioning (e.g., <code>/v2/</code>) when needed   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2291"></a>
6.3.1.7 Documentation Standards</h4>
<p>The API implements comprehensive documentation through multiple mechanisms:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Standard   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OpenAPI/Swagger   </td><td class="markdownTableBodyNone">Auto-generated by FastAPI from type annotations    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Interactive Docs   </td><td class="markdownTableBodyNone">Available at <code>/docs</code> (Swagger UI) and <code>/redoc</code> (ReDoc)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Docstrings   </td><td class="markdownTableBodyNone">Comprehensive Python docstrings on all endpoints    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Type Annotations   </td><td class="markdownTableBodyNone">Pydantic models for request/response schemas    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Response Examples   </td><td class="markdownTableBodyNone">Included in OpenAPI specification   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2293"></a>
6.3.2 MESSAGE PROCESSING</h3>
<h4><a class="anchor" id="autotoc_md2294"></a>
6.3.2.1 Event Processing Patterns</h4>
<p>The system implements lifecycle event handling through FastAPI's lifespan context manager pattern.</p>
<h4><a class="anchor" id="autotoc_md2295"></a>
Application Lifecycle Events</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph LifecycleEvents[Application Lifecycle Events]</div>
<div class="line">        Startup([Application Start]) --&gt; InitGraph[Initialize Graph Engine]</div>
<div class="line">        InitGraph --&gt; LoadCache{Cache&lt;br/&gt;Available?}</div>
<div class="line">        LoadCache --&gt;|Yes| UseCache[Load from JSON Cache]</div>
<div class="line">        LoadCache --&gt;|No| FetchData[Fetch from Data Source]</div>
<div class="line">        UseCache --&gt; GraphReady[Graph Ready]</div>
<div class="line">        FetchData --&gt; BuildRelations[Build Relationships]</div>
<div class="line">        BuildRelations --&gt; GraphReady</div>
<div class="line">        GraphReady --&gt; LogStartup[Log Startup Complete]</div>
<div class="line">        LogStartup --&gt; Ready([Accept Requests])</div>
<div class="line"> </div>
<div class="line">        Ready --&gt; Shutdown([Shutdown Signal])</div>
<div class="line">        Shutdown --&gt; LogShutdown[Log Shutdown]</div>
<div class="line">        LogShutdown --&gt; Exit([Application Exit])</div>
<div class="line">    end</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Event   </th><th class="markdownTableHeadNone">Trigger   </th><th class="markdownTableHeadNone">Action   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Startup   </td><td class="markdownTableBodyNone">Application launch   </td><td class="markdownTableBodyNone">Initialize graph singleton   </td><td class="markdownTableBodyNone">Pre-warm graph data    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Request   </td><td class="markdownTableBodyNone">HTTP request   </td><td class="markdownTableBodyNone">Thread-safe graph access   </td><td class="markdownTableBodyNone">Serve API requests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Shutdown   </td><td class="markdownTableBodyNone">SIGTERM/SIGINT   </td><td class="markdownTableBodyNone">Log shutdown event   </td><td class="markdownTableBodyNone">Graceful termination   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2296"></a>
6.3.2.2 Batch Processing Flows</h4>
<p>The real data fetching system implements batch processing for market data acquisition from Yahoo Finance.</p>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant App as Application</div>
<div class="line">    participant Fetcher as RealDataFetcher</div>
<div class="line">    participant Cache as File Cache</div>
<div class="line">    participant YF as Yahoo Finance</div>
<div class="line">    participant Graph as Graph Engine</div>
<div class="line"> </div>
<div class="line">    App-&gt;&gt;Fetcher: create_real_database()</div>
<div class="line">    Fetcher-&gt;&gt;Cache: Check cache file</div>
<div class="line"> </div>
<div class="line">    alt Cache Exists</div>
<div class="line">        Cache--&gt;&gt;Fetcher: Cached JSON</div>
<div class="line">        Fetcher-&gt;&gt;Graph: Load from cache</div>
<div class="line">        Graph--&gt;&gt;App: Cached Graph</div>
<div class="line">    else No Cache</div>
<div class="line">        Fetcher-&gt;&gt;YF: Download AAPL, MSFT, XOM, JPM</div>
<div class="line">        YF--&gt;&gt;Fetcher: Equity Data</div>
<div class="line">        Fetcher-&gt;&gt;YF: Download TLT, LQD, HYG</div>
<div class="line">        YF--&gt;&gt;Fetcher: Bond ETF Data</div>
<div class="line">        Fetcher-&gt;&gt;YF: Download GC=F, CL=F, SI=F</div>
<div class="line">        YF--&gt;&gt;Fetcher: Commodity Data</div>
<div class="line">        Fetcher-&gt;&gt;YF: Download EURUSD=X, GBPUSD=X, JPYUSD=X</div>
<div class="line">        YF--&gt;&gt;Fetcher: Currency Data</div>
<div class="line"> </div>
<div class="line">        Fetcher-&gt;&gt;Graph: add_asset() × N</div>
<div class="line">        Fetcher-&gt;&gt;Graph: add_regulatory_event() × N</div>
<div class="line">        Fetcher-&gt;&gt;Graph: build_relationships()</div>
<div class="line"> </div>
<div class="line">        Fetcher-&gt;&gt;Cache: Write temp file</div>
<div class="line">        Cache-&gt;&gt;Cache: Atomic rename</div>
<div class="line">        Cache--&gt;&gt;Fetcher: Cache saved</div>
<div class="line"> </div>
<div class="line">        Graph--&gt;&gt;App: Fresh Graph</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2297"></a>
Batch Processing Sequence</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Step   </th><th class="markdownTableHeadNone">Operation   </th><th class="markdownTableHeadNone">Fallback Behavior    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Check cache file   </td><td class="markdownTableBodyNone">Proceed if missing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Fetch equities (AAPL, MSFT, XOM, JPM)   </td><td class="markdownTableBodyNone">Skip on error    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Fetch bond ETFs (TLT, LQD, HYG)   </td><td class="markdownTableBodyNone">Skip on error    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Fetch commodities (GC=F, CL=F, SI=F)   </td><td class="markdownTableBodyNone">Skip on error    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">Fetch currencies (EURUSD=X, etc.)   </td><td class="markdownTableBodyNone">Skip on error    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6   </td><td class="markdownTableBodyNone">Build relationships   </td><td class="markdownTableBodyNone">Process available data    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">7   </td><td class="markdownTableBodyNone">Atomic cache write   </td><td class="markdownTableBodyNone">Log error, continue   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2298"></a>
6.3.2.3 Error Handling Strategy</h4>
<p>The API implements comprehensive error categorization with appropriate HTTP status codes and recovery guidance.</p>
<h4><a class="anchor" id="autotoc_md2299"></a>
API Error Categories</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Status Code   </th><th class="markdownTableHeadNone">Scenario   </th><th class="markdownTableHeadNone">Response Detail    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">400   </td><td class="markdownTableBodyNone">Bad Request   </td><td class="markdownTableBodyNone">Inactive user, invalid input    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">401   </td><td class="markdownTableBodyNone">Unauthorized   </td><td class="markdownTableBodyNone">Invalid/expired token, missing credentials    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">404   </td><td class="markdownTableBodyNone">Not Found   </td><td class="markdownTableBodyNone">Asset/resource not found    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">422   </td><td class="markdownTableBodyNone">Validation Error   </td><td class="markdownTableBodyNone">Pydantic validation failure with field details    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">429   </td><td class="markdownTableBodyNone">Too Many Requests   </td><td class="markdownTableBodyNone">Rate limit exceeded with Retry-After header    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">500   </td><td class="markdownTableBodyNone">Internal Error   </td><td class="markdownTableBodyNone">Unexpected exception (logged server-side)   </td></tr>
</table>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph ErrorHandling[Error Handling Architecture]</div>
<div class="line">        Error([Error Occurs]) --&gt; ErrorType{Error Type}</div>
<div class="line"> </div>
<div class="line">        ErrorType --&gt;|HTTPException| HTTPHandle[Return HTTP Status]</div>
<div class="line">        HTTPHandle --&gt; Status401{401?}</div>
<div class="line">        Status401 --&gt;|Yes| AddWWW[Add WWW-Authenticate Header]</div>
<div class="line">        Status401 --&gt;|No| ReturnDetail[Return Error Detail]</div>
<div class="line">        AddWWW --&gt; ReturnDetail</div>
<div class="line"> </div>
<div class="line">        ErrorType --&gt;|Rate Limit| RateHandle[429 + Retry-After]</div>
<div class="line"> </div>
<div class="line">        ErrorType --&gt;|Validation| ValHandle[422 + Pydantic Details]</div>
<div class="line"> </div>
<div class="line">        ErrorType --&gt;|Unexpected| UnexpHandle[Log Exception]</div>
<div class="line">        UnexpHandle --&gt; Return500[500 Internal Error]</div>
<div class="line"> </div>
<div class="line">        ReturnDetail --&gt; Done([Response Sent])</div>
<div class="line">        RateHandle --&gt; Done</div>
<div class="line">        ValHandle --&gt; Done</div>
<div class="line">        Return500 --&gt; Done</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2300"></a>
Graph Initialization Error Recovery</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Error Source   </th><th class="markdownTableHeadNone">Detection   </th><th class="markdownTableHeadNone">Recovery Action   </th><th class="markdownTableHeadNone">Fallback    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Cache load failed   </td><td class="markdownTableBodyNone">JSON parse error   </td><td class="markdownTableBodyNone">Proceed to fresh fetch   </td><td class="markdownTableBodyNone">Standard init    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Network disabled   </td><td class="markdownTableBodyNone">Configuration flag   </td><td class="markdownTableBodyNone">Use sample data   </td><td class="markdownTableBodyNone">Offline mode    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Yahoo Finance error   </td><td class="markdownTableBodyNone">Request exception   </td><td class="markdownTableBodyNone">Check partial data   </td><td class="markdownTableBodyNone">Sample fallback    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Critical failure   </td><td class="markdownTableBodyNone">Unrecoverable exception   </td><td class="markdownTableBodyNone">Abort startup   </td><td class="markdownTableBodyNone">Application exit   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2302"></a>
6.3.3 EXTERNAL SYSTEMS</h3>
<h4><a class="anchor" id="autotoc_md2303"></a>
6.3.3.1 Third-Party Integration Patterns</h4>
<h4><a class="anchor" id="autotoc_md2304"></a>
Yahoo Finance Integration</h4>
<p>The system integrates with Yahoo Finance via the yfinance library for real-time market data.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Library   </td><td class="markdownTableBodyNone">yfinance ≥0.2.51    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Enable Flag   </td><td class="markdownTableBodyNone"><code>USE_REAL_DATA_FETCHER</code> environment variable    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Implementation   </td><td class="markdownTableBodyNone"><code><a class="el" href="real__data__fetcher_8py.html">src/data/real_data_fetcher.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Data Source   </td><td class="markdownTableBodyNone">Yahoo Finance API (via yfinance)   </td></tr>
</table>
<p><b>Supported Financial Instruments:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Category   </th><th class="markdownTableHeadNone">Symbols    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Equities   </td><td class="markdownTableBodyNone">AAPL, MSFT, XOM, JPM    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Bond ETFs   </td><td class="markdownTableBodyNone">TLT, LQD, HYG    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Commodities   </td><td class="markdownTableBodyNone">GC=F (Gold), CL=F (Crude Oil), SI=F (Silver)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Currencies   </td><td class="markdownTableBodyNone">EURUSD=X, GBPUSD=X, JPYUSD=X   </td></tr>
</table>
<p><b>Rate Limit Mitigation:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Strategy   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">File Caching   </td><td class="markdownTableBodyNone">JSON cache with atomic writes via <code>NamedTemporaryFile</code> + <code>os.replace</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Cache Path   </td><td class="markdownTableBodyNone">Configurable via <code>REAL_DATA_CACHE_PATH</code> environment variable    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Fallback   </td><td class="markdownTableBodyNone">Sample data when network disabled or unavailable    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Atomic Writes   </td><td class="markdownTableBodyNone">Prevents cache corruption on write failures   </td></tr>
</table>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph YahooFinanceIntegration[Yahoo Finance Integration Pattern]</div>
<div class="line">        Request([Data Request]) --&gt; CheckEnabled{Real Data&lt;br/&gt;Enabled?}</div>
<div class="line">        CheckEnabled --&gt;|No| UseSample[Use Sample Data]</div>
<div class="line">        CheckEnabled --&gt;|Yes| CheckCache{Cache&lt;br/&gt;Valid?}</div>
<div class="line">        CheckCache --&gt;|Yes| LoadCache[Load from Cache]</div>
<div class="line">        CheckCache --&gt;|No| FetchAPI[Fetch from Yahoo Finance]</div>
<div class="line"> </div>
<div class="line">        FetchAPI --&gt; HandleResponse{Response&lt;br/&gt;OK?}</div>
<div class="line">        HandleResponse --&gt;|Yes| ProcessData[Process Market Data]</div>
<div class="line">        HandleResponse --&gt;|Partial| PartialData[Use Available Data]</div>
<div class="line">        HandleResponse --&gt;|No| FallbackSample[Fallback to Sample]</div>
<div class="line"> </div>
<div class="line">        ProcessData --&gt; WriteCache[Write to Cache]</div>
<div class="line">        WriteCache --&gt; AtomicRename[Atomic File Rename]</div>
<div class="line"> </div>
<div class="line">        LoadCache --&gt; ReturnData([Return Data])</div>
<div class="line">        AtomicRename --&gt; ReturnData</div>
<div class="line">        PartialData --&gt; ReturnData</div>
<div class="line">        FallbackSample --&gt; ReturnData</div>
<div class="line">        UseSample --&gt; ReturnData</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2305"></a>
6.3.3.2 MCP (Model Context Protocol) Integration</h4>
<p>The system includes support for the Model Context Protocol, enabling AI tool integrations.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Framework   </td><td class="markdownTableBodyNone">FastMCP (<code>mcp&gt;=1.0.0</code>, <code>fastmcp&gt;=0.1.0</code>)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Server Name   </td><td class="markdownTableBodyNone">"DashFin-Relationship-Manager"    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Thread Safety   </td><td class="markdownTableBodyNone"><code>_ThreadSafeGraph</code> proxy with <code>threading.Lock</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Entry Point   </td><td class="markdownTableBodyNone"><code><a class="el" href="mcp__server_8py.html">mcp_server.py</a></code>   </td></tr>
</table>
<p><b>Exposed MCP Tools/Resources:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Tool/Resource   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>add_equity_node()</code>   </td><td class="markdownTableBodyNone">Tool   </td><td class="markdownTableBodyNone">Add equity asset to graph    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>graph://data/3d-layout</code>   </td><td class="markdownTableBodyNone">Resource   </td><td class="markdownTableBodyNone">3D visualization data resource   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2306"></a>
6.3.3.3 Frontend-Backend Integration</h4>
<p>The Next.js frontend communicates with the FastAPI backend through a typed API client layer.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Aspect   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HTTP Client   </td><td class="markdownTableBodyNone">Axios    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="classBase.html">Base</a> URL   </td><td class="markdownTableBodyNone"><code>NEXT_PUBLIC_API_URL</code> (default: <code><a href="http://localhost:8000">http://localhost:8000</a></code>)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Content-Type   </td><td class="markdownTableBodyNone"><code>application/json</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Location   </td><td class="markdownTableBodyNone"><code>frontend/app/lib/api.ts</code>   </td></tr>
</table>
<p><b>API Client Methods:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">Return Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>healthCheck()</code>   </td><td class="markdownTableBodyNone">GET /api/health   </td><td class="markdownTableBodyNone">Health status    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>getAssets(params?)</code>   </td><td class="markdownTableBodyNone">GET /api/assets   </td><td class="markdownTableBodyNone">Asset[] or paginated    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>getAssetDetail(id)</code>   </td><td class="markdownTableBodyNone">GET /api/assets/{id}   </td><td class="markdownTableBodyNone">Asset    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>getAssetRelationships(id)</code>   </td><td class="markdownTableBodyNone">GET /api/assets/{id}/relationships   </td><td class="markdownTableBodyNone">Relationship[]    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>getAllRelationships()</code>   </td><td class="markdownTableBodyNone">GET /api/relationships   </td><td class="markdownTableBodyNone">Relationship[]    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>getMetrics()</code>   </td><td class="markdownTableBodyNone">GET /api/metrics   </td><td class="markdownTableBodyNone">Metrics    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>getVisualizationData()</code>   </td><td class="markdownTableBodyNone">GET /api/visualization   </td><td class="markdownTableBodyNone">VisualizationData    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>getAssetClasses()</code>   </td><td class="markdownTableBodyNone">GET /api/asset-classes   </td><td class="markdownTableBodyNone">{ asset_classes: string[] }    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>getSectors()</code>   </td><td class="markdownTableBodyNone">GET /api/sectors   </td><td class="markdownTableBodyNone">{ sectors: string[] }   </td></tr>
</table>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant User as User Browser</div>
<div class="line">    participant NextJS as Next.js Frontend</div>
<div class="line">    participant Axios as Axios Client</div>
<div class="line">    participant CORS as CORS Middleware</div>
<div class="line">    participant FastAPI as FastAPI Backend</div>
<div class="line">    participant Graph as Graph Engine</div>
<div class="line"> </div>
<div class="line">    User-&gt;&gt;NextJS: Navigate to Page</div>
<div class="line">    NextJS-&gt;&gt;Axios: api.getMetrics()</div>
<div class="line">    Axios-&gt;&gt;CORS: GET /api/metrics</div>
<div class="line">    CORS-&gt;&gt;CORS: Validate Origin</div>
<div class="line"> </div>
<div class="line">    alt Origin Valid</div>
<div class="line">        CORS-&gt;&gt;FastAPI: Forward Request</div>
<div class="line">        FastAPI-&gt;&gt;Graph: get_graph()</div>
<div class="line">        Graph--&gt;&gt;FastAPI: Graph Instance</div>
<div class="line">        FastAPI-&gt;&gt;Graph: calculate_metrics()</div>
<div class="line">        Graph--&gt;&gt;FastAPI: Metrics Data</div>
<div class="line">        FastAPI--&gt;&gt;CORS: MetricsResponse</div>
<div class="line">        CORS--&gt;&gt;Axios: 200 OK + CORS Headers</div>
<div class="line">        Axios--&gt;&gt;NextJS: Response Data</div>
<div class="line">        NextJS--&gt;&gt;User: Render Metrics</div>
<div class="line">    else Origin Invalid</div>
<div class="line">        CORS--&gt;&gt;Axios: 403 Forbidden</div>
<div class="line">        Axios--&gt;&gt;NextJS: Error</div>
<div class="line">        NextJS--&gt;&gt;User: Show Error Message</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2307"></a>
6.3.3.4 Database Connectivity</h4>
<p>The system supports multiple database backends for authentication credential storage.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Backend   </th><th class="markdownTableHeadNone">Connection Handling   </th><th class="markdownTableHeadNone">Use Case    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SQLite   </td><td class="markdownTableBodyNone">Single connection for in-memory; file-based for persistence   </td><td class="markdownTableBodyNone">Development, testing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PostgreSQL   </td><td class="markdownTableBodyNone">psycopg2-binary with connection pooling   </td><td class="markdownTableBodyNone">Production    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">In-Memory Testing   </td><td class="markdownTableBodyNone">SQLAlchemy <code>StaticPool</code> for connection reuse   </td><td class="markdownTableBodyNone">Unit tests   </td></tr>
</table>
<p><b>Authentication Database Schema:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Table   </th><th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Constraint    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>user_credentials</code>   </td><td class="markdownTableBodyNone"><code>username</code>   </td><td class="markdownTableBodyNone">VARCHAR   </td><td class="markdownTableBodyNone">UNIQUE, NOT NULL    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>user_credentials</code>   </td><td class="markdownTableBodyNone"><code>email</code>   </td><td class="markdownTableBodyNone">VARCHAR   </td><td class="markdownTableBodyNone">NULL    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>user_credentials</code>   </td><td class="markdownTableBodyNone"><code>full_name</code>   </td><td class="markdownTableBodyNone">VARCHAR   </td><td class="markdownTableBodyNone">NULL    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>user_credentials</code>   </td><td class="markdownTableBodyNone"><code>hashed_password</code>   </td><td class="markdownTableBodyNone">VARCHAR   </td><td class="markdownTableBodyNone">NOT NULL    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>user_credentials</code>   </td><td class="markdownTableBodyNone"><code>disabled</code>   </td><td class="markdownTableBodyNone">BOOLEAN   </td><td class="markdownTableBodyNone">DEFAULT FALSE   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2308"></a>
6.3.3.5 Deployment Platform Integration</h4>
<h4><a class="anchor" id="autotoc_md2309"></a>
Vercel Serverless Deployment</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Builder   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Backend   </td><td class="markdownTableBodyNone"><code>@vercel/python</code>   </td><td class="markdownTableBodyNone">maxLambdaSize: 50mb    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Frontend   </td><td class="markdownTableBodyNone"><code>@vercel/next</code>   </td><td class="markdownTableBodyNone">Default Next.js settings   </td></tr>
</table>
<p><b>Route Configuration:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Pattern   </th><th class="markdownTableHeadNone">Destination   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/(.*)</code>   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone">Backend API routes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/(.*)</code>   </td><td class="markdownTableBodyNone"><code>frontend/$1</code>   </td><td class="markdownTableBodyNone">Frontend static/SSR   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2310"></a>
Docker Container Deployment</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Setting   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="classBase.html">Base</a> Image   </td><td class="markdownTableBodyNone"><code>python:3.11-slim</code>   </td><td class="markdownTableBodyNone">Minimal Python runtime    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Container User   </td><td class="markdownTableBodyNone"><code>appuser</code> (UID 1000)   </td><td class="markdownTableBodyNone">Non-root security    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Exposed Port   </td><td class="markdownTableBodyNone">7860   </td><td class="markdownTableBodyNone">Gradio default    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Health Check   </td><td class="markdownTableBodyNone">HTTP probe every 30s   </td><td class="markdownTableBodyNone">Container health    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Restart Policy   </td><td class="markdownTableBodyNone">unless-stopped   </td><td class="markdownTableBodyNone">Automatic recovery   </td></tr>
</table>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph DeploymentArchitecture[Deployment Platform Integration]</div>
<div class="line">        subgraph LocalDev[Local Development]</div>
<div class="line">            LocalFE[Next.js&lt;br/&gt;:3000]</div>
<div class="line">            LocalAPI[FastAPI&lt;br/&gt;:8000]</div>
<div class="line">            LocalGradio[Gradio&lt;br/&gt;:7860]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph DockerDeploy[Docker Deployment]</div>
<div class="line">            DockerApp[Single Container&lt;br/&gt;:7860]</div>
<div class="line">            DockerVol[(Mounted Volumes)]</div>
<div class="line">            DockerApp --&gt; DockerVol</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph VercelDeploy[Vercel Serverless]</div>
<div class="line">            VercelEdge[Edge Network]</div>
<div class="line">            VercelLambda[Python Lambda]</div>
<div class="line">            VercelNext[Next.js SSR]</div>
<div class="line">            VercelEdge --&gt; VercelLambda</div>
<div class="line">            VercelEdge --&gt; VercelNext</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    Users([End Users]) --&gt; LocalDev</div>
<div class="line">    Users --&gt; DockerDeploy</div>
<div class="line">    Users --&gt; VercelDeploy</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md2312"></a>
6.3.4 TYPE CONTRACTS</h3>
<h4><a class="anchor" id="autotoc_md2313"></a>
6.3.4.1 Backend Response Models</h4>
<p>The API uses Pydantic models for type-safe request/response serialization.</p>
<h4><a class="anchor" id="autotoc_md2314"></a>
AssetResponse Model</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Required   </th><th class="markdownTableHeadNone">Default    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>id</code>   </td><td class="markdownTableBodyNone"><code>str</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>symbol</code>   </td><td class="markdownTableBodyNone"><code>str</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>name</code>   </td><td class="markdownTableBodyNone"><code>str</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>asset_class</code>   </td><td class="markdownTableBodyNone"><code>str</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>sector</code>   </td><td class="markdownTableBodyNone"><code>str</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>price</code>   </td><td class="markdownTableBodyNone"><code>float</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>market_cap</code>   </td><td class="markdownTableBodyNone"><code>Optional[float]</code>   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone"><code>None</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>currency</code>   </td><td class="markdownTableBodyNone"><code>str</code>   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone"><code>"USD"</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>additional_fields</code>   </td><td class="markdownTableBodyNone"><code>Dict[str, Any]</code>   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone"><code>{}</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2315"></a>
RelationshipResponse Model</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Required    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>source_id</code>   </td><td class="markdownTableBodyNone"><code>str</code>   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>target_id</code>   </td><td class="markdownTableBodyNone"><code>str</code>   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>relationship_type</code>   </td><td class="markdownTableBodyNone"><code>str</code>   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>strength</code>   </td><td class="markdownTableBodyNone"><code>float</code>   </td><td class="markdownTableBodyNone">Yes   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2316"></a>
MetricsResponse Model</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Required    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>total_assets</code>   </td><td class="markdownTableBodyNone"><code>int</code>   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>total_relationships</code>   </td><td class="markdownTableBodyNone"><code>int</code>   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>asset_classes</code>   </td><td class="markdownTableBodyNone"><code>Dict[str, int]</code>   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>avg_degree</code>   </td><td class="markdownTableBodyNone"><code>float</code>   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>max_degree</code>   </td><td class="markdownTableBodyNone"><code>int</code>   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>network_density</code>   </td><td class="markdownTableBodyNone"><code>float</code>   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>relationship_density</code>   </td><td class="markdownTableBodyNone"><code>float</code>   </td><td class="markdownTableBodyNone">No (default: 0.0)   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2317"></a>
6.3.4.2 Frontend Type Definitions</h4>
<p>TypeScript interfaces defined in <code>frontend/app/types/api.ts</code> provide compile-time type safety.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Interface   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Asset</code>   </td><td class="markdownTableBodyNone">Asset data structure    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Relationship</code>   </td><td class="markdownTableBodyNone">Relationship data structure    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Metrics</code>   </td><td class="markdownTableBodyNone">Network metrics    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>VisualizationNode</code>   </td><td class="markdownTableBodyNone">3D visualization node    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>VisualizationEdge</code>   </td><td class="markdownTableBodyNone">3D visualization edge    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>VisualizationData</code>   </td><td class="markdownTableBodyNone">Complete visualization payload   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2319"></a>
6.3.5 INTEGRATION FLOW DIAGRAMS</h3>
<h4><a class="anchor" id="autotoc_md2320"></a>
6.3.5.1 Complete API Request Lifecycle</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph IntegrationFlow[Complete API Request Lifecycle]</div>
<div class="line">        Client([Client Request]) --&gt; TLS[TLS Termination]</div>
<div class="line">        TLS --&gt; Load[Load Balancer]</div>
<div class="line">        Load --&gt; ASGI[Uvicorn ASGI]</div>
<div class="line">        ASGI --&gt; CORS[CORS Validation]</div>
<div class="line"> </div>
<div class="line">        CORS --&gt; CORSCheck{Origin&lt;br/&gt;Valid?}</div>
<div class="line">        CORSCheck --&gt;|No| Reject403[403 Forbidden]</div>
<div class="line">        CORSCheck --&gt;|Yes| RateLimit[Rate Limit Check]</div>
<div class="line"> </div>
<div class="line">        RateLimit --&gt; RateLimitCheck{Within&lt;br/&gt;Limit?}</div>
<div class="line">        RateLimitCheck --&gt;|No| Reject429[429 Too Many]</div>
<div class="line">        RateLimitCheck --&gt;|Yes| AuthCheck{Auth&lt;br/&gt;Required?}</div>
<div class="line"> </div>
<div class="line">        AuthCheck --&gt;|Yes| ValidateJWT[Validate JWT]</div>
<div class="line">        ValidateJWT --&gt; JWTValid{Token&lt;br/&gt;Valid?}</div>
<div class="line">        JWTValid --&gt;|No| Reject401[401 Unauthorized]</div>
<div class="line">        JWTValid --&gt;|Yes| Process[Process Request]</div>
<div class="line"> </div>
<div class="line">        AuthCheck --&gt;|No| Process</div>
<div class="line"> </div>
<div class="line">        Process --&gt; Validate[Pydantic Validation]</div>
<div class="line">        Validate --&gt; ValidationOK{Valid&lt;br/&gt;Input?}</div>
<div class="line">        ValidationOK --&gt;|No| Reject422[422 Validation Error]</div>
<div class="line">        ValidationOK --&gt;|Yes| Handler[Endpoint Handler]</div>
<div class="line"> </div>
<div class="line">        Handler --&gt; Graph[Graph Engine]</div>
<div class="line">        Graph --&gt; Serialize[Serialize Response]</div>
<div class="line">        Serialize --&gt; AddHeaders[Add Response Headers]</div>
<div class="line">        AddHeaders --&gt; Response([JSON Response])</div>
<div class="line"> </div>
<div class="line">        Reject403 --&gt; ErrorResponse([Error Response])</div>
<div class="line">        Reject429 --&gt; ErrorResponse</div>
<div class="line">        Reject401 --&gt; ErrorResponse</div>
<div class="line">        Reject422 --&gt; ErrorResponse</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2321"></a>
6.3.5.2 Visualization Data Pipeline</h4>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant User as User</div>
<div class="line">    participant UI as UI Component</div>
<div class="line">    participant API as API Layer</div>
<div class="line">    participant Graph as Graph Engine</div>
<div class="line">    participant Viz as Visualization Module</div>
<div class="line">    participant Plotly as Plotly Renderer</div>
<div class="line"> </div>
<div class="line">    User-&gt;&gt;UI: Request 3D Visualization</div>
<div class="line">    UI-&gt;&gt;API: GET /api/visualization</div>
<div class="line">    API-&gt;&gt;Graph: get_graph()</div>
<div class="line">    Graph--&gt;&gt;API: Graph Instance</div>
<div class="line">    API-&gt;&gt;Viz: get_3d_visualization_data_enhanced()</div>
<div class="line">    Viz-&gt;&gt;Viz: Set seed(42)</div>
<div class="line">    Viz-&gt;&gt;Viz: Calculate 3D positions</div>
<div class="line">    Viz-&gt;&gt;Viz: Assign colors by asset class</div>
<div class="line">    Viz-&gt;&gt;Viz: Generate hover text</div>
<div class="line">    Viz--&gt;&gt;API: (positions, ids, colors, hovers)</div>
<div class="line">    API-&gt;&gt;API: Build nodes array</div>
<div class="line">    API-&gt;&gt;API: Build edges array</div>
<div class="line">    API--&gt;&gt;UI: VisualizationDataResponse</div>
<div class="line">    UI-&gt;&gt;Plotly: Render 3D scatter</div>
<div class="line">    Plotly--&gt;&gt;User: Interactive 3D Graph</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2322"></a>
6.3.5.3 Thread-Safe Singleton Pattern</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph SingletonAccess[Thread-Safe Graph Singleton Access]</div>
<div class="line">        APIRequest([API Request]) --&gt; CheckGlobal{Global graph&lt;br/&gt;exists?}</div>
<div class="line">        CheckGlobal --&gt;|Yes| ReturnGraph([Return Graph])</div>
<div class="line">        CheckGlobal --&gt;|No| AcquireLock[Acquire Thread Lock]</div>
<div class="line">        AcquireLock --&gt; DoubleCheck{Double-check&lt;br/&gt;inside lock}</div>
<div class="line">        DoubleCheck --&gt;|Created| Release1[Release Lock]</div>
<div class="line">        Release1 --&gt; ReturnGraph</div>
<div class="line">        DoubleCheck --&gt;|Still None| InitGraph[Initialize New Graph]</div>
<div class="line">        InitGraph --&gt; SetGlobal[Set Global Reference]</div>
<div class="line">        SetGlobal --&gt; Release2[Release Lock]</div>
<div class="line">        Release2 --&gt; ReturnNew[Return New Graph]</div>
<div class="line">        ReturnNew --&gt; ReturnGraph</div>
<div class="line">    end</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md2324"></a>
6.3.6 ENVIRONMENT CONFIGURATION</h3>
<p>Integration behavior is controlled through environment variables that configure connectivity, security, and feature flags.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variable   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Default    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>NEXT_PUBLIC_API_URL</code>   </td><td class="markdownTableBodyNone">Frontend API base URL   </td><td class="markdownTableBodyNone"><code><a href="http://localhost:8000">http://localhost:8000</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ALLOWED_ORIGINS</code>   </td><td class="markdownTableBodyNone">CORS allowed origins   </td><td class="markdownTableBodyNone">(none - uses defaults)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SECRET_KEY</code>   </td><td class="markdownTableBodyNone">JWT signing key   </td><td class="markdownTableBodyNone"><b>Required</b>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>DATABASE_URL</code>   </td><td class="markdownTableBodyNone">SQLite connection string   </td><td class="markdownTableBodyNone"><b>Required</b>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>USE_REAL_DATA_FETCHER</code>   </td><td class="markdownTableBodyNone">Enable Yahoo Finance   </td><td class="markdownTableBodyNone"><code>false</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>REAL_DATA_CACHE_PATH</code>   </td><td class="markdownTableBodyNone">Cache file path   </td><td class="markdownTableBodyNone">(none)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>GRAPH_CACHE_PATH</code>   </td><td class="markdownTableBodyNone">Graph cache path   </td><td class="markdownTableBodyNone">(none)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ADMIN_USERNAME</code>   </td><td class="markdownTableBodyNone">Admin user credential   </td><td class="markdownTableBodyNone">(none)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ADMIN_PASSWORD</code>   </td><td class="markdownTableBodyNone">Admin user credential   </td><td class="markdownTableBodyNone">(none)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ENV</code>   </td><td class="markdownTableBodyNone">Environment mode   </td><td class="markdownTableBodyNone"><code>development</code>   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2326"></a>
6.3.7 PERFORMANCE TARGETS</h3>
<p>The integration architecture is designed to meet specific service level objectives.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Operation   </th><th class="markdownTableHeadNone">Target SLA   </th><th class="markdownTableHeadNone">Measurement    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Response (p95)   </td><td class="markdownTableBodyNone">&lt; 500ms   </td><td class="markdownTableBodyNone">Request to response    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visualization Rendering   </td><td class="markdownTableBodyNone">&lt; 2 seconds   </td><td class="markdownTableBodyNone">Data load to interactive    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Token Generation   </td><td class="markdownTableBodyNone">&lt; 100ms   </td><td class="markdownTableBodyNone">Credential to token    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Graph Initialization   </td><td class="markdownTableBodyNone">&lt; 3 seconds   </td><td class="markdownTableBodyNone">Application startup    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Relationship Discovery   </td><td class="markdownTableBodyNone">&lt; 500ms   </td><td class="markdownTableBodyNone">For 100 assets    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Initial Page Load   </td><td class="markdownTableBodyNone">&lt; 3 seconds   </td><td class="markdownTableBodyNone">Navigation to interactive   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2327"></a>
Timeout Configuration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Timeout   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">JWT Token   </td><td class="markdownTableBodyNone">30 minutes   </td><td class="markdownTableBodyNone">Session expiration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Rate Limit Window   </td><td class="markdownTableBodyNone">1 minute   </td><td class="markdownTableBodyNone">Request counting period    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HTTP Client   </td><td class="markdownTableBodyNone">30 seconds   </td><td class="markdownTableBodyNone">API request timeout    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Health Check   </td><td class="markdownTableBodyNone">30 seconds   </td><td class="markdownTableBodyNone">Container probe interval   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2329"></a>
6.3.8 EXTERNAL DEPENDENCIES</h3>
<h4><a class="anchor" id="autotoc_md2330"></a>
6.3.8.1 Runtime Dependencies</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FastAPI   </td><td class="markdownTableBodyNone">0.127.0   </td><td class="markdownTableBodyNone">REST framework    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Uvicorn   </td><td class="markdownTableBodyNone">≥0.24.0   </td><td class="markdownTableBodyNone">ASGI server    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Pydantic   </td><td class="markdownTableBodyNone">2.12.5   </td><td class="markdownTableBodyNone">Validation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PyJWT   </td><td class="markdownTableBodyNone">≥2.8.0   </td><td class="markdownTableBodyNone">Token handling    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">passlib   </td><td class="markdownTableBodyNone">Latest   </td><td class="markdownTableBodyNone">Password hashing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">slowapi   </td><td class="markdownTableBodyNone">Latest   </td><td class="markdownTableBodyNone">Rate limiting    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">yfinance   </td><td class="markdownTableBodyNone">≥0.2.51   </td><td class="markdownTableBodyNone">Market data    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SQLAlchemy   </td><td class="markdownTableBodyNone">≥2.0.0   </td><td class="markdownTableBodyNone">Database ORM   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2331"></a>
6.3.8.2 Frontend Dependencies</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Next.js   </td><td class="markdownTableBodyNone">14.2.35   </td><td class="markdownTableBodyNone">React framework    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">React   </td><td class="markdownTableBodyNone">18.2.0   </td><td class="markdownTableBodyNone">UI library    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">TypeScript   </td><td class="markdownTableBodyNone">^5.3.0   </td><td class="markdownTableBodyNone">Type safety    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Axios   </td><td class="markdownTableBodyNone">Latest   </td><td class="markdownTableBodyNone">HTTP client    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Plotly.js   </td><td class="markdownTableBodyNone">^2.27.0   </td><td class="markdownTableBodyNone">Visualization    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Tailwind CSS   </td><td class="markdownTableBodyNone">Latest   </td><td class="markdownTableBodyNone">Styling   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2333"></a>
6.3.9 References</h3>
<h4><a class="anchor" id="autotoc_md2334"></a>
Files Examined</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Path   </th><th class="markdownTableHeadNone">Relevance    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone">FastAPI application, endpoints, CORS, rate limiting, graph lifecycle    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code>   </td><td class="markdownTableBodyNone">JWT authentication, password hashing, user repository    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="api_2database_8py.html">api/database.py</a></code>   </td><td class="markdownTableBodyNone">SQLite integration, connection management    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="real__data__fetcher_8py.html">src/data/real_data_fetcher.py</a></code>   </td><td class="markdownTableBodyNone">Yahoo Finance integration, caching strategy    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/app/lib/api.ts</code>   </td><td class="markdownTableBodyNone">Frontend HTTP client implementation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/app/types/api.ts</code>   </td><td class="markdownTableBodyNone">TypeScript type definitions    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>vercel.json</code>   </td><td class="markdownTableBodyNone">Serverless deployment configuration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>docker-compose.yml</code>   </td><td class="markdownTableBodyNone">Docker container orchestration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Dockerfile</code>   </td><td class="markdownTableBodyNone">Container build specification    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="mcp__server_8py.html">mcp_server.py</a></code>   </td><td class="markdownTableBodyNone">Model Context Protocol server    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>requirements.txt</code>   </td><td class="markdownTableBodyNone">Python dependencies    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.env.example</code>   </td><td class="markdownTableBodyNone">Environment variable templates   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2335"></a>
Folders Explored</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Folder Path   </th><th class="markdownTableHeadNone">Contents    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>api/</code>   </td><td class="markdownTableBodyNone">FastAPI backend modules    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/</code>   </td><td class="markdownTableBodyNone">Next.js application    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/app/lib/</code>   </td><td class="markdownTableBodyNone">API client layer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/app/types/</code>   </td><td class="markdownTableBodyNone">TypeScript contracts    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>src/</code>   </td><td class="markdownTableBodyNone">Python core packages    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>src/data/</code>   </td><td class="markdownTableBodyNone">Data layer modules   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2336"></a>
Technical Specification Sections Referenced</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Section   </th><th class="markdownTableHeadNone">Topic    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3.1 Technology Stack Overview   </td><td class="markdownTableBodyNone">Stack architecture and technology choices    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3.5 Third-Party Services   </td><td class="markdownTableBodyNone">External service integrations    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3.8 Security Considerations   </td><td class="markdownTableBodyNone">Authentication and API security    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3.9 Integration Requirements   </td><td class="markdownTableBodyNone">Frontend-backend communication    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4.3 API Request Workflows   </td><td class="markdownTableBodyNone">API workflow diagrams    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4.5 Error Handling Workflows   </td><td class="markdownTableBodyNone">Error recovery flows    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4.6 Integration Sequence Diagrams   </td><td class="markdownTableBodyNone">Integration flow diagrams    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">5.2 COMPONENT DETAILS   </td><td class="markdownTableBodyNone">Component specifications    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5.4 CROSS-CUTTING CONCERNS   </td><td class="markdownTableBodyNone">Cross-cutting concerns    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">5.5 DEPLOYMENT ARCHITECTURE   </td><td class="markdownTableBodyNone">Deployment options    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">6.1 Core Services Architecture   </td><td class="markdownTableBodyNone">Monolithic architecture overview   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md2337"></a>
6.4 Security Architecture</h2>
<h3><a class="anchor" id="autotoc_md2338"></a>
6.4.1 Security Architecture Overview</h3>
<h4><a class="anchor" id="autotoc_md2339"></a>
6.4.1.1 Executive Security Summary</h4>
<p>The Financial Asset Relationship Database implements a comprehensive, defense-in-depth security architecture designed to protect both user identities and financial asset data. The security model centers on JWT-based stateless authentication, environment-driven secrets management, multi-layered input validation, and proactive threat mitigation through rate limiting and CORS controls.</p>
<p>The architecture addresses security concerns across multiple domains:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Security Domain   </th><th class="markdownTableHeadNone">Implementation Approach   </th><th class="markdownTableHeadNone">Primary Controls    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Identity &amp; Access   </td><td class="markdownTableBodyNone">JWT with HS256 signing   </td><td class="markdownTableBodyNone">Token-based authentication    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Input Validation   </td><td class="markdownTableBodyNone">Multi-layer validation   </td><td class="markdownTableBodyNone">Pydantic models, domain validation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Transport Security   </td><td class="markdownTableBodyNone">HTTPS enforcement   </td><td class="markdownTableBodyNone">TLS termination at edge    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Rate Protection   </td><td class="markdownTableBodyNone">IP-based throttling   </td><td class="markdownTableBodyNone">slowapi middleware    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Origin Control   </td><td class="markdownTableBodyNone">Allowlist validation   </td><td class="markdownTableBodyNone">Environment-specific CORS    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Container Security   </td><td class="markdownTableBodyNone">Hardened runtime   </td><td class="markdownTableBodyNone">Non-root execution   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2340"></a>
6.4.1.2 Security Zone Architecture</h4>
<p>The system implements security zones with increasing trust levels from the external network to protected internal services:</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph ExternalZone[External Zone - Untrusted]</div>
<div class="line">        Internet([Internet&lt;br/&gt;Clients])</div>
<div class="line">        Vercel[Vercel Edge&lt;br/&gt;TLS Termination]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph DMZ[DMZ - Semi-Trusted]</div>
<div class="line">        LB[Load Balancer&lt;br/&gt;Rate Limiting]</div>
<div class="line">        CORS[CORS&lt;br/&gt;Middleware]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph ApplicationZone[Application Zone - Protected]</div>
<div class="line">        Auth[Authentication&lt;br/&gt;Module]</div>
<div class="line">        API[FastAPI&lt;br/&gt;Endpoints]</div>
<div class="line">        RateLimit[Rate&lt;br/&gt;Limiter]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph DataZone[Data Zone - Restricted]</div>
<div class="line">        Graph[Graph&lt;br/&gt;Engine]</div>
<div class="line">        SQLite[(SQLite&lt;br/&gt;Auth DB)]</div>
<div class="line">        Cache[(JSON&lt;br/&gt;Cache)]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    Internet --&gt; Vercel</div>
<div class="line">    Vercel --&gt; LB</div>
<div class="line">    LB --&gt; CORS</div>
<div class="line">    CORS --&gt; RateLimit</div>
<div class="line">    RateLimit --&gt; Auth</div>
<div class="line">    Auth --&gt; API</div>
<div class="line">    Auth --&gt; SQLite</div>
<div class="line">    API --&gt; Graph</div>
<div class="line">    Graph --&gt; Cache</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2341"></a>
6.4.1.3 Security Principles</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Principle   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Defense in Depth   </td><td class="markdownTableBodyNone">Multiple validation layers (CORS → Rate Limit → Auth → Input Validation)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Least Privilege   </td><td class="markdownTableBodyNone">Non-root container user, minimal API permissions    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Fail Secure   </td><td class="markdownTableBodyNone">Default-deny CORS policy, explicit token validation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Separation of Duties   </td><td class="markdownTableBodyNone">Authentication separated from business logic    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Audit Trail   </td><td class="markdownTableBodyNone">Security event logging at multiple levels   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2343"></a>
6.4.2 Authentication Framework</h3>
<h4><a class="anchor" id="autotoc_md2344"></a>
6.4.2.1 Identity Management Architecture</h4>
<p>The identity management system uses a SQLite-backed user repository with secure credential storage and JWT-based session management.</p>
<p><b>Location</b>: <code><a class="el" href="auth_8py.html">api/auth.py</a></code>, <code><a class="el" href="api_2database_8py.html">api/database.py</a></code></p>
<h4><a class="anchor" id="autotoc_md2345"></a>
User Identity Model</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Security Note    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>username</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">Unique login identifier   </td><td class="markdownTableBodyNone">Unique constraint enforced    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>email</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">Contact information   </td><td class="markdownTableBodyNone">Optional, nullable    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>full_name</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">Display name   </td><td class="markdownTableBodyNone">Optional, nullable    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>hashed_password</code>   </td><td class="markdownTableBodyNone">TEXT   </td><td class="markdownTableBodyNone">pbkdf2_sha256 hash   </td><td class="markdownTableBodyNone">Never stored in plaintext    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>disabled</code>   </td><td class="markdownTableBodyNone">INTEGER   </td><td class="markdownTableBodyNone">Account status flag   </td><td class="markdownTableBodyNone">Blocks authentication when true   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2346"></a>
User Repository Pattern</h4>
<p>The <code>UserRepository</code> class in <code><a class="el" href="auth_8py.html">api/auth.py</a></code> provides secure user management:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Security Control    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>get_user(username)</code>   </td><td class="markdownTableBodyNone">Retrieve user by username   </td><td class="markdownTableBodyNone">Parameterized query protection    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>has_users()</code>   </td><td class="markdownTableBodyNone">Check for existing users   </td><td class="markdownTableBodyNone">Used during admin seeding    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>create_or_update_user()</code>   </td><td class="markdownTableBodyNone">User CRUD operations   </td><td class="markdownTableBodyNone">Password hashing enforced   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2347"></a>
6.4.2.2 Password Security</h4>
<p>Password security is implemented using industry-standard cryptographic hashing with the <code>passlib</code> library.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Aspect   </th><th class="markdownTableHeadNone">Configuration   </th><th class="markdownTableHeadNone">Source    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Algorithm   </td><td class="markdownTableBodyNone"><code>pbkdf2_sha256</code>   </td><td class="markdownTableBodyNone"><code>passlib.context.CryptContext</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Hash Function   </td><td class="markdownTableBodyNone">SHA-256   </td><td class="markdownTableBodyNone">NIST-approved    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Salt   </td><td class="markdownTableBodyNone">Automatic (per-hash)   </td><td class="markdownTableBodyNone">Built-in to pbkdf2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Iterations   </td><td class="markdownTableBodyNone">passlib defaults   </td><td class="markdownTableBodyNone">Configurable   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2348"></a>
Password Handling Functions</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Function   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Security Behavior    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>get_password_hash(password)</code>   </td><td class="markdownTableBodyNone">Hash plaintext password   </td><td class="markdownTableBodyNone">Returns irreversible hash    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>verify_password(plain, hashed)</code>   </td><td class="markdownTableBodyNone">Validate credentials   </td><td class="markdownTableBodyNone">Constant-time comparison   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2349"></a>
6.4.2.3 Token Handling (JWT)</h4>
<p>The authentication system uses JSON Web Tokens (JWT) for stateless session management.</p>
<p><b>JWT Configuration</b>:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Setting   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Location    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Algorithm   </td><td class="markdownTableBodyNone">HS256 (HMAC-SHA256)   </td><td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code> line 23    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Expiration   </td><td class="markdownTableBodyNone">30 minutes   </td><td class="markdownTableBodyNone"><code>ACCESS_TOKEN_EXPIRE_MINUTES</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Secret Key   </td><td class="markdownTableBodyNone">Environment variable   </td><td class="markdownTableBodyNone"><code>SECRET_KEY</code> (required)   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2350"></a>
Token Lifecycle</h4>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant Client as API Client</div>
<div class="line">    participant Rate as Rate Limiter</div>
<div class="line">    participant Auth as Auth Module</div>
<div class="line">    participant Repo as User Repository</div>
<div class="line">    participant JWT as JWT Library</div>
<div class="line"> </div>
<div class="line">    Client-&gt;&gt;Rate: POST /token (credentials)</div>
<div class="line">    Rate-&gt;&gt;Rate: Check 5/min limit</div>
<div class="line"> </div>
<div class="line">    alt Within Rate Limit</div>
<div class="line">        Rate-&gt;&gt;Auth: Process Login Request</div>
<div class="line">        Auth-&gt;&gt;Repo: get_user(username)</div>
<div class="line">        Repo--&gt;&gt;Auth: User Object or None</div>
<div class="line"> </div>
<div class="line">        alt User Found</div>
<div class="line">            Auth-&gt;&gt;Auth: verify_password()</div>
<div class="line"> </div>
<div class="line">            alt Password Valid</div>
<div class="line">                Auth-&gt;&gt;Auth: Check user.disabled</div>
<div class="line"> </div>
<div class="line">                alt User Active</div>
<div class="line">                    Auth-&gt;&gt;JWT: encode(payload, SECRET_KEY, HS256)</div>
<div class="line">                    JWT--&gt;&gt;Auth: Access Token</div>
<div class="line">                    Auth--&gt;&gt;Client: {&quot;access_token&quot;: &quot;...&quot;, &quot;token_type&quot;: &quot;bearer&quot;}</div>
<div class="line">                else User Disabled</div>
<div class="line">                    Auth--&gt;&gt;Client: 400 Inactive user</div>
<div class="line">                end</div>
<div class="line">            else Password Invalid</div>
<div class="line">                Auth--&gt;&gt;Client: 401 Incorrect username or password</div>
<div class="line">            end</div>
<div class="line">        else User Not Found</div>
<div class="line">            Auth--&gt;&gt;Client: 401 Incorrect username or password</div>
<div class="line">        end</div>
<div class="line">    else Rate Limit Exceeded</div>
<div class="line">        Rate--&gt;&gt;Client: 429 Too Many Requests</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2351"></a>
Token Security Controls</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Control   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Mitigation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Algorithm Pinning   </td><td class="markdownTableBodyNone">Explicit <code>algorithms=["HS256"]</code> in decode   </td><td class="markdownTableBodyNone">Algorithm confusion attacks    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Expiration Enforcement   </td><td class="markdownTableBodyNone"><code>exp</code> claim validation   </td><td class="markdownTableBodyNone">Session hijacking    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Secret Key Requirement   </td><td class="markdownTableBodyNone"><code>ValueError</code> if <code>SECRET_KEY</code> not set   </td><td class="markdownTableBodyNone">Weak signing prevention    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Bearer Token Standard   </td><td class="markdownTableBodyNone">OAuth2PasswordBearer scheme   </td><td class="markdownTableBodyNone">Standard compliance   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2352"></a>
6.4.2.4 Session Management</h4>
<p>The system implements stateless session management through JWT tokens:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Aspect   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Benefit    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Session Storage   </td><td class="markdownTableBodyNone">None (stateless)   </td><td class="markdownTableBodyNone">No server-side session attacks    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Token Transport   </td><td class="markdownTableBodyNone">Bearer header   </td><td class="markdownTableBodyNone">Standard OAuth2 pattern    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Session Termination   </td><td class="markdownTableBodyNone">Token expiration   </td><td class="markdownTableBodyNone">Automatic timeout    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Token Endpoint   </td><td class="markdownTableBodyNone"><code>POST /token</code>   </td><td class="markdownTableBodyNone">Form-based credentials   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2353"></a>
6.4.2.5 Admin Credential Seeding</h4>
<p>Initial admin credentials are configured through environment variables for secure bootstrapping:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variable   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Required    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ADMIN_USERNAME</code>   </td><td class="markdownTableBodyNone">Initial admin login   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ADMIN_PASSWORD</code>   </td><td class="markdownTableBodyNone">Initial admin password   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ADMIN_EMAIL</code>   </td><td class="markdownTableBodyNone">Admin contact   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ADMIN_FULL_NAME</code>   </td><td class="markdownTableBodyNone">Admin display name   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ADMIN_DISABLED</code>   </td><td class="markdownTableBodyNone">Disable flag (default: false)   </td><td class="markdownTableBodyNone">No   </td></tr>
</table>
<p><b>Security Enforcement</b>: The system raises a <code>ValueError</code> if no users exist after seeding, preventing operation without proper authentication configuration.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md2355"></a>
6.4.3 Authorization System</h3>
<h4><a class="anchor" id="autotoc_md2356"></a>
6.4.3.1 Role-Based Access Control</h4>
<p>The current implementation provides a simplified access control model with two user states:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">User State   </th><th class="markdownTableHeadNone">Permissions   </th><th class="markdownTableHeadNone">Enforcement    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Anonymous   </td><td class="markdownTableBodyNone">Public API endpoints only   </td><td class="markdownTableBodyNone">No token required    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Authenticated Active   </td><td class="markdownTableBodyNone">All API endpoints   </td><td class="markdownTableBodyNone">Valid JWT + active flag    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Authenticated Disabled   </td><td class="markdownTableBodyNone">None   </td><td class="markdownTableBodyNone"><code>400 Inactive user</code> returned   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2357"></a>
6.4.3.2 Protected Endpoint Validation Flow</h4>
<p>The <code>get_current_user</code> dependency implements a multi-step validation pipeline:</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph ValidationPipeline[Protected Endpoint Validation]</div>
<div class="line">        Request([Incoming&lt;br/&gt;Request]) --&gt; ExtractToken{Extract Bearer&lt;br/&gt;Token from Header}</div>
<div class="line"> </div>
<div class="line">        ExtractToken --&gt;|Missing| NoAuth[401: Not authenticated&lt;br/&gt;WWW-Authenticate: Bearer]</div>
<div class="line">        ExtractToken --&gt;|Present| DecodeJWT{Decode JWT with&lt;br/&gt;SECRET_KEY + HS256}</div>
<div class="line"> </div>
<div class="line">        DecodeJWT --&gt;|Decode Error| InvalidToken[401: Could not&lt;br/&gt;validate credentials]</div>
<div class="line">        DecodeJWT --&gt;|Success| CheckExpiry{Check Token&lt;br/&gt;Expiration}</div>
<div class="line"> </div>
<div class="line">        CheckExpiry --&gt;|Expired| ExpiredToken[401: Token&lt;br/&gt;has expired]</div>
<div class="line">        CheckExpiry --&gt;|Valid| ExtractSub{Extract username&lt;br/&gt;from &#39;sub&#39; claim}</div>
<div class="line"> </div>
<div class="line">        ExtractSub --&gt;|Missing| InvalidPayload[401: Could not&lt;br/&gt;validate credentials]</div>
<div class="line">        ExtractSub --&gt;|Present| LookupUser{Lookup User&lt;br/&gt;in Repository}</div>
<div class="line"> </div>
<div class="line">        LookupUser --&gt;|Not Found| UserNotFound[401: Could not&lt;br/&gt;validate credentials]</div>
<div class="line">        LookupUser --&gt;|Found| CheckActive{User&lt;br/&gt;Active?}</div>
<div class="line"> </div>
<div class="line">        CheckActive --&gt;|Disabled| InactiveUser[400: Inactive user]</div>
<div class="line">        CheckActive --&gt;|Active| Authorized([Request&lt;br/&gt;Authorized])</div>
<div class="line"> </div>
<div class="line">        NoAuth --&gt; ErrorResponse([Error Response])</div>
<div class="line">        InvalidToken --&gt; ErrorResponse</div>
<div class="line">        ExpiredToken --&gt; ErrorResponse</div>
<div class="line">        InvalidPayload --&gt; ErrorResponse</div>
<div class="line">        UserNotFound --&gt; ErrorResponse</div>
<div class="line">        InactiveUser --&gt; ErrorResponse</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2358"></a>
6.4.3.3 Authorization Dependencies</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Dependency   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Returns    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>get_current_user</code>   </td><td class="markdownTableBodyNone">Validates JWT and retrieves user   </td><td class="markdownTableBodyNone"><code>UserInDB</code> object    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>get_current_active_user</code>   </td><td class="markdownTableBodyNone">Extends above with active check   </td><td class="markdownTableBodyNone">Active <code>UserInDB</code> only   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2359"></a>
6.4.3.4 Endpoint Protection Matrix</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">HTTP Method   </th><th class="markdownTableHeadNone">Auth Required   </th><th class="markdownTableHeadNone">Rate Limited   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/token</code>   </td><td class="markdownTableBodyNone">POST   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">Yes (5/min)   </td><td class="markdownTableBodyNone">JWT token issuance    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/users/me</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">Yes (10/min)   </td><td class="markdownTableBodyNone">Current user info    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/assets</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">List assets    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/assets/{id}</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">Single asset details    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/metrics</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">Network statistics    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/visualization</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">3D visualization data    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/health</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">Health check   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2360"></a>
6.4.3.5 Policy Enforcement Points</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Enforcement Point   </th><th class="markdownTableHeadNone">Location   </th><th class="markdownTableHeadNone">Control Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Rate Limiting   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone">Pre-authentication throttling    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CORS Validation   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone">Origin allowlist    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Token Validation   </td><td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code>   </td><td class="markdownTableBodyNone">JWT signature verification    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">User State Check   </td><td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code>   </td><td class="markdownTableBodyNone">Active account enforcement    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Input Validation   </td><td class="markdownTableBodyNone">Pydantic models   </td><td class="markdownTableBodyNone">Type/format enforcement   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2362"></a>
6.4.4 Rate Limiting</h3>
<h4><a class="anchor" id="autotoc_md2363"></a>
6.4.4.1 Rate Limiting Architecture</h4>
<p>Rate limiting is implemented using the <code>slowapi</code> library with IP-based request tracking:</p>
<p><b>Configuration Location</b>: <code><a class="el" href="api_2main_8py.html">api/main.py</a></code> lines 156-169</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Library   </td><td class="markdownTableBodyNone"><code>slowapi</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Key Function   </td><td class="markdownTableBodyNone"><code>get_remote_address</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Exception Handler   </td><td class="markdownTableBodyNone"><code>RateLimitExceeded</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2364"></a>
6.4.4.2 Rate Limit Configuration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">Limit   </th><th class="markdownTableHeadNone">Window   </th><th class="markdownTableHeadNone">Rationale    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>POST /token</code>   </td><td class="markdownTableBodyNone">5 requests   </td><td class="markdownTableBodyNone">1 minute   </td><td class="markdownTableBodyNone">Brute-force protection    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>GET /api/users/me</code>   </td><td class="markdownTableBodyNone">10 requests   </td><td class="markdownTableBodyNone">1 minute   </td><td class="markdownTableBodyNone">Authenticated endpoint protection    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Other endpoints   </td><td class="markdownTableBodyNone">Unlimited   </td><td class="markdownTableBodyNone">N/A   </td><td class="markdownTableBodyNone">Public data access   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2365"></a>
6.4.4.3 Rate Limit Response</h4>
<p>When rate limits are exceeded:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Response Element   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HTTP Status   </td><td class="markdownTableBodyNone">429 Too Many Requests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Header   </td><td class="markdownTableBodyNone"><code>Retry-After: &lt;seconds&gt;</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Body   </td><td class="markdownTableBodyNone">Error message with limit details   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2367"></a>
6.4.5 CORS Configuration</h3>
<h4><a class="anchor" id="autotoc_md2368"></a>
6.4.5.1 CORS Security Model</h4>
<p>Cross-Origin Resource Sharing (CORS) is implemented with environment-aware validation:</p>
<p><b>Configuration Location</b>: <code><a class="el" href="api_2main_8py.html">api/main.py</a></code> lines 226-302</p>
<h4><a class="anchor" id="autotoc_md2369"></a>
6.4.5.2 Origin Validation Rules</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Environment   </th><th class="markdownTableHeadNone">HTTP localhost   </th><th class="markdownTableHeadNone">HTTPS localhost   </th><th class="markdownTableHeadNone">Vercel URLs   </th><th class="markdownTableHeadNone">Custom HTTPS    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Development   </td><td class="markdownTableBodyNone">✅ Allowed   </td><td class="markdownTableBodyNone">✅ Allowed   </td><td class="markdownTableBodyNone">✅ Allowed   </td><td class="markdownTableBodyNone">✅ Allowed    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Production   </td><td class="markdownTableBodyNone">❌ Rejected   </td><td class="markdownTableBodyNone">✅ Allowed   </td><td class="markdownTableBodyNone">✅ Allowed   </td><td class="markdownTableBodyNone">✅ Allowed   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2370"></a>
6.4.5.3 Vercel Preview Domain Validation</h4>
<p>Preview deployments are validated using regex pattern matching:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Pattern Component   </th><th class="markdownTableHeadNone">Regex    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Protocol   </td><td class="markdownTableBodyNone"><code>^https://</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Subdomain   </td><td class="markdownTableBodyNone"><code>[a-zA-Z0-9\-\.]+</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Domain   </td><td class="markdownTableBodyNone"><code>\.vercel\.app$</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2371"></a>
6.4.5.4 CORS Middleware Configuration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Setting   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Security Note    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>allow_origins</code>   </td><td class="markdownTableBodyNone">Validated allowlist   </td><td class="markdownTableBodyNone">No wildcard (<code>*</code>)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>allow_credentials</code>   </td><td class="markdownTableBodyNone"><code>True</code>   </td><td class="markdownTableBodyNone">Cookie support enabled    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>allow_methods</code>   </td><td class="markdownTableBodyNone"><code>["*"]</code>   </td><td class="markdownTableBodyNone">All HTTP methods    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>allow_headers</code>   </td><td class="markdownTableBodyNone"><code>["*"]</code>   </td><td class="markdownTableBodyNone">All headers allowed   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2372"></a>
6.4.5.5 Custom Origin Configuration</h4>
<p>Custom origins can be added via the <code>ALLOWED_ORIGINS</code> environment variable:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Format   </th><th class="markdownTableHeadNone">Example    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Comma-separated list   </td><td class="markdownTableBodyNone"><code><a href="https://app.example.com,https://staging.example.com">https://app.example.com,https://staging.example.com</a></code>   </td></tr>
</table>
<p>Origins are validated through <code>validate_origin()</code> before inclusion, with invalid origins logged as warnings and skipped.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md2374"></a>
6.4.6 Data Protection</h3>
<h4><a class="anchor" id="autotoc_md2375"></a>
6.4.6.1 Database Security</h4>
<p><b>Location</b>: <code><a class="el" href="api_2database_8py.html">api/database.py</a></code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Control   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Protection    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Parameterized Queries   </td><td class="markdownTableBodyNone"><code>WHERE username = ?</code> binding   </td><td class="markdownTableBodyNone">SQL injection prevention    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Thread-Safe Access   </td><td class="markdownTableBodyNone"><code>threading.Lock</code> for shared connection   </td><td class="markdownTableBodyNone">Race condition prevention    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Connection Configuration   </td><td class="markdownTableBodyNone"><code>check_same_thread=False</code>   </td><td class="markdownTableBodyNone">Multi-threaded compatibility   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2376"></a>
6.4.6.2 Input Validation Layers</h4>
<p>The system implements three layers of input validation:</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph ValidationLayers[Multi-Layer Input Validation]</div>
<div class="line">        Input([External Input]) --&gt; Layer1{Layer 1:&lt;br/&gt;API Validation}</div>
<div class="line"> </div>
<div class="line">        Layer1 --&gt;|Pydantic Models| PydanticCheck[Type Enforcement&lt;br/&gt;Format Validation]</div>
<div class="line">        PydanticCheck --&gt;|Invalid| Reject422[422 Validation Error]</div>
<div class="line">        PydanticCheck --&gt;|Valid| Layer2{Layer 2:&lt;br/&gt;Domain Validation}</div>
<div class="line"> </div>
<div class="line">        Layer2 --&gt;|Dataclass __post_init__| DomainCheck[Business Rule&lt;br/&gt;Validation]</div>
<div class="line">        DomainCheck --&gt;|Invalid| RejectValue[ValueError Exception]</div>
<div class="line">        DomainCheck --&gt;|Valid| Layer3{Layer 3:&lt;br/&gt;Database Constraints}</div>
<div class="line"> </div>
<div class="line">        Layer3 --&gt;|SQLite/PostgreSQL| DBCheck[NOT NULL&lt;br/&gt;UNIQUE&lt;br/&gt;FOREIGN KEY]</div>
<div class="line">        DBCheck --&gt;|Invalid| RejectDB[Database Error]</div>
<div class="line">        DBCheck --&gt;|Valid| Success([Data Accepted])</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2377"></a>
6.4.6.3 Domain Model Validation Rules</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Validation Rule   </th><th class="markdownTableHeadNone">Error Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>id</code>, <code>symbol</code>, <code>name</code>   </td><td class="markdownTableBodyNone">Non-empty string   </td><td class="markdownTableBodyNone"><code>ValueError</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>price</code>   </td><td class="markdownTableBodyNone">Non-negative float   </td><td class="markdownTableBodyNone"><code>ValueError</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>market_cap</code>   </td><td class="markdownTableBodyNone">Non-negative float (if present)   </td><td class="markdownTableBodyNone"><code>ValueError</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>currency</code>   </td><td class="markdownTableBodyNone">3-character ISO code   </td><td class="markdownTableBodyNone"><code>ValueError</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>impact_score</code>   </td><td class="markdownTableBodyNone">Range [-1.0, 1.0]   </td><td class="markdownTableBodyNone"><code>ValueError</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>date</code>   </td><td class="markdownTableBodyNone">ISO 8601 format (YYYY-MM-DD)   </td><td class="markdownTableBodyNone"><code>ValueError</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2378"></a>
6.4.6.4 Encryption Standards</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Data Type   </th><th class="markdownTableHeadNone">At Rest   </th><th class="markdownTableHeadNone">In Transit    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Passwords   </td><td class="markdownTableBodyNone">pbkdf2_sha256 hash   </td><td class="markdownTableBodyNone">HTTPS/TLS    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">JWT Tokens   </td><td class="markdownTableBodyNone">N/A (ephemeral)   </td><td class="markdownTableBodyNone">HTTPS/TLS    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Data   </td><td class="markdownTableBodyNone">Unencrypted (SQLite)   </td><td class="markdownTableBodyNone">HTTPS/TLS    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Cache Files   </td><td class="markdownTableBodyNone">Unencrypted (JSON)   </td><td class="markdownTableBodyNone">N/A   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2379"></a>
6.4.6.5 Secure Communication</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Environment   </th><th class="markdownTableHeadNone">Protocol   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Development   </td><td class="markdownTableBodyNone">HTTP allowed   </td><td class="markdownTableBodyNone">Local testing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Production   </td><td class="markdownTableBodyNone">HTTPS required   </td><td class="markdownTableBodyNone">Vercel TLS termination    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Container   </td><td class="markdownTableBodyNone">HTTP internal   </td><td class="markdownTableBodyNone">HTTPS at edge   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2381"></a>
6.4.7 Secrets Management</h3>
<h4><a class="anchor" id="autotoc_md2382"></a>
6.4.7.1 Required Environment Variables</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variable   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Criticality    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SECRET_KEY</code>   </td><td class="markdownTableBodyNone">JWT signing key   </td><td class="markdownTableBodyNone"><b>Critical</b> - Application fails without    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>DATABASE_URL</code>   </td><td class="markdownTableBodyNone">SQLite connection string   </td><td class="markdownTableBodyNone"><b>Critical</b> - Application fails without    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ADMIN_USERNAME</code>   </td><td class="markdownTableBodyNone">Initial admin account   </td><td class="markdownTableBodyNone">Required for user seeding    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ADMIN_PASSWORD</code>   </td><td class="markdownTableBodyNone">Initial admin password   </td><td class="markdownTableBodyNone">Required for user seeding   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2383"></a>
6.4.7.2 Optional Environment Variables</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variable   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Default    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ENV</code>   </td><td class="markdownTableBodyNone">Environment mode   </td><td class="markdownTableBodyNone"><code>development</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ALLOWED_ORIGINS</code>   </td><td class="markdownTableBodyNone">CORS allowlist   </td><td class="markdownTableBodyNone">Empty (built-in defaults)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ADMIN_EMAIL</code>   </td><td class="markdownTableBodyNone">Admin email   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ADMIN_FULL_NAME</code>   </td><td class="markdownTableBodyNone">Admin display name   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ADMIN_DISABLED</code>   </td><td class="markdownTableBodyNone">Disable admin   </td><td class="markdownTableBodyNone"><code>false</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2384"></a>
6.4.7.3 Secrets Security Best Practices</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Practice   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">No committed secrets   </td><td class="markdownTableBodyNone"><code>.env.example</code> provides template only    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Runtime injection   </td><td class="markdownTableBodyNone">Environment variables at deployment    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Secret rotation   </td><td class="markdownTableBodyNone">Manual SECRET_KEY rotation supported    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Least privilege   </td><td class="markdownTableBodyNone">Only required secrets loaded   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2386"></a>
6.4.8 Container Security</h3>
<h4><a class="anchor" id="autotoc_md2387"></a>
6.4.8.1 Docker Security Measures</h4>
<p><b>Location</b>: <code>Dockerfile</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Security Measure   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Benefit    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Non-root User   </td><td class="markdownTableBodyNone"><code>useradd -m -u 1000 appuser</code>   </td><td class="markdownTableBodyNone">Privilege escalation prevention    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Minimal <a class="el" href="classBase.html">Base</a> Image   </td><td class="markdownTableBodyNone"><code>python:3.11-slim</code>   </td><td class="markdownTableBodyNone">Reduced attack surface    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">No Cache   </td><td class="markdownTableBodyNone"><code>pip install --no-cache-dir</code>   </td><td class="markdownTableBodyNone">No sensitive data in layers    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Health Checks   </td><td class="markdownTableBodyNone"><code>HEALTHCHECK</code> with 30s interval   </td><td class="markdownTableBodyNone">Container orchestration support    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">No Bytecode   </td><td class="markdownTableBodyNone"><code>PYTHONDONTWRITEBYTECODE=1</code>   </td><td class="markdownTableBodyNone">Cleaner runtime   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2388"></a>
6.4.8.2 Container Security Flow</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph ContainerSecurity[Container Security Architecture]</div>
<div class="line">        Build([Docker Build]) --&gt; BaseImage[python:3.11-slim&lt;br/&gt;Minimal Base]</div>
<div class="line">        BaseImage --&gt; CreateUser[Create Non-Root User&lt;br/&gt;appuser UID 1000]</div>
<div class="line">        CreateUser --&gt; InstallDeps[Install Dependencies&lt;br/&gt;No Cache]</div>
<div class="line">        InstallDeps --&gt; CopyApp[Copy Application&lt;br/&gt;Code]</div>
<div class="line">        CopyApp --&gt; SetUser[Switch to&lt;br/&gt;appuser]</div>
<div class="line">        SetUser --&gt; HealthCheck[Configure&lt;br/&gt;Health Check]</div>
<div class="line">        HealthCheck --&gt; Runtime([Container Runtime])</div>
<div class="line">    end</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md2390"></a>
6.4.9 CI/CD Security Scanning</h3>
<h4><a class="anchor" id="autotoc_md2391"></a>
6.4.9.1 Security Scanning Pipeline</h4>
<p>The repository implements comprehensive security scanning through both CircleCI and GitHub Actions workflows:</p>
<h4><a class="anchor" id="autotoc_md2392"></a>
CircleCI Security Pipeline</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Tool   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Stage    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>safety check</code>   </td><td class="markdownTableBodyNone">Python dependency vulnerabilities   </td><td class="markdownTableBodyNone">Build    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>bandit</code>   </td><td class="markdownTableBodyNone">Python SAST analysis   </td><td class="markdownTableBodyNone">Build    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>pytest --cov</code>   </td><td class="markdownTableBodyNone">Test coverage verification   </td><td class="markdownTableBodyNone">Test   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2393"></a>
GitHub Actions Security Workflows</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Workflow   </th><th class="markdownTableHeadNone">Tool   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>bandit.yml</code>   </td><td class="markdownTableBodyNone">Bandit   </td><td class="markdownTableBodyNone">Python static security analysis    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>codeql.yml</code>   </td><td class="markdownTableBodyNone">CodeQL   </td><td class="markdownTableBodyNone">Multi-language SAST    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>semgrep.yml</code>   </td><td class="markdownTableBodyNone">Semgrep   </td><td class="markdownTableBodyNone">Pattern-based vulnerability detection    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>trivy.yml</code>   </td><td class="markdownTableBodyNone">Trivy   </td><td class="markdownTableBodyNone">Container image scanning    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>hadolint.yml</code>   </td><td class="markdownTableBodyNone">Hadolint   </td><td class="markdownTableBodyNone">Dockerfile best practices    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>snyk-security.yml</code>   </td><td class="markdownTableBodyNone">Snyk   </td><td class="markdownTableBodyNone">Dependency vulnerability scanning    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>snyk-container.yml</code>   </td><td class="markdownTableBodyNone">Snyk   </td><td class="markdownTableBodyNone">Container vulnerability scanning    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>dependency-review.yml</code>   </td><td class="markdownTableBodyNone">GitHub   </td><td class="markdownTableBodyNone">PR dependency review    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>scorecard.yml</code>   </td><td class="markdownTableBodyNone">OSSF Scorecard   </td><td class="markdownTableBodyNone">Supply chain security    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>devskim.yml</code>   </td><td class="markdownTableBodyNone">DevSkim   </td><td class="markdownTableBodyNone">Security linting   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2394"></a>
6.4.9.2 SARIF Integration</h4>
<p>Security scan results are integrated with GitHub Advanced Security:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Configuration   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Upload Action   </td><td class="markdownTableBodyNone"><code>github/codeql-action/upload-sarif@v3</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Permission   </td><td class="markdownTableBodyNone"><code>security-events: write</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Visibility   </td><td class="markdownTableBodyNone">GitHub Security tab   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2396"></a>
6.4.10 Error Handling Security</h3>
<h4><a class="anchor" id="autotoc_md2397"></a>
6.4.10.1 Information Disclosure Controls</h4>
<p>Error responses are designed to minimize information leakage:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Status Code   </th><th class="markdownTableHeadNone">Scenario   </th><th class="markdownTableHeadNone">Information Disclosed    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">400   </td><td class="markdownTableBodyNone">Bad Request   </td><td class="markdownTableBodyNone">Generic "Inactive user" message    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">401   </td><td class="markdownTableBodyNone">Unauthorized   </td><td class="markdownTableBodyNone">Generic credential failure message    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">404   </td><td class="markdownTableBodyNone">Not Found   </td><td class="markdownTableBodyNone">Resource type and ID only    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">422   </td><td class="markdownTableBodyNone">Validation Error   </td><td class="markdownTableBodyNone">Pydantic field details    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">429   </td><td class="markdownTableBodyNone">Rate Limited   </td><td class="markdownTableBodyNone">Retry-After header only    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">500   </td><td class="markdownTableBodyNone">Internal Error   </td><td class="markdownTableBodyNone">Generic message (details logged internally)   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2398"></a>
6.4.10.2 Exception Handling Pattern</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Exception Type   </th><th class="markdownTableHeadNone">Response Behavior   </th><th class="markdownTableHeadNone">Internal Action    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>HTTPException</code>   </td><td class="markdownTableBodyNone">Re-raised directly   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>RateLimitExceeded</code>   </td><td class="markdownTableBodyNone">429 with Retry-After   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ValidationError</code>   </td><td class="markdownTableBodyNone">422 with field details   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Other exceptions   </td><td class="markdownTableBodyNone">500 generic message   </td><td class="markdownTableBodyNone"><code>logger.exception()</code>   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2400"></a>
6.4.11 Logging and Audit</h3>
<h4><a class="anchor" id="autotoc_md2401"></a>
6.4.11.1 Logging Configuration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Setting   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Level   </td><td class="markdownTableBodyNone"><code>INFO</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Module   </td><td class="markdownTableBodyNone"><code>logging.getLogger(__name__)</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Format   </td><td class="markdownTableBodyNone">Python standard logging   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2402"></a>
6.4.11.2 Security Event Logging</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Event Category   </th><th class="markdownTableHeadNone">Log Level   </th><th class="markdownTableHeadNone">Content    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Graph initialization   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">Success/failure status    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Application startup   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">Server binding, port    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Authentication failures   </td><td class="markdownTableBodyNone">WARNING   </td><td class="markdownTableBodyNone">Failed login attempts    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Invalid CORS origins   </td><td class="markdownTableBodyNone">WARNING   </td><td class="markdownTableBodyNone">Skipped origin value    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Request errors   </td><td class="markdownTableBodyNone">ERROR   </td><td class="markdownTableBodyNone">Exception details    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Cache operations   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">Load/save success   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2404"></a>
6.4.12 Compliance Controls</h3>
<h4><a class="anchor" id="autotoc_md2405"></a>
6.4.12.1 Security Control Matrix</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Control Category   </th><th class="markdownTableHeadNone">Control   </th><th class="markdownTableHeadNone">Status   </th><th class="markdownTableHeadNone">Evidence    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Access Control</b>   </td><td class="markdownTableBodyNone">JWT Authentication   </td><td class="markdownTableBodyNone">✅ Implemented   </td><td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Token Expiration   </td><td class="markdownTableBodyNone">✅ Implemented   </td><td class="markdownTableBodyNone">30-minute default    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Rate Limiting   </td><td class="markdownTableBodyNone">✅ Implemented   </td><td class="markdownTableBodyNone">slowapi integration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Data Protection</b>   </td><td class="markdownTableBodyNone">Password Hashing   </td><td class="markdownTableBodyNone">✅ Implemented   </td><td class="markdownTableBodyNone">pbkdf2_sha256    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">HTTPS Enforcement   </td><td class="markdownTableBodyNone">✅ Production   </td><td class="markdownTableBodyNone">Vercel TLS    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Input Validation   </td><td class="markdownTableBodyNone">✅ Implemented   </td><td class="markdownTableBodyNone">Multi-layer validation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Audit</b>   </td><td class="markdownTableBodyNone">Authentication Logging   </td><td class="markdownTableBodyNone">✅ Implemented   </td><td class="markdownTableBodyNone">WARNING level    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Error Logging   </td><td class="markdownTableBodyNone">✅ Implemented   </td><td class="markdownTableBodyNone">ERROR level    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Infrastructure</b>   </td><td class="markdownTableBodyNone">Container Hardening   </td><td class="markdownTableBodyNone">✅ Implemented   </td><td class="markdownTableBodyNone">Non-root user    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Dependency Scanning   </td><td class="markdownTableBodyNone">✅ Implemented   </td><td class="markdownTableBodyNone">CI/CD pipelines    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Secret Management   </td><td class="markdownTableBodyNone">✅ Implemented   </td><td class="markdownTableBodyNone">Environment variables   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2406"></a>
6.4.12.2 Security Dependencies</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Package   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>PyJWT</code>   </td><td class="markdownTableBodyNone">&gt;=2.8.0   </td><td class="markdownTableBodyNone">JWT authentication    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>passlib[bcrypt]</code>   </td><td class="markdownTableBodyNone">&gt;=1.7.4   </td><td class="markdownTableBodyNone">Password hashing    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>slowapi</code>   </td><td class="markdownTableBodyNone">&gt;=0.1.4   </td><td class="markdownTableBodyNone">Rate limiting    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>urllib3</code>   </td><td class="markdownTableBodyNone">&gt;=2.6.0   </td><td class="markdownTableBodyNone">Snyk security pin    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>zipp</code>   </td><td class="markdownTableBodyNone">&gt;=3.19.1   </td><td class="markdownTableBodyNone">Snyk security pin   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2407"></a>
6.4.12.3 Compliance Recommendations</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Requirement   </th><th class="markdownTableHeadNone">Current Status   </th><th class="markdownTableHeadNone">Recommendation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Data Encryption at Rest   </td><td class="markdownTableBodyNone">Not implemented   </td><td class="markdownTableBodyNone">Consider SQLCipher for SQLite    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Multi-Factor Authentication   </td><td class="markdownTableBodyNone">Not implemented   </td><td class="markdownTableBodyNone">Add TOTP support for admin    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Audit Log Persistence   </td><td class="markdownTableBodyNone">In-memory only   </td><td class="markdownTableBodyNone">Add persistent audit logging    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Session Revocation   </td><td class="markdownTableBodyNone">Token-based expiry only   </td><td class="markdownTableBodyNone">Implement token blacklist    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Key Rotation   </td><td class="markdownTableBodyNone">Manual only   </td><td class="markdownTableBodyNone">Implement automated rotation   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2409"></a>
6.4.13 Security Architecture Summary Diagram</h3>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph SecurityArchitecture[Complete Security Architecture]</div>
<div class="line">        subgraph ExternalLayer[External Security Layer]</div>
<div class="line">            TLS[TLS/HTTPS&lt;br/&gt;Termination]</div>
<div class="line">            EdgeCORS[CORS&lt;br/&gt;Validation]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph ApplicationSecurity[Application Security Layer]</div>
<div class="line">            RateLimit[Rate&lt;br/&gt;Limiting]</div>
<div class="line">            JWTAuth[JWT&lt;br/&gt;Authentication]</div>
<div class="line">            InputVal[Input&lt;br/&gt;Validation]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph DataSecurity[Data Security Layer]</div>
<div class="line">            PassHash[Password&lt;br/&gt;Hashing]</div>
<div class="line">            ParamQuery[Parameterized&lt;br/&gt;Queries]</div>
<div class="line">            SecretMgmt[Secrets&lt;br/&gt;Management]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph InfrastructureSecurity[Infrastructure Security]</div>
<div class="line">            Container[Container&lt;br/&gt;Hardening]</div>
<div class="line">            CICD[CI/CD&lt;br/&gt;Scanning]</div>
<div class="line">            AuditLog[Audit&lt;br/&gt;Logging]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    Client([Client]) --&gt; TLS</div>
<div class="line">    TLS --&gt; EdgeCORS</div>
<div class="line">    EdgeCORS --&gt; RateLimit</div>
<div class="line">    RateLimit --&gt; JWTAuth</div>
<div class="line">    JWTAuth --&gt; InputVal</div>
<div class="line">    InputVal --&gt; PassHash</div>
<div class="line">    PassHash --&gt; ParamQuery</div>
<div class="line">    ParamQuery --&gt; SecretMgmt</div>
<div class="line"> </div>
<div class="line">    Container -.-&gt; ApplicationSecurity</div>
<div class="line">    CICD -.-&gt; DataSecurity</div>
<div class="line">    AuditLog -.-&gt; ApplicationSecurity</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md2411"></a>
6.4.14 References</h3>
<h4><a class="anchor" id="autotoc_md2412"></a>
6.4.14.1 Source Files</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Path   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code>   </td><td class="markdownTableBodyNone">Complete authentication module with JWT, password hashing, user repository    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="api_2database_8py.html">api/database.py</a></code>   </td><td class="markdownTableBodyNone">SQLite database helpers with parameterized queries    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone">FastAPI application with CORS, rate limiting, authentication integration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="SECURITY_8md.html">SECURITY.md</a></code>   </td><td class="markdownTableBodyNone">Security best practices documentation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Dockerfile</code>   </td><td class="markdownTableBodyNone">Container security configuration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>docker-compose.yml</code>   </td><td class="markdownTableBodyNone">Docker composition with health checks    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.env.example</code>   </td><td class="markdownTableBodyNone">Environment variable template    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>requirements.txt</code>   </td><td class="markdownTableBodyNone">Security dependency specifications    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="test__api__main_8py.html">tests/unit/test_api_main.py</a></code>   </td><td class="markdownTableBodyNone">CORS and API security tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="test__api__integration_8py.html">tests/integration/test_api_integration.py</a></code>   </td><td class="markdownTableBodyNone">Authentication flow integration tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code>   </td><td class="markdownTableBodyNone">Domain model validation rules   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2413"></a>
6.4.14.2 CI/CD Security Configuration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Path   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.circleci/config.yml</code>   </td><td class="markdownTableBodyNone">CircleCI security pipeline    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.github/workflows/bandit.yml</code>   </td><td class="markdownTableBodyNone">Bandit SAST workflow    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.github/workflows/codeql.yml</code>   </td><td class="markdownTableBodyNone">CodeQL analysis workflow    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.github/workflows/semgrep.yml</code>   </td><td class="markdownTableBodyNone">Semgrep pattern analysis    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.github/workflows/trivy.yml</code>   </td><td class="markdownTableBodyNone">Container scanning workflow    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.github/workflows/snyk-security.yml</code>   </td><td class="markdownTableBodyNone">Snyk dependency scanning    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.github/workflows/scorecard.yml</code>   </td><td class="markdownTableBodyNone">OSSF supply chain security   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2414"></a>
6.4.14.3 Technical Specification Cross-References</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Section   </th><th class="markdownTableHeadNone">Relevance    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3.8 Security Considerations   </td><td class="markdownTableBodyNone">Technology stack security overview    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">5.2 COMPONENT DETAILS   </td><td class="markdownTableBodyNone">FastAPI backend security integration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5.4 CROSS-CUTTING CONCERNS   </td><td class="markdownTableBodyNone">Authentication framework, error handling    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">5.5 DEPLOYMENT ARCHITECTURE   </td><td class="markdownTableBodyNone">Container and serverless security    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">6.2 Database Design   </td><td class="markdownTableBodyNone">Authentication schema, access control matrix    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4.3 API Request Workflows   </td><td class="markdownTableBodyNone">Request validation flows    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4.5 Error Handling Workflows   </td><td class="markdownTableBodyNone">Security error scenarios   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md2415"></a>
6.5 Monitoring and Observability</h2>
<h3><a class="anchor" id="autotoc_md2416"></a>
6.5.1 Monitoring Architecture Overview</h3>
<h4><a class="anchor" id="autotoc_md2417"></a>
6.5.1.1 Current State Assessment</h4>
<p>The Financial Asset Relationship Database implements <b>essential monitoring capabilities</b> through built-in health checks, application logging, and a metrics endpoint. The system follows a <b>monolithic layered architecture</b> that does not require complex distributed tracing infrastructure typically associated with microservices architectures.</p>
<p>The current monitoring implementation provides sufficient observability for the system's operational requirements while maintaining operational simplicity. The following table summarizes the monitoring architecture:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Implementation Status   </th><th class="markdownTableHeadNone">Technology    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Health Checks   </td><td class="markdownTableBodyNone">✅ Implemented   </td><td class="markdownTableBodyNone">FastAPI endpoint, Docker HEALTHCHECK    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Application Logging   </td><td class="markdownTableBodyNone">✅ Implemented   </td><td class="markdownTableBodyNone">Python standard logging    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Application Metrics   </td><td class="markdownTableBodyNone">✅ Implemented   </td><td class="markdownTableBodyNone">Custom <code>/api/metrics</code> endpoint    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Distributed Tracing   </td><td class="markdownTableBodyNone">⚠️ Not Required   </td><td class="markdownTableBodyNone">Monolithic architecture    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Log Aggregation   </td><td class="markdownTableBodyNone">⚠️ Not Implemented   </td><td class="markdownTableBodyNone">Basic stdout logging    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Alert Management   </td><td class="markdownTableBodyNone">⚠️ CI/CD Only   </td><td class="markdownTableBodyNone">GitHub Actions, CircleCI   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2418"></a>
6.5.1.2 Monitoring Architecture Diagram</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph MonitoringArchitecture[Monitoring Architecture]</div>
<div class="line">        subgraph ApplicationLayer[Application Layer]</div>
<div class="line">            FastAPI[FastAPI Backend&lt;br/&gt;Port 8000]</div>
<div class="line">            Gradio[Gradio UI&lt;br/&gt;Port 7860]</div>
<div class="line">            NextJS[Next.js Frontend&lt;br/&gt;Port 3000]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph MonitoringEndpoints[Monitoring Endpoints]</div>
<div class="line">            HealthCheck[&quot;/api/health&lt;br/&gt;Health Check&quot;]</div>
<div class="line">            MetricsEndpoint[&quot;/api/metrics&lt;br/&gt;Graph Metrics&quot;]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph LoggingLayer[Logging Layer]</div>
<div class="line">            PythonLogging[Python Standard&lt;br/&gt;Logging]</div>
<div class="line">            ConsoleOutput[Console/Stdout&lt;br/&gt;Output]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph ContainerMonitoring[Container Monitoring]</div>
<div class="line">            DockerHealth[Docker HEALTHCHECK&lt;br/&gt;HTTP Probe]</div>
<div class="line">            ComposeHealth[Docker Compose&lt;br/&gt;Health Config]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph CICDMonitoring[CI/CD Monitoring]</div>
<div class="line">            GitHubActions[GitHub Actions&lt;br/&gt;Security Scans]</div>
<div class="line">            CircleCI[CircleCI&lt;br/&gt;Test Coverage]</div>
<div class="line">            Codecov[Codecov&lt;br/&gt;Coverage Reports]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    FastAPI --&gt; HealthCheck</div>
<div class="line">    FastAPI --&gt; MetricsEndpoint</div>
<div class="line">    FastAPI --&gt; PythonLogging</div>
<div class="line">    PythonLogging --&gt; ConsoleOutput</div>
<div class="line"> </div>
<div class="line">    DockerHealth --&gt; HealthCheck</div>
<div class="line">    ComposeHealth --&gt; HealthCheck</div>
<div class="line"> </div>
<div class="line">    GitHubActions --&gt; SecurityScan([Security&lt;br/&gt;Results])</div>
<div class="line">    CircleCI --&gt; CoverageRpt([Coverage&lt;br/&gt;Reports])</div>
<div class="line">    CoverageRpt --&gt; Codecov</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md2420"></a>
6.5.2 Monitoring Infrastructure</h3>
<h4><a class="anchor" id="autotoc_md2421"></a>
6.5.2.1 Health Check Implementation</h4>
<p>The system implements comprehensive health checking at multiple levels to ensure operational reliability.</p>
<h4><a class="anchor" id="autotoc_md2422"></a>
API Health Check Endpoint</h4>
<p><b>Location</b>: <code><a class="el" href="api_2main_8py.html">api/main.py</a></code> (lines 428-431)</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Response   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/health</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone"><code>{"status": "healthy", "graph_initialized": true}</code>   </td><td class="markdownTableBodyNone">Load balancer probe   </td></tr>
</table>
<p>The health check endpoint provides immediate visibility into application state and is used by container orchestration systems for readiness and liveness probes.</p>
<h4><a class="anchor" id="autotoc_md2423"></a>
Docker Container Health Checks</h4>
<p><b>Location</b>: <code>Dockerfile</code> (lines 38-40), <code>docker-compose.yml</code> (lines 20-25)</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>interval</code>   </td><td class="markdownTableBodyNone">30 seconds   </td><td class="markdownTableBodyNone">Probe frequency    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>timeout</code>   </td><td class="markdownTableBodyNone">10 seconds   </td><td class="markdownTableBodyNone">Maximum probe duration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>retries</code>   </td><td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Failures before unhealthy    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>start_period</code>   </td><td class="markdownTableBodyNone">5-40 seconds   </td><td class="markdownTableBodyNone">Startup grace period   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2424"></a>
Health Check Flow</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph HealthCheckFlow[Health Check Flow]</div>
<div class="line">        Orchestrator([Container&lt;br/&gt;Orchestrator]) --&gt; DockerProbe{Docker&lt;br/&gt;HEALTHCHECK}</div>
<div class="line"> </div>
<div class="line">        DockerProbe --&gt; CurlRequest[HTTP GET&lt;br/&gt;localhost:7860/]</div>
<div class="line">        CurlRequest --&gt; CheckResponse{Response&lt;br/&gt;Status?}</div>
<div class="line"> </div>
<div class="line">        CheckResponse --&gt;|200 OK| Healthy[Container&lt;br/&gt;Healthy]</div>
<div class="line">        CheckResponse --&gt;|Error/Timeout| RetryCount{Retry&lt;br/&gt;Count &lt; 3?}</div>
<div class="line"> </div>
<div class="line">        RetryCount --&gt;|Yes| WaitInterval[Wait 30s]</div>
<div class="line">        WaitInterval --&gt; CurlRequest</div>
<div class="line">        RetryCount --&gt;|No| Unhealthy[Container&lt;br/&gt;Unhealthy]</div>
<div class="line"> </div>
<div class="line">        Unhealthy --&gt; RestartPolicy{Restart&lt;br/&gt;Policy?}</div>
<div class="line">        RestartPolicy --&gt;|unless-stopped| Restart[Restart&lt;br/&gt;Container]</div>
<div class="line">        Restart --&gt; StartPeriod[Start Period&lt;br/&gt;Grace 40s]</div>
<div class="line">        StartPeriod --&gt; CurlRequest</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2425"></a>
Frontend Health Check Integration</h4>
<p><b>Location</b>: <code>frontend/app/lib/api.ts</code> (lines 14-18)</p>
<p>The Next.js frontend includes an API client method for health checking:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">Response Handling    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>healthCheck()</code>   </td><td class="markdownTableBodyNone"><code>GET /api/health</code>   </td><td class="markdownTableBodyNone">Returns health status object   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2426"></a>
6.5.2.2 Logging Strategy</h4>
<p>The system implements Python standard logging with structured output for operational visibility.</p>
<h4><a class="anchor" id="autotoc_md2427"></a>
Logging Configuration</h4>
<p><b>Backend Logging</b> (<code><a class="el" href="api_2main_8py.html">api/main.py</a></code> lines 26-28):</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Setting   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Level   </td><td class="markdownTableBodyNone"><code>INFO</code>   </td><td class="markdownTableBodyNone">Default verbosity    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Logger   </td><td class="markdownTableBodyNone"><code>logging.getLogger(__name__)</code>   </td><td class="markdownTableBodyNone">Module-specific logger    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Format   </td><td class="markdownTableBodyNone">Python default   </td><td class="markdownTableBodyNone">Standard log format   </td></tr>
</table>
<p><b>Gradio Logging</b> (<code><a class="el" href="app_8py.html">app.py</a></code> line 20):</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Setting   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Level   </td><td class="markdownTableBodyNone"><code>INFO</code>   </td><td class="markdownTableBodyNone">Default verbosity    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Format   </td><td class="markdownTableBodyNone"><code>%(asctime)s - %(name)s - %(levelname)s - %(message)s</code>   </td><td class="markdownTableBodyNone">Timestamped structured format   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2428"></a>
Log Point Catalog</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Log Point   </th><th class="markdownTableHeadNone">Level   </th><th class="markdownTableHeadNone">Content   </th><th class="markdownTableHeadNone">Location    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Graph initialization   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">Success/failure status   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Application startup   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">Server binding, port   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Application shutdown   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">Shutdown notification   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Cache operations   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">Load/save success   </td><td class="markdownTableBodyNone"><code><a class="el" href="real__data__fetcher_8py.html">src/data/real_data_fetcher.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Data fetching   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">Yahoo Finance fetches   </td><td class="markdownTableBodyNone"><code><a class="el" href="real__data__fetcher_8py.html">src/data/real_data_fetcher.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Request errors   </td><td class="markdownTableBodyNone">ERROR   </td><td class="markdownTableBodyNone">Exception details   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Authentication failures   </td><td class="markdownTableBodyNone">WARNING   </td><td class="markdownTableBodyNone">Failed login attempts   </td><td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Invalid CORS origins   </td><td class="markdownTableBodyNone">WARNING   </td><td class="markdownTableBodyNone">Skipped origin value   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2429"></a>
6.5.2.3 Metrics Collection</h4>
<h4><a class="anchor" id="autotoc_md2430"></a>
Application Metrics Endpoint</h4>
<p><b>Location</b>: <code><a class="el" href="api_2main_8py.html">api/main.py</a></code> (lines 563-602)</p>
<p>The <code>/api/metrics</code> endpoint provides graph topology and network analysis metrics:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Metric   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>total_assets</code>   </td><td class="markdownTableBodyNone">Counter   </td><td class="markdownTableBodyNone">Count of nodes in graph    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>total_relationships</code>   </td><td class="markdownTableBodyNone">Counter   </td><td class="markdownTableBodyNone">Count of edges in graph    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>asset_classes</code>   </td><td class="markdownTableBodyNone">Dictionary   </td><td class="markdownTableBodyNone">Count per asset class    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>avg_degree</code>   </td><td class="markdownTableBodyNone">Gauge   </td><td class="markdownTableBodyNone">Mean connections per node    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>max_degree</code>   </td><td class="markdownTableBodyNone">Gauge   </td><td class="markdownTableBodyNone">Highest connected node    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>network_density</code>   </td><td class="markdownTableBodyNone">Gauge   </td><td class="markdownTableBodyNone">Ratio of actual to possible edges    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>relationship_density</code>   </td><td class="markdownTableBodyNone">Gauge   </td><td class="markdownTableBodyNone">Calculated relationship density   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2431"></a>
Metrics Response Model</h4>
<p><b>Location</b>: <code><a class="el" href="api_2main_8py.html">api/main.py</a></code> (lines 389-397)</p>
<div class="fragment"><div class="line">MetricsResponse {</div>
<div class="line">    total_assets: int</div>
<div class="line">    total_relationships: int</div>
<div class="line">    asset_classes: Dict[str, int]</div>
<div class="line">    avg_degree: float</div>
<div class="line">    max_degree: int</div>
<div class="line">    network_density: float</div>
<div class="line">    relationship_density: float</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md2433"></a>
6.5.3 Observability Patterns</h3>
<h4><a class="anchor" id="autotoc_md2434"></a>
6.5.3.1 Performance Targets and SLAs</h4>
<p>The system defines clear Service Level Agreements (SLAs) for critical operations:</p>
<h4><a class="anchor" id="autotoc_md2435"></a>
Performance SLA Matrix</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Operation   </th><th class="markdownTableHeadNone">Target SLA   </th><th class="markdownTableHeadNone">Measurement Point    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Response (p95)   </td><td class="markdownTableBodyNone">&lt; 500ms   </td><td class="markdownTableBodyNone">Request to response    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visualization Rendering   </td><td class="markdownTableBodyNone">&lt; 2 seconds   </td><td class="markdownTableBodyNone">Data load to interactive    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Token Generation   </td><td class="markdownTableBodyNone">&lt; 100ms   </td><td class="markdownTableBodyNone">Credential to token    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Graph Initialization   </td><td class="markdownTableBodyNone">&lt; 3 seconds   </td><td class="markdownTableBodyNone">Application startup    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Relationship Discovery   </td><td class="markdownTableBodyNone">&lt; 500ms   </td><td class="markdownTableBodyNone">For 100 assets    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Initial Page Load   </td><td class="markdownTableBodyNone">&lt; 3 seconds   </td><td class="markdownTableBodyNone">Navigation to interactive    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Dataclass Instantiation   </td><td class="markdownTableBodyNone">&lt; 1ms   </td><td class="markdownTableBodyNone">Per object    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Validation   </td><td class="markdownTableBodyNone">&lt; 1ms   </td><td class="markdownTableBodyNone">Per object   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2436"></a>
Timeout Configuration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Timeout   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">JWT Token   </td><td class="markdownTableBodyNone">30 minutes   </td><td class="markdownTableBodyNone">Session expiration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Rate Limit Window   </td><td class="markdownTableBodyNone">1 minute   </td><td class="markdownTableBodyNone">Request counting period    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HTTP Client   </td><td class="markdownTableBodyNone">30 seconds   </td><td class="markdownTableBodyNone">API request timeout    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Health Check   </td><td class="markdownTableBodyNone">30 seconds   </td><td class="markdownTableBodyNone">Container probe interval   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2437"></a>
6.5.3.2 Rate Limiting Observability</h4>
<p>Rate limiting provides visibility into API usage patterns and abuse prevention.</p>
<p><b>Location</b>: <code><a class="el" href="api_2main_8py.html">api/main.py</a></code> (lines 156-169)</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">Limit   </th><th class="markdownTableHeadNone">Window   </th><th class="markdownTableHeadNone">Key Function    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>POST /token</code>   </td><td class="markdownTableBodyNone">5 requests   </td><td class="markdownTableBodyNone">1 minute   </td><td class="markdownTableBodyNone">Client IP    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>GET /api/users/me</code>   </td><td class="markdownTableBodyNone">10 requests   </td><td class="markdownTableBodyNone">1 minute   </td><td class="markdownTableBodyNone">Client IP    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Other endpoints   </td><td class="markdownTableBodyNone">Unlimited   </td><td class="markdownTableBodyNone">N/A   </td><td class="markdownTableBodyNone">N/A   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2438"></a>
Rate Limit Response Indicators</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Indicator   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HTTP Status   </td><td class="markdownTableBodyNone">429   </td><td class="markdownTableBodyNone">Too Many Requests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Header   </td><td class="markdownTableBodyNone"><code>Retry-After: &lt;seconds&gt;</code>   </td><td class="markdownTableBodyNone">Client retry guidance    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Body   </td><td class="markdownTableBodyNone">Error detail message   </td><td class="markdownTableBodyNone">Limit information   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2439"></a>
6.5.3.3 Error Tracking Patterns</h4>
<h4><a class="anchor" id="autotoc_md2440"></a>
API Error Categories</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Status Code   </th><th class="markdownTableHeadNone">Scenario   </th><th class="markdownTableHeadNone">Monitoring Impact    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">400   </td><td class="markdownTableBodyNone">Bad Request   </td><td class="markdownTableBodyNone">User input validation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">401   </td><td class="markdownTableBodyNone">Unauthorized   </td><td class="markdownTableBodyNone">Authentication failures    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">404   </td><td class="markdownTableBodyNone">Not Found   </td><td class="markdownTableBodyNone">Missing resource requests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">422   </td><td class="markdownTableBodyNone">Validation Error   </td><td class="markdownTableBodyNone">Schema validation failures    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">429   </td><td class="markdownTableBodyNone">Too Many Requests   </td><td class="markdownTableBodyNone">Rate limiting activation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">500   </td><td class="markdownTableBodyNone">Internal Error   </td><td class="markdownTableBodyNone">Application exceptions   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2441"></a>
Error Handling Flow</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph ErrorObservability[Error Observability Flow]</div>
<div class="line">        ErrorOccurs([Error&lt;br/&gt;Detected]) --&gt; ErrorType{Error&lt;br/&gt;Category}</div>
<div class="line"> </div>
<div class="line">        ErrorType --&gt;|HTTPException| HTTPLog[Log HTTP&lt;br/&gt;Error Details]</div>
<div class="line">        ErrorType --&gt;|Rate Limit| RateLog[Log Rate&lt;br/&gt;Limit Hit]</div>
<div class="line">        ErrorType --&gt;|Validation| ValLog[Log Validation&lt;br/&gt;Error]</div>
<div class="line">        ErrorType --&gt;|Unexpected| UnexpLog[Logger.exception&lt;br/&gt;Full Stack Trace]</div>
<div class="line"> </div>
<div class="line">        HTTPLog --&gt; ReturnStatus[Return HTTP&lt;br/&gt;Status Code]</div>
<div class="line">        RateLog --&gt; Return429[Return 429&lt;br/&gt;+ Retry-After]</div>
<div class="line">        ValLog --&gt; Return422[Return 422&lt;br/&gt;+ Field Details]</div>
<div class="line">        UnexpLog --&gt; Return500[Return 500&lt;br/&gt;Generic Error]</div>
<div class="line"> </div>
<div class="line">        ReturnStatus --&gt; ClientResponse([Client&lt;br/&gt;Response])</div>
<div class="line">        Return429 --&gt; ClientResponse</div>
<div class="line">        Return422 --&gt; ClientResponse</div>
<div class="line">        Return500 --&gt; ClientResponse</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2442"></a>
6.5.3.4 Frontend Error Recovery Patterns</h4>
<p><b>Location</b>: <code>frontend/app/page.tsx</code> (lines 109-119)</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Error Category   </th><th class="markdownTableHeadNone">User Feedback   </th><th class="markdownTableHeadNone">Recovery Option    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Network Error   </td><td class="markdownTableBodyNone">"Unable to connect"   </td><td class="markdownTableBodyNone">Retry button    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">API Error   </td><td class="markdownTableBodyNone">Error message display   </td><td class="markdownTableBodyNone">Retry button    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Render Error   </td><td class="markdownTableBodyNone">Display error state   </td><td class="markdownTableBodyNone">Refresh page   </td></tr>
</table>
<p>Client-side errors are logged via &lsquo;console.error('Error loading data:&rsquo;, err)` for browser developer tools visibility.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md2444"></a>
6.5.4 CI/CD Monitoring and Quality Gates</h3>
<h4><a class="anchor" id="autotoc_md2445"></a>
6.5.4.1 Test Coverage Monitoring</h4>
<p>The system implements comprehensive test coverage monitoring through multiple platforms.</p>
<h4><a class="anchor" id="autotoc_md2446"></a>
Codecov Integration</h4>
<p><b>Location</b>: <code>.github/workflows/codecov.yaml</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Configuration   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Coverage Format   </td><td class="markdownTableBodyNone">XML/HTML   </td><td class="markdownTableBodyNone">Report generation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Test Results   </td><td class="markdownTableBodyNone">JUnit XML   </td><td class="markdownTableBodyNone">Test outcome tracking    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Upload Action   </td><td class="markdownTableBodyNone"><code>codecov/codecov-action</code>   </td><td class="markdownTableBodyNone">Results publication   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2447"></a>
CircleCI Coverage Pipeline</h4>
<p><b>Location</b>: <code>.circleci/config.yml</code> (lines 68-75)</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Coverage Setting   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Source Directories   </td><td class="markdownTableBodyNone"><code>src</code>, <code>tests</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Report Formats   </td><td class="markdownTableBodyNone">XML, HTML    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Upload Target   </td><td class="markdownTableBodyNone">Codecov    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Artifact Storage   </td><td class="markdownTableBodyNone">Coverage reports   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2448"></a>
Coverage Configuration</h4>
<p><b>Location</b>: <code>pyproject.toml</code> (lines 65-83)</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Setting   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Source   </td><td class="markdownTableBodyNone"><code>["src"]</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Omit Patterns   </td><td class="markdownTableBodyNone"><code>*/tests/*</code>, <code>*/__pycache__/*</code>, <code>*/site-packages/*</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Exclude Lines   </td><td class="markdownTableBodyNone"><code>pragma: no cover</code>, abstract methods, type checking   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2449"></a>
6.5.4.2 Security Scanning Pipeline</h4>
<p>The repository implements comprehensive security scanning through both CircleCI and GitHub Actions.</p>
<h4><a class="anchor" id="autotoc_md2450"></a>
GitHub Actions Security Workflows</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Workflow   </th><th class="markdownTableHeadNone">Tool   </th><th class="markdownTableHeadNone">Trigger   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>bandit.yml</code>   </td><td class="markdownTableBodyNone">Bandit   </td><td class="markdownTableBodyNone">Push/PR   </td><td class="markdownTableBodyNone">Python SAST    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>codeql.yml</code>   </td><td class="markdownTableBodyNone">CodeQL   </td><td class="markdownTableBodyNone">Push/PR/Schedule   </td><td class="markdownTableBodyNone">Multi-language SAST    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>semgrep.yml</code>   </td><td class="markdownTableBodyNone">Semgrep   </td><td class="markdownTableBodyNone">Push/PR   </td><td class="markdownTableBodyNone">Pattern-based detection    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>trivy.yml</code>   </td><td class="markdownTableBodyNone">Trivy   </td><td class="markdownTableBodyNone">Push/Schedule   </td><td class="markdownTableBodyNone">Container scanning    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>hadolint.yml</code>   </td><td class="markdownTableBodyNone">Hadolint   </td><td class="markdownTableBodyNone">Push/PR   </td><td class="markdownTableBodyNone">Dockerfile analysis    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>snyk-security.yml</code>   </td><td class="markdownTableBodyNone">Snyk   </td><td class="markdownTableBodyNone">Push/PR   </td><td class="markdownTableBodyNone">Dependency scanning    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>snyk-container.yml</code>   </td><td class="markdownTableBodyNone">Snyk   </td><td class="markdownTableBodyNone">Push/PR   </td><td class="markdownTableBodyNone">Container vulnerabilities    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>dependency-review.yml</code>   </td><td class="markdownTableBodyNone">GitHub   </td><td class="markdownTableBodyNone">PR   </td><td class="markdownTableBodyNone">Dependency review    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>scorecard.yml</code>   </td><td class="markdownTableBodyNone">OSSF Scorecard   </td><td class="markdownTableBodyNone">Push/Schedule   </td><td class="markdownTableBodyNone">Supply chain security    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>devskim.yml</code>   </td><td class="markdownTableBodyNone">DevSkim   </td><td class="markdownTableBodyNone">Push/PR   </td><td class="markdownTableBodyNone">Security linting   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2451"></a>
CircleCI Security Pipeline</h4>
<p><b>Location</b>: <code>.circleci/config.yml</code> (lines 77-100)</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Tool   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Stage    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>safety check</code>   </td><td class="markdownTableBodyNone">Python dependency vulnerabilities   </td><td class="markdownTableBodyNone">Build    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>bandit</code>   </td><td class="markdownTableBodyNone">Python SAST analysis   </td><td class="markdownTableBodyNone">Build   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2452"></a>
Nightly Security Scan</h4>
<p><b>Location</b>: <code>.circleci/config.yml</code> (lines 206-216)</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Setting   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Schedule   </td><td class="markdownTableBodyNone"><code>0 2 * * *</code> (2:00 AM UTC daily)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Branch   </td><td class="markdownTableBodyNone"><code>main</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Jobs   </td><td class="markdownTableBodyNone"><code>python-security</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2453"></a>
Security Scan Dashboard</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph SecurityScanPipeline[Security Scan Pipeline]</div>
<div class="line">        subgraph GitHubSecurity[GitHub Actions Security]</div>
<div class="line">            CodeQL[CodeQL&lt;br/&gt;SAST]</div>
<div class="line">            Bandit[Bandit&lt;br/&gt;Python SAST]</div>
<div class="line">            Semgrep[Semgrep&lt;br/&gt;Pattern Detection]</div>
<div class="line">            Trivy[Trivy&lt;br/&gt;Container Scan]</div>
<div class="line">            Snyk[Snyk&lt;br/&gt;Dependency Scan]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph CircleCISecurity[CircleCI Security]</div>
<div class="line">            Safety[Safety&lt;br/&gt;Dependency Check]</div>
<div class="line">            BanditCI[Bandit&lt;br/&gt;SAST]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Results[Security Results]</div>
<div class="line">            SARIF[SARIF Upload&lt;br/&gt;GitHub Security Tab]</div>
<div class="line">            Artifacts[Scan&lt;br/&gt;Artifacts]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Schedule[Scheduled Scans]</div>
<div class="line">            Nightly[Nightly Security&lt;br/&gt;2:00 AM UTC]</div>
<div class="line">            Weekly[Weekly Trivy&lt;br/&gt;Saturday 14:30 UTC]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    CodeQL --&gt; SARIF</div>
<div class="line">    Bandit --&gt; SARIF</div>
<div class="line">    Semgrep --&gt; SARIF</div>
<div class="line">    Trivy --&gt; SARIF</div>
<div class="line">    Snyk --&gt; SARIF</div>
<div class="line"> </div>
<div class="line">    Safety --&gt; Artifacts</div>
<div class="line">    BanditCI --&gt; Artifacts</div>
<div class="line"> </div>
<div class="line">    Nightly --&gt; CircleCISecurity</div>
<div class="line">    Weekly --&gt; Trivy</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md2455"></a>
6.5.5 Incident Response</h3>
<h4><a class="anchor" id="autotoc_md2456"></a>
6.5.5.1 Error Detection and Classification</h4>
<h4><a class="anchor" id="autotoc_md2457"></a>
Graph Initialization Error Handling</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Error Source   </th><th class="markdownTableHeadNone">Detection Method   </th><th class="markdownTableHeadNone">Recovery Action   </th><th class="markdownTableHeadNone">Fallback    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Cache load failed   </td><td class="markdownTableBodyNone">JSON parse error   </td><td class="markdownTableBodyNone">Proceed to fresh fetch   </td><td class="markdownTableBodyNone">Standard initialization    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Network disabled   </td><td class="markdownTableBodyNone">Connection timeout   </td><td class="markdownTableBodyNone">Use sample data   </td><td class="markdownTableBodyNone">Offline mode    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Yahoo Finance error   </td><td class="markdownTableBodyNone">Request exception   </td><td class="markdownTableBodyNone">Check partial data   </td><td class="markdownTableBodyNone">Sample data fallback    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Critical failure   </td><td class="markdownTableBodyNone">Unrecoverable exception   </td><td class="markdownTableBodyNone">Abort startup   </td><td class="markdownTableBodyNone">Application exit   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2458"></a>
Graph Initialization Recovery Flow</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph InitRecovery[Graph Initialization Recovery]</div>
<div class="line">        StartInit([Initialize&lt;br/&gt;Graph]) --&gt; TryCache{Load from&lt;br/&gt;Cache?}</div>
<div class="line"> </div>
<div class="line">        TryCache --&gt;|Success| CacheLoaded[Use Cached&lt;br/&gt;Data]</div>
<div class="line">        TryCache --&gt;|JSON Error| LogCacheErr[Log Cache&lt;br/&gt;Error]</div>
<div class="line"> </div>
<div class="line">        LogCacheErr --&gt; TryNetwork{Network&lt;br/&gt;Available?}</div>
<div class="line">        TryNetwork --&gt;|Yes| TryYahoo{Fetch Yahoo&lt;br/&gt;Finance?}</div>
<div class="line">        TryNetwork --&gt;|No| UseSample1[Use Sample&lt;br/&gt;Data]</div>
<div class="line"> </div>
<div class="line">        TryYahoo --&gt;|Success| UseRealData[Use Real&lt;br/&gt;Market Data]</div>
<div class="line">        TryYahoo --&gt;|Partial| UsePartial[Use Partial&lt;br/&gt;Data]</div>
<div class="line">        TryYahoo --&gt;|Failure| UseSample2[Use Sample&lt;br/&gt;Data]</div>
<div class="line"> </div>
<div class="line">        CacheLoaded --&gt; GraphReady([Graph&lt;br/&gt;Initialized])</div>
<div class="line">        UseRealData --&gt; SaveCache[Save to&lt;br/&gt;Cache]</div>
<div class="line">        UsePartial --&gt; SaveCache</div>
<div class="line">        SaveCache --&gt; GraphReady</div>
<div class="line">        UseSample1 --&gt; GraphReady</div>
<div class="line">        UseSample2 --&gt; GraphReady</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2459"></a>
6.5.5.2 Alert Routing Architecture</h4>
<p>The current system relies on CI/CD platform notifications for alerting:</p>
<h4><a class="anchor" id="autotoc_md2460"></a>
CI/CD Alert Flow</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph AlertRouting[Alert Routing Flow]</div>
<div class="line">        subgraph Triggers[Alert Triggers]</div>
<div class="line">            TestFail[Test&lt;br/&gt;Failure]</div>
<div class="line">            SecurityFail[Security&lt;br/&gt;Scan Alert]</div>
<div class="line">            BuildFail[Build&lt;br/&gt;Failure]</div>
<div class="line">            CoverageDrop[Coverage&lt;br/&gt;Drop]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Platforms[CI/CD Platforms]</div>
<div class="line">            GitHub[GitHub&lt;br/&gt;Actions]</div>
<div class="line">            CircleCI[CircleCI]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Notifications[Notification Channels]</div>
<div class="line">            GitHubUI[GitHub&lt;br/&gt;UI Alerts]</div>
<div class="line">            Email[Email&lt;br/&gt;Notifications]</div>
<div class="line">            SecurityTab[GitHub Security&lt;br/&gt;Tab]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        TestFail --&gt; GitHub</div>
<div class="line">        TestFail --&gt; CircleCI</div>
<div class="line">        SecurityFail --&gt; GitHub</div>
<div class="line">        BuildFail --&gt; GitHub</div>
<div class="line">        BuildFail --&gt; CircleCI</div>
<div class="line">        CoverageDrop --&gt; GitHub</div>
<div class="line"> </div>
<div class="line">        GitHub --&gt; GitHubUI</div>
<div class="line">        GitHub --&gt; Email</div>
<div class="line">        GitHub --&gt; SecurityTab</div>
<div class="line">        CircleCI --&gt; Email</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2461"></a>
6.5.5.3 Escalation Procedures</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Severity   </th><th class="markdownTableHeadNone">Detection   </th><th class="markdownTableHeadNone">Initial Response   </th><th class="markdownTableHeadNone">Escalation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Critical   </td><td class="markdownTableBodyNone">Application crash   </td><td class="markdownTableBodyNone">Restart container   </td><td class="markdownTableBodyNone">Review logs, investigate root cause    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">High   </td><td class="markdownTableBodyNone">Security scan failure   </td><td class="markdownTableBodyNone">Review findings   </td><td class="markdownTableBodyNone">Patch dependencies, update codebase    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Medium   </td><td class="markdownTableBodyNone">Test failure   </td><td class="markdownTableBodyNone">Review failing tests   </td><td class="markdownTableBodyNone">Fix code, update tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Low   </td><td class="markdownTableBodyNone">Coverage drop   </td><td class="markdownTableBodyNone">Review changes   </td><td class="markdownTableBodyNone">Improve test coverage   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2462"></a>
6.5.5.4 Recovery Scenarios</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Scenario   </th><th class="markdownTableHeadNone">Detection   </th><th class="markdownTableHeadNone">Recovery Action    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Graph corruption   </td><td class="markdownTableBodyNone">Validation failure   </td><td class="markdownTableBodyNone">Clear cache, reinitialize    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Cache file corruption   </td><td class="markdownTableBodyNone">JSON parse error   </td><td class="markdownTableBodyNone">Delete cache, fresh fetch    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Database unavailable   </td><td class="markdownTableBodyNone">Connection timeout   </td><td class="markdownTableBodyNone">Retry with exponential backoff    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Yahoo Finance outage   </td><td class="markdownTableBodyNone">Request timeout   </td><td class="markdownTableBodyNone">Fall back to sample data    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Authentication failure   </td><td class="markdownTableBodyNone">JWT decode error   </td><td class="markdownTableBodyNone">Re-authenticate user   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2464"></a>
6.5.6 Dashboard Design</h3>
<h4><a class="anchor" id="autotoc_md2465"></a>
6.5.6.1 Metrics Dashboard Layout</h4>
<p>The system provides operational metrics through the <code>/api/metrics</code> endpoint. A recommended dashboard layout for visualization:</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph MetricsDashboard[Metrics Dashboard Layout]</div>
<div class="line">        subgraph TopRow[Overview Metrics]</div>
<div class="line">            TotalAssets[Total Assets&lt;br/&gt;Counter]</div>
<div class="line">            TotalRelationships[Total Relationships&lt;br/&gt;Counter]</div>
<div class="line">            NetworkDensity[Network Density&lt;br/&gt;Gauge]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph MiddleRow[Network Analysis]</div>
<div class="line">            AvgDegree[Average Degree&lt;br/&gt;Gauge]</div>
<div class="line">            MaxDegree[Maximum Degree&lt;br/&gt;Gauge]</div>
<div class="line">            RelDensity[Relationship&lt;br/&gt;Density]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph BottomRow[Asset Distribution]</div>
<div class="line">            AssetClasses[Asset Classes&lt;br/&gt;Breakdown Chart]</div>
<div class="line">        end</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2466"></a>
6.5.6.2 Alert Threshold Matrix</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Metric   </th><th class="markdownTableHeadNone">Warning Threshold   </th><th class="markdownTableHeadNone">Critical Threshold   </th><th class="markdownTableHeadNone">Action    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Response Time (p95)   </td><td class="markdownTableBodyNone">&gt; 400ms   </td><td class="markdownTableBodyNone">&gt; 500ms   </td><td class="markdownTableBodyNone">Investigate slow endpoints    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Error Rate   </td><td class="markdownTableBodyNone">&gt; 1%   </td><td class="markdownTableBodyNone">&gt; 5%   </td><td class="markdownTableBodyNone">Review error logs    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Health Check Failures   </td><td class="markdownTableBodyNone">1 retry   </td><td class="markdownTableBodyNone">3 retries   </td><td class="markdownTableBodyNone">Container restart    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Graph Initialization   </td><td class="markdownTableBodyNone">&gt; 2.5s   </td><td class="markdownTableBodyNone">&gt; 3s   </td><td class="markdownTableBodyNone">Optimize data loading    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Token Generation   </td><td class="markdownTableBodyNone">&gt; 80ms   </td><td class="markdownTableBodyNone">&gt; 100ms   </td><td class="markdownTableBodyNone">Review auth performance   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2467"></a>
6.5.6.3 SLA Monitoring Dashboard Concept</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Panel   </th><th class="markdownTableHeadNone">Metric   </th><th class="markdownTableHeadNone">SLA Target   </th><th class="markdownTableHeadNone">Visualization    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Latency   </td><td class="markdownTableBodyNone">Response time p95   </td><td class="markdownTableBodyNone">&lt; 500ms   </td><td class="markdownTableBodyNone">Time series graph    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Availability   </td><td class="markdownTableBodyNone">Health check status   </td><td class="markdownTableBodyNone">&gt; 99.9%   </td><td class="markdownTableBodyNone">Status indicator    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Error Rate   </td><td class="markdownTableBodyNone">5xx responses   </td><td class="markdownTableBodyNone">&lt; 0.1%   </td><td class="markdownTableBodyNone">Percentage gauge    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Throughput   </td><td class="markdownTableBodyNone">Requests per second   </td><td class="markdownTableBodyNone">Variable   </td><td class="markdownTableBodyNone">Counter display   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2469"></a>
6.5.7 Future Monitoring Recommendations</h3>
<h4><a class="anchor" id="autotoc_md2470"></a>
6.5.7.1 Recommended Observability Stack</h4>
<p>Based on industry best practices for FastAPI applications, the following enhancements are recommended for production deployments with increased scale requirements:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Recommended Tool   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Metrics Collection   </td><td class="markdownTableBodyNone">Prometheus + prometheus-fastapi-instrumentator   </td><td class="markdownTableBodyNone">RED metrics (Rate, Error, Duration)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Distributed Tracing   </td><td class="markdownTableBodyNone">OpenTelemetry   </td><td class="markdownTableBodyNone">Request flow visualization    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Log Aggregation   </td><td class="markdownTableBodyNone">Loki or ELK Stack   </td><td class="markdownTableBodyNone">Centralized log management    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visualization   </td><td class="markdownTableBodyNone">Grafana   </td><td class="markdownTableBodyNone">Unified dashboard    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Error Tracking   </td><td class="markdownTableBodyNone">Sentry   </td><td class="markdownTableBodyNone">Exception monitoring    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Alerting   </td><td class="markdownTableBodyNone">Prometheus Alertmanager   </td><td class="markdownTableBodyNone">Automated notifications   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2471"></a>
6.5.7.2 OpenTelemetry Integration Path</h4>
<p>For future scalability, OpenTelemetry provides a vendor-neutral approach to observability:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Integration Point   </th><th class="markdownTableHeadNone">Library   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Auto-instrumentation   </td><td class="markdownTableBodyNone"><code>opentelemetry-instrumentation-fastapi</code>   </td><td class="markdownTableBodyNone">Automatic request tracing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Metrics Export   </td><td class="markdownTableBodyNone"><code>opentelemetry-exporter-prometheus</code>   </td><td class="markdownTableBodyNone">Prometheus-compatible metrics    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Trace Export   </td><td class="markdownTableBodyNone"><code>opentelemetry-exporter-otlp</code>   </td><td class="markdownTableBodyNone">Trace data export   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2472"></a>
6.5.7.3 Structured Logging Enhancement</h4>
<p>Recommended logging format upgrade for improved observability:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Enhancement   </th><th class="markdownTableHeadNone">Current   </th><th class="markdownTableHeadNone">Recommended    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Format   </td><td class="markdownTableBodyNone">Plain text   </td><td class="markdownTableBodyNone">JSON structured    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Request ID   </td><td class="markdownTableBodyNone">Not implemented   </td><td class="markdownTableBodyNone">UUID per request    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Correlation   </td><td class="markdownTableBodyNone">None   </td><td class="markdownTableBodyNone">Trace ID integration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Context   </td><td class="markdownTableBodyNone">Basic   </td><td class="markdownTableBodyNone">User, endpoint, duration   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2473"></a>
6.5.7.4 Monitoring Prerequisites for Microservices Migration</h4>
<p>As documented in the Core Services Architecture (Section 6.1), the following monitoring capabilities would be required before migrating to a microservices architecture:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Prerequisite   </th><th class="markdownTableHeadNone">Current State   </th><th class="markdownTableHeadNone">Required for Migration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Database Persistence   </td><td class="markdownTableBodyNone">Optional   </td><td class="markdownTableBodyNone">Required for shared state    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Message Queue   </td><td class="markdownTableBodyNone">Not implemented   </td><td class="markdownTableBodyNone">Required for async communication    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Service Mesh   </td><td class="markdownTableBodyNone">Not applicable   </td><td class="markdownTableBodyNone">Required for service discovery    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Distributed Tracing   </td><td class="markdownTableBodyNone">Not implemented   </td><td class="markdownTableBodyNone">Required for observability   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2475"></a>
6.5.8 Security Event Monitoring</h3>
<h4><a class="anchor" id="autotoc_md2476"></a>
6.5.8.1 Security Event Categories</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Event Category   </th><th class="markdownTableHeadNone">Log Level   </th><th class="markdownTableHeadNone">Content   </th><th class="markdownTableHeadNone">Monitoring Action    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Authentication failures   </td><td class="markdownTableBodyNone">WARNING   </td><td class="markdownTableBodyNone">Failed login attempts   </td><td class="markdownTableBodyNone">Track frequency, detect brute force    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Invalid CORS origins   </td><td class="markdownTableBodyNone">WARNING   </td><td class="markdownTableBodyNone">Skipped origin value   </td><td class="markdownTableBodyNone">Review CORS configuration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Rate limit exceeded   </td><td class="markdownTableBodyNone">INFO (429 response)   </td><td class="markdownTableBodyNone">Client IP, endpoint   </td><td class="markdownTableBodyNone">Identify abuse patterns    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Request errors   </td><td class="markdownTableBodyNone">ERROR   </td><td class="markdownTableBodyNone">Exception details   </td><td class="markdownTableBodyNone">Investigate root cause    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Token expiration   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">Session timeout   </td><td class="markdownTableBodyNone">Normal operation tracking   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2477"></a>
6.5.8.2 CI/CD Security Event Flow</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph SecurityEventFlow[Security Event Monitoring Flow]</div>
<div class="line">        subgraph Sources[Event Sources]</div>
<div class="line">            CodePush[Code&lt;br/&gt;Push]</div>
<div class="line">            PRCreated[Pull Request&lt;br/&gt;Created]</div>
<div class="line">            Schedule[Scheduled&lt;br/&gt;Trigger]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Scans[Security Scans]</div>
<div class="line">            SAST[SAST&lt;br/&gt;Analysis]</div>
<div class="line">            DependencyScan[Dependency&lt;br/&gt;Scan]</div>
<div class="line">            ContainerScan[Container&lt;br/&gt;Scan]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Analysis[Results Analysis]</div>
<div class="line">            FindingsReview[Findings&lt;br/&gt;Review]</div>
<div class="line">            SeverityClass[Severity&lt;br/&gt;Classification]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Actions[Response Actions]</div>
<div class="line">            BlockMerge[Block PR&lt;br/&gt;Merge]</div>
<div class="line">            CreateIssue[Create&lt;br/&gt;Issue]</div>
<div class="line">            AlertTeam[Alert&lt;br/&gt;Team]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    CodePush --&gt; SAST</div>
<div class="line">    CodePush --&gt; DependencyScan</div>
<div class="line">    PRCreated --&gt; ContainerScan</div>
<div class="line">    Schedule --&gt; SAST</div>
<div class="line">    Schedule --&gt; DependencyScan</div>
<div class="line">    Schedule --&gt; ContainerScan</div>
<div class="line"> </div>
<div class="line">    SAST --&gt; FindingsReview</div>
<div class="line">    DependencyScan --&gt; FindingsReview</div>
<div class="line">    ContainerScan --&gt; FindingsReview</div>
<div class="line"> </div>
<div class="line">    FindingsReview --&gt; SeverityClass</div>
<div class="line"> </div>
<div class="line">    SeverityClass --&gt;|Critical/High| BlockMerge</div>
<div class="line">    SeverityClass --&gt;|Critical/High| AlertTeam</div>
<div class="line">    SeverityClass --&gt;|Medium/Low| CreateIssue</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md2479"></a>
6.5.9 Container and Deployment Monitoring</h3>
<h4><a class="anchor" id="autotoc_md2480"></a>
6.5.9.1 Docker Container Monitoring</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Monitoring Aspect   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Health Probes   </td><td class="markdownTableBodyNone">HTTP GET <code>/</code>   </td><td class="markdownTableBodyNone">Every 30 seconds    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Restart Policy   </td><td class="markdownTableBodyNone"><code>unless-stopped</code>   </td><td class="markdownTableBodyNone">Automatic recovery    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Volume Mounts   </td><td class="markdownTableBodyNone"><code>./src:/app/src</code>, <code>./data:/app/data</code>   </td><td class="markdownTableBodyNone">Persistent storage    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Port Exposure   </td><td class="markdownTableBodyNone">7860   </td><td class="markdownTableBodyNone">External access   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2481"></a>
6.5.9.2 Container Security Monitoring</h4>
<p><b>Trivy Vulnerability Scanner</b> (<code>.github/workflows/trivy.yml</code>)</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Configuration   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Trigger   </td><td class="markdownTableBodyNone">Dockerfile/docker-compose changes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Schedule   </td><td class="markdownTableBodyNone">Weekly (Saturday 14:30 UTC)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Severity Filter   </td><td class="markdownTableBodyNone">CRITICAL, HIGH    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Results   </td><td class="markdownTableBodyNone">SARIF upload to GitHub Security   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2482"></a>
6.5.9.3 Deployment Environment Comparison</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Environment   </th><th class="markdownTableHeadNone">Monitoring Approach   </th><th class="markdownTableHeadNone">Health Check    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Local Development   </td><td class="markdownTableBodyNone">Console logging   </td><td class="markdownTableBodyNone">Manual testing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Docker   </td><td class="markdownTableBodyNone">Docker HEALTHCHECK   </td><td class="markdownTableBodyNone">HTTP probe    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Vercel Serverless   </td><td class="markdownTableBodyNone">Platform monitoring   </td><td class="markdownTableBodyNone">Edge health checks   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2484"></a>
6.5.10 References</h3>
<h4><a class="anchor" id="autotoc_md2485"></a>
6.5.10.1 Source Files Examined</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Path   </th><th class="markdownTableHeadNone">Relevance    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone">Health check endpoint, metrics endpoint, logging, rate limiting, error handling    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code>   </td><td class="markdownTableBodyNone">Authentication logging, security event handling    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="api_2database_8py.html">api/database.py</a></code>   </td><td class="markdownTableBodyNone">Database connection logging    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="app_8py.html">app.py</a></code>   </td><td class="markdownTableBodyNone">Gradio application logging configuration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="real__data__fetcher_8py.html">src/data/real_data_fetcher.py</a></code>   </td><td class="markdownTableBodyNone">Data fetch logging, cache operations    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/app/page.tsx</code>   </td><td class="markdownTableBodyNone">Frontend error handling, retry pattern    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/app/lib/api.ts</code>   </td><td class="markdownTableBodyNone">Frontend health check API client    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Dockerfile</code>   </td><td class="markdownTableBodyNone">Docker health check configuration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>docker-compose.yml</code>   </td><td class="markdownTableBodyNone">Container orchestration health checks    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>pyproject.toml</code>   </td><td class="markdownTableBodyNone">Test coverage configuration   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2486"></a>
6.5.10.2 CI/CD Configuration Files</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Path   </th><th class="markdownTableHeadNone">Relevance    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.circleci/config.yml</code>   </td><td class="markdownTableBodyNone">CircleCI monitoring, coverage, security scanning    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.github/workflows/ci.yml</code>   </td><td class="markdownTableBodyNone">Main CI workflow with coverage    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.github/workflows/codecov.yaml</code>   </td><td class="markdownTableBodyNone">Coverage upload workflow    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.github/workflows/trivy.yml</code>   </td><td class="markdownTableBodyNone">Container security scanning    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.github/workflows/bandit.yml</code>   </td><td class="markdownTableBodyNone">Python SAST workflow    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.github/workflows/codeql.yml</code>   </td><td class="markdownTableBodyNone">CodeQL analysis workflow    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.github/workflows/semgrep.yml</code>   </td><td class="markdownTableBodyNone">Semgrep pattern analysis    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.github/workflows/snyk-security.yml</code>   </td><td class="markdownTableBodyNone">Snyk dependency scanning    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.github/workflows/scorecard.yml</code>   </td><td class="markdownTableBodyNone">OSSF supply chain security   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2487"></a>
6.5.10.3 Technical Specification Cross-References</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Section   </th><th class="markdownTableHeadNone">Relevance    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5.4 CROSS-CUTTING CONCERNS   </td><td class="markdownTableBodyNone">Monitoring, observability, error handling patterns    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6.4 Security Architecture   </td><td class="markdownTableBodyNone">Security event logging, audit requirements    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5.5 DEPLOYMENT ARCHITECTURE   </td><td class="markdownTableBodyNone">Container and serverless deployment monitoring    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4.5 Error Handling Workflows   </td><td class="markdownTableBodyNone">Error detection and recovery flows    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4.8 Timing and SLA Considerations   </td><td class="markdownTableBodyNone">Performance targets and timeout configuration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6.1 Core Services Architecture   </td><td class="markdownTableBodyNone">Monolithic architecture implications for monitoring   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2488"></a>
6.5.10.4 External References</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Resource   </th><th class="markdownTableHeadNone">Context    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FastAPI Observability Best Practices   </td><td class="markdownTableBodyNone">Industry recommendations for monitoring    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">OpenTelemetry Documentation   </td><td class="markdownTableBodyNone">Distributed tracing standards    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Prometheus FastAPI Instrumentator   </td><td class="markdownTableBodyNone">Metrics collection library    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Grafana FastAPI Dashboard   </td><td class="markdownTableBodyNone">Dashboard design patterns   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md2489"></a>
6.6 Testing Strategy</h2>
<h3><a class="anchor" id="autotoc_md2490"></a>
6.6.1 Testing Strategy Overview</h3>
<h4><a class="anchor" id="autotoc_md2491"></a>
6.6.1.1 Executive Summary</h4>
<p>The Financial Asset Relationship Database implements a comprehensive multi-tier testing strategy designed to ensure reliability, maintainability, and quality across both backend (Python/FastAPI) and frontend (Next.js/TypeScript) components. The testing approach emphasizes automated validation at multiple levels—from unit tests validating individual functions to integration tests verifying cross-component interactions.</p>
<p>The testing architecture aligns with industry best practices for monolithic layered applications, leveraging pytest for Python backend testing, Jest with React Testing Library for frontend validation, and a robust CI/CD pipeline for automated quality gates.</p>
<h4><a class="anchor" id="autotoc_md2492"></a>
6.6.1.2 Testing Philosophy</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Principle   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Rationale    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Test Isolation   </td><td class="markdownTableBodyNone">Separate test databases, fixture reset   </td><td class="markdownTableBodyNone">Prevent test interference    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Behavior-Driven   </td><td class="markdownTableBodyNone">Test user interactions, not implementation   </td><td class="markdownTableBodyNone">Resilient to refactoring    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Coverage-First   </td><td class="markdownTableBodyNone">80%+ coverage targets   </td><td class="markdownTableBodyNone">Catch regressions early    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Fast Feedback   </td><td class="markdownTableBodyNone">Parallel execution, CI integration   </td><td class="markdownTableBodyNone">Developer productivity   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2493"></a>
6.6.1.3 Test Suite Statistics</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Test Cases   </th><th class="markdownTableHeadNone">Test Lines   </th><th class="markdownTableHeadNone">Coverage Target    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Backend Python   </td><td class="markdownTableBodyNone">60+   </td><td class="markdownTableBodyNone">~1,042   </td><td class="markdownTableBodyNone">&gt;80%    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Frontend TypeScript   </td><td class="markdownTableBodyNone">80+   </td><td class="markdownTableBodyNone">~937   </td><td class="markdownTableBodyNone">&gt;80%    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Total</b>   </td><td class="markdownTableBodyNone"><b>140+</b>   </td><td class="markdownTableBodyNone">**~2,000**   </td><td class="markdownTableBodyNone"><b>&gt;80%</b>   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2495"></a>
6.6.2 Unit Testing</h3>
<h4><a class="anchor" id="autotoc_md2496"></a>
6.6.2.1 Backend Unit Testing Framework</h4>
<p>The Python backend utilizes pytest as the primary testing framework, providing powerful fixtures, parametrization, and extensibility.</p>
<h4><a class="anchor" id="autotoc_md2497"></a>
Testing Framework Stack</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Tool   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">pytest   </td><td class="markdownTableBodyNone">&gt;= 7.0.0   </td><td class="markdownTableBodyNone">Test runner and framework    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">pytest-cov   </td><td class="markdownTableBodyNone">&gt;= 4.0.0   </td><td class="markdownTableBodyNone">Coverage reporting    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">httpx   </td><td class="markdownTableBodyNone">&gt;= 0.24.0   </td><td class="markdownTableBodyNone">Async HTTP client for TestClient    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">unittest.mock   </td><td class="markdownTableBodyNone">stdlib   </td><td class="markdownTableBodyNone">Mocking and patching   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2498"></a>
Test Organization Structure</h4>
<div class="fragment"><div class="line">tests/</div>
<div class="line">├── __init__.py                    # Test environment setup</div>
<div class="line">├── conftest.py                    # Shared fixtures</div>
<div class="line">├── unit/</div>
<div class="line">│   ├── test_api.py               # FastAPI endpoint tests</div>
<div class="line">│   ├── test_api_main.py          # Comprehensive API tests</div>
<div class="line">│   ├── test_financial_models.py  # Domain model validation</div>
<div class="line">│   ├── test_asset_graph.py       # Graph logic tests</div>
<div class="line">│   ├── test_repository.py        # Data layer tests</div>
<div class="line">│   ├── test_database.py          # SQLite/SQLAlchemy tests</div>
<div class="line">│   ├── test_database_memory.py   # In-memory database tests</div>
<div class="line">│   ├── test_graph_visuals.py     # Plotly visualization tests</div>
<div class="line">│   ├── test_metric_visuals.py    # Metrics visualization tests</div>
<div class="line">│   └── test_schema_report.py     # Report generation tests</div>
<div class="line">└── integration/</div>
<div class="line">    ├── conftest.py               # Integration fixtures</div>
<div class="line">    ├── test_api_integration.py   # End-to-end API workflows</div>
<div class="line">    └── test_repository.py        # Database integration tests</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2499"></a>
Pytest Configuration</h4>
<p><b>Location</b>: <code>pyproject.toml</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Setting   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>testpaths</code>   </td><td class="markdownTableBodyNone"><code>["tests"]</code>   </td><td class="markdownTableBodyNone">Test discovery root    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>python_files</code>   </td><td class="markdownTableBodyNone"><code>["test_*.py", "*_test.py"]</code>   </td><td class="markdownTableBodyNone">Test file patterns    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>python_classes</code>   </td><td class="markdownTableBodyNone"><code>["Test*"]</code>   </td><td class="markdownTableBodyNone">Test class patterns    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>python_functions</code>   </td><td class="markdownTableBodyNone"><code>["test_*"]</code>   </td><td class="markdownTableBodyNone">Test function patterns   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2500"></a>
Test Markers</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Marker   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Usage    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>@pytest.mark.unit</code>   </td><td class="markdownTableBodyNone">Unit tests   </td><td class="markdownTableBodyNone"><code>pytest -m unit</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>@pytest.mark.integration</code>   </td><td class="markdownTableBodyNone">Integration tests   </td><td class="markdownTableBodyNone"><code>pytest -m integration</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>@pytest.mark.slow</code>   </td><td class="markdownTableBodyNone">Slow running tests   </td><td class="markdownTableBodyNone"><code>pytest -m "not slow"</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2501"></a>
6.6.2.2 Backend Mocking Strategy</h4>
<p>The backend employs a multi-layered mocking approach to isolate components under test.</p>
<h4><a class="anchor" id="autotoc_md2502"></a>
Graph Instance Mocking</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Pattern   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Use Case    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Factory Override   </td><td class="markdownTableBodyNone"><code>set_graph_factory()</code>   </td><td class="markdownTableBodyNone">Test isolation for graph singleton    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Fixture Reset   </td><td class="markdownTableBodyNone"><code>_reset_graph</code> fixture   </td><td class="markdownTableBodyNone">Clean state between tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Mock Patch   </td><td class="markdownTableBodyNone"><code>unittest.mock.patch</code>   </td><td class="markdownTableBodyNone">API endpoint isolation   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2503"></a>
Test Fixture Patterns</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph FixtureHierarchy[Backend Test Fixture Hierarchy]</div>
<div class="line">        subgraph SessionScope[Session Scope]</div>
<div class="line">            DBEngine[Database Engine&lt;br/&gt;SQLite in-memory]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph ModuleScope[Module Scope]</div>
<div class="line">            GraphFactory[Graph Factory&lt;br/&gt;Mock/Real Toggle]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph FunctionScope[Function Scope]</div>
<div class="line">            TestClient[FastAPI TestClient]</div>
<div class="line">            MockGraph[Mock Graph Instance]</div>
<div class="line">            SampleAssets[Sample Asset Data]</div>
<div class="line">            DBSession[Database Session&lt;br/&gt;With Rollback]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    DBEngine --&gt; DBSession</div>
<div class="line">    GraphFactory --&gt; MockGraph</div>
<div class="line">    MockGraph --&gt; TestClient</div>
<div class="line">    SampleAssets --&gt; TestClient</div>
<div class="line">    DBSession --&gt; TestClient</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2504"></a>
Shared Fixture Examples</h4>
<p><b>Location</b>: <code><a class="el" href="tests_2conftest_8py.html">tests/conftest.py</a></code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Fixture   </th><th class="markdownTableHeadNone">Scope   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>mock_graph</code>   </td><td class="markdownTableBodyNone">function   </td><td class="markdownTableBodyNone">Isolated graph instance for testing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>sample_equity</code>   </td><td class="markdownTableBodyNone">function   </td><td class="markdownTableBodyNone">Pre-configured equity asset    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>dividend_stock</code>   </td><td class="markdownTableBodyNone">function   </td><td class="markdownTableBodyNone">Asset with dividend data    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>_reset_graph</code>   </td><td class="markdownTableBodyNone">function   </td><td class="markdownTableBodyNone">Graph state cleanup   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2505"></a>
Conditional Test Execution</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Pattern   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Import Skip   </td><td class="markdownTableBodyNone"><code>pytest.importorskip("sqlalchemy")</code>   </td><td class="markdownTableBodyNone">Skip if dependency missing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Environment Check   </td><td class="markdownTableBodyNone"><code>pytest.mark.skipif(...)</code>   </td><td class="markdownTableBodyNone">Environment-specific tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Parametrization   </td><td class="markdownTableBodyNone"><code>@pytest.mark.parametrize</code>   </td><td class="markdownTableBodyNone">Multiple test scenarios   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2506"></a>
6.6.2.3 Frontend Unit Testing Framework</h4>
<p>The Next.js frontend implements Jest with React Testing Library for comprehensive component and utility testing.</p>
<h4><a class="anchor" id="autotoc_md2507"></a>
Testing Framework Stack</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Tool   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Jest   </td><td class="markdownTableBodyNone">^29.7.0   </td><td class="markdownTableBodyNone">Test runner and framework    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">@testing-library/react   </td><td class="markdownTableBodyNone">^14.1.2   </td><td class="markdownTableBodyNone">React component testing    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">@testing-library/jest-dom   </td><td class="markdownTableBodyNone">^6.4.0   </td><td class="markdownTableBodyNone">DOM assertions    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">jest-environment-jsdom   </td><td class="markdownTableBodyNone">^29.7.0   </td><td class="markdownTableBodyNone">DOM simulation   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2508"></a>
Frontend Test Organization</h4>
<div class="fragment"><div class="line">frontend/</div>
<div class="line">├── __tests__/</div>
<div class="line">│   ├── test-utils.ts               # Centralized mock data</div>
<div class="line">│   ├── lib/</div>
<div class="line">│   │   ├── api.test.ts            # API client tests</div>
<div class="line">│   │   └── api-axios-compatibility.test.ts</div>
<div class="line">│   ├── components/</div>
<div class="line">│   │   ├── AssetList.test.tsx     # Asset list component</div>
<div class="line">│   │   ├── MetricsDashboard.test.tsx</div>
<div class="line">│   │   └── NetworkVisualization.test.tsx</div>
<div class="line">│   └── app/</div>
<div class="line">│       └── page.test.tsx          # Page-level tests</div>
<div class="line">├── jest.config.js                  # Jest configuration</div>
<div class="line">├── jest.setup.js                   # Environment setup</div>
<div class="line">└── package.json                    # Test scripts</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2509"></a>
Jest Configuration</h4>
<p><b>Location</b>: <code>frontend/jest.config.js</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Setting   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>testEnvironment</code>   </td><td class="markdownTableBodyNone"><code>jest-environment-jsdom</code>   </td><td class="markdownTableBodyNone">DOM simulation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>setupFilesAfterEnv</code>   </td><td class="markdownTableBodyNone">&lsquo;[&rsquo;./jest.setup.js']<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Test environment setup \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>moduleNameMapper<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Path aliases \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Module resolution \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt;</code>testMatch<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>['**/__tests__/**/*.test.ts(x)?']`   </td><td class="markdownTableBodyNone">Test file patterns   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2510"></a>
Environment Setup</h4>
<p><b>Location</b>: <code>frontend/jest.setup.js</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Configuration   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>@testing-library/jest-dom</code> import   </td><td class="markdownTableBodyNone">Extended DOM matchers    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>window.matchMedia</code> mock   </td><td class="markdownTableBodyNone">Media query simulation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>IntersectionObserver</code> mock   </td><td class="markdownTableBodyNone">Viewport observation   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2511"></a>
6.6.2.4 Frontend Mocking Strategy</h4>
<p>The frontend testing approach prioritizes testing user behavior over implementation details.</p>
<h4><a class="anchor" id="autotoc_md2512"></a>
Mock Patterns</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Pattern   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Use Case    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Module Mock   </td><td class="markdownTableBodyNone">&lsquo;jest.mock('axios&rsquo;)<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; API client isolation \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt; Component Mock \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>jest.mock('../../app/lib/api')<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Component isolation \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt; Module Reset \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>jest.resetModules()<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Clean state between tests \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt; Data-TestId \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>data-testid` attributes   </td><td class="markdownTableBodyNone">Element targeting   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2513"></a>
Centralized Test Data</h4>
<p><b>Location</b>: <code>frontend/__tests__/test-utils.ts</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Export   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>mockAssets</code>   </td><td class="markdownTableBodyNone">Asset[]   </td><td class="markdownTableBodyNone">Sample asset collection    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>mockMetrics</code>   </td><td class="markdownTableBodyNone">Metrics   </td><td class="markdownTableBodyNone">Network metrics data    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>mockVisualization</code>   </td><td class="markdownTableBodyNone">VisualizationData   </td><td class="markdownTableBodyNone">3D graph data    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>mockRelationships</code>   </td><td class="markdownTableBodyNone">Relationship[]   </td><td class="markdownTableBodyNone">Sample relationships   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2514"></a>
6.6.2.5 Test Naming Conventions</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Convention   </th><th class="markdownTableHeadNone">Example    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Backend Test Files   </td><td class="markdownTableBodyNone"><code>test_&lt;module&gt;.py</code>   </td><td class="markdownTableBodyNone"><code><a class="el" href="test__api__main_8py.html">test_api_main.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Frontend Test Files   </td><td class="markdownTableBodyNone"><code>&lt;Component&gt;.test.tsx</code>   </td><td class="markdownTableBodyNone"><code>AssetList.test.tsx</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Test Functions   </td><td class="markdownTableBodyNone"><code>test_&lt;behavior&gt;</code>   </td><td class="markdownTableBodyNone"><code>test_asset_creation_with_valid_data</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Test Classes   </td><td class="markdownTableBodyNone"><code>Test&lt;Feature&gt;</code>   </td><td class="markdownTableBodyNone"><code>TestCompleteAPIFlow</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2515"></a>
6.6.2.6 Code Coverage Configuration</h4>
<h4><a class="anchor" id="autotoc_md2516"></a>
Backend Coverage</h4>
<p><b>Location</b>: <code>pyproject.toml</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Setting   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Source Directories   </td><td class="markdownTableBodyNone"><code>["src"]</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Omit Patterns   </td><td class="markdownTableBodyNone"><code>*/tests/*</code>, <code>*/__pycache__/*</code>, <code>*/site-packages/*</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Exclude Lines   </td><td class="markdownTableBodyNone"><code>pragma: no cover</code>, <code>def __repr__</code>, <code>raise NotImplementedError</code>, <code>if TYPE_CHECKING:</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2517"></a>
Frontend Coverage</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Command   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>npm test -- --coverage</code>   </td><td class="markdownTableBodyNone">Generate coverage report    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>npm run test:ci</code>   </td><td class="markdownTableBodyNone">CI-optimized coverage   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2519"></a>
6.6.3 Integration Testing</h3>
<h4><a class="anchor" id="autotoc_md2520"></a>
6.6.3.1 API Integration Testing</h4>
<p>Integration tests validate end-to-end workflows across multiple system components.</p>
<p><b>Location</b>: <code><a class="el" href="test__api__integration_8py.html">tests/integration/test_api_integration.py</a></code></p>
<h4><a class="anchor" id="autotoc_md2521"></a>
Integration Test Categories</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Category   </th><th class="markdownTableHeadNone">Test Class   </th><th class="markdownTableHeadNone">Validation Focus    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Complete API Flow   </td><td class="markdownTableBodyNone"><code>TestCompleteAPIFlow</code>   </td><td class="markdownTableBodyNone">health → assets → detail → relationships    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Metrics Consistency   </td><td class="markdownTableBodyNone"><code>TestMetricsConsistency</code>   </td><td class="markdownTableBodyNone">Metrics match actual data    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Visualization Data   </td><td class="markdownTableBodyNone"><code>TestVisualizationData</code>   </td><td class="markdownTableBodyNone">All nodes reference existing assets    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Performance   </td><td class="markdownTableBodyNone"><code>TestPerformance</code>   </td><td class="markdownTableBodyNone">Response time SLAs    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Authentication   </td><td class="markdownTableBodyNone"><code>TestAuthentication</code>   </td><td class="markdownTableBodyNone">JWT token flows   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2522"></a>
Integration Test Flow</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph IntegrationTestFlow[Integration Test Execution Flow]</div>
<div class="line">        Setup([Test Setup]) --&gt; DBInit[Initialize Test&lt;br/&gt;Database]</div>
<div class="line">        DBInit --&gt; GraphInit[Initialize&lt;br/&gt;Graph Instance]</div>
<div class="line">        GraphInit --&gt; ClientCreate[Create FastAPI&lt;br/&gt;TestClient]</div>
<div class="line"> </div>
<div class="line">        ClientCreate --&gt; TestExec{Execute Test&lt;br/&gt;Scenarios}</div>
<div class="line"> </div>
<div class="line">        TestExec --&gt; HealthCheck[Health Check&lt;br/&gt;Endpoint]</div>
<div class="line">        TestExec --&gt; AssetFlow[Asset CRUD&lt;br/&gt;Operations]</div>
<div class="line">        TestExec --&gt; RelFlow[Relationship&lt;br/&gt;Queries]</div>
<div class="line">        TestExec --&gt; MetricsFlow[Metrics&lt;br/&gt;Validation]</div>
<div class="line">        TestExec --&gt; VizFlow[Visualization&lt;br/&gt;Data Check]</div>
<div class="line"> </div>
<div class="line">        HealthCheck --&gt; Assert[Assert&lt;br/&gt;Expectations]</div>
<div class="line">        AssetFlow --&gt; Assert</div>
<div class="line">        RelFlow --&gt; Assert</div>
<div class="line">        MetricsFlow --&gt; Assert</div>
<div class="line">        VizFlow --&gt; Assert</div>
<div class="line"> </div>
<div class="line">        Assert --&gt; Teardown([Test Teardown&lt;br/&gt;Reset State])</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2523"></a>
Performance Integration Tests</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Test   </th><th class="markdownTableHeadNone">Validation   </th><th class="markdownTableHeadNone">Threshold    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>test_response_times</code>   </td><td class="markdownTableBodyNone">API endpoint response   </td><td class="markdownTableBodyNone">&lt; 5 seconds    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>test_concurrent_requests</code>   </td><td class="markdownTableBodyNone">ThreadPoolExecutor with 5 workers   </td><td class="markdownTableBodyNone">10 requests success    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>test_visualization_load</code>   </td><td class="markdownTableBodyNone">Graph rendering data   </td><td class="markdownTableBodyNone">&lt; 2 seconds   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2524"></a>
6.6.3.2 Database Integration Testing</h4>
<p><b>Location</b>: <code><a class="el" href="integration_2test__repository_8py.html">tests/integration/test_repository.py</a></code></p>
<h4><a class="anchor" id="autotoc_md2525"></a>
Database Test Strategy</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Approach   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Isolated Database   </td><td class="markdownTableBodyNone"><code>tmp_path</code> fixture   </td><td class="markdownTableBodyNone">Test data isolation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Migration Testing   </td><td class="markdownTableBodyNone">Apply <code>001_initial.sql</code>   </td><td class="markdownTableBodyNone">Schema validation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CRUD Operations   </td><td class="markdownTableBodyNone">SQLAlchemy sessions   </td><td class="markdownTableBodyNone">Data layer verification    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Transaction Rollback   </td><td class="markdownTableBodyNone">Session rollback   </td><td class="markdownTableBodyNone">Clean state   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2526"></a>
Database Test Configuration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Database URL   </td><td class="markdownTableBodyNone"><code>sqlite:///{tmp_path}/test.db</code>   </td><td class="markdownTableBodyNone">Isolated test database    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Connection Args   </td><td class="markdownTableBodyNone"><code>check_same_thread=False</code>   </td><td class="markdownTableBodyNone">Multi-threaded compatibility    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Pool Class   </td><td class="markdownTableBodyNone"><code>StaticPool</code>   </td><td class="markdownTableBodyNone">Connection reuse   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2527"></a>
6.6.3.3 External Service Mocking</h4>
<h4><a class="anchor" id="autotoc_md2528"></a>
Yahoo Finance Mocking</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Strategy   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Environment Flag   </td><td class="markdownTableBodyNone"><code>USE_REAL_DATA_FETCHER=false</code>   </td><td class="markdownTableBodyNone">Disable real API calls    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Sample Data Fallback   </td><td class="markdownTableBodyNone"><code>sample_database.py</code>   </td><td class="markdownTableBodyNone">Predictable test data    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Cache Mocking   </td><td class="markdownTableBodyNone">Mock JSON cache files   </td><td class="markdownTableBodyNone">Cache behavior testing   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2529"></a>
6.6.3.4 Dependency and Workflow Testing</h4>
<p><b>Location</b>: <code>tests/integration/</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Test File   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="test__requirements_8py.html">test_requirements.py</a></code>   </td><td class="markdownTableBodyNone">Validate production dependencies    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="test__requirements__dev_8py.html">test_requirements_dev.py</a></code>   </td><td class="markdownTableBodyNone">Validate development dependencies    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="test__github__workflows_8py.html">test_github_workflows.py</a></code>   </td><td class="markdownTableBodyNone">CI/CD workflow validation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="test__debricked__workflow_8py.html">test_debricked_workflow.py</a></code>   </td><td class="markdownTableBodyNone">Security workflow validation   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2531"></a>
6.6.4 End-to-End Testing</h3>
<h4><a class="anchor" id="autotoc_md2532"></a>
6.6.4.1 Current E2E Implementation</h4>
<p>The system implements component-level E2E simulation through Jest and React Testing Library, providing comprehensive user interaction testing without requiring a full browser environment.</p>
<h4><a class="anchor" id="autotoc_md2533"></a>
Frontend E2E Patterns</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Pattern   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Coverage    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Page Rendering   </td><td class="markdownTableBodyNone"><code>page.test.tsx</code>   </td><td class="markdownTableBodyNone">Full page lifecycle    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Component Interaction   </td><td class="markdownTableBodyNone"><code>fireEvent</code>, <code>userEvent</code>   </td><td class="markdownTableBodyNone">User actions    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Loading States   </td><td class="markdownTableBodyNone"><code>waitFor</code> assertions   </td><td class="markdownTableBodyNone">Async behavior    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Error Handling   </td><td class="markdownTableBodyNone">Mock error responses   </td><td class="markdownTableBodyNone">Recovery flows    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Tab Navigation   </td><td class="markdownTableBodyNone">State management tests   </td><td class="markdownTableBodyNone">Navigation behavior   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2534"></a>
Component Test Scenarios</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Test Scenarios    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>AssetList</code>   </td><td class="markdownTableBodyNone">Render assets, filter by class, search functionality    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>MetricsDashboard</code>   </td><td class="markdownTableBodyNone">Display metrics, handle loading, show errors    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>NetworkVisualization</code>   </td><td class="markdownTableBodyNone">3D graph rendering, node interaction    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>page.tsx</code>   </td><td class="markdownTableBodyNone">Tab switching, data loading, retry mechanisms   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2535"></a>
6.6.4.2 Planned E2E Enhancements</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Enhancement   </th><th class="markdownTableHeadNone">Tool   </th><th class="markdownTableHeadNone">Priority    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Browser E2E Tests   </td><td class="markdownTableBodyNone">Playwright/Cypress   </td><td class="markdownTableBodyNone">Medium    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visual Regression   </td><td class="markdownTableBodyNone">Percy/Chromatic   </td><td class="markdownTableBodyNone">Low    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Load Testing   </td><td class="markdownTableBodyNone">k6/Artillery   </td><td class="markdownTableBodyNone">Medium    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Accessibility Testing   </td><td class="markdownTableBodyNone">axe-core   </td><td class="markdownTableBodyNone">Medium   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2536"></a>
6.6.4.3 Test Data Management</h4>
<h4><a class="anchor" id="autotoc_md2537"></a>
Backend Test Data Setup</h4>
<p><b>Location</b>: <code><a class="el" href="tests_2____init_____8py.html">tests/__init__.py</a></code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Environment Variable   </th><th class="markdownTableHeadNone">Test Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SECRET_KEY</code>   </td><td class="markdownTableBodyNone"><code>test-secret-key</code>   </td><td class="markdownTableBodyNone">JWT signing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>DATABASE_URL</code>   </td><td class="markdownTableBodyNone"><code>sqlite:///{test_auth.db}</code>   </td><td class="markdownTableBodyNone">Auth database    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ADMIN_USERNAME</code>   </td><td class="markdownTableBodyNone"><code>admin</code>   </td><td class="markdownTableBodyNone">Test admin user    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ADMIN_PASSWORD</code>   </td><td class="markdownTableBodyNone"><code>changeme</code>   </td><td class="markdownTableBodyNone">Test credentials   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2538"></a>
Test Data Lifecycle</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph TestDataLifecycle[Test Data Lifecycle]</div>
<div class="line">        subgraph Setup[Setup Phase]</div>
<div class="line">            InitEnv[Initialize&lt;br/&gt;Environment]</div>
<div class="line">            CreateDB[Create Test&lt;br/&gt;Database]</div>
<div class="line">            LoadFixtures[Load Test&lt;br/&gt;Fixtures]</div>
<div class="line">            SeedData[Seed Sample&lt;br/&gt;Data]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Execution[Execution Phase]</div>
<div class="line">            RunTest[Execute Test&lt;br/&gt;Case]</div>
<div class="line">            CaptureState[Capture&lt;br/&gt;State Changes]</div>
<div class="line">            Validate[Validate&lt;br/&gt;Expectations]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Teardown[Teardown Phase]</div>
<div class="line">            RollbackTx[Rollback&lt;br/&gt;Transactions]</div>
<div class="line">            ResetState[Reset Graph&lt;br/&gt;State]</div>
<div class="line">            CleanupFiles[Cleanup&lt;br/&gt;Temp Files]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    InitEnv --&gt; CreateDB</div>
<div class="line">    CreateDB --&gt; LoadFixtures</div>
<div class="line">    LoadFixtures --&gt; SeedData</div>
<div class="line">    SeedData --&gt; RunTest</div>
<div class="line">    RunTest --&gt; CaptureState</div>
<div class="line">    CaptureState --&gt; Validate</div>
<div class="line">    Validate --&gt; RollbackTx</div>
<div class="line">    RollbackTx --&gt; ResetState</div>
<div class="line">    ResetState --&gt; CleanupFiles</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md2540"></a>
6.6.5 Test Automation</h3>
<h4><a class="anchor" id="autotoc_md2541"></a>
6.6.5.1 CI/CD Integration</h4>
<p>The testing strategy integrates with both GitHub Actions and CircleCI for comprehensive automated validation.</p>
<h4><a class="anchor" id="autotoc_md2542"></a>
GitHub Actions Primary CI</h4>
<p><b>Location</b>: <code>.github/workflows/ci.yml</code></p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph GitHubActionsCI[GitHub Actions CI Pipeline]</div>
<div class="line">        Trigger([Push/PR to main]) --&gt; Checkout[Checkout Code]</div>
<div class="line"> </div>
<div class="line">        Checkout --&gt; Matrix{Python Version&lt;br/&gt;Matrix}</div>
<div class="line">        Matrix --&gt; Py310[Python 3.10]</div>
<div class="line">        Matrix --&gt; Py311[Python 3.11]</div>
<div class="line">        Matrix --&gt; Py312[Python 3.12]</div>
<div class="line"> </div>
<div class="line">        Py310 --&gt; LintJobs</div>
<div class="line">        Py311 --&gt; LintJobs</div>
<div class="line">        Py312 --&gt; LintJobs</div>
<div class="line"> </div>
<div class="line">        subgraph LintJobs[Linting Jobs]</div>
<div class="line">            Flake8[flake8&lt;br/&gt;Critical + Full]</div>
<div class="line">            Black[black --check]</div>
<div class="line">            Isort[isort --check-only]</div>
<div class="line">            Pylint[pylint&lt;br/&gt;fail-under=7.0]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        LintJobs --&gt; TestJob[pytest&lt;br/&gt;--cov=src&lt;br/&gt;--cov-report=xml]</div>
<div class="line"> </div>
<div class="line">        TestJob --&gt; CoverageCheck{Python 3.11&lt;br/&gt;Only?}</div>
<div class="line">        CoverageCheck --&gt;|Yes| Codecov[Upload to&lt;br/&gt;Codecov]</div>
<div class="line">        CoverageCheck --&gt;|No| Complete([Job Complete])</div>
<div class="line">        Codecov --&gt; Complete</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2543"></a>
CI Job Configuration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Job   </th><th class="markdownTableHeadNone">Tools   </th><th class="markdownTableHeadNone">Failure Behavior    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">test   </td><td class="markdownTableBodyNone">pytest, flake8, black, isort, pylint   </td><td class="markdownTableBodyNone">fail-fast: false    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">security   </td><td class="markdownTableBodyNone">safety, bandit   </td><td class="markdownTableBodyNone">continue-on-error: true   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2544"></a>
CircleCI Secondary CI</h4>
<p><b>Location</b>: <code>.circleci/config.yml</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Job   </th><th class="markdownTableHeadNone">Parallelism   </th><th class="markdownTableHeadNone">Output    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">python-lint   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">flake8 results    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">python-test   </td><td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">pytest with coverage    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">python-security   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">safety + bandit    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">frontend-lint   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">npm run lint    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">frontend-build   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">npm run build    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">docker-build   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Smoke test   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2545"></a>
6.6.5.2 Frontend CI Pipeline</h4>
<p><b>Location</b>: <code>.github/workflows/node.js.yml</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Configuration   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Node Matrix   </td><td class="markdownTableBodyNone">18.x, 20.x, 22.x    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Trigger Paths   </td><td class="markdownTableBodyNone"><code>frontend/**</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Jobs   </td><td class="markdownTableBodyNone"><code>npm ci</code>, <code>npm run build</code>, <code>npm test</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2546"></a>
6.6.5.3 Automated Test Triggers</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Trigger   </th><th class="markdownTableHeadNone">Event   </th><th class="markdownTableHeadNone">Tests Executed    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Push   </td><td class="markdownTableBodyNone"><code>main</code> branch   </td><td class="markdownTableBodyNone">Full suite    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Pull Request   </td><td class="markdownTableBodyNone">To <code>main</code>   </td><td class="markdownTableBodyNone">Full suite    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Schedule   </td><td class="markdownTableBodyNone">Daily 02:00 UTC   </td><td class="markdownTableBodyNone">Security scans    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Manual   </td><td class="markdownTableBodyNone"><code>workflow_dispatch</code>   </td><td class="markdownTableBodyNone">Selected workflows   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2547"></a>
6.6.5.4 Parallel Test Execution</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Platform   </th><th class="markdownTableHeadNone">Parallelism   </th><th class="markdownTableHeadNone">Strategy    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">GitHub Actions   </td><td class="markdownTableBodyNone">Python version matrix   </td><td class="markdownTableBodyNone">3.10, 3.11, 3.12    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CircleCI   </td><td class="markdownTableBodyNone"><code>parallelism: 4</code>   </td><td class="markdownTableBodyNone">Test file distribution    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Jest   </td><td class="markdownTableBodyNone">Default parallel   </td><td class="markdownTableBodyNone">Worker pool   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2548"></a>
6.6.5.5 Test Reporting</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Report Type   </th><th class="markdownTableHeadNone">Format   </th><th class="markdownTableHeadNone">Destination    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Coverage   </td><td class="markdownTableBodyNone">XML   </td><td class="markdownTableBodyNone">Codecov upload    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Test Results   </td><td class="markdownTableBodyNone">JUnit XML   </td><td class="markdownTableBodyNone">CircleCI artifacts    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Coverage HTML   </td><td class="markdownTableBodyNone">HTML   </td><td class="markdownTableBodyNone">GitHub artifacts    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Security   </td><td class="markdownTableBodyNone">SARIF   </td><td class="markdownTableBodyNone">GitHub Security tab   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2549"></a>
6.6.5.6 Failed Test Handling</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Strategy   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Matrix Continue   </td><td class="markdownTableBodyNone"><code>fail-fast: false</code>   </td><td class="markdownTableBodyNone">Complete all versions    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Security Continue   </td><td class="markdownTableBodyNone"><code>continue-on-error: true</code>   </td><td class="markdownTableBodyNone">Non-blocking scans    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Artifact Preservation   </td><td class="markdownTableBodyNone">Always upload   </td><td class="markdownTableBodyNone">Debug information    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Retry Mechanism   </td><td class="markdownTableBodyNone">Manual re-run   </td><td class="markdownTableBodyNone">Flaky test recovery   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2551"></a>
6.6.6 Security Testing</h3>
<h4><a class="anchor" id="autotoc_md2552"></a>
6.6.6.1 Static Application Security Testing (SAST)</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Tool   </th><th class="markdownTableHeadNone">Workflow   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Bandit   </td><td class="markdownTableBodyNone"><code>.github/workflows/bandit.yml</code>   </td><td class="markdownTableBodyNone">Python security linting    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CodeQL   </td><td class="markdownTableBodyNone"><code>.github/workflows/codeql.yml</code>   </td><td class="markdownTableBodyNone">Multi-language SAST    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Semgrep   </td><td class="markdownTableBodyNone"><code>.github/workflows/semgrep.yml</code>   </td><td class="markdownTableBodyNone">Pattern-based scanning    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">DevSkim   </td><td class="markdownTableBodyNone"><code>.github/workflows/devskim.yml</code>   </td><td class="markdownTableBodyNone">Security linting   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2553"></a>
Bandit Configuration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Setting   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Skip Codes   </td><td class="markdownTableBodyNone"><code>B101</code>   </td><td class="markdownTableBodyNone">Allow asserts in tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Output   </td><td class="markdownTableBodyNone">SARIF   </td><td class="markdownTableBodyNone">GitHub Security integration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Targets   </td><td class="markdownTableBodyNone"><code>src/</code>, <code>api/</code>   </td><td class="markdownTableBodyNone">Application code only   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2554"></a>
6.6.6.2 Software Composition Analysis (SCA)</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Tool   </th><th class="markdownTableHeadNone">Workflow   </th><th class="markdownTableHeadNone">Scope    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Safety   </td><td class="markdownTableBodyNone">CircleCI   </td><td class="markdownTableBodyNone">Python dependencies    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Snyk Open Source   </td><td class="markdownTableBodyNone"><code>.github/workflows/snyk-security.yml</code>   </td><td class="markdownTableBodyNone">All dependencies    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Debricked   </td><td class="markdownTableBodyNone"><code>.github/workflows/debricked_workflow.yml</code>   </td><td class="markdownTableBodyNone">Dependency analysis    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">OSV Scanner   </td><td class="markdownTableBodyNone"><code>.github/workflows/osv-scanner.yml</code>   </td><td class="markdownTableBodyNone">Vulnerability database   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2555"></a>
6.6.6.3 Container Security</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Tool   </th><th class="markdownTableHeadNone">Workflow   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Trivy   </td><td class="markdownTableBodyNone"><code>.github/workflows/trivy.yml</code>   </td><td class="markdownTableBodyNone">Container scanning    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Hadolint   </td><td class="markdownTableBodyNone"><code>.github/workflows/hadolint.yml</code>   </td><td class="markdownTableBodyNone">Dockerfile linting    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Snyk Container   </td><td class="markdownTableBodyNone"><code>.github/workflows/snyk-container.yml</code>   </td><td class="markdownTableBodyNone">Image vulnerabilities   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2556"></a>
6.6.6.4 Security Scanning Pipeline</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph SecurityPipeline[Security Scanning Pipeline]</div>
<div class="line">        subgraph Triggers[Scan Triggers]</div>
<div class="line">            Push([Code Push])</div>
<div class="line">            PR([Pull Request])</div>
<div class="line">            Schedule([Nightly/Weekly])</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph SAST[SAST Analysis]</div>
<div class="line">            Bandit[Bandit&lt;br/&gt;Python SAST]</div>
<div class="line">            CodeQL[CodeQL&lt;br/&gt;Multi-language]</div>
<div class="line">            Semgrep[Semgrep&lt;br/&gt;Pattern Detection]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph SCA[Dependency Scanning]</div>
<div class="line">            Safety[Safety&lt;br/&gt;Python Deps]</div>
<div class="line">            Snyk[Snyk&lt;br/&gt;All Deps]</div>
<div class="line">            Debricked[Debricked&lt;br/&gt;Analysis]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Container[Container Security]</div>
<div class="line">            Trivy[Trivy&lt;br/&gt;Image Scan]</div>
<div class="line">            Hadolint[Hadolint&lt;br/&gt;Dockerfile]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Results[Results Processing]</div>
<div class="line">            SARIF[SARIF Upload]</div>
<div class="line">            SecurityTab[GitHub Security&lt;br/&gt;Tab]</div>
<div class="line">            Artifacts[Scan Artifacts]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    Push --&gt; SAST</div>
<div class="line">    Push --&gt; SCA</div>
<div class="line">    PR --&gt; SAST</div>
<div class="line">    PR --&gt; SCA</div>
<div class="line">    PR --&gt; Container</div>
<div class="line">    Schedule --&gt; SAST</div>
<div class="line">    Schedule --&gt; SCA</div>
<div class="line">    Schedule --&gt; Container</div>
<div class="line"> </div>
<div class="line">    SAST --&gt; SARIF</div>
<div class="line">    SCA --&gt; SARIF</div>
<div class="line">    Container --&gt; SARIF</div>
<div class="line"> </div>
<div class="line">    SARIF --&gt; SecurityTab</div>
<div class="line">    SARIF --&gt; Artifacts</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2557"></a>
6.6.6.5 Authentication Testing</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Test Category   </th><th class="markdownTableHeadNone">Validation   </th><th class="markdownTableHeadNone">Location    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">JWT Token Flow   </td><td class="markdownTableBodyNone">Token generation, expiration   </td><td class="markdownTableBodyNone"><code><a class="el" href="test__api__integration_8py.html">tests/integration/test_api_integration.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Password Hashing   </td><td class="markdownTableBodyNone">pbkdf2_sha256 verification   </td><td class="markdownTableBodyNone"><code><a class="el" href="test__api__main_8py.html">tests/unit/test_api_main.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Rate Limiting   </td><td class="markdownTableBodyNone">5/min on <code>/token</code>   </td><td class="markdownTableBodyNone">Integration tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CORS Validation   </td><td class="markdownTableBodyNone">Origin allowlist   </td><td class="markdownTableBodyNone">Unit tests   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2559"></a>
6.6.7 Quality Metrics</h3>
<h4><a class="anchor" id="autotoc_md2560"></a>
6.6.7.1 Code Coverage Targets</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Current   </th><th class="markdownTableHeadNone">Target   </th><th class="markdownTableHeadNone">Critical Paths    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Backend API   </td><td class="markdownTableBodyNone">&gt;90%   </td><td class="markdownTableBodyNone">&gt;80%   </td><td class="markdownTableBodyNone">100%    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Frontend API Client   </td><td class="markdownTableBodyNone">&gt;95%   </td><td class="markdownTableBodyNone">&gt;80%   </td><td class="markdownTableBodyNone">100%    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">React Components   </td><td class="markdownTableBodyNone">&gt;80%   </td><td class="markdownTableBodyNone">&gt;80%   </td><td class="markdownTableBodyNone">100%    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Domain Models   </td><td class="markdownTableBodyNone">&gt;85%   </td><td class="markdownTableBodyNone">&gt;80%   </td><td class="markdownTableBodyNone">100%    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Visualization   </td><td class="markdownTableBodyNone">&gt;75%   </td><td class="markdownTableBodyNone">&gt;70%   </td><td class="markdownTableBodyNone">100%   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2561"></a>
6.6.7.2 Static Analysis Thresholds</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Tool   </th><th class="markdownTableHeadNone">Metric   </th><th class="markdownTableHeadNone">Threshold   </th><th class="markdownTableHeadNone">Enforcement    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">pylint   </td><td class="markdownTableBodyNone">Score   </td><td class="markdownTableBodyNone">&gt;= 7.0   </td><td class="markdownTableBodyNone">CI blocking    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">black   </td><td class="markdownTableBodyNone">Formatting   </td><td class="markdownTableBodyNone">100%   </td><td class="markdownTableBodyNone">CI blocking    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">flake8   </td><td class="markdownTableBodyNone">Errors   </td><td class="markdownTableBodyNone">0 critical   </td><td class="markdownTableBodyNone">CI blocking    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">isort   </td><td class="markdownTableBodyNone">Import order   </td><td class="markdownTableBodyNone">100%   </td><td class="markdownTableBodyNone">CI blocking    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESLint   </td><td class="markdownTableBodyNone">Errors   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">CI blocking   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2562"></a>
6.6.7.3 Performance Test Thresholds</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Operation   </th><th class="markdownTableHeadNone">Target SLA   </th><th class="markdownTableHeadNone">Measurement    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Response (p95)   </td><td class="markdownTableBodyNone">&lt; 500ms   </td><td class="markdownTableBodyNone">Request to response    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visualization Rendering   </td><td class="markdownTableBodyNone">&lt; 2 seconds   </td><td class="markdownTableBodyNone">Data load to interactive    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Token Generation   </td><td class="markdownTableBodyNone">&lt; 100ms   </td><td class="markdownTableBodyNone">Credential to token    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Graph Initialization   </td><td class="markdownTableBodyNone">&lt; 3 seconds   </td><td class="markdownTableBodyNone">Application startup    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Relationship Discovery   </td><td class="markdownTableBodyNone">&lt; 500ms   </td><td class="markdownTableBodyNone">For 100 assets    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Initial Page Load   </td><td class="markdownTableBodyNone">&lt; 3 seconds   </td><td class="markdownTableBodyNone">Navigation to interactive   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2563"></a>
6.6.7.4 Quality Gates</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph QualityGates[Quality Gate Checkpoints]</div>
<div class="line">        PRSubmit([PR Submitted]) --&gt; Gate1{Code Coverage&lt;br/&gt;&gt;= 80%?}</div>
<div class="line"> </div>
<div class="line">        Gate1 --&gt;|No| Block1[Block Merge]</div>
<div class="line">        Gate1 --&gt;|Yes| Gate2{Linting&lt;br/&gt;Passed?}</div>
<div class="line"> </div>
<div class="line">        Gate2 --&gt;|No| Block2[Block Merge]</div>
<div class="line">        Gate2 --&gt;|Yes| Gate3{Tests&lt;br/&gt;Passed?}</div>
<div class="line"> </div>
<div class="line">        Gate3 --&gt;|No| Block3[Block Merge]</div>
<div class="line">        Gate3 --&gt;|Yes| Gate4{Security&lt;br/&gt;Scan Clean?}</div>
<div class="line"> </div>
<div class="line">        Gate4 --&gt;|Critical| Block4[Block Merge]</div>
<div class="line">        Gate4 --&gt;|Warning/Clean| Gate5{Build&lt;br/&gt;Success?}</div>
<div class="line"> </div>
<div class="line">        Gate5 --&gt;|No| Block5[Block Merge]</div>
<div class="line">        Gate5 --&gt;|Yes| Approve([Ready for Review])</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2564"></a>
6.6.7.5 Test Success Rate Requirements</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Environment   </th><th class="markdownTableHeadNone">Required Pass Rate   </th><th class="markdownTableHeadNone">Action on Failure    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Unit Tests   </td><td class="markdownTableBodyNone">100%   </td><td class="markdownTableBodyNone">Block merge    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration Tests   </td><td class="markdownTableBodyNone">100%   </td><td class="markdownTableBodyNone">Block merge    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Security Scans   </td><td class="markdownTableBodyNone">No critical   </td><td class="markdownTableBodyNone">Block merge    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Linting   </td><td class="markdownTableBodyNone">100%   </td><td class="markdownTableBodyNone">Block merge   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2566"></a>
6.6.8 Test Environment Architecture</h3>
<h4><a class="anchor" id="autotoc_md2567"></a>
6.6.8.1 Environment Configuration</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph TestEnvironments[Test Environment Architecture]</div>
<div class="line">        subgraph LocalDev[Local Development]</div>
<div class="line">            LocalPytest[pytest&lt;br/&gt;Direct execution]</div>
<div class="line">            LocalJest[Jest&lt;br/&gt;Watch mode]</div>
<div class="line">            LocalDB[SQLite&lt;br/&gt;In-memory]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph CI[CI Environment]</div>
<div class="line">            GitHubRunner[GitHub Actions&lt;br/&gt;Ubuntu Latest]</div>
<div class="line">            CircleCIRunner[CircleCI&lt;br/&gt;Python/Node Images]</div>
<div class="line">            CIDatabase[Ephemeral&lt;br/&gt;SQLite]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Docker[Docker Testing]</div>
<div class="line">            DockerBuild[Build Validation]</div>
<div class="line">            SmokeTest[Container&lt;br/&gt;Smoke Test]</div>
<div class="line">            HealthCheck[Health Check&lt;br/&gt;Probe]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    LocalDev --&gt;|Push| CI</div>
<div class="line">    CI --&gt;|Build| Docker</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2568"></a>
6.6.8.2 Backend Test Environment</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Python Version   </td><td class="markdownTableBodyNone">3.10, 3.11, 3.12    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Database   </td><td class="markdownTableBodyNone">SQLite in-memory    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Graph State   </td><td class="markdownTableBodyNone">Reset per test    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">External APIs   </td><td class="markdownTableBodyNone">Mocked/Sample data   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2569"></a>
6.6.8.3 Frontend Test Environment</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Node Version   </td><td class="markdownTableBodyNone">18.x, 20.x, 22.x    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Test Environment   </td><td class="markdownTableBodyNone">jest-environment-jsdom    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Mocking   </td><td class="markdownTableBodyNone">jest.mock('axios')    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Browser APIs   </td><td class="markdownTableBodyNone">window.matchMedia, IntersectionObserver mocked   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2570"></a>
6.6.8.4 Docker Test Environment</h4>
<p><b>Location</b>: <code>.github/workflows/docker.yml</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Test   </th><th class="markdownTableHeadNone">Command   </th><th class="markdownTableHeadNone">Validation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Build   </td><td class="markdownTableBodyNone"><code>docker build</code>   </td><td class="markdownTableBodyNone">Image creation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Smoke Test   </td><td class="markdownTableBodyNone">HTTP probe   </td><td class="markdownTableBodyNone">10s health check    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Config Validation   </td><td class="markdownTableBodyNone"><code>docker-compose config</code>   </td><td class="markdownTableBodyNone">YAML syntax    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Security Scan   </td><td class="markdownTableBodyNone">Trivy   </td><td class="markdownTableBodyNone">Vulnerability check   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2572"></a>
6.6.9 Test Execution Flow</h3>
<h4><a class="anchor" id="autotoc_md2573"></a>
6.6.9.1 Complete Test Execution Pipeline</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph TestExecutionFlow[Test Execution Pipeline]</div>
<div class="line">        Trigger([Trigger:&lt;br/&gt;Push/PR/Manual]) --&gt; Checkout[Checkout&lt;br/&gt;Repository]</div>
<div class="line"> </div>
<div class="line">        Checkout --&gt; ParallelStart{Start Parallel&lt;br/&gt;Execution}</div>
<div class="line"> </div>
<div class="line">        ParallelStart --&gt; BackendTrack</div>
<div class="line">        ParallelStart --&gt; FrontendTrack</div>
<div class="line">        ParallelStart --&gt; SecurityTrack</div>
<div class="line"> </div>
<div class="line">        subgraph BackendTrack[Backend Track]</div>
<div class="line">            PyMatrix[Python Matrix&lt;br/&gt;3.10, 3.11, 3.12]</div>
<div class="line">            PyMatrix --&gt; PyLint[Linting&lt;br/&gt;flake8, black, isort]</div>
<div class="line">            PyLint --&gt; PyTest[pytest&lt;br/&gt;--cov=src]</div>
<div class="line">            PyTest --&gt; PyCoverage[Coverage&lt;br/&gt;Upload]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph FrontendTrack[Frontend Track]</div>
<div class="line">            NodeMatrix[Node Matrix&lt;br/&gt;18.x, 20.x, 22.x]</div>
<div class="line">            NodeMatrix --&gt; NodeLint[npm run lint]</div>
<div class="line">            NodeLint --&gt; NodeBuild[npm run build]</div>
<div class="line">            NodeBuild --&gt; NodeTest[npm test]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph SecurityTrack[Security Track]</div>
<div class="line">            SASTScans[SAST Scans&lt;br/&gt;Bandit, CodeQL]</div>
<div class="line">            SASTScans --&gt; SCAScans[SCA Scans&lt;br/&gt;Safety, Snyk]</div>
<div class="line">            SCAScans --&gt; ContainerScans[Container Scans&lt;br/&gt;Trivy]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        BackendTrack --&gt; Aggregate{Aggregate&lt;br/&gt;Results}</div>
<div class="line">        FrontendTrack --&gt; Aggregate</div>
<div class="line">        SecurityTrack --&gt; Aggregate</div>
<div class="line"> </div>
<div class="line">        Aggregate --&gt; QualityGate{Quality&lt;br/&gt;Gates Met?}</div>
<div class="line">        QualityGate --&gt;|Yes| Success([Pipeline&lt;br/&gt;Success])</div>
<div class="line">        QualityGate --&gt;|No| Failure([Pipeline&lt;br/&gt;Failure])</div>
<div class="line">    end</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2574"></a>
6.6.9.2 Test Execution Commands</h4>
<h4><a class="anchor" id="autotoc_md2575"></a>
Backend Commands</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Command   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>pytest</code>   </td><td class="markdownTableBodyNone">Run all tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>pytest -m unit</code>   </td><td class="markdownTableBodyNone">Run unit tests only    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>pytest -m integration</code>   </td><td class="markdownTableBodyNone">Run integration tests only    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>pytest --cov=src --cov-report=html</code>   </td><td class="markdownTableBodyNone">Coverage with HTML report    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>make test</code>   </td><td class="markdownTableBodyNone">Makefile shortcut   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2576"></a>
Frontend Commands</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Command   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>npm test</code>   </td><td class="markdownTableBodyNone">Run all tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>npm test -- --coverage</code>   </td><td class="markdownTableBodyNone">Tests with coverage    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>npm test -- --watch</code>   </td><td class="markdownTableBodyNone">Watch mode    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>npm run test:ci</code>   </td><td class="markdownTableBodyNone">CI-optimized execution   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md2578"></a>
6.6.10 References</h3>
<h4><a class="anchor" id="autotoc_md2579"></a>
6.6.10.1 Source Files Examined</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Path   </th><th class="markdownTableHeadNone">Relevance    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>pyproject.toml</code>   </td><td class="markdownTableBodyNone">Pytest configuration, coverage settings, tool configs    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>conftest.py</code> (root)   </td><td class="markdownTableBodyNone">Coverage plugin handling    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="tests_2conftest_8py.html">tests/conftest.py</a></code>   </td><td class="markdownTableBodyNone">Shared backend fixtures    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="tests_2____init_____8py.html">tests/__init__.py</a></code>   </td><td class="markdownTableBodyNone">Test environment setup    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="tests_2unit_2test__api_8py.html">tests/unit/test_api.py</a></code>   </td><td class="markdownTableBodyNone">API unit tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="test__api__main_8py.html">tests/unit/test_api_main.py</a></code>   </td><td class="markdownTableBodyNone">Comprehensive API tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="test__financial__models_8py.html">tests/unit/test_financial_models.py</a></code>   </td><td class="markdownTableBodyNone">Domain model validation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="unit_2test__repository_8py.html">tests/unit/test_repository.py</a></code>   </td><td class="markdownTableBodyNone">Repository tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="test__graph__visuals_8py.html">tests/unit/test_graph_visuals.py</a></code>   </td><td class="markdownTableBodyNone">Visualization tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="test__api__integration_8py.html">tests/integration/test_api_integration.py</a></code>   </td><td class="markdownTableBodyNone">Integration tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="integration_2test__repository_8py.html">tests/integration/test_repository.py</a></code>   </td><td class="markdownTableBodyNone">Database integration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="tests_2integration_2conftest_8py.html">tests/integration/conftest.py</a></code>   </td><td class="markdownTableBodyNone">Integration fixtures    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/jest.config.js</code>   </td><td class="markdownTableBodyNone">Jest configuration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/jest.setup.js</code>   </td><td class="markdownTableBodyNone">Jest environment setup    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/package.json</code>   </td><td class="markdownTableBodyNone">Frontend test scripts    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/__tests__/test-utils.ts</code>   </td><td class="markdownTableBodyNone">Mock data utilities    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/__tests__/lib/api.test.ts</code>   </td><td class="markdownTableBodyNone">API client tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.github/workflows/ci.yml</code>   </td><td class="markdownTableBodyNone">Primary CI workflow    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.github/workflows/codecov.yaml</code>   </td><td class="markdownTableBodyNone">Coverage reporting    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.github/workflows/node.js.yml</code>   </td><td class="markdownTableBodyNone">Frontend CI    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.github/workflows/docker.yml</code>   </td><td class="markdownTableBodyNone">Docker testing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.github/workflows/bandit.yml</code>   </td><td class="markdownTableBodyNone">Security scanning    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.github/workflows/snyk-security.yml</code>   </td><td class="markdownTableBodyNone">Snyk scanning    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.circleci/config.yml</code>   </td><td class="markdownTableBodyNone">Secondary CI   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2580"></a>
6.6.10.2 Testing Documentation Files</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Path   </th><th class="markdownTableHeadNone">Relevance    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="TESTING_8md.html">TESTING.md</a></code>   </td><td class="markdownTableBodyNone">Testing guide overview    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="TESTING__GUIDE_8md.html">TESTING_GUIDE.md</a></code>   </td><td class="markdownTableBodyNone">Comprehensive testing documentation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="TEST__SUMMARY_8md.html">TEST_SUMMARY.md</a></code>   </td><td class="markdownTableBodyNone">Test generation summary    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="tests_2README_8md.html">tests/README.md</a></code>   </td><td class="markdownTableBodyNone">Test suite documentation   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2581"></a>
6.6.10.3 Technical Specification Cross-References</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Section   </th><th class="markdownTableHeadNone">Relevance    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3.1 Technology Stack Overview   </td><td class="markdownTableBodyNone">Framework versions, tool choices    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">5.4 CROSS-CUTTING CONCERNS   </td><td class="markdownTableBodyNone">Performance SLAs, error handling    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5.5 DEPLOYMENT ARCHITECTURE   </td><td class="markdownTableBodyNone">Test environment targets    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6.1 Core Services Architecture   </td><td class="markdownTableBodyNone">Monolithic testing implications    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">6.3 Integration Architecture   </td><td class="markdownTableBodyNone">API testing patterns    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6.4 Security Architecture   </td><td class="markdownTableBodyNone">Security testing requirements    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">6.5 Monitoring and Observability   </td><td class="markdownTableBodyNone">CI/CD quality gates   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2582"></a>
6.6.10.4 External Resources</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Resource   </th><th class="markdownTableHeadNone">Context    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FastAPI Testing Documentation   </td><td class="markdownTableBodyNone">Official TestClient patterns    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">pytest Documentation   </td><td class="markdownTableBodyNone">Test framework reference    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Jest Documentation   </td><td class="markdownTableBodyNone">Frontend testing reference    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">React Testing Library   </td><td class="markdownTableBodyNone">Component testing best practices    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Codecov   </td><td class="markdownTableBodyNone">Coverage reporting integration   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md2583"></a>
7. User Interface Design</h1>
<h2><a class="anchor" id="autotoc_md2584"></a>
7.1 Overview</h2>
<h3><a class="anchor" id="autotoc_md2585"></a>
7.1.1 Executive Summary</h3>
<p>The Financial Asset Relationship Database implements a <b>dual-UI architecture</b> providing two distinct user interface experiences: a legacy <b>Gradio UI</b> for Python-native rapid prototyping and a modern <b>Next.js Frontend</b> for production-ready web deployment. Both interfaces share a common visualization foundation built on <b>Plotly</b> and expose the same underlying graph engine capabilities through different integration patterns.</p>
<p>This architectural decision enables the system to serve multiple user personas—from data scientists who prefer Python-centric workflows to enterprise users requiring polished web applications—while maintaining consistency in data visualization and business logic.</p>
<h3><a class="anchor" id="autotoc_md2586"></a>
7.1.2 UI Architecture Overview</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Aspect   </th><th class="markdownTableHeadNone">Gradio UI   </th><th class="markdownTableHeadNone">Next.js Frontend    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Primary Use Case</b>   </td><td class="markdownTableBodyNone">Rapid prototyping, Python development   </td><td class="markdownTableBodyNone">Production deployment, enterprise users    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Technology Stack</b>   </td><td class="markdownTableBodyNone">Python/Gradio/Plotly (server-side)   </td><td class="markdownTableBodyNone">React/TypeScript/Tailwind/Plotly.js (client-side)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Integration Pattern</b>   </td><td class="markdownTableBodyNone">Direct Python function calls   </td><td class="markdownTableBodyNone">REST API via FastAPI    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Default Port</b>   </td><td class="markdownTableBodyNone">7860   </td><td class="markdownTableBodyNone">3000 (frontend) + 8000 (API)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Deployment Target</b>   </td><td class="markdownTableBodyNone">Local/Docker   </td><td class="markdownTableBodyNone">Vercel Edge + FastAPI    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Responsive Design</b>   </td><td class="markdownTableBodyNone">Limited   </td><td class="markdownTableBodyNone">Full mobile support   </td></tr>
</table>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph UserInterfaces[User Interface Layer]</div>
<div class="line">        subgraph GradioUI[Gradio UI - Port 7860]</div>
<div class="line">            GradioTabs[6 Tabbed Sections]</div>
<div class="line">            GradioPlotly[Server-Side Plotly]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph NextJSUI[Next.js Frontend - Port 3000]</div>
<div class="line">            ReactComponents[React Components]</div>
<div class="line">            ClientPlotly[Client-Side Plotly.js]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Integration[Integration Layer]</div>
<div class="line">        DirectCall[Direct Python Calls]</div>
<div class="line">        RESTApi[REST API - Port 8000]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Backend[Backend Layer]</div>
<div class="line">        GraphEngine[Graph Engine]</div>
<div class="line">        Visualization[Visualization Module]</div>
<div class="line">        Metrics[Metrics Calculator]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    GradioUI --&gt; DirectCall</div>
<div class="line">    NextJSUI --&gt; RESTApi</div>
<div class="line">    DirectCall --&gt; GraphEngine</div>
<div class="line">    RESTApi --&gt; GraphEngine</div>
<div class="line">    GraphEngine --&gt; Visualization</div>
<div class="line">    GraphEngine --&gt; Metrics</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md2588"></a>
7.2 Core UI Technologies</h2>
<h3><a class="anchor" id="autotoc_md2589"></a>
7.2.1 Next.js Frontend Technology Stack</h3>
<p>The modern frontend is built on an enterprise-grade React framework stack optimized for performance, type safety, and developer experience.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technology   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Configuration Location    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Next.js</b>   </td><td class="markdownTableBodyNone">14.2.35   </td><td class="markdownTableBodyNone">React meta-framework with App Router   </td><td class="markdownTableBodyNone"><code>frontend/package.json</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>React</b>   </td><td class="markdownTableBodyNone">18.2.0   </td><td class="markdownTableBodyNone">UI component library   </td><td class="markdownTableBodyNone"><code>frontend/package.json</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>TypeScript</b>   </td><td class="markdownTableBodyNone">^5.3.0   </td><td class="markdownTableBodyNone">Static type checking   </td><td class="markdownTableBodyNone"><code>frontend/tsconfig.json</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Tailwind CSS</b>   </td><td class="markdownTableBodyNone">3.3.0   </td><td class="markdownTableBodyNone">Utility-first CSS framework   </td><td class="markdownTableBodyNone"><code>frontend/tailwind.config.js</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Plotly.js</b>   </td><td class="markdownTableBodyNone">^2.27.0   </td><td class="markdownTableBodyNone">3D visualization rendering   </td><td class="markdownTableBodyNone"><code>frontend/package.json</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>react-plotly.js</b>   </td><td class="markdownTableBodyNone">^2.6.0   </td><td class="markdownTableBodyNone">React Plotly wrapper   </td><td class="markdownTableBodyNone"><code>frontend/package.json</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Axios</b>   </td><td class="markdownTableBodyNone">Latest   </td><td class="markdownTableBodyNone">HTTP client for API communication   </td><td class="markdownTableBodyNone"><code>frontend/package.json</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2590"></a>
Framework Selection Rationale</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Framework   </th><th class="markdownTableHeadNone">Selection Criteria   </th><th class="markdownTableHeadNone">Benefit    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Next.js 14   </td><td class="markdownTableBodyNone">App Router, SSR capabilities, edge deployment   </td><td class="markdownTableBodyNone">Modern React patterns with optimized bundling    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">TypeScript   </td><td class="markdownTableBodyNone">Type safety across components and API contracts   </td><td class="markdownTableBodyNone">Catch errors at compile time, improved IDE support    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Tailwind CSS   </td><td class="markdownTableBodyNone">Rapid UI development, consistent design system   </td><td class="markdownTableBodyNone">Utility classes reduce CSS overhead    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Plotly.js   </td><td class="markdownTableBodyNone">Complex 3D visualization support   </td><td class="markdownTableBodyNone">Interactive, zoom/rotate/hover capabilities   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2591"></a>
7.2.2 Gradio UI Technology Stack</h3>
<p>The legacy UI provides a Python-native interface optimized for data science workflows and rapid prototyping.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technology   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Configuration Location    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Gradio</b>   </td><td class="markdownTableBodyNone">≥4.0.0,&lt;6.0.0   </td><td class="markdownTableBodyNone">Python-native web interface   </td><td class="markdownTableBodyNone"><code>requirements.txt</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Plotly</b>   </td><td class="markdownTableBodyNone">≥6.0.0   </td><td class="markdownTableBodyNone">Server-side visualization   </td><td class="markdownTableBodyNone"><code>requirements.txt</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2592"></a>
Gradio Selection Rationale</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Capability   </th><th class="markdownTableHeadNone">Value Proposition    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Zero Frontend Setup   </td><td class="markdownTableBodyNone">Python developers can create UIs without JavaScript knowledge    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Rapid Prototyping   </td><td class="markdownTableBodyNone">Interactive UIs from Python functions in minutes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Direct Python Integration   </td><td class="markdownTableBodyNone">No API serialization overhead for development    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Component Library   </td><td class="markdownTableBodyNone">Pre-built UI widgets for common visualization patterns   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2593"></a>
7.2.3 Shared Visualization Foundation</h3>
<p>Both UI implementations leverage Plotly for visualization rendering, ensuring visual consistency across platforms:</p>
<div class="fragment"><div class="line">flowchart LR</div>
<div class="line">    subgraph VisualizationLayer[Shared Visualization Layer]</div>
<div class="line">        ColorScheme[Asset Color Mapping]</div>
<div class="line">        EdgeColors[Relationship Colors]</div>
<div class="line">        LayoutEngine[3D Layout Calculator]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph ServerSide[Server-Side - Gradio]</div>
<div class="line">        PlotlyPython[Plotly Python ≥6.0.0]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph ClientSide[Client-Side - Next.js]</div>
<div class="line">        PlotlyJS[Plotly.js ^2.27.0]</div>
<div class="line">        ReactPlotly[react-plotly.js]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    VisualizationLayer --&gt; PlotlyPython</div>
<div class="line">    VisualizationLayer --&gt; PlotlyJS</div>
<div class="line">    PlotlyJS --&gt; ReactPlotly</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md2595"></a>
7.3 UI Use Cases and Screens</h2>
<h3><a class="anchor" id="autotoc_md2596"></a>
7.3.1 Next.js Frontend Screens</h3>
<p>The Next.js frontend implements three primary views accessible via tab navigation:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Tab   </th><th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Location   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>3D Visualization</b>   </td><td class="markdownTableBodyNone"><code>NetworkVisualization</code>   </td><td class="markdownTableBodyNone"><code>frontend/app/components/NetworkVisualization.tsx</code>   </td><td class="markdownTableBodyNone">Interactive 3D graph of asset relationships    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Metrics &amp; Analytics</b>   </td><td class="markdownTableBodyNone"><code>MetricsDashboard</code>   </td><td class="markdownTableBodyNone"><code>frontend/app/components/MetricsDashboard.tsx</code>   </td><td class="markdownTableBodyNone">Grid display of network statistics    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Asset Explorer</b>   </td><td class="markdownTableBodyNone"><code>AssetList</code>   </td><td class="markdownTableBodyNone"><code>frontend/app/components/AssetList.tsx</code>   </td><td class="markdownTableBodyNone">Filterable, paginated asset table   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md2597"></a>
Next.js Screen Structure</h2>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph NextJSApp[Next.js Application Structure]</div>
<div class="line">        RootLayout[Root Layout&lt;br/&gt;layout.tsx]</div>
<div class="line"> </div>
<div class="line">        subgraph HomePage[Home Page - page.tsx]</div>
<div class="line">            TabNav[Tab Navigation]</div>
<div class="line"> </div>
<div class="line">            subgraph TabContent[Tab Content Area]</div>
<div class="line">                VizTab[3D Visualization Tab]</div>
<div class="line">                MetricsTab[Metrics Tab]</div>
<div class="line">                AssetsTab[Asset Explorer Tab]</div>
<div class="line">            end</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        RootLayout --&gt; HomePage</div>
<div class="line">        TabNav --&gt; VizTab</div>
<div class="line">        TabNav --&gt; MetricsTab</div>
<div class="line">        TabNav --&gt; AssetsTab</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Components[Component Library]</div>
<div class="line">        NetworkViz[NetworkVisualization.tsx]</div>
<div class="line">        MetricsDash[MetricsDashboard.tsx]</div>
<div class="line">        AssetsList[AssetList.tsx]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    VizTab --&gt; NetworkViz</div>
<div class="line">    MetricsTab --&gt; MetricsDash</div>
<div class="line">    AssetsTab --&gt; AssetsList</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2598"></a>
7.3.2 Gradio UI Screens</h3>
<p>The Gradio interface implements six tabbed sections providing comprehensive access to all system capabilities:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Tab   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Primary Components    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>🌐 Network Visualization (2D/3D)</b>   </td><td class="markdownTableBodyNone">Interactive network graph with filtering   </td><td class="markdownTableBodyNone">Plot, Radio buttons, Checkboxes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Metrics &amp; Analytics</b>   </td><td class="markdownTableBodyNone">Distribution charts and statistics   </td><td class="markdownTableBodyNone">Multiple Plot components    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Schema &amp; Rules</b>   </td><td class="markdownTableBodyNone">Auto-generated data model documentation   </td><td class="markdownTableBodyNone">Markdown display    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Asset Explorer</b>   </td><td class="markdownTableBodyNone">Asset detail viewer   </td><td class="markdownTableBodyNone">Dropdown, JSON displays    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Documentation</b>   </td><td class="markdownTableBodyNone">Static help documentation   </td><td class="markdownTableBodyNone">Markdown display    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>📊 Formulaic Analysis</b>   </td><td class="markdownTableBodyNone">Mathematical formula dashboard   </td><td class="markdownTableBodyNone">Plots, Dropdown, Textbox   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2599"></a>
Gradio Tab Architecture</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph GradioApp[Gradio Application - app.py]</div>
<div class="line">        Blocks[gr.Blocks Container]</div>
<div class="line"> </div>
<div class="line">        subgraph Tabs[Tab Navigation]</div>
<div class="line">            Tab1[🌐 Network Visualization]</div>
<div class="line">            Tab2[Metrics &amp; Analytics]</div>
<div class="line">            Tab3[Schema &amp; Rules]</div>
<div class="line">            Tab4[Asset Explorer]</div>
<div class="line">            Tab5[Documentation]</div>
<div class="line">            Tab6[📊 Formulaic Analysis]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        Blocks --&gt; Tabs</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Tab1Content[Network Visualization Content]</div>
<div class="line">        ViewMode[2D/3D Toggle]</div>
<div class="line">        LayoutType[Layout Selector]</div>
<div class="line">        RelFilters[8 Relationship Checkboxes]</div>
<div class="line">        GraphPlot[Network Graph Plot]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Tab6Content[Formulaic Analysis Content]</div>
<div class="line">        Dashboard[Dashboard Plot]</div>
<div class="line">        CorrelationNet[Correlation Network]</div>
<div class="line">        FormulaSelect[Formula Selector]</div>
<div class="line">        FormulaDetails[Formula Details]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    Tab1 --&gt; Tab1Content</div>
<div class="line">    Tab6 --&gt; Tab6Content</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2600"></a>
7.3.3 Feature Parity Matrix</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Feature   </th><th class="markdownTableHeadCenter">Gradio UI   </th><th class="markdownTableHeadCenter">Next.js UI   </th><th class="markdownTableHeadNone">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3D Network Visualization   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyNone">Both use Plotly    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2D Network Visualization   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyNone">Gradio-only    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Metrics Dashboard   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyNone">Different layouts    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Asset Explorer   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyNone">Next.js has better filtering    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Asset Class Filtering   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyNone">URL-synced in Next.js    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Sector Filtering   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyNone">URL-synced in Next.js    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Pagination   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyNone">Next.js only    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Relationship Filtering   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyNone">8 checkboxes in Gradio    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Schema Report   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyNone">Gradio-only    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Documentation Tab   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyNone">Gradio-only    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Formulaic Analysis   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyNone">Advanced analytics    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Mobile Responsive   </td><td class="markdownTableBodyCenter">⚠️ Limited   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyNone">Full Tailwind support    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Custom Branding   </td><td class="markdownTableBodyCenter">⚠️ Limited   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyNone">Full CSS control    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">REST API Access   </td><td class="markdownTableBodyCenter">❌   </td><td class="markdownTableBodyCenter">✅   </td><td class="markdownTableBodyNone">Frontend API client   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2602"></a>
7.4 UI/Backend Interaction Boundaries</h2>
<h3><a class="anchor" id="autotoc_md2603"></a>
7.4.1 Next.js ↔ FastAPI Interaction</h3>
<p>The Next.js frontend communicates with the FastAPI backend via HTTP/JSON through a typed API client layer.</p>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant User as User Browser</div>
<div class="line">    participant Page as Next.js Page</div>
<div class="line">    participant Client as API Client&lt;br/&gt;(api.ts)</div>
<div class="line">    participant Axios as Axios HTTP</div>
<div class="line">    participant Backend as FastAPI&lt;br/&gt;(Port 8000)</div>
<div class="line">    participant Graph as Graph Engine</div>
<div class="line"> </div>
<div class="line">    User-&gt;&gt;Page: Navigate to Page</div>
<div class="line">    Page-&gt;&gt;Page: useEffect Hook</div>
<div class="line"> </div>
<div class="line">    par Parallel Data Fetch</div>
<div class="line">        Page-&gt;&gt;Client: getMetrics()</div>
<div class="line">        Client-&gt;&gt;Axios: GET /api/metrics</div>
<div class="line">        Axios-&gt;&gt;Backend: HTTP Request</div>
<div class="line">        Backend-&gt;&gt;Graph: calculate_metrics()</div>
<div class="line">        Graph--&gt;&gt;Backend: Metrics Data</div>
<div class="line">        Backend--&gt;&gt;Axios: JSON Response</div>
<div class="line">        Axios--&gt;&gt;Client: Response Object</div>
<div class="line">        Client--&gt;&gt;Page: Metrics</div>
<div class="line">    and</div>
<div class="line">        Page-&gt;&gt;Client: getVisualizationData()</div>
<div class="line">        Client-&gt;&gt;Axios: GET /api/visualization</div>
<div class="line">        Axios-&gt;&gt;Backend: HTTP Request</div>
<div class="line">        Backend-&gt;&gt;Graph: get_3d_visualization_data()</div>
<div class="line">        Graph--&gt;&gt;Backend: Node/Edge Data</div>
<div class="line">        Backend--&gt;&gt;Axios: JSON Response</div>
<div class="line">        Axios--&gt;&gt;Client: Response Object</div>
<div class="line">        Client--&gt;&gt;Page: Visualization Data</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    Page-&gt;&gt;Page: setState(data)</div>
<div class="line">    Page-&gt;&gt;User: Render Components</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2604"></a>
API Client Configuration</h4>
<p><b>Location</b>: <code>frontend/app/lib/api.ts</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Configuration   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="classBase.html">Base</a> URL   </td><td class="markdownTableBodyNone"><code><a href="http://localhost:8000">http://localhost:8000</a></code>   </td><td class="markdownTableBodyNone">FastAPI server address    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Timeout   </td><td class="markdownTableBodyNone">Default (Axios)   </td><td class="markdownTableBodyNone">Request timeout handling    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Error Handling   </td><td class="markdownTableBodyNone">Try/catch with console.error   </td><td class="markdownTableBodyNone">Development debugging   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2605"></a>
REST Endpoint Consumption</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Frontend Usage   </th><th class="markdownTableHeadNone">Component    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/health</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Health check   </td><td class="markdownTableBodyNone">Page load validation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/assets</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Asset list with filters   </td><td class="markdownTableBodyNone"><code>AssetList.tsx</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/assets/{id}</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Single asset details   </td><td class="markdownTableBodyNone">Asset detail view    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/assets/{id}/relationships</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Asset relationships   </td><td class="markdownTableBodyNone">Relationship display    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/relationships</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">All relationships   </td><td class="markdownTableBodyNone">Visualization edges    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/metrics</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Network statistics   </td><td class="markdownTableBodyNone"><code>MetricsDashboard.tsx</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/visualization</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">3D graph data   </td><td class="markdownTableBodyNone"><code>NetworkVisualization.tsx</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/asset-classes</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Filter dropdown options   </td><td class="markdownTableBodyNone"><code>AssetList.tsx</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/sectors</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Filter dropdown options   </td><td class="markdownTableBodyNone"><code>AssetList.tsx</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/token</code>   </td><td class="markdownTableBodyNone">POST   </td><td class="markdownTableBodyNone">JWT authentication   </td><td class="markdownTableBodyNone">Auth flows    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/users/me</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Current user info   </td><td class="markdownTableBodyNone">User profile   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2606"></a>
Security Boundaries</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Security Control   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Location    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CORS   </td><td class="markdownTableBodyNone">Origin allowlist validation   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Rate Limiting   </td><td class="markdownTableBodyNone">IP-based throttling   </td><td class="markdownTableBodyNone"><code>/token</code>: 5/min, <code>/api/users/me</code>: 10/min    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">JWT Authentication   </td><td class="markdownTableBodyNone">Bearer token header   </td><td class="markdownTableBodyNone">Protected endpoints    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Input Validation   </td><td class="markdownTableBodyNone">Pydantic models   </td><td class="markdownTableBodyNone">All API endpoints   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2607"></a>
7.4.2 Gradio ↔ Python Core Interaction</h3>
<p>The Gradio UI bypasses the REST API, directly invoking Python functions from the core library.</p>
<div class="fragment"><div class="line">flowchart LR</div>
<div class="line">    subgraph GradioUI[Gradio UI Layer]</div>
<div class="line">        EventHandler[Event Handlers]</div>
<div class="line">        Components[UI Components]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph CorePython[Python Core Layer]</div>
<div class="line">        GraphVisuals[graph_visuals.py]</div>
<div class="line">        MetricVisuals[metric_visuals.py]</div>
<div class="line">        SchemaReport[schema_report.py]</div>
<div class="line">        FormulaicVisuals[formulaic_visuals.py]</div>
<div class="line">        AssetGraph[asset_graph.py]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    EventHandler --&gt;|Direct Import| GraphVisuals</div>
<div class="line">    EventHandler --&gt;|Direct Import| MetricVisuals</div>
<div class="line">    EventHandler --&gt;|Direct Import| SchemaReport</div>
<div class="line">    EventHandler --&gt;|Direct Import| FormulaicVisuals</div>
<div class="line">    EventHandler --&gt;|Direct Import| AssetGraph</div>
<div class="line"> </div>
<div class="line">    GraphVisuals --&gt; Components</div>
<div class="line">    MetricVisuals --&gt; Components</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2608"></a>
Direct Integration Pattern</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">UI Action   </th><th class="markdownTableHeadNone">Python Function Call   </th><th class="markdownTableHeadNone">Source Module    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Refresh Visualization   </td><td class="markdownTableBodyNone"><code>generate_3d_network_graph()</code>   </td><td class="markdownTableBodyNone"><code><a class="el" href="graph__visuals_8py.html">src/visualizations/graph_visuals.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Update Metrics   </td><td class="markdownTableBodyNone"><code>create_metric_visuals()</code>   </td><td class="markdownTableBodyNone"><code><a class="el" href="metric__visuals_8py.html">src/visualizations/metric_visuals.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Generate Schema   </td><td class="markdownTableBodyNone"><code>SchemaReport.generate_report()</code>   </td><td class="markdownTableBodyNone"><code><a class="el" href="schema__report_8py.html">src/reports/schema_report.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Load Asset Details   </td><td class="markdownTableBodyNone"><code>graph.get_asset()</code>   </td><td class="markdownTableBodyNone"><code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Formulaic Dashboard   </td><td class="markdownTableBodyNone"><code>create_formulaic_dashboard()</code>   </td><td class="markdownTableBodyNone"><code><a class="el" href="formulaic__visuals_8py.html">src/visualizations/formulaic_visuals.py</a></code>   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2609"></a>
7.4.3 Visualization Data Guardrails</h3>
<p>Both UIs implement performance guardrails to prevent browser/client overload with large datasets:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Guardrail   </th><th class="markdownTableHeadNone">Next.js Value   </th><th class="markdownTableHeadNone">Environment Variable   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Maximum Nodes   </td><td class="markdownTableBodyNone">500 (default)   </td><td class="markdownTableBodyNone"><code>NEXT_PUBLIC_MAX_NODES</code>   </td><td class="markdownTableBodyNone">Client rendering limit    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Maximum Edges   </td><td class="markdownTableBodyNone">2000 (default)   </td><td class="markdownTableBodyNone"><code>NEXT_PUBLIC_MAX_EDGES</code>   </td><td class="markdownTableBodyNone">Edge complexity limit   </td></tr>
</table>
<p><b>Implementation Location</b>: <code>frontend/app/components/NetworkVisualization.tsx</code></p>
<hr  />
<h2><a class="anchor" id="autotoc_md2611"></a>
7.5 UI Schemas and Type Definitions</h2>
<h3><a class="anchor" id="autotoc_md2612"></a>
7.5.1 TypeScript API Contracts</h3>
<p>The Next.js frontend defines strict TypeScript interfaces for all API interactions, ensuring type safety across the frontend-backend boundary.</p>
<p><b>Location</b>: <code>frontend/app/types/api.ts</code></p>
<h4><a class="anchor" id="autotoc_md2613"></a>
Core Entity Types</h4>
<div class="fragment"><div class="line">classDiagram</div>
<div class="line">    class Asset {</div>
<div class="line">        +string id</div>
<div class="line">        +string symbol</div>
<div class="line">        +string name</div>
<div class="line">        +string asset_class</div>
<div class="line">        +string sector</div>
<div class="line">        +number price</div>
<div class="line">        +number? market_cap</div>
<div class="line">        +string currency</div>
<div class="line">        +Record~string,any~ additional_fields</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    class Relationship {</div>
<div class="line">        +string source_id</div>
<div class="line">        +string target_id</div>
<div class="line">        +string relationship_type</div>
<div class="line">        +number strength</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    class Metrics {</div>
<div class="line">        +number total_assets</div>
<div class="line">        +number total_relationships</div>
<div class="line">        +Record~string,number~ asset_classes</div>
<div class="line">        +number avg_degree</div>
<div class="line">        +number max_degree</div>
<div class="line">        +number network_density</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    class VisualizationNode {</div>
<div class="line">        +string id</div>
<div class="line">        +string name</div>
<div class="line">        +string symbol</div>
<div class="line">        +string asset_class</div>
<div class="line">        +number x</div>
<div class="line">        +number y</div>
<div class="line">        +number z</div>
<div class="line">        +string color</div>
<div class="line">        +number size</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    class VisualizationEdge {</div>
<div class="line">        +string source</div>
<div class="line">        +string target</div>
<div class="line">        +string relationship_type</div>
<div class="line">        +number strength</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    class VisualizationData {</div>
<div class="line">        +VisualizationNode[] nodes</div>
<div class="line">        +VisualizationEdge[] edges</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    VisualizationData *-- VisualizationNode</div>
<div class="line">    VisualizationData *-- VisualizationEdge</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2614"></a>
7.5.2 Pydantic Response Models</h3>
<p>The FastAPI backend defines Pydantic models that serialize Python objects to JSON responses consumed by the frontend.</p>
<p><b>Location</b>: <code><a class="el" href="api_2main_8py.html">api/main.py</a></code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Model   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Key Fields    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>AssetResponse</code>   </td><td class="markdownTableBodyNone">Single asset serialization   </td><td class="markdownTableBodyNone"><code>id</code>, <code>symbol</code>, <code>name</code>, <code>asset_class</code>, <code>sector</code>, <code>price</code>, <code>market_cap</code>, <code>currency</code>, <code>additional_fields</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>RelationshipResponse</code>   </td><td class="markdownTableBodyNone">Relationship edge data   </td><td class="markdownTableBodyNone"><code>source_id</code>, <code>target_id</code>, <code>relationship_type</code>, <code>strength</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>MetricsResponse</code>   </td><td class="markdownTableBodyNone">Network statistics   </td><td class="markdownTableBodyNone"><code>total_assets</code>, <code>total_relationships</code>, <code>asset_classes</code>, <code>avg_degree</code>, <code>max_degree</code>, <code>network_density</code>, <code>relationship_density</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>VisualizationDataResponse</code>   </td><td class="markdownTableBodyNone">3D graph payload   </td><td class="markdownTableBodyNone"><code>nodes: List[Dict]</code>, <code>edges: List[Dict]</code>   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2615"></a>
7.5.3 Type Contract Alignment</h3>
<p>The TypeScript and Pydantic models maintain structural alignment to ensure seamless serialization:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">TypeScript Type   </th><th class="markdownTableHeadNone">Pydantic Model   </th><th class="markdownTableHeadNone">Validation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Asset</code>   </td><td class="markdownTableBodyNone"><code>AssetResponse</code>   </td><td class="markdownTableBodyNone">✅ Aligned    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Relationship</code>   </td><td class="markdownTableBodyNone"><code>RelationshipResponse</code>   </td><td class="markdownTableBodyNone">✅ Aligned    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Metrics</code>   </td><td class="markdownTableBodyNone"><code>MetricsResponse</code>   </td><td class="markdownTableBodyNone">✅ Aligned    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>VisualizationData</code>   </td><td class="markdownTableBodyNone"><code>VisualizationDataResponse</code>   </td><td class="markdownTableBodyNone">✅ Aligned   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2617"></a>
7.6 Screen Specifications</h2>
<h3><a class="anchor" id="autotoc_md2618"></a>
7.6.1 Next.js: 3D Visualization Screen</h3>
<p><b>Component</b>: <code>NetworkVisualization.tsx</code></p>
<p><b>Location</b>: <code>frontend/app/components/NetworkVisualization.tsx</code></p>
<h4><a class="anchor" id="autotoc_md2619"></a>
Screen States</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">State   </th><th class="markdownTableHeadNone">Condition   </th><th class="markdownTableHeadNone">Display    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>loading</code>   </td><td class="markdownTableBodyNone">Data fetching in progress   </td><td class="markdownTableBodyNone">Loading spinner    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ready</code>   </td><td class="markdownTableBodyNone">Data loaded, within limits   </td><td class="markdownTableBodyNone">Interactive 3D graph    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>empty</code>   </td><td class="markdownTableBodyNone">No nodes returned   </td><td class="markdownTableBodyNone">"No data available" message    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>tooLarge</code>   </td><td class="markdownTableBodyNone">Nodes &gt; MAX_NODES or Edges &gt; MAX_EDGES   </td><td class="markdownTableBodyNone">Size warning with counts   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2620"></a>
Visual Elements</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Element   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Interaction    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3D Node Graph   </td><td class="markdownTableBodyNone">Plotly Scatter3d traces   </td><td class="markdownTableBodyNone">Rotate, zoom, pan    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Node Markers   </td><td class="markdownTableBodyNone">Color-coded by asset class   </td><td class="markdownTableBodyNone">Hover for tooltip    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Edge Lines   </td><td class="markdownTableBodyNone">Colored by relationship type   </td><td class="markdownTableBodyNone">Visual connection    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Hover Tooltip   </td><td class="markdownTableBodyNone">Asset symbol, name, class   </td><td class="markdownTableBodyNone">On node hover   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2621"></a>
Dynamic Import Pattern</h4>
<p>The Plotly component uses Next.js dynamic import with SSR disabled to prevent server-side rendering errors:</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph SSRSafety[SSR Safety Pattern]</div>
<div class="line">        DynamicImport[dynamic import&lt;br/&gt;ssr: false]</div>
<div class="line">        ClientOnly[Client-Only Rendering]</div>
<div class="line">        PlotlyLoad[Plotly.js Load]</div>
<div class="line">        GraphRender[3D Graph Render]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    DynamicImport --&gt; ClientOnly</div>
<div class="line">    ClientOnly --&gt; PlotlyLoad</div>
<div class="line">    PlotlyLoad --&gt; GraphRender</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2622"></a>
7.6.2 Next.js: Metrics Dashboard Screen</h3>
<p><b>Component</b>: <code>MetricsDashboard.tsx</code></p>
<p><b>Location</b>: <code>frontend/app/components/MetricsDashboard.tsx</code></p>
<h4><a class="anchor" id="autotoc_md2623"></a>
Metrics Display Grid</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Metric   </th><th class="markdownTableHeadNone">Label   </th><th class="markdownTableHeadNone">Format   </th><th class="markdownTableHeadNone">Grid Position    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>total_assets</code>   </td><td class="markdownTableBodyNone">Total Assets   </td><td class="markdownTableBodyNone">Integer   </td><td class="markdownTableBodyNone">Row 1, Col 1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>total_relationships</code>   </td><td class="markdownTableBodyNone">Total Relationships   </td><td class="markdownTableBodyNone">Integer   </td><td class="markdownTableBodyNone">Row 1, Col 2    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>avg_degree</code>   </td><td class="markdownTableBodyNone">Average Degree   </td><td class="markdownTableBodyNone">2 decimal places   </td><td class="markdownTableBodyNone">Row 1, Col 3    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>max_degree</code>   </td><td class="markdownTableBodyNone">Maximum Degree   </td><td class="markdownTableBodyNone">Integer   </td><td class="markdownTableBodyNone">Row 2, Col 1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>network_density</code>   </td><td class="markdownTableBodyNone">Network Density   </td><td class="markdownTableBodyNone">Percentage (×100)   </td><td class="markdownTableBodyNone">Row 2, Col 2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>relationship_density</code>   </td><td class="markdownTableBodyNone">Relationship Density   </td><td class="markdownTableBodyNone">Percentage (×100)   </td><td class="markdownTableBodyNone">Row 2, Col 3   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2624"></a>
Asset Class Distribution</h4>
<p>The component renders asset class counts from the <code>asset_classes</code> dictionary:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Asset Class   </th><th class="markdownTableHeadNone">Display Color   </th><th class="markdownTableHeadNone">Source Key    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Equity   </td><td class="markdownTableBodyNone">Blue   </td><td class="markdownTableBodyNone"><code>asset_classes.Equity</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Fixed Income   </td><td class="markdownTableBodyNone">Green   </td><td class="markdownTableBodyNone">&lsquo;asset_classes['Fixed Income&rsquo;]<code>\ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt; Commodity \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Orange \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>asset_classes.Commodity<code>\ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt; Currency \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Red \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>asset_classes.Currency<code>\ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt; Derivative \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Purple \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>asset_classes.Derivative`   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2625"></a>
7.6.3 Next.js: Asset Explorer Screen</h3>
<p><b>Component</b>: <code>AssetList.tsx</code></p>
<p><b>Location</b>: <code>frontend/app/components/AssetList.tsx</code></p>
<h4><a class="anchor" id="autotoc_md2626"></a>
Filter Controls</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Control   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Options   </th><th class="markdownTableHeadNone">State Management    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Asset Class Filter   </td><td class="markdownTableBodyNone">Dropdown Select   </td><td class="markdownTableBodyNone">All asset classes + "All"   </td><td class="markdownTableBodyNone">URL query param    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Sector Filter   </td><td class="markdownTableBodyNone">Dropdown Select   </td><td class="markdownTableBodyNone">All sectors + "All"   </td><td class="markdownTableBodyNone">URL query param    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Page Size   </td><td class="markdownTableBodyNone">Dropdown Select   </td><td class="markdownTableBodyNone">10, 20, 50, 100   </td><td class="markdownTableBodyNone">Component state   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2627"></a>
URL State Synchronization</h4>
<p>The Asset Explorer implements URL-synced state using Next.js navigation hooks:</p>
<div class="fragment"><div class="line">flowchart LR</div>
<div class="line">    subgraph URLState[URL State Management]</div>
<div class="line">        URLParams[URL Search Params]</div>
<div class="line">        ComponentState[React Component State]</div>
<div class="line">        FilterControls[Filter Dropdowns]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    URLParams --&gt;|Read on mount| ComponentState</div>
<div class="line">    FilterControls --&gt;|onChange| URLParams</div>
<div class="line">    URLParams --&gt;|Browser history| Navigation</div>
<div class="line">    ComponentState --&gt;|Render| FilterControls</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2628"></a>
Table Columns</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Column   </th><th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Width   </th><th class="markdownTableHeadNone">Sortable    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Symbol   </td><td class="markdownTableBodyNone"><code>symbol</code>   </td><td class="markdownTableBodyNone">Auto   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Name   </td><td class="markdownTableBodyNone"><code>name</code>   </td><td class="markdownTableBodyNone">Auto   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Asset Class   </td><td class="markdownTableBodyNone"><code>asset_class</code>   </td><td class="markdownTableBodyNone">Auto   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Sector   </td><td class="markdownTableBodyNone"><code>sector</code>   </td><td class="markdownTableBodyNone">Auto   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Price   </td><td class="markdownTableBodyNone"><code>price</code>   </td><td class="markdownTableBodyNone">Auto   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Market Cap   </td><td class="markdownTableBodyNone"><code>market_cap</code>   </td><td class="markdownTableBodyNone">Auto   </td><td class="markdownTableBodyNone">No   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2629"></a>
Pagination Controls</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Control   </th><th class="markdownTableHeadNone">Behavior   </th><th class="markdownTableHeadNone">Disabled Condition    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Previous Button   </td><td class="markdownTableBodyNone">Decrement page   </td><td class="markdownTableBodyNone"><code>page === 1</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Next Button   </td><td class="markdownTableBodyNone">Increment page   </td><td class="markdownTableBodyNone"><code>page &gt;= totalPages</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Page Indicator   </td><td class="markdownTableBodyNone">"Page X of Y"   </td><td class="markdownTableBodyNone">N/A   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2630"></a>
7.6.4 Gradio: Network Visualization Tab</h3>
<p><b>Location</b>: <code><a class="el" href="app_8py.html">app.py</a></code> (lines 386-450)</p>
<h4><a class="anchor" id="autotoc_md2631"></a>
Control Panel</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Control   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Options   </th><th class="markdownTableHeadNone">Default    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">View Mode   </td><td class="markdownTableBodyNone">Radio   </td><td class="markdownTableBodyNone">"3D View", "2D View"   </td><td class="markdownTableBodyNone">"3D View"    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Layout Type   </td><td class="markdownTableBodyNone">Dropdown   </td><td class="markdownTableBodyNone">"spring", "circular", "grid"   </td><td class="markdownTableBodyNone">"spring"    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Show Direction Arrows   </td><td class="markdownTableBodyNone">Checkbox   </td><td class="markdownTableBodyNone">Boolean   </td><td class="markdownTableBodyNone"><code>True</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2632"></a>
Relationship Visibility Checkboxes</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Checkbox   </th><th class="markdownTableHeadNone">Relationship Type   </th><th class="markdownTableHeadNone">Default    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Same Sector   </td><td class="markdownTableBodyNone"><code>same_sector</code>   </td><td class="markdownTableBodyNone"><code>True</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Market Cap Similar   </td><td class="markdownTableBodyNone"><code>market_cap_similar</code>   </td><td class="markdownTableBodyNone"><code>True</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Correlation   </td><td class="markdownTableBodyNone"><code>correlation</code>   </td><td class="markdownTableBodyNone"><code>True</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Corporate Bond → Equity   </td><td class="markdownTableBodyNone"><code>corporate_bond_to_equity</code>   </td><td class="markdownTableBodyNone"><code>True</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Commodity ↔ Currency   </td><td class="markdownTableBodyNone"><code>commodity_currency</code>   </td><td class="markdownTableBodyNone"><code>True</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Income Comparison   </td><td class="markdownTableBodyNone"><code>income_comparison</code>   </td><td class="markdownTableBodyNone"><code>True</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Regulatory Impact   </td><td class="markdownTableBodyNone"><code>regulatory_impact</code>   </td><td class="markdownTableBodyNone"><code>True</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Show All Relationships   </td><td class="markdownTableBodyNone">All types   </td><td class="markdownTableBodyNone"><code>False</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2633"></a>
Action Buttons</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Button   </th><th class="markdownTableHeadNone">Function   </th><th class="markdownTableHeadNone">Behavior    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Refresh   </td><td class="markdownTableBodyNone"><code>refresh_all_outputs()</code>   </td><td class="markdownTableBodyNone">Regenerate all visualizations    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Reset View   </td><td class="markdownTableBodyNone"><code>reset_visualization()</code>   </td><td class="markdownTableBodyNone">Clear filters, restore defaults   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2634"></a>
7.6.5 Gradio: Formulaic Analysis Tab</h3>
<p><b>Location</b>: <code><a class="el" href="app_8py.html">app.py</a></code> (lines 520-590)</p>
<h4><a class="anchor" id="autotoc_md2635"></a>
Dashboard Components</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Content    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Formula Dashboard   </td><td class="markdownTableBodyNone">Plot   </td><td class="markdownTableBodyNone">Overview of all formula categories    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Correlation Network   </td><td class="markdownTableBodyNone">Plot   </td><td class="markdownTableBodyNone">Asset correlation visualization    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Metric Comparison   </td><td class="markdownTableBodyNone">Plot   </td><td class="markdownTableBodyNone">Formula metric comparisons    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Formula Selector   </td><td class="markdownTableBodyNone">Dropdown   </td><td class="markdownTableBodyNone">Individual formula selection    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Formula Details   </td><td class="markdownTableBodyNone">Textbox   </td><td class="markdownTableBodyNone">LaTeX formula, variables, example    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Summary   </td><td class="markdownTableBodyNone">Textbox   </td><td class="markdownTableBodyNone">Analysis summary text   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2637"></a>
7.7 User Interactions</h2>
<h3><a class="anchor" id="autotoc_md2638"></a>
7.7.1 Next.js Page Load Flow</h3>
<p>The Next.js frontend implements a client-side data loading pattern with comprehensive error handling and retry capabilities.</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph NextJSPageLoad[Next.js Page Load Workflow]</div>
<div class="line">        PageMount([Page Mount]) --&gt; SetLoading[Set Loading&lt;br/&gt;State = true]</div>
<div class="line">        SetLoading --&gt; FetchData[Promise.all:&lt;br/&gt;getMetrics()&lt;br/&gt;getVisualizationData()]</div>
<div class="line"> </div>
<div class="line">        FetchData --&gt; FetchResult{Fetch&lt;br/&gt;Successful?}</div>
<div class="line"> </div>
<div class="line">        FetchResult --&gt;|Yes| StoreData[Store Data&lt;br/&gt;in State]</div>
<div class="line">        StoreData --&gt; ClearLoading[Clear Loading&lt;br/&gt;State]</div>
<div class="line">        ClearLoading --&gt; RenderUI[Render UI&lt;br/&gt;Components]</div>
<div class="line">        RenderUI --&gt; PageReady([Page Ready])</div>
<div class="line"> </div>
<div class="line">        FetchResult --&gt;|No| SetError[Set Error&lt;br/&gt;State]</div>
<div class="line">        SetError --&gt; ShowRetry[Show Retry&lt;br/&gt;Button]</div>
<div class="line">        ShowRetry --&gt; UserRetry{User Clicks&lt;br/&gt;Retry?}</div>
<div class="line">        UserRetry --&gt;|Yes| SetLoading</div>
<div class="line">        UserRetry --&gt;|No| WaitAction([Wait for&lt;br/&gt;User Action])</div>
<div class="line">    end</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2639"></a>
7.7.2 Tab Navigation State Machine</h3>
<p>Both UIs implement tab-based navigation with distinct state transitions:</p>
<div class="fragment"><div class="line">stateDiagram-v2</div>
<div class="line">    [*] --&gt; Visualization: Default Tab</div>
<div class="line"> </div>
<div class="line">    Visualization --&gt; Metrics: Tab Click</div>
<div class="line">    Visualization --&gt; Assets: Tab Click</div>
<div class="line"> </div>
<div class="line">    Metrics --&gt; Visualization: Tab Click</div>
<div class="line">    Metrics --&gt; Assets: Tab Click</div>
<div class="line"> </div>
<div class="line">    Assets --&gt; Visualization: Tab Click</div>
<div class="line">    Assets --&gt; Metrics: Tab Click</div>
<div class="line"> </div>
<div class="line">    note right of Visualization: 3D Network Graph</div>
<div class="line">    note right of Metrics: Statistics Dashboard</div>
<div class="line">    note right of Assets: Filterable Table</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2640"></a>
7.7.3 Gradio Event Flow</h3>
<p>The Gradio interface manages state through an event-driven architecture with real-time visualization updates:</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph GradioEventFlow[Gradio UI Event Flow]</div>
<div class="line">        AppStart([Gradio App&lt;br/&gt;Starts]) --&gt; InitGraph[Initialize&lt;br/&gt;Graph State]</div>
<div class="line">        InitGraph --&gt; CreateInterface[Create Blocks&lt;br/&gt;Interface]</div>
<div class="line">        CreateInterface --&gt; SetupTabs[Setup 6&lt;br/&gt;Tabs]</div>
<div class="line">        SetupTabs --&gt; WireEvents[Wire Event&lt;br/&gt;Handlers]</div>
<div class="line">        WireEvents --&gt; LaunchServer[Launch Server&lt;br/&gt;Port 7860]</div>
<div class="line">        LaunchServer --&gt; WaitEvent([Wait for&lt;br/&gt;User Event])</div>
<div class="line"> </div>
<div class="line">        WaitEvent --&gt; UserAction{User&lt;br/&gt;Action Type}</div>
<div class="line"> </div>
<div class="line">        UserAction --&gt;|Refresh| RefreshAll[refresh_all_outputs()]</div>
<div class="line">        UserAction --&gt;|Filter Change| UpdateViz[refresh_visualization()]</div>
<div class="line">        UserAction --&gt;|Tab Change| LoadTab[Load Tab&lt;br/&gt;Content]</div>
<div class="line">        UserAction --&gt;|Asset Select| UpdateAsset[update_asset_info()]</div>
<div class="line"> </div>
<div class="line">        RefreshAll --&gt; WaitEvent</div>
<div class="line">        UpdateViz --&gt; WaitEvent</div>
<div class="line">        LoadTab --&gt; WaitEvent</div>
<div class="line">        UpdateAsset --&gt; WaitEvent</div>
<div class="line">    end</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2641"></a>
7.7.4 3D Visualization Interactions</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Interaction   </th><th class="markdownTableHeadNone">Action   </th><th class="markdownTableHeadNone">Result    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Drag</b>   </td><td class="markdownTableBodyNone">Click and drag on graph area   </td><td class="markdownTableBodyNone">Rotate 3D view    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Scroll</b>   </td><td class="markdownTableBodyNone">Mouse wheel   </td><td class="markdownTableBodyNone">Zoom in/out    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Hover</b>   </td><td class="markdownTableBodyNone">Mouse over node   </td><td class="markdownTableBodyNone">Show tooltip with asset details    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Click</b>   </td><td class="markdownTableBodyNone">Click on node   </td><td class="markdownTableBodyNone">(Future: Asset detail view)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Double-click</b>   </td><td class="markdownTableBodyNone">Double-click on background   </td><td class="markdownTableBodyNone">Reset view   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2642"></a>
7.7.5 Asset Explorer Interactions</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Interaction   </th><th class="markdownTableHeadNone">Action   </th><th class="markdownTableHeadNone">Result    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Filter Change</b>   </td><td class="markdownTableBodyNone">Select asset class/sector   </td><td class="markdownTableBodyNone">Update table, modify URL params    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Page Size Change</b>   </td><td class="markdownTableBodyNone">Select new page size   </td><td class="markdownTableBodyNone">Reset to page 1, update display    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Previous Page</b>   </td><td class="markdownTableBodyNone">Click Previous button   </td><td class="markdownTableBodyNone">Load previous page    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Next Page</b>   </td><td class="markdownTableBodyNone">Click Next button   </td><td class="markdownTableBodyNone">Load next page    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Browser Back</b>   </td><td class="markdownTableBodyNone">Browser back button   </td><td class="markdownTableBodyNone">Restore previous filter state   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2643"></a>
7.7.6 Error Recovery Flow</h3>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph ErrorRecovery[Frontend Error Recovery]</div>
<div class="line">        ErrorDetected([Error&lt;br/&gt;Detected]) --&gt; ErrorCategory{Error&lt;br/&gt;Category}</div>
<div class="line"> </div>
<div class="line">        ErrorCategory --&gt;|Network Error| NetError[Set Error:&lt;br/&gt;Network Unavailable]</div>
<div class="line">        ErrorCategory --&gt;|API Error| APIError[Set Error:&lt;br/&gt;API Error Message]</div>
<div class="line">        ErrorCategory --&gt;|Render Error| RenderError[Set Error:&lt;br/&gt;Display Error]</div>
<div class="line"> </div>
<div class="line">        NetError --&gt; ShowRetryUI[Show Retry&lt;br/&gt;Button]</div>
<div class="line">        APIError --&gt; ShowRetryUI</div>
<div class="line">        RenderError --&gt; ShowRefresh[Show Refresh&lt;br/&gt;Page Option]</div>
<div class="line"> </div>
<div class="line">        ShowRetryUI --&gt; UserRetries{User&lt;br/&gt;Retries?}</div>
<div class="line">        UserRetries --&gt;|Yes| ClearError[Clear Error&lt;br/&gt;State]</div>
<div class="line">        ClearError --&gt; ReloadData[Reload&lt;br/&gt;Data]</div>
<div class="line">        ReloadData --&gt; Success{Success?}</div>
<div class="line">        Success --&gt;|Yes| Normal([Normal&lt;br/&gt;Operation])</div>
<div class="line">        Success --&gt;|No| ErrorDetected</div>
<div class="line">        UserRetries --&gt;|No| WaitUser([Wait for&lt;br/&gt;User])</div>
<div class="line"> </div>
<div class="line">        ShowRefresh --&gt; UserRefresh{User&lt;br/&gt;Refreshes?}</div>
<div class="line">        UserRefresh --&gt;|Yes| PageReload[Full Page&lt;br/&gt;Reload]</div>
<div class="line">        PageReload --&gt; Normal</div>
<div class="line">    end</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md2645"></a>
7.8 Visual Design Specifications</h2>
<h3><a class="anchor" id="autotoc_md2646"></a>
7.8.1 Asset Class Color Scheme</h3>
<p>A consistent color palette maps asset classes to visual representations across both UIs:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Asset Class   </th><th class="markdownTableHeadNone">Node Color   </th><th class="markdownTableHeadNone">Hex Code   </th><th class="markdownTableHeadNone">Usage    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Equity</b>   </td><td class="markdownTableBodyNone">Blue   </td><td class="markdownTableBodyNone"><code>#1f77b4</code>   </td><td class="markdownTableBodyNone">Stocks and equity instruments    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Fixed Income</b>   </td><td class="markdownTableBodyNone">Green   </td><td class="markdownTableBodyNone"><code>#2ca02c</code>   </td><td class="markdownTableBodyNone">Bonds and debt instruments    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Commodity</b>   </td><td class="markdownTableBodyNone">Orange   </td><td class="markdownTableBodyNone"><code>#ff7f0e</code>   </td><td class="markdownTableBodyNone">Physical commodity futures    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Currency</b>   </td><td class="markdownTableBodyNone">Red   </td><td class="markdownTableBodyNone"><code>#d62728</code>   </td><td class="markdownTableBodyNone">Foreign exchange pairs    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Derivative</b>   </td><td class="markdownTableBodyNone">Purple   </td><td class="markdownTableBodyNone"><code>#9467bd</code>   </td><td class="markdownTableBodyNone">Derivative instruments   </td></tr>
</table>
<p><b>Source</b>: <code><a class="el" href="graph__visuals_8py.html">src/visualizations/graph_visuals.py</a></code></p>
<h3><a class="anchor" id="autotoc_md2647"></a>
7.8.2 Relationship Edge Colors</h3>
<p>Relationship types are distinguished by edge colors in the network visualization:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Relationship Type   </th><th class="markdownTableHeadNone">Edge Color   </th><th class="markdownTableHeadNone">Hex Code    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>same_sector</code>   </td><td class="markdownTableBodyNone">Red   </td><td class="markdownTableBodyNone"><code>#FF6B6B</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>market_cap_similar</code>   </td><td class="markdownTableBodyNone">Teal   </td><td class="markdownTableBodyNone"><code>#4ECDC4</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>correlation</code>   </td><td class="markdownTableBodyNone">Blue   </td><td class="markdownTableBodyNone"><code>#45B7D1</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>corporate_bond_to_equity</code>   </td><td class="markdownTableBodyNone">Green   </td><td class="markdownTableBodyNone"><code>#96CEB4</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>commodity_currency</code>   </td><td class="markdownTableBodyNone">Yellow   </td><td class="markdownTableBodyNone"><code>#FFEAA7</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>income_comparison</code>   </td><td class="markdownTableBodyNone">Plum   </td><td class="markdownTableBodyNone"><code>#DDA0DD</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>regulatory_impact</code>   </td><td class="markdownTableBodyNone">Light Salmon   </td><td class="markdownTableBodyNone"><code>#FFA07A</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Default   </td><td class="markdownTableBodyNone">Gray   </td><td class="markdownTableBodyNone"><code>#888888</code>   </td></tr>
</table>
<p><b>Source</b>: <code><a class="el" href="graph__visuals_8py.html">src/visualizations/graph_visuals.py</a></code> (lines 18-29)</p>
<h3><a class="anchor" id="autotoc_md2648"></a>
7.8.3 CSS Design System (Next.js)</h3>
<h4><a class="anchor" id="autotoc_md2649"></a>
Tailwind CSS Configuration</h4>
<p><b>Location</b>: <code>frontend/tailwind.config.js</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Configuration   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Content Paths   </td><td class="markdownTableBodyNone"><code>./pages/**</code>, <code>./components/**</code>, <code>./app/**</code>   </td><td class="markdownTableBodyNone">Purge unused CSS    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Theme   </td><td class="markdownTableBodyNone">Extended defaults   </td><td class="markdownTableBodyNone">Custom design tokens    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Plugins   </td><td class="markdownTableBodyNone">None   </td><td class="markdownTableBodyNone">Minimal footprint   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2650"></a>
Global CSS Variables</h4>
<p><b>Location</b>: <code>frontend/app/globals.css</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">CSS Variable   </th><th class="markdownTableHeadNone">Light Mode Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>--foreground-rgb</code>   </td><td class="markdownTableBodyNone"><code>0, 0, 0</code>   </td><td class="markdownTableBodyNone">Text color    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>--background-start-rgb</code>   </td><td class="markdownTableBodyNone"><code>214, 219, 220</code>   </td><td class="markdownTableBodyNone">Gradient start    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>--background-end-rgb</code>   </td><td class="markdownTableBodyNone"><code>255, 255, 255</code>   </td><td class="markdownTableBodyNone">Gradient end   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2651"></a>
Background Gradient</h4>
<p>The application uses a subtle vertical gradient:</p>
<ul>
<li>Start: <code>rgb(214, 219, 220)</code> (light gray)</li>
<li>End: <code>rgb(255, 255, 255)</code> (white)</li>
<li>Direction: Top to bottom</li>
</ul>
<h3><a class="anchor" id="autotoc_md2652"></a>
7.8.4 Responsive Design Patterns</h3>
<p>The Next.js frontend implements mobile-first responsive design using Tailwind breakpoints:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Breakpoint   </th><th class="markdownTableHeadNone">Screen Size   </th><th class="markdownTableHeadNone">Grid Columns (MetricsDashboard)    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Default   </td><td class="markdownTableBodyNone">&lt; 768px   </td><td class="markdownTableBodyNone">1 column    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>md:</code>   </td><td class="markdownTableBodyNone">≥ 768px   </td><td class="markdownTableBodyNone">2 columns    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>lg:</code>   </td><td class="markdownTableBodyNone">≥ 1024px   </td><td class="markdownTableBodyNone">3 columns   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2653"></a>
Component Responsive Classes</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Responsive Pattern    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Container   </td><td class="markdownTableBodyNone"><code>container mx-auto px-4</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Card   </td><td class="markdownTableBodyNone"><code>bg-white rounded-lg shadow-md p-6</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Grid   </td><td class="markdownTableBodyNone"><code>grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Button   </td><td class="markdownTableBodyNone"><code>px-4 py-2 rounded-md</code>   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2654"></a>
7.8.5 Application Metadata</h3>
<h2><a class="anchor" id="autotoc_md2655"></a>
Next.js Metadata</h2>
<p><b>Location</b>: <code>frontend/app/layout.tsx</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Property   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Title   </td><td class="markdownTableBodyNone">"Financial Asset Relationship Network"    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Description   </td><td class="markdownTableBodyNone">"Interactive 3D visualization of interconnected financial assets"   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2656"></a>
Gradio Application Title</h4>
<p><b>Location</b>: <code><a class="el" href="app_8py.html">app.py</a></code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Property   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Title   </td><td class="markdownTableBodyNone">"Financial Asset Relationship Database Visualization"    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Default Port   </td><td class="markdownTableBodyNone">7860   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2658"></a>
7.9 Testing Strategy</h2>
<h3><a class="anchor" id="autotoc_md2659"></a>
7.9.1 Frontend Testing Framework</h3>
<p>The Next.js frontend implements comprehensive testing using Jest and React Testing Library:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Tool   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Jest   </td><td class="markdownTableBodyNone">^29.7.0   </td><td class="markdownTableBodyNone">Test runner and framework    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">@testing-library/react   </td><td class="markdownTableBodyNone">^14.1.2   </td><td class="markdownTableBodyNone">React component testing    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">@testing-library/jest-dom   </td><td class="markdownTableBodyNone">^6.4.0   </td><td class="markdownTableBodyNone">DOM assertions    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">jest-environment-jsdom   </td><td class="markdownTableBodyNone">^29.7.0   </td><td class="markdownTableBodyNone">DOM simulation   </td></tr>
</table>
<p><b>Configuration Location</b>: <code>frontend/jest.config.js</code>, <code>frontend/jest.setup.js</code></p>
<h3><a class="anchor" id="autotoc_md2660"></a>
7.9.2 Frontend Test Organization</h3>
<div class="fragment"><div class="line">frontend/__tests__/</div>
<div class="line">├── test-utils.ts                    # Centralized mock data</div>
<div class="line">├── lib/</div>
<div class="line">│   ├── api.test.ts                 # API client tests</div>
<div class="line">│   └── api-axios-compatibility.test.ts</div>
<div class="line">├── components/</div>
<div class="line">│   ├── AssetList.test.tsx          # Asset list component tests</div>
<div class="line">│   ├── MetricsDashboard.test.tsx   # Metrics dashboard tests</div>
<div class="line">│   └── NetworkVisualization.test.tsx # Visualization tests</div>
<div class="line">└── app/</div>
<div class="line">    └── page.test.tsx               # Page-level tests</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2661"></a>
7.9.3 Component Test Coverage</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Test Scenarios   </th><th class="markdownTableHeadNone">Coverage Focus    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>AssetList</code>   </td><td class="markdownTableBodyNone">Render assets, filter by class, pagination   </td><td class="markdownTableBodyNone">User filtering flows    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>MetricsDashboard</code>   </td><td class="markdownTableBodyNone">Display metrics, handle loading, show errors   </td><td class="markdownTableBodyNone">Data presentation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>NetworkVisualization</code>   </td><td class="markdownTableBodyNone">3D graph rendering, node interaction   </td><td class="markdownTableBodyNone">Plotly integration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>page.tsx</code>   </td><td class="markdownTableBodyNone">Tab switching, data loading, retry mechanisms   </td><td class="markdownTableBodyNone">Page lifecycle   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2662"></a>
7.9.4 Mock Data Utilities</h3>
<p><b>Location</b>: <code>frontend/__tests__/test-utils.ts</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Export   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>mockAssets</code>   </td><td class="markdownTableBodyNone"><code>Asset[]</code>   </td><td class="markdownTableBodyNone">Sample asset collection    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>mockMetrics</code>   </td><td class="markdownTableBodyNone"><code>Metrics</code>   </td><td class="markdownTableBodyNone">Network metrics data    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>mockVisualization</code>   </td><td class="markdownTableBodyNone"><code>VisualizationData</code>   </td><td class="markdownTableBodyNone">3D graph data    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>mockRelationships</code>   </td><td class="markdownTableBodyNone"><code>Relationship[]</code>   </td><td class="markdownTableBodyNone">Sample relationships   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2663"></a>
7.9.5 Test Execution Commands</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Command   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>npm test</code>   </td><td class="markdownTableBodyNone">Run all frontend tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>npm test -- --coverage</code>   </td><td class="markdownTableBodyNone">Tests with coverage report    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>npm test -- --watch</code>   </td><td class="markdownTableBodyNone">Watch mode for development    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>npm run test:ci</code>   </td><td class="markdownTableBodyNone">CI-optimized execution   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2665"></a>
7.10 Accessibility Considerations</h2>
<h3><a class="anchor" id="autotoc_md2666"></a>
7.10.1 Current Implementation</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Accessibility Feature   </th><th class="markdownTableHeadNone">Status   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Semantic HTML   </td><td class="markdownTableBodyNone">✅ Implemented   </td><td class="markdownTableBodyNone">Proper heading hierarchy    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Color Contrast   </td><td class="markdownTableBodyNone">✅ Implemented   </td><td class="markdownTableBodyNone">Tailwind default palette    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Keyboard Navigation   </td><td class="markdownTableBodyNone">⚠️ Partial   </td><td class="markdownTableBodyNone">Tab navigation works    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Screen Reader Support   </td><td class="markdownTableBodyNone">⚠️ Limited   </td><td class="markdownTableBodyNone">Labels on form controls    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ARIA Attributes   </td><td class="markdownTableBodyNone">⚠️ Partial   </td><td class="markdownTableBodyNone">Button roles   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2667"></a>
7.10.2 Planned Enhancements</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Enhancement   </th><th class="markdownTableHeadNone">Priority   </th><th class="markdownTableHeadNone">Tool    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Full ARIA labeling   </td><td class="markdownTableBodyNone">Medium   </td><td class="markdownTableBodyNone">Manual implementation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Accessibility testing   </td><td class="markdownTableBodyNone">Medium   </td><td class="markdownTableBodyNone">axe-core integration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Keyboard shortcuts   </td><td class="markdownTableBodyNone">Low   </td><td class="markdownTableBodyNone">Custom implementation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">High contrast mode   </td><td class="markdownTableBodyNone">Low   </td><td class="markdownTableBodyNone">Tailwind dark mode   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2669"></a>
7.11 References</h2>
<h3><a class="anchor" id="autotoc_md2670"></a>
7.11.1 Source Files Examined</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Path   </th><th class="markdownTableHeadNone">Relevance    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/app/page.tsx</code>   </td><td class="markdownTableBodyNone">Main Next.js page with tab navigation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/app/layout.tsx</code>   </td><td class="markdownTableBodyNone">Root layout with metadata    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/app/globals.css</code>   </td><td class="markdownTableBodyNone">Global CSS styles    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/tailwind.config.js</code>   </td><td class="markdownTableBodyNone">Tailwind configuration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/app/components/NetworkVisualization.tsx</code>   </td><td class="markdownTableBodyNone">3D visualization component    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/app/components/MetricsDashboard.tsx</code>   </td><td class="markdownTableBodyNone">Metrics grid component    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/app/components/AssetList.tsx</code>   </td><td class="markdownTableBodyNone">Asset explorer component    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/app/types/api.ts</code>   </td><td class="markdownTableBodyNone">TypeScript API contracts    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/app/lib/api.ts</code>   </td><td class="markdownTableBodyNone">Axios API client    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/package.json</code>   </td><td class="markdownTableBodyNone">Frontend dependencies    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/jest.config.js</code>   </td><td class="markdownTableBodyNone">Jest configuration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/jest.setup.js</code>   </td><td class="markdownTableBodyNone">Jest environment setup    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/__tests__/test-utils.ts</code>   </td><td class="markdownTableBodyNone">Mock data utilities    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="app_8py.html">app.py</a></code>   </td><td class="markdownTableBodyNone">Gradio UI implementation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone">FastAPI endpoints and response models    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="graph__visuals_8py.html">src/visualizations/graph_visuals.py</a></code>   </td><td class="markdownTableBodyNone">Visualization color schemes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>requirements.txt</code>   </td><td class="markdownTableBodyNone">Python dependencies    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="UI__COMPARISON_8md.html">UI_COMPARISON.md</a></code>   </td><td class="markdownTableBodyNone">UI feature comparison   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2671"></a>
7.11.2 Technical Specification Cross-References</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Section   </th><th class="markdownTableHeadNone">Relevance    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2.1 Feature Catalog   </td><td class="markdownTableBodyNone">Feature requirements (F-016, F-017)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3.3 Frameworks &amp; Libraries   </td><td class="markdownTableBodyNone">Technology stack details    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4.4 Frontend Workflows   </td><td class="markdownTableBodyNone">Page load and event flows    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4.5 Error Handling Workflows   </td><td class="markdownTableBodyNone">Error recovery patterns    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5.1 HIGH-LEVEL ARCHITECTURE   </td><td class="markdownTableBodyNone">System architecture overview    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">5.2 COMPONENT DETAILS   </td><td class="markdownTableBodyNone">Component specifications    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">6.4 Security Architecture   </td><td class="markdownTableBodyNone">Authentication and CORS    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6.6 Testing Strategy   </td><td class="markdownTableBodyNone">Frontend testing approach   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2672"></a>
7.11.3 Frontend Component Locations</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">File Path    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Root Layout   </td><td class="markdownTableBodyNone"><code>frontend/app/layout.tsx</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Home Page   </td><td class="markdownTableBodyNone"><code>frontend/app/page.tsx</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Network Visualization   </td><td class="markdownTableBodyNone"><code>frontend/app/components/NetworkVisualization.tsx</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Metrics Dashboard   </td><td class="markdownTableBodyNone"><code>frontend/app/components/MetricsDashboard.tsx</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Asset List   </td><td class="markdownTableBodyNone"><code>frontend/app/components/AssetList.tsx</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">API Client   </td><td class="markdownTableBodyNone"><code>frontend/app/lib/api.ts</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Type Definitions   </td><td class="markdownTableBodyNone"><code>frontend/app/types/api.ts</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Test Utilities   </td><td class="markdownTableBodyNone"><code>frontend/__tests__/test-utils.ts</code>   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md2673"></a>
8. Infrastructure</h1>
<h2><a class="anchor" id="autotoc_md2674"></a>
8.1 Executive Overview</h2>
<p>The Financial Asset Relationship Database implements a <b>hybrid deployment architecture</b> supporting multiple deployment targets to accommodate varying operational requirements. The infrastructure design prioritizes deployment flexibility, operational simplicity, and cost-effectiveness while maintaining security and reliability standards appropriate for financial data applications.</p>
<h3><a class="anchor" id="autotoc_md2675"></a>
8.1.1 Infrastructure Philosophy</h3>
<p>The system follows these core infrastructure principles:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Principle   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Rationale    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Multi-Target Deployment</b>   </td><td class="markdownTableBodyNone">Vercel, Docker, Local   </td><td class="markdownTableBodyNone">Supports development through production workflows    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Serverless-First Production</b>   </td><td class="markdownTableBodyNone">Vercel Edge Functions   </td><td class="markdownTableBodyNone">Automatic scaling, global distribution, minimal ops    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Container-Based Portability</b>   </td><td class="markdownTableBodyNone">Docker with Docker Compose   </td><td class="markdownTableBodyNone">Consistent environments across all deployment stages    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Infrastructure as Code</b>   </td><td class="markdownTableBodyNone">Configuration files, no imperative scripts   </td><td class="markdownTableBodyNone">Reproducible, version-controlled infrastructure    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Security by Default</b>   </td><td class="markdownTableBodyNone">Non-root containers, TLS enforcement   </td><td class="markdownTableBodyNone">Defense in depth from build through production   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2676"></a>
8.1.2 Infrastructure Architecture Diagram</h3>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph ExternalUsers[External Access Layer]</div>
<div class="line">        Users([End Users])</div>
<div class="line">        Developers([Developers])</div>
<div class="line">        CI([CI/CD Pipelines])</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph EdgeLayer[Edge &amp; CDN Layer]</div>
<div class="line">        VercelEdge[Vercel Edge Network&lt;br/&gt;Global CDN]</div>
<div class="line">        TLS[TLS Termination&lt;br/&gt;HTTPS Enforcement]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph ComputeLayer[Compute Layer]</div>
<div class="line">        subgraph VercelCompute[Vercel Serverless]</div>
<div class="line">            NextSSR[Next.js SSR&lt;br/&gt;@vercel/next]</div>
<div class="line">            PythonLambda[Python Functions&lt;br/&gt;@vercel/python&lt;br/&gt;50MB max]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph DockerCompute[Docker Deployment]</div>
<div class="line">            AppContainer[app container&lt;br/&gt;python:3.11-slim&lt;br/&gt;Port 7860]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph LocalDev[Local Development]</div>
<div class="line">            FastAPILocal[FastAPI&lt;br/&gt;Port 8000]</div>
<div class="line">            NextJSLocal[Next.js&lt;br/&gt;Port 3000]</div>
<div class="line">            GradioLocal[Gradio&lt;br/&gt;Port 7860]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph DataLayer[Data Layer]</div>
<div class="line">        InMemGraph[In-Memory Graph&lt;br/&gt;Dict-based Storage]</div>
<div class="line">        SQLiteAuth[(SQLite&lt;br/&gt;Auth Database)]</div>
<div class="line">        JSONCache[(JSON File Cache&lt;br/&gt;Atomic Writes)]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph ExternalServices[External Services]</div>
<div class="line">        YahooFinance[Yahoo Finance API&lt;br/&gt;via yfinance]</div>
<div class="line">        GHCR[GitHub Container Registry&lt;br/&gt;ghcr.io]</div>
<div class="line">        GitHubActions[GitHub Actions&lt;br/&gt;CI/CD]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    Users --&gt; VercelEdge</div>
<div class="line">    Developers --&gt; LocalDev</div>
<div class="line">    CI --&gt; GitHubActions</div>
<div class="line"> </div>
<div class="line">    VercelEdge --&gt; TLS</div>
<div class="line">    TLS --&gt; VercelCompute</div>
<div class="line"> </div>
<div class="line">    VercelCompute --&gt; InMemGraph</div>
<div class="line">    DockerCompute --&gt; InMemGraph</div>
<div class="line">    LocalDev --&gt; InMemGraph</div>
<div class="line"> </div>
<div class="line">    InMemGraph --&gt; SQLiteAuth</div>
<div class="line">    InMemGraph --&gt; JSONCache</div>
<div class="line">    InMemGraph --&gt; YahooFinance</div>
<div class="line"> </div>
<div class="line">    GitHubActions --&gt; GHCR</div>
<div class="line">    GitHubActions --&gt; VercelCompute</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md2678"></a>
8.2 Deployment Environment</h2>
<h3><a class="anchor" id="autotoc_md2679"></a>
8.2.1 Target Environment Assessment</h3>
<h4><a class="anchor" id="autotoc_md2680"></a>
8.2.1.1 Environment Type Classification</h4>
<p>The Financial Asset Relationship Database operates in a <b>hybrid cloud/local</b> environment model:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Environment Type   </th><th class="markdownTableHeadNone">Primary Use   </th><th class="markdownTableHeadNone">Technology   </th><th class="markdownTableHeadNone">Scale    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Local Development</b>   </td><td class="markdownTableBodyNone">Feature development, debugging   </td><td class="markdownTableBodyNone">Native Python/Node.js   </td><td class="markdownTableBodyNone">Single developer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Docker Container</b>   </td><td class="markdownTableBodyNone">Integration testing, self-hosted production   </td><td class="markdownTableBodyNone">Docker, Docker Compose   </td><td class="markdownTableBodyNone">Single to small cluster    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Vercel Serverless</b>   </td><td class="markdownTableBodyNone">Production SaaS deployment   </td><td class="markdownTableBodyNone">Vercel Edge Network   </td><td class="markdownTableBodyNone">Auto-scaling global    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Google Cloud Run</b>   </td><td class="markdownTableBodyNone">Alternative cloud deployment   </td><td class="markdownTableBodyNone">GCR, Cloud Run   </td><td class="markdownTableBodyNone">Auto-scaling regional   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2681"></a>
8.2.1.2 Geographic Distribution</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Deployment Target   </th><th class="markdownTableHeadNone">Geographic Strategy   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Vercel   </td><td class="markdownTableBodyNone">Global Edge Network   </td><td class="markdownTableBodyNone">Automatic CDN distribution to nearest edge location    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Docker   </td><td class="markdownTableBodyNone">Single region   </td><td class="markdownTableBodyNone">Deployer-determined; no built-in geo-distribution    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Cloud Run   </td><td class="markdownTableBodyNone">Regional with optional multi-region   </td><td class="markdownTableBodyNone">Configurable via <code>REGION</code> environment variable   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2682"></a>
8.2.1.3 Resource Requirements</h4>
<p><b>Compute Requirements:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Minimum   </th><th class="markdownTableHeadNone">Recommended   </th><th class="markdownTableHeadNone">Production    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>CPU</b>   </td><td class="markdownTableBodyNone">1 vCPU   </td><td class="markdownTableBodyNone">2 vCPU   </td><td class="markdownTableBodyNone">Auto-scaling (Vercel)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Memory</b>   </td><td class="markdownTableBodyNone">512 MB   </td><td class="markdownTableBodyNone">2 GB   </td><td class="markdownTableBodyNone">2-4 GB (Vercel Lambda)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Disk</b>   </td><td class="markdownTableBodyNone">100 MB   </td><td class="markdownTableBodyNone">500 MB   </td><td class="markdownTableBodyNone">N/A (ephemeral)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Network</b>   </td><td class="markdownTableBodyNone">Standard   </td><td class="markdownTableBodyNone">Low latency   </td><td class="markdownTableBodyNone">Edge-optimized   </td></tr>
</table>
<p><b>Application Constraints:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Constraint ID   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Impact   </th><th class="markdownTableHeadNone">Mitigation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">C-001   </td><td class="markdownTableBodyNone">In-memory graph limits scalability   </td><td class="markdownTableBodyNone">&lt; 500 nodes optimal   </td><td class="markdownTableBodyNone">Database persistence option    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">C-002   </td><td class="markdownTableBodyNone">Single-user JWT authentication   </td><td class="markdownTableBodyNone">Limited concurrent sessions   </td><td class="markdownTableBodyNone">Session isolation per token    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">C-003   </td><td class="markdownTableBodyNone">Yahoo Finance API rate limits   </td><td class="markdownTableBodyNone">Data freshness affected   </td><td class="markdownTableBodyNone">JSON file caching with atomic writes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">C-004   </td><td class="markdownTableBodyNone">Browser memory limits visualization   </td><td class="markdownTableBodyNone">Large graph rendering issues   </td><td class="markdownTableBodyNone">MAX_NODES/MAX_EDGES guardrails    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">C-005   </td><td class="markdownTableBodyNone">Vercel Lambda size limit   </td><td class="markdownTableBodyNone">50MB maximum   </td><td class="markdownTableBodyNone">Dependency optimization required   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2683"></a>
8.2.1.4 Port Configuration Matrix</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Service   </th><th class="markdownTableHeadNone">Port   </th><th class="markdownTableHeadNone">Protocol   </th><th class="markdownTableHeadNone">Exposure    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FastAPI Backend   </td><td class="markdownTableBodyNone">8000   </td><td class="markdownTableBodyNone">HTTP/HTTPS   </td><td class="markdownTableBodyNone">API endpoints    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Next.js Frontend   </td><td class="markdownTableBodyNone">3000   </td><td class="markdownTableBodyNone">HTTP/HTTPS   </td><td class="markdownTableBodyNone">User interface    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Gradio Legacy UI   </td><td class="markdownTableBodyNone">7860   </td><td class="markdownTableBodyNone">HTTP   </td><td class="markdownTableBodyNone">Legacy interface    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PostgreSQL (optional)   </td><td class="markdownTableBodyNone">5432   </td><td class="markdownTableBodyNone">TCP   </td><td class="markdownTableBodyNone">Database (internal only)   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2684"></a>
8.2.2 Environment Management</h3>
<h4><a class="anchor" id="autotoc_md2685"></a>
8.2.2.1 Infrastructure as Code Components</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">File   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Platform   </th><th class="markdownTableHeadNone">Key Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Dockerfile</code>   </td><td class="markdownTableBodyNone">Container image definition   </td><td class="markdownTableBodyNone">Docker   </td><td class="markdownTableBodyNone"><a class="el" href="classBase.html">Base</a> image, security, health check    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>docker-compose.yml</code>   </td><td class="markdownTableBodyNone">Multi-service orchestration   </td><td class="markdownTableBodyNone">Docker Compose   </td><td class="markdownTableBodyNone">Service definitions, volumes, networking    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>vercel.json</code>   </td><td class="markdownTableBodyNone">Serverless deployment config   </td><td class="markdownTableBodyNone">Vercel   </td><td class="markdownTableBodyNone">Builders, routes, lambda size    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Makefile</code>   </td><td class="markdownTableBodyNone">Build and deployment automation   </td><td class="markdownTableBodyNone">Cross-platform   </td><td class="markdownTableBodyNone">Targets for common operations    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>pyproject.toml</code>   </td><td class="markdownTableBodyNone">Python project metadata   </td><td class="markdownTableBodyNone">Python ecosystem   </td><td class="markdownTableBodyNone">Build system, tool configs    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.env.example</code>   </td><td class="markdownTableBodyNone">Environment variable template   </td><td class="markdownTableBodyNone">All environments   </td><td class="markdownTableBodyNone">Required and optional variables   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2686"></a>
8.2.2.2 Environment Variables Configuration</h4>
<p><b>Required Environment Variables:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variable   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Criticality    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SECRET_KEY</code>   </td><td class="markdownTableBodyNone">JWT signing key   </td><td class="markdownTableBodyNone">None   </td><td class="markdownTableBodyNone"><b>Critical</b> - App fails without    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>DATABASE_URL</code>   </td><td class="markdownTableBodyNone">SQLite connection string   </td><td class="markdownTableBodyNone">None   </td><td class="markdownTableBodyNone"><b>Critical</b> - App fails without    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ADMIN_USERNAME</code>   </td><td class="markdownTableBodyNone">Initial admin account   </td><td class="markdownTableBodyNone">None   </td><td class="markdownTableBodyNone">Required for user seeding    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ADMIN_PASSWORD</code>   </td><td class="markdownTableBodyNone">Initial admin password   </td><td class="markdownTableBodyNone">None   </td><td class="markdownTableBodyNone">Required for user seeding   </td></tr>
</table>
<p><b>Optional Environment Variables:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variable   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Default    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ENV</code>   </td><td class="markdownTableBodyNone">Environment mode   </td><td class="markdownTableBodyNone"><code>development</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ALLOWED_ORIGINS</code>   </td><td class="markdownTableBodyNone">CORS allowlist   </td><td class="markdownTableBodyNone">Built-in defaults    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>USE_REAL_DATA_FETCHER</code>   </td><td class="markdownTableBodyNone">Yahoo Finance toggle   </td><td class="markdownTableBodyNone"><code>false</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>REAL_DATA_CACHE_PATH</code>   </td><td class="markdownTableBodyNone">Cache file location   </td><td class="markdownTableBodyNone">Default path    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>GRAPH_CACHE_PATH</code>   </td><td class="markdownTableBodyNone">Graph serialization path   </td><td class="markdownTableBodyNone">Default path    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>NEXT_PUBLIC_API_URL</code>   </td><td class="markdownTableBodyNone">Frontend API endpoint   </td><td class="markdownTableBodyNone"><code><a href="http://localhost:8000">http://localhost:8000</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>GRADIO_SERVER_NAME</code>   </td><td class="markdownTableBodyNone">Gradio binding address   </td><td class="markdownTableBodyNone"><code>0.0.0.0</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>GRADIO_SERVER_PORT</code>   </td><td class="markdownTableBodyNone">Gradio port   </td><td class="markdownTableBodyNone"><code>7860</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2687"></a>
8.2.2.3 Environment Promotion Strategy</h4>
<div class="fragment"><div class="line">flowchart LR</div>
<div class="line">    subgraph Development[Development Stage]</div>
<div class="line">        LocalDev[Local Development&lt;br/&gt;Feature Branches]</div>
<div class="line">        DevTest[Developer Testing&lt;br/&gt;run-dev.sh]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Integration[Integration Stage]</div>
<div class="line">        PR[Pull Request&lt;br/&gt;Preview Deploy]</div>
<div class="line">        QualityGates[Quality Gates&lt;br/&gt;CI Pipeline]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Staging[Staging Stage]</div>
<div class="line">        DockerValidate[Docker Build&lt;br/&gt;Validation]</div>
<div class="line">        IntegrationTests[Integration&lt;br/&gt;Tests]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Production[Production Stage]</div>
<div class="line">        VercelProd[Vercel Production&lt;br/&gt;Auto-Deploy]</div>
<div class="line">        DockerProd[Docker Registry&lt;br/&gt;GHCR Publish]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    LocalDev --&gt; DevTest</div>
<div class="line">    DevTest --&gt; PR</div>
<div class="line">    PR --&gt; QualityGates</div>
<div class="line">    QualityGates --&gt; DockerValidate</div>
<div class="line">    DockerValidate --&gt; IntegrationTests</div>
<div class="line">    IntegrationTests --&gt; VercelProd</div>
<div class="line">    IntegrationTests --&gt; DockerProd</div>
</div><!-- fragment --><p><b>Promotion Rules:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Stage Transition   </th><th class="markdownTableHeadNone">Trigger   </th><th class="markdownTableHeadNone">Gates    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Development → Integration   </td><td class="markdownTableBodyNone">Pull Request opened   </td><td class="markdownTableBodyNone">Automated CI initiation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Integration → Staging   </td><td class="markdownTableBodyNone">PR review approved   </td><td class="markdownTableBodyNone">All quality gates passed    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Staging → Production   </td><td class="markdownTableBodyNone">Merge to <code>main</code>   </td><td class="markdownTableBodyNone">Security scans, Docker build success   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2688"></a>
8.2.2.4 Backup and Disaster Recovery</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Backup Strategy   </th><th class="markdownTableHeadNone">Recovery Time Objective    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Application Code</b>   </td><td class="markdownTableBodyNone">Git repository (GitHub)   </td><td class="markdownTableBodyNone">Immediate (re-deploy)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Docker Images</b>   </td><td class="markdownTableBodyNone">GHCR versioned tags   </td><td class="markdownTableBodyNone">&lt; 5 minutes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>User Database (SQLite)</b>   </td><td class="markdownTableBodyNone">Volume mount persistence   </td><td class="markdownTableBodyNone">Container restart    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Graph Cache (JSON)</b>   </td><td class="markdownTableBodyNone">Volume mount persistence   </td><td class="markdownTableBodyNone">Cache rebuild &lt; 30 seconds    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Configuration</b>   </td><td class="markdownTableBodyNone">Git-tracked (except secrets)   </td><td class="markdownTableBodyNone">Immediate (re-deploy)   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2690"></a>
8.3 Cloud Services</h2>
<h3><a class="anchor" id="autotoc_md2691"></a>
8.3.1 Primary Platform: Vercel</h3>
<p>Vercel serves as the primary production deployment platform, providing serverless hosting optimized for Next.js applications with Python serverless function support.</p>
<h4><a class="anchor" id="autotoc_md2692"></a>
8.3.1.1 Platform Selection Justification</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Criterion   </th><th class="markdownTableHeadNone">Vercel Advantage   </th><th class="markdownTableHeadNone">Alternative Consideration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Next.js Integration</b>   </td><td class="markdownTableBodyNone">Native framework support   </td><td class="markdownTableBodyNone">Manual configuration on other platforms    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Python Functions</b>   </td><td class="markdownTableBodyNone">Built-in <code>@vercel/python</code> builder   </td><td class="markdownTableBodyNone">Requires container deployment elsewhere    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Global Edge Network</b>   </td><td class="markdownTableBodyNone">Automatic CDN distribution   </td><td class="markdownTableBodyNone">Manual CDN setup required    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Preview Deployments</b>   </td><td class="markdownTableBodyNone">Automatic per-PR previews   </td><td class="markdownTableBodyNone">Additional CI configuration needed    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Zero-Config Scaling</b>   </td><td class="markdownTableBodyNone">Automatic scaling   </td><td class="markdownTableBodyNone">Manual scaling configuration   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2693"></a>
8.3.1.2 Vercel Build Configuration</h4>
<p><b>Source:</b> <code>vercel.json</code></p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;builds&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;src&quot;: &quot;api/main.py&quot;,</div>
<div class="line">      &quot;use&quot;: &quot;@vercel/python&quot;,</div>
<div class="line">      &quot;config&quot;: { &quot;maxLambdaSize&quot;: &quot;50mb&quot; }</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      &quot;src&quot;: &quot;frontend/package.json&quot;,</div>
<div class="line">      &quot;use&quot;: &quot;@vercel/next&quot;</div>
<div class="line">    }</div>
<div class="line">  ],</div>
<div class="line">  &quot;routes&quot;: [</div>
<div class="line">    { &quot;src&quot;: &quot;/api/(.*)&quot;, &quot;dest&quot;: &quot;api/main.py&quot; },</div>
<div class="line">    { &quot;src&quot;: &quot;/(.*)&quot;, &quot;dest&quot;: &quot;frontend/$1&quot; }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Builder   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Backend API   </td><td class="markdownTableBodyNone"><code>@vercel/python</code>   </td><td class="markdownTableBodyNone">maxLambdaSize: 50MB    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Frontend   </td><td class="markdownTableBodyNone"><code>@vercel/next</code>   </td><td class="markdownTableBodyNone">Default Next.js settings   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2694"></a>
8.3.1.3 Route Configuration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Pattern   </th><th class="markdownTableHeadNone">Destination   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/(.*)</code>   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone">Backend API routes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/(.*)</code>   </td><td class="markdownTableBodyNone"><code>frontend/$1</code>   </td><td class="markdownTableBodyNone">Frontend static/SSR pages   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2695"></a>
8.3.2 High Availability Design</h3>
<h4><a class="anchor" id="autotoc_md2696"></a>
8.3.2.1 Vercel High Availability Architecture</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph GlobalHA[Vercel High Availability]</div>
<div class="line">        subgraph EdgeNetwork[Global Edge Network]</div>
<div class="line">            Edge1[Edge Location 1&lt;br/&gt;US-East]</div>
<div class="line">            Edge2[Edge Location 2&lt;br/&gt;EU-West]</div>
<div class="line">            Edge3[Edge Location 3&lt;br/&gt;APAC]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph ComputeRegions[Compute Regions]</div>
<div class="line">            Lambda1[Lambda Instance&lt;br/&gt;Primary]</div>
<div class="line">            Lambda2[Lambda Instance&lt;br/&gt;Replica]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph StaticAssets[Static Asset CDN]</div>
<div class="line">            CDN[Global CDN&lt;br/&gt;Static Files]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    Users([Global Users]) --&gt; Edge1</div>
<div class="line">    Users --&gt; Edge2</div>
<div class="line">    Users --&gt; Edge3</div>
<div class="line"> </div>
<div class="line">    Edge1 --&gt; Lambda1</div>
<div class="line">    Edge2 --&gt; Lambda1</div>
<div class="line">    Edge3 --&gt; Lambda2</div>
<div class="line"> </div>
<div class="line">    Edge1 --&gt; CDN</div>
<div class="line">    Edge2 --&gt; CDN</div>
<div class="line">    Edge3 --&gt; CDN</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">HA Component   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Benefit    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Edge Distribution   </td><td class="markdownTableBodyNone">Multiple global edge locations   </td><td class="markdownTableBodyNone">Low latency worldwide    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Function Replicas   </td><td class="markdownTableBodyNone">Automatic instance scaling   </td><td class="markdownTableBodyNone">Handle traffic spikes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Static CDN   </td><td class="markdownTableBodyNone">Globally distributed cache   </td><td class="markdownTableBodyNone">Fast asset delivery    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Health Monitoring   </td><td class="markdownTableBodyNone">Platform-level monitoring   </td><td class="markdownTableBodyNone">Automatic unhealthy instance removal   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2697"></a>
8.3.2.2 Docker High Availability</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Strategy   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Health Checks   </td><td class="markdownTableBodyNone">HTTP probe on container   </td><td class="markdownTableBodyNone">30s interval, 3 retries    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Restart Policy   </td><td class="markdownTableBodyNone"><code>unless-stopped</code>   </td><td class="markdownTableBodyNone">Automatic recovery    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Volume Persistence   </td><td class="markdownTableBodyNone">Mounted data volumes   </td><td class="markdownTableBodyNone">Data survives restarts   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2698"></a>
8.3.3 Alternative Platform: Google Cloud Run</h3>
<p>A deployment template is available for Google Cloud Run as an alternative cloud deployment option.</p>
<p><b>Source:</b> <code>.github/workflows/google-cloudrun-docker.yml</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Configuration   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Workload Identity Federation   </td><td class="markdownTableBodyNone">OIDC authentication for deployment    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Artifact Registry   </td><td class="markdownTableBodyNone">Container image storage    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Cloud Run Service   </td><td class="markdownTableBodyNone">Serverless container hosting   </td></tr>
</table>
<p><b>Required Google Cloud APIs:</b></p>
<ul>
<li>Artifact Registry API</li>
<li>Cloud Run Admin API</li>
<li>IAM Credentials API</li>
</ul>
<h3><a class="anchor" id="autotoc_md2699"></a>
8.3.4 Cost Optimization Strategy</h3>
<h4><a class="anchor" id="autotoc_md2700"></a>
8.3.4.1 Vercel Cost Considerations</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Resource   </th><th class="markdownTableHeadNone">Hobby (Free)   </th><th class="markdownTableHeadNone">Pro ($20/user/month)   </th><th class="markdownTableHeadNone">Optimization Strategy    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Bandwidth</b>   </td><td class="markdownTableBodyNone">100 GB/month   </td><td class="markdownTableBodyNone">1 TB/month   </td><td class="markdownTableBodyNone">Enable compression, optimize assets    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Function Invocations</b>   </td><td class="markdownTableBodyNone">150K/month   </td><td class="markdownTableBodyNone">1M/month   </td><td class="markdownTableBodyNone">Implement caching    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Active CPU Time</b>   </td><td class="markdownTableBodyNone">Limited   </td><td class="markdownTableBodyNone">40 hours/month   </td><td class="markdownTableBodyNone">Optimize function execution    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Edge Requests</b>   </td><td class="markdownTableBodyNone">Included   </td><td class="markdownTableBodyNone">10M/month   </td><td class="markdownTableBodyNone">Static asset CDN caching   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2701"></a>
8.3.4.2 Infrastructure Cost Estimates</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Deployment Model   </th><th class="markdownTableHeadNone">Monthly Cost Estimate   </th><th class="markdownTableHeadNone">Best For    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Local Development</b>   </td><td class="markdownTableBodyNone">$0   </td><td class="markdownTableBodyNone">Development, testing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Vercel Hobby</b>   </td><td class="markdownTableBodyNone">$0   </td><td class="markdownTableBodyNone">Personal projects, demos    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Vercel Pro</b>   </td><td class="markdownTableBodyNone">$20/user   </td><td class="markdownTableBodyNone">Small teams, production    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Docker Self-Hosted</b>   </td><td class="markdownTableBodyNone">Infrastructure cost only   </td><td class="markdownTableBodyNone">Full control requirements    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Google Cloud Run</b>   </td><td class="markdownTableBodyNone">~$5-50 (usage-based)   </td><td class="markdownTableBodyNone">GCP ecosystem integration   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2703"></a>
8.4 Containerization</h2>
<h3><a class="anchor" id="autotoc_md2704"></a>
8.4.1 Container Platform: Docker</h3>
<p>The system uses Docker for containerization, providing consistent runtime environments across development, testing, and production deployments.</p>
<h4><a class="anchor" id="autotoc_md2705"></a>
8.4.1.1 Base Image Strategy</h4>
<p><b>Source:</b> <code>Dockerfile</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Rationale    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b><a class="el" href="classBase.html">Base</a> Image</b>   </td><td class="markdownTableBodyNone"><code>python:3.11-slim</code>   </td><td class="markdownTableBodyNone">Minimal attack surface, small image size    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Python Version</b>   </td><td class="markdownTableBodyNone">3.11   </td><td class="markdownTableBodyNone">Stable, performance improvements    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Image Variant</b>   </td><td class="markdownTableBodyNone"><code>slim</code>   </td><td class="markdownTableBodyNone">No unnecessary development tools   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2706"></a>
8.4.1.2 Container Security Architecture</h4>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph ContainerSecurity[Container Security Layers]</div>
<div class="line">        subgraph BuildPhase[Build Phase Security]</div>
<div class="line">            BaseImage[Minimal Base Image&lt;br/&gt;python:3.11-slim]</div>
<div class="line">            NoCache[No Pip Cache&lt;br/&gt;--no-cache-dir]</div>
<div class="line">            NoBytecode[No Bytecode&lt;br/&gt;PYTHONDONTWRITEBYTECODE=1]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph RuntimeSecurity[Runtime Security]</div>
<div class="line">            NonRoot[Non-Root User&lt;br/&gt;appuser UID 1000]</div>
<div class="line">            ReadOnly[Minimal Permissions&lt;br/&gt;Application Directory Only]</div>
<div class="line">            HealthCheck[Health Monitoring&lt;br/&gt;HTTP Probe]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph NetworkSecurity[Network Security]</div>
<div class="line">            SinglePort[Single Port Exposure&lt;br/&gt;7860]</div>
<div class="line">            InternalOnly[Internal Services&lt;br/&gt;No External Access]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    BaseImage --&gt; NoCache</div>
<div class="line">    NoCache --&gt; NoBytecode</div>
<div class="line">    NoBytecode --&gt; NonRoot</div>
<div class="line">    NonRoot --&gt; ReadOnly</div>
<div class="line">    ReadOnly --&gt; HealthCheck</div>
<div class="line">    HealthCheck --&gt; SinglePort</div>
<div class="line">    SinglePort --&gt; InternalOnly</div>
</div><!-- fragment --><p><b>Security Measures Implementation:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Security Measure   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Protection    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Non-root User   </td><td class="markdownTableBodyNone"><code>useradd -m -u 1000 appuser</code>   </td><td class="markdownTableBodyNone">Privilege escalation prevention    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Minimal <a class="el" href="classBase.html">Base</a> Image   </td><td class="markdownTableBodyNone"><code>python:3.11-slim</code>   </td><td class="markdownTableBodyNone">Reduced attack surface    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">No Cache   </td><td class="markdownTableBodyNone"><code>pip install --no-cache-dir</code>   </td><td class="markdownTableBodyNone">No sensitive data in layers    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Health Checks   </td><td class="markdownTableBodyNone"><code>HEALTHCHECK</code> instruction   </td><td class="markdownTableBodyNone">Container orchestration support    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">No Bytecode   </td><td class="markdownTableBodyNone"><code>PYTHONDONTWRITEBYTECODE=1</code>   </td><td class="markdownTableBodyNone">Cleaner runtime    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Unbuffered Output   </td><td class="markdownTableBodyNone"><code>PYTHONUNBUFFERED=1</code>   </td><td class="markdownTableBodyNone">Real-time logging   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2707"></a>
8.4.1.3 Dockerfile Configuration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Configuration   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Working Directory   </td><td class="markdownTableBodyNone"><code>/app</code>   </td><td class="markdownTableBodyNone">Application root    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">User   </td><td class="markdownTableBodyNone"><code>appuser</code> (UID 1000)   </td><td class="markdownTableBodyNone">Non-root execution    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Exposed Port   </td><td class="markdownTableBodyNone">7860   </td><td class="markdownTableBodyNone">Gradio interface    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Health Check Interval   </td><td class="markdownTableBodyNone">30 seconds   </td><td class="markdownTableBodyNone">Container health monitoring    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Health Check Timeout   </td><td class="markdownTableBodyNone">10 seconds   </td><td class="markdownTableBodyNone">Probe timeout    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Health Check Retries   </td><td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Failures before unhealthy    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Health Check Start Period   </td><td class="markdownTableBodyNone">5 seconds   </td><td class="markdownTableBodyNone">Startup grace period   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2708"></a>
8.4.2 Docker Compose Configuration</h3>
<p><b>Source:</b> <code>docker-compose.yml</code></p>
<h4><a class="anchor" id="autotoc_md2709"></a>
8.4.2.1 Service Definition</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Service   </th><th class="markdownTableHeadNone">Image   </th><th class="markdownTableHeadNone">Ports   </th><th class="markdownTableHeadNone">Restart Policy    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>app</code>   </td><td class="markdownTableBodyNone"><code>financial-asset-db:latest</code>   </td><td class="markdownTableBodyNone"><code>7860:7860</code>   </td><td class="markdownTableBodyNone"><code>unless-stopped</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>postgres</code> (optional)   </td><td class="markdownTableBodyNone"><code>postgres:15-alpine</code>   </td><td class="markdownTableBodyNone"><code>5432:5432</code>   </td><td class="markdownTableBodyNone"><code>unless-stopped</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2710"></a>
8.4.2.2 Volume Configuration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Volume Mount   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Persistence    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>./src:/app/src</code>   </td><td class="markdownTableBodyNone">Application source   </td><td class="markdownTableBodyNone">Development hot-reload    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>./data:/app/data</code>   </td><td class="markdownTableBodyNone">Data persistence   </td><td class="markdownTableBodyNone">Cache and database files   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2711"></a>
8.4.2.3 Health Check Configuration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Test Command   </td><td class="markdownTableBodyNone"><code>curl -f <a href="http://localhost:7860/">http://localhost:7860/</a></code>   </td><td class="markdownTableBodyNone">HTTP health probe    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Interval   </td><td class="markdownTableBodyNone">30 seconds   </td><td class="markdownTableBodyNone">Check frequency    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Timeout   </td><td class="markdownTableBodyNone">10 seconds   </td><td class="markdownTableBodyNone">Maximum probe duration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Retries   </td><td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Failures before unhealthy    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Start Period   </td><td class="markdownTableBodyNone">40 seconds   </td><td class="markdownTableBodyNone">Startup grace period   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2712"></a>
8.4.3 Image Versioning Approach</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Version Pattern   </th><th class="markdownTableHeadNone">Example   </th><th class="markdownTableHeadNone">Use Case    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>latest</code>   </td><td class="markdownTableBodyNone"><code>financial-asset-db:latest</code>   </td><td class="markdownTableBodyNone">Development, CI    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Semantic Version   </td><td class="markdownTableBodyNone"><code>financial-asset-db:v1.2.3</code>   </td><td class="markdownTableBodyNone">Production releases    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Git SHA   </td><td class="markdownTableBodyNone"><code>financial-asset-db:abc1234</code>   </td><td class="markdownTableBodyNone">Traceability    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Date-based   </td><td class="markdownTableBodyNone"><code>financial-asset-db:2025-01-03</code>   </td><td class="markdownTableBodyNone">Scheduled builds   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2713"></a>
8.4.4 Build Optimization Techniques</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Technique   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Benefit    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Multi-stage builds   </td><td class="markdownTableBodyNone">Separate build and runtime stages   </td><td class="markdownTableBodyNone">Smaller final image    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Layer caching   </td><td class="markdownTableBodyNone">Order Dockerfile commands strategically   </td><td class="markdownTableBodyNone">Faster rebuilds    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.dockerignore</code>   </td><td class="markdownTableBodyNone">Exclude unnecessary files   </td><td class="markdownTableBodyNone">Smaller build context    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Dependency pinning   </td><td class="markdownTableBodyNone">Exact versions in requirements.txt   </td><td class="markdownTableBodyNone">Reproducible builds   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2714"></a>
8.4.5 Security Scanning Requirements</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Tool   </th><th class="markdownTableHeadNone">Workflow   </th><th class="markdownTableHeadNone">Trigger   </th><th class="markdownTableHeadNone">Severity    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Trivy   </td><td class="markdownTableBodyNone"><code>.github/workflows/trivy.yml</code>   </td><td class="markdownTableBodyNone">Push, PR, Weekly schedule   </td><td class="markdownTableBodyNone">CRITICAL, HIGH    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Hadolint   </td><td class="markdownTableBodyNone"><code>.github/workflows/hadolint.yml</code>   </td><td class="markdownTableBodyNone">Push, PR   </td><td class="markdownTableBodyNone">All levels    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Snyk Container   </td><td class="markdownTableBodyNone"><code>.github/workflows/snyk-container.yml</code>   </td><td class="markdownTableBodyNone">Push, PR   </td><td class="markdownTableBodyNone">CRITICAL, HIGH   </td></tr>
</table>
<p><b>Scanning Schedule:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Scan Type   </th><th class="markdownTableHeadNone">Frequency   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">On-demand   </td><td class="markdownTableBodyNone">Every push/PR   </td><td class="markdownTableBodyNone">Immediate feedback    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Scheduled   </td><td class="markdownTableBodyNone">Weekly (Saturday 14:30 UTC)   </td><td class="markdownTableBodyNone">Continuous vulnerability monitoring    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Nightly   </td><td class="markdownTableBodyNone">Daily (02:00 UTC)   </td><td class="markdownTableBodyNone">Security regression detection   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2716"></a>
8.5 Orchestration</h2>
<h3><a class="anchor" id="autotoc_md2717"></a>
8.5.1 Orchestration Platform Selection</h3>
<p>The system uses <b>Docker Compose</b> for container orchestration rather than Kubernetes, optimized for the monolithic architecture design.</p>
<h4><a class="anchor" id="autotoc_md2718"></a>
8.5.1.1 Platform Justification</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Factor   </th><th class="markdownTableHeadNone">Docker Compose   </th><th class="markdownTableHeadNone">Kubernetes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Complexity</b>   </td><td class="markdownTableBodyNone">Low   </td><td class="markdownTableBodyNone">High    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Scale Target</b>   </td><td class="markdownTableBodyNone">&lt; 500 assets   </td><td class="markdownTableBodyNone">Enterprise-scale    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Operational Overhead</b>   </td><td class="markdownTableBodyNone">Minimal   </td><td class="markdownTableBodyNone">Significant    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Learning Curve</b>   </td><td class="markdownTableBodyNone">Gentle   </td><td class="markdownTableBodyNone">Steep    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Current Fit</b>   </td><td class="markdownTableBodyNone">✅ Optimal   </td><td class="markdownTableBodyNone">❌ Over-engineered   </td></tr>
</table>
<p><b>Rationale from Architecture:</b></p>
<ul>
<li>Monolithic core architecture optimized for &lt; 500 assets</li>
<li>Single deployable Python process with modular packages</li>
<li>Simplifies deployment for current scale</li>
<li>Maintains clear module boundaries</li>
</ul>
<h3><a class="anchor" id="autotoc_md2719"></a>
8.5.2 Service Architecture</h3>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph DockerCompose[Docker Compose Orchestration]</div>
<div class="line">        subgraph AppService[Application Service]</div>
<div class="line">            App[app container&lt;br/&gt;Port 7860&lt;br/&gt;Python 3.11-slim]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph OptionalServices[Optional Services]</div>
<div class="line">            Postgres[(PostgreSQL 15&lt;br/&gt;Port 5432&lt;br/&gt;Optional)]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Volumes[Persistent Volumes]</div>
<div class="line">            SrcVol[Source Volume&lt;br/&gt;./src:/app/src]</div>
<div class="line">            DataVol[Data Volume&lt;br/&gt;./data:/app/data]</div>
<div class="line">            PgVol[(PostgreSQL Data&lt;br/&gt;Optional)]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Network[Docker Network]</div>
<div class="line">            Bridge[Default Bridge&lt;br/&gt;Network]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    App --&gt; SrcVol</div>
<div class="line">    App --&gt; DataVol</div>
<div class="line">    App --&gt; Bridge</div>
<div class="line">    Postgres --&gt; PgVol</div>
<div class="line">    Postgres --&gt; Bridge</div>
<div class="line">    App -.-&gt; Postgres</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2720"></a>
8.5.2.1 Current Services</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Service   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Dependencies   </th><th class="markdownTableHeadNone">Health Check    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>app</code>   </td><td class="markdownTableBodyNone">Primary application   </td><td class="markdownTableBodyNone">None   </td><td class="markdownTableBodyNone">HTTP probe    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>postgres</code> (optional)   </td><td class="markdownTableBodyNone">Database persistence   </td><td class="markdownTableBodyNone">None   </td><td class="markdownTableBodyNone">TCP probe   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2721"></a>
8.5.3 Auto-Scaling Configuration</h3>
<h4><a class="anchor" id="autotoc_md2722"></a>
8.5.3.1 Vercel Auto-Scaling</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Scaling Aspect   </th><th class="markdownTableHeadNone">Configuration   </th><th class="markdownTableHeadNone">Behavior    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Function Instances   </td><td class="markdownTableBodyNone">Automatic   </td><td class="markdownTableBodyNone">Scale to zero, scale up on demand    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Cold Start   </td><td class="markdownTableBodyNone">Expected   </td><td class="markdownTableBodyNone">First request may have latency    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Concurrent Requests   </td><td class="markdownTableBodyNone">Platform-managed   </td><td class="markdownTableBodyNone">Automatic instance distribution    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Geographic Distribution   </td><td class="markdownTableBodyNone">Automatic   </td><td class="markdownTableBodyNone">Route to nearest edge   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2723"></a>
8.5.3.2 Docker Manual Scaling</h4>
<div class="fragment"><div class="line"># Scale application to multiple instances (load balancer required)</div>
<div class="line">docker-compose up --scale app=3 -d</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Consideration   </th><th class="markdownTableHeadNone">Current State   </th><th class="markdownTableHeadNone">Production Recommendation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Load Balancing   </td><td class="markdownTableBodyNone">Not configured   </td><td class="markdownTableBodyNone">Add nginx/traefik for multi-instance    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Session Affinity   </td><td class="markdownTableBodyNone">N/A (stateless JWT)   </td><td class="markdownTableBodyNone">Not required    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Health-based Routing   </td><td class="markdownTableBodyNone">Docker health checks   </td><td class="markdownTableBodyNone">Configure orchestrator probes   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2724"></a>
8.5.4 Future Kubernetes Support</h3>
<p>A Kubernetes deployment template is documented in <code><a class="el" href="DOCKER_8md.html">DOCKER.md</a></code> for future enterprise deployments:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Resource   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Deployment   </td><td class="markdownTableBodyNone">3 replicas, rolling update strategy    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Service   </td><td class="markdownTableBodyNone">ClusterIP, port 7860    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ConfigMap   </td><td class="markdownTableBodyNone">Environment variables    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Secret   </td><td class="markdownTableBodyNone">Sensitive credentials   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2726"></a>
8.6 CI/CD Pipeline</h2>
<h3><a class="anchor" id="autotoc_md2727"></a>
8.6.1 Pipeline Architecture Overview</h3>
<p>The system implements a comprehensive CI/CD pipeline using GitHub Actions as the primary platform with CircleCI as a secondary/redundant system.</p>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph Triggers[Pipeline Triggers]</div>
<div class="line">        Push[Push to main]</div>
<div class="line">        PR[Pull Request]</div>
<div class="line">        Schedule[Scheduled Jobs]</div>
<div class="line">        Tag[Version Tags]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph QualityGates[Quality Gates]</div>
<div class="line">        Lint[Linting&lt;br/&gt;flake8, black, isort]</div>
<div class="line">        StaticAnalysis[Static Analysis&lt;br/&gt;pylint, mypy]</div>
<div class="line">        Tests[Test Suite&lt;br/&gt;pytest + coverage]</div>
<div class="line">        Security[Security Scans&lt;br/&gt;bandit, safety]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph BuildPhase[Build Phase]</div>
<div class="line">        DockerBuild[Docker Build]</div>
<div class="line">        FrontendBuild[Frontend Build&lt;br/&gt;Next.js]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph DeployPhase[Deployment Phase]</div>
<div class="line">        VercelDeploy[Vercel&lt;br/&gt;Auto-Deploy]</div>
<div class="line">        GHCRPublish[GHCR&lt;br/&gt;Image Publish]</div>
<div class="line">        ImageSign[Image Signing&lt;br/&gt;cosign]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph Reporting[Reporting]</div>
<div class="line">        Codecov[Codecov&lt;br/&gt;Coverage]</div>
<div class="line">        SARIF[GitHub Security&lt;br/&gt;SARIF Upload]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    Push --&gt; QualityGates</div>
<div class="line">    PR --&gt; QualityGates</div>
<div class="line">    Schedule --&gt; Security</div>
<div class="line">    Tag --&gt; BuildPhase</div>
<div class="line"> </div>
<div class="line">    QualityGates --&gt; BuildPhase</div>
<div class="line">    BuildPhase --&gt; DeployPhase</div>
<div class="line"> </div>
<div class="line">    Tests --&gt; Codecov</div>
<div class="line">    Security --&gt; SARIF</div>
<div class="line">    DockerBuild --&gt; GHCRPublish</div>
<div class="line">    GHCRPublish --&gt; ImageSign</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2728"></a>
8.6.2 Build Pipeline</h3>
<h4><a class="anchor" id="autotoc_md2729"></a>
8.6.2.1 Source Control Triggers</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Trigger   </th><th class="markdownTableHeadNone">Event   </th><th class="markdownTableHeadNone">Branches   </th><th class="markdownTableHeadNone">Actions    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Push   </td><td class="markdownTableBodyNone">Code push   </td><td class="markdownTableBodyNone"><code>main</code>   </td><td class="markdownTableBodyNone">Full CI pipeline    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Pull Request   </td><td class="markdownTableBodyNone">PR opened/updated   </td><td class="markdownTableBodyNone"><code>main</code>   </td><td class="markdownTableBodyNone">CI + preview deployment    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Schedule   </td><td class="markdownTableBodyNone">Cron   </td><td class="markdownTableBodyNone"><code>main</code>   </td><td class="markdownTableBodyNone">Security scans (nightly)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Tag   </td><td class="markdownTableBodyNone">Version tag   </td><td class="markdownTableBodyNone"><code>v*.*.*</code>   </td><td class="markdownTableBodyNone">Release build + publish    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Manual   </td><td class="markdownTableBodyNone"><code>workflow_dispatch</code>   </td><td class="markdownTableBodyNone">Selected   </td><td class="markdownTableBodyNone">On-demand execution   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2730"></a>
8.6.2.2 Build Environment Requirements</h4>
<p><b>Python Environment Matrix:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Status   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Python 3.10   </td><td class="markdownTableBodyNone">✅ Tested   </td><td class="markdownTableBodyNone">Legacy support    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Python 3.11   </td><td class="markdownTableBodyNone">✅ Primary   </td><td class="markdownTableBodyNone">Production runtime    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Python 3.12   </td><td class="markdownTableBodyNone">✅ Tested   </td><td class="markdownTableBodyNone">Forward compatibility   </td></tr>
</table>
<p><b>Node.js Environment Matrix:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Status   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Node.js 18.x   </td><td class="markdownTableBodyNone">✅ Tested   </td><td class="markdownTableBodyNone">LTS support    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Node.js 20.x   </td><td class="markdownTableBodyNone">✅ Primary   </td><td class="markdownTableBodyNone">Current LTS    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Node.js 22.x   </td><td class="markdownTableBodyNone">✅ Tested   </td><td class="markdownTableBodyNone">Forward compatibility   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2731"></a>
8.6.2.3 Dependency Management</h4>
<p><b>Python Dependencies (requirements.txt):</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Package   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>fastapi</code>   </td><td class="markdownTableBodyNone">==0.127.0   </td><td class="markdownTableBodyNone">API framework (pinned)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>pydantic</code>   </td><td class="markdownTableBodyNone">==2.12.5   </td><td class="markdownTableBodyNone">Data validation (pinned)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>numpy</code>   </td><td class="markdownTableBodyNone">==2.2.6   </td><td class="markdownTableBodyNone">Numerical computing (pinned)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>gradio</code>   </td><td class="markdownTableBodyNone">&gt;=4.0.0,&lt;6.0.0   </td><td class="markdownTableBodyNone">Legacy UI    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>plotly</code>   </td><td class="markdownTableBodyNone">&gt;=6.0.0   </td><td class="markdownTableBodyNone">Visualization    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>yfinance</code>   </td><td class="markdownTableBodyNone">&gt;=0.2.51   </td><td class="markdownTableBodyNone">Financial data    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>PyJWT</code>   </td><td class="markdownTableBodyNone">&gt;=2.8.0   </td><td class="markdownTableBodyNone">Authentication    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>passlib[bcrypt]</code>   </td><td class="markdownTableBodyNone">&gt;=1.7.4   </td><td class="markdownTableBodyNone">Password hashing    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>slowapi</code>   </td><td class="markdownTableBodyNone">&gt;=0.1.4   </td><td class="markdownTableBodyNone">Rate limiting    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>urllib3</code>   </td><td class="markdownTableBodyNone">&gt;=2.6.0   </td><td class="markdownTableBodyNone">Security pin    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>zipp</code>   </td><td class="markdownTableBodyNone">&gt;=3.19.1   </td><td class="markdownTableBodyNone">Security pin   </td></tr>
</table>
<p><b>Frontend Dependencies (package.json):</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Package   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>next</code>   </td><td class="markdownTableBodyNone">^14.2.35   </td><td class="markdownTableBodyNone">React framework    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>react</code>   </td><td class="markdownTableBodyNone">^18.2.0   </td><td class="markdownTableBodyNone">UI library    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>axios</code>   </td><td class="markdownTableBodyNone">^1.6.0   </td><td class="markdownTableBodyNone">HTTP client    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>plotly.js</code>   </td><td class="markdownTableBodyNone">^2.27.0   </td><td class="markdownTableBodyNone">Visualization    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>jest</code>   </td><td class="markdownTableBodyNone">^29.7.0   </td><td class="markdownTableBodyNone">Test runner    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>typescript</code>   </td><td class="markdownTableBodyNone">^5.3.0   </td><td class="markdownTableBodyNone">Type checking   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2732"></a>
8.6.2.4 Quality Gates</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Gate   </th><th class="markdownTableHeadNone">Tool   </th><th class="markdownTableHeadNone">Threshold   </th><th class="markdownTableHeadNone">Blocking    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Critical Lint Errors   </td><td class="markdownTableBodyNone">flake8   </td><td class="markdownTableBodyNone">0 errors   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Full Lint   </td><td class="markdownTableBodyNone">flake8 + statistics   </td><td class="markdownTableBodyNone">Pass   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Formatting   </td><td class="markdownTableBodyNone">black &ndash;check   </td><td class="markdownTableBodyNone">100%   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Import Sorting   </td><td class="markdownTableBodyNone">isort &ndash;check-only   </td><td class="markdownTableBodyNone">100%   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Static Analysis   </td><td class="markdownTableBodyNone">pylint   </td><td class="markdownTableBodyNone">&gt;= 7.0 score   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Type Checking   </td><td class="markdownTableBodyNone">mypy   </td><td class="markdownTableBodyNone">Pass   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Unit Tests   </td><td class="markdownTableBodyNone">pytest   </td><td class="markdownTableBodyNone">100% pass   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Coverage   </td><td class="markdownTableBodyNone">Codecov   </td><td class="markdownTableBodyNone">80%+ target   </td><td class="markdownTableBodyNone">Warning   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2733"></a>
8.6.2.5 Artifact Generation and Storage</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Artifact   </th><th class="markdownTableHeadNone">Destination   </th><th class="markdownTableHeadNone">Trigger   </th><th class="markdownTableHeadNone">Retention    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Coverage Reports (XML/HTML)   </td><td class="markdownTableBodyNone">Codecov, GitHub Artifacts   </td><td class="markdownTableBodyNone">Test completion   </td><td class="markdownTableBodyNone">90 days    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Docker Images   </td><td class="markdownTableBodyNone">GHCR (ghcr.io)   </td><td class="markdownTableBodyNone">Push to main, tags   </td><td class="markdownTableBodyNone">Permanent    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Security Scan Results   </td><td class="markdownTableBodyNone">SARIF → GitHub Security   </td><td class="markdownTableBodyNone">Push/PR   </td><td class="markdownTableBodyNone">90 days    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Build Outputs   </td><td class="markdownTableBodyNone">CircleCI Artifacts   </td><td class="markdownTableBodyNone">Build completion   </td><td class="markdownTableBodyNone">30 days   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2734"></a>
8.6.3 GitHub Actions Primary Pipeline</h3>
<p><b>Source:</b> <code>.github/workflows/ci.yml</code></p>
<h4><a class="anchor" id="autotoc_md2735"></a>
8.6.3.1 Workflow Configuration</h4>
<div class="fragment"><div class="line">name: Python CI</div>
<div class="line">on:</div>
<div class="line">  push:</div>
<div class="line">    branches: [&quot;main&quot;]</div>
<div class="line">  pull_request:</div>
<div class="line">    branches: [&quot;main&quot;]</div>
<div class="line">permissions:</div>
<div class="line">  contents: read</div>
<div class="line">concurrency:</div>
<div class="line">  group: ${{ github.workflow }}-${{ github.ref }}</div>
<div class="line">  cancel-in-progress: true</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2736"></a>
8.6.3.2 Job Structure</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Job   </th><th class="markdownTableHeadNone">Actions   </th><th class="markdownTableHeadNone">Dependencies    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>test</code>   </td><td class="markdownTableBodyNone">Lint, format check, type check, pytest   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>security</code>   </td><td class="markdownTableBodyNone">safety, bandit   </td><td class="markdownTableBodyNone">test    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>coverage</code>   </td><td class="markdownTableBodyNone">Codecov upload   </td><td class="markdownTableBodyNone">test   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2737"></a>
8.6.4 CircleCI Secondary Pipeline</h3>
<p><b>Source:</b> <code>.circleci/config.yml</code></p>
<h4><a class="anchor" id="autotoc_md2738"></a>
8.6.4.1 Executor Configuration</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Executor   </th><th class="markdownTableHeadNone">Image   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>python-executor</code>   </td><td class="markdownTableBodyNone"><code>cimg/python:3.11</code>   </td><td class="markdownTableBodyNone">Python jobs    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>node-executor</code>   </td><td class="markdownTableBodyNone"><code>cimg/node:18.19</code>   </td><td class="markdownTableBodyNone">Node.js jobs   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2739"></a>
8.6.4.2 Job Definitions</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Job   </th><th class="markdownTableHeadNone">Actions   </th><th class="markdownTableHeadNone">Parallelism    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>python-lint</code>   </td><td class="markdownTableBodyNone">flake8 (critical errors)   </td><td class="markdownTableBodyNone">1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>python-test</code>   </td><td class="markdownTableBodyNone">pytest with coverage   </td><td class="markdownTableBodyNone">4    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>python-security</code>   </td><td class="markdownTableBodyNone">safety + bandit   </td><td class="markdownTableBodyNone">1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend-lint</code>   </td><td class="markdownTableBodyNone">npm run lint   </td><td class="markdownTableBodyNone">1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend-build</code>   </td><td class="markdownTableBodyNone">npm run build   </td><td class="markdownTableBodyNone">1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>docker-build</code>   </td><td class="markdownTableBodyNone">Build + smoke test   </td><td class="markdownTableBodyNone">1   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2740"></a>
8.6.4.3 Workflow Definitions</h4>
<div class="fragment"><div class="line">flowchart LR</div>
<div class="line">    subgraph BuildAndTest[build-and-test Workflow]</div>
<div class="line">        PLint[python-lint] --&gt; PTest[python-test]</div>
<div class="line">        PTest --&gt; PSec[python-security]</div>
<div class="line"> </div>
<div class="line">        FLint[frontend-lint] --&gt; FBuild[frontend-build]</div>
<div class="line"> </div>
<div class="line">        PTest --&gt; Docker[docker-build]</div>
<div class="line">        FBuild --&gt; Docker</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph NightlySecurity[nightly-security Workflow]</div>
<div class="line">        Cron[Schedule&lt;br/&gt;02:00 UTC] --&gt; NightSec[python-security]</div>
<div class="line">    end</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2741"></a>
8.6.5 Deployment Pipeline</h3>
<h4><a class="anchor" id="autotoc_md2742"></a>
8.6.5.1 Docker Image Publishing</h4>
<p><b>Source:</b> <code>.github/workflows/docker-publish.yml</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Configuration   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Registry   </td><td class="markdownTableBodyNone"><code>ghcr.io</code>   </td><td class="markdownTableBodyNone">GitHub Container Registry    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Image Name   </td><td class="markdownTableBodyNone"><code>${{ github.repository }}</code>   </td><td class="markdownTableBodyNone">Repository-based naming    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Signing   </td><td class="markdownTableBodyNone"><code>sigstore/cosign</code>   </td><td class="markdownTableBodyNone">Supply chain security   </td></tr>
</table>
<p><b>Triggers:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Trigger   </th><th class="markdownTableHeadNone">Condition   </th><th class="markdownTableHeadNone">Action    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Schedule   </td><td class="markdownTableBodyNone">Daily 15:27 UTC   </td><td class="markdownTableBodyNone">Regular builds    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Push   </td><td class="markdownTableBodyNone"><code>main</code> branch, Docker paths   </td><td class="markdownTableBodyNone">Auto-publish    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Tag   </td><td class="markdownTableBodyNone"><code>v*.*.*</code> pattern   </td><td class="markdownTableBodyNone">Versioned release   </td></tr>
</table>
<p><b>Publishing Steps:</b></p>
<ol type="1">
<li>Checkout repository</li>
<li>Install cosign (image signing)</li>
<li>Set up Docker Buildx</li>
<li>Login to GHCR</li>
<li>Extract metadata (tags, labels)</li>
<li>Build and push image</li>
<li>Sign image with cosign (except on PRs)</li>
</ol>
<h4><a class="anchor" id="autotoc_md2743"></a>
8.6.5.2 Vercel Deployment</h4>
<p><b>GitHub Integration (Recommended):</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Step   </th><th class="markdownTableHeadNone">Action   </th><th class="markdownTableHeadNone">Outcome    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Push to GitHub   </td><td class="markdownTableBodyNone">Triggers deployment    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Vercel build   </td><td class="markdownTableBodyNone">Frontend + API compiled    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Preview URL   </td><td class="markdownTableBodyNone">PR gets unique preview    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Production deploy   </td><td class="markdownTableBodyNone">Main branch auto-deploys   </td></tr>
</table>
<p><b>CLI Deployment:</b></p>
<div class="fragment"><div class="line">npm install -g vercel</div>
<div class="line">vercel login</div>
<div class="line">vercel          # Interactive deployment</div>
<div class="line">vercel --prod   # Production deployment</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2744"></a>
8.6.5.3 Deployment Strategy Comparison</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Environment   </th><th class="markdownTableHeadNone">Strategy   </th><th class="markdownTableHeadNone">Rollback   </th><th class="markdownTableHeadNone">Downtime    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Vercel   </td><td class="markdownTableBodyNone">Instant replacement   </td><td class="markdownTableBodyNone">Promote previous   </td><td class="markdownTableBodyNone">Zero    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Docker   </td><td class="markdownTableBodyNone">Build and restart   </td><td class="markdownTableBodyNone">Previous image tag   </td><td class="markdownTableBodyNone">Minimal    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Cloud Run   </td><td class="markdownTableBodyNone">Blue-green traffic split   </td><td class="markdownTableBodyNone">Revert traffic   </td><td class="markdownTableBodyNone">Zero   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2745"></a>
8.6.6 Environment Promotion Workflow</h3>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph PromotionFlow[Environment Promotion Flow]</div>
<div class="line">        subgraph Dev[Development]</div>
<div class="line">            FeatureBranch[Feature Branch&lt;br/&gt;Development]</div>
<div class="line">            LocalTest[Local Testing&lt;br/&gt;run-dev.sh]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Preview[Preview]</div>
<div class="line">            PROpen[Pull Request&lt;br/&gt;Opened]</div>
<div class="line">            PreviewDeploy[Vercel Preview&lt;br/&gt;Deployment]</div>
<div class="line">            CodeReview[Code Review&lt;br/&gt;+ Quality Gates]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Staging[Staging]</div>
<div class="line">            DockerBuild[Docker Build&lt;br/&gt;Validation]</div>
<div class="line">            SecurityScan[Security&lt;br/&gt;Scanning]</div>
<div class="line">            IntegrationTest[Integration&lt;br/&gt;Tests]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Prod[Production]</div>
<div class="line">            MergeMain[Merge to&lt;br/&gt;main]</div>
<div class="line">            ProdDeploy[Production&lt;br/&gt;Deployment]</div>
<div class="line">            Monitoring[Post-Deploy&lt;br/&gt;Monitoring]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    FeatureBranch --&gt; LocalTest</div>
<div class="line">    LocalTest --&gt; PROpen</div>
<div class="line">    PROpen --&gt; PreviewDeploy</div>
<div class="line">    PreviewDeploy --&gt; CodeReview</div>
<div class="line">    CodeReview --&gt; DockerBuild</div>
<div class="line">    DockerBuild --&gt; SecurityScan</div>
<div class="line">    SecurityScan --&gt; IntegrationTest</div>
<div class="line">    IntegrationTest --&gt; MergeMain</div>
<div class="line">    MergeMain --&gt; ProdDeploy</div>
<div class="line">    ProdDeploy --&gt; Monitoring</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2746"></a>
8.6.7 Rollback Procedures</h3>
<h4><a class="anchor" id="autotoc_md2747"></a>
8.6.7.1 Vercel Rollback</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Step   </th><th class="markdownTableHeadNone">Action   </th><th class="markdownTableHeadNone">Location    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Navigate to Vercel Dashboard   </td><td class="markdownTableBodyNone">vercel.com    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Select Deployments tab   </td><td class="markdownTableBodyNone">Project settings    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Find previous working deployment   </td><td class="markdownTableBodyNone">Deployment history    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Click "Promote to Production"   </td><td class="markdownTableBodyNone">Deployment actions   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2748"></a>
8.6.7.2 Docker Rollback</h4>
<div class="fragment"><div class="line"># Pull previous version</div>
<div class="line">docker pull ghcr.io/&lt;repo&gt;:&lt;previous-tag&gt;</div>
<div class="line"> </div>
<div class="line">#### Stop current container</div>
<div class="line">docker-compose down</div>
<div class="line"> </div>
<div class="line">#### Update image tag in docker-compose.yml or use:</div>
<div class="line">docker run -d -p 7860:7860 ghcr.io/&lt;repo&gt;:&lt;previous-tag&gt;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2749"></a>
8.6.8 Post-Deployment Validation</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Check   </th><th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">Expected Result   </th><th class="markdownTableHeadNone">Timeout    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Health Check   </td><td class="markdownTableBodyNone"><code>/api/health</code>   </td><td class="markdownTableBodyNone"><code>{"status": "healthy"}</code>   </td><td class="markdownTableBodyNone">5s    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">API Docs   </td><td class="markdownTableBodyNone"><code>/docs</code>   </td><td class="markdownTableBodyNone">OpenAPI documentation loads   </td><td class="markdownTableBodyNone">10s    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Frontend Load   </td><td class="markdownTableBodyNone"><code>/</code>   </td><td class="markdownTableBodyNone">Page renders   </td><td class="markdownTableBodyNone">3s    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3D Visualization   </td><td class="markdownTableBodyNone">Tab interaction   </td><td class="markdownTableBodyNone">Renders smoothly   </td><td class="markdownTableBodyNone">5s    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Authentication   </td><td class="markdownTableBodyNone"><code>/token</code>   </td><td class="markdownTableBodyNone">Returns JWT   </td><td class="markdownTableBodyNone">2s   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2750"></a>
8.6.9 Reusable CI Components</h3>
<p><b>Source:</b> <code>.github/actions/ci-common/action.yml</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Feature   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Language Support   </td><td class="markdownTableBodyNone">Python or Node.js    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Caching   </td><td class="markdownTableBodyNone">pip/npm cache integration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Configurable Commands   </td><td class="markdownTableBodyNone">Install, build, test    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Error Handling   </td><td class="markdownTableBodyNone"><code>set -euo pipefail</code> strict mode   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2752"></a>
8.7 Infrastructure Monitoring</h2>
<h3><a class="anchor" id="autotoc_md2753"></a>
8.7.1 Monitoring Architecture</h3>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph MonitoringStack[Infrastructure Monitoring Stack]</div>
<div class="line">        subgraph ApplicationMonitoring[Application Layer]</div>
<div class="line">            HealthEndpoint[/api/health&lt;br/&gt;Health Check]</div>
<div class="line">            MetricsEndpoint[/api/metrics&lt;br/&gt;Application Metrics]</div>
<div class="line">            LoggingLayer[Python Logging&lt;br/&gt;INFO Level]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph ContainerMonitoring[Container Layer]</div>
<div class="line">            DockerHealth[Docker HEALTHCHECK&lt;br/&gt;HTTP Probe]</div>
<div class="line">            ComposeHealth[Docker Compose&lt;br/&gt;Health Config]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph CICDMonitoring[CI/CD Layer]</div>
<div class="line">            GitHubSecurity[GitHub Actions&lt;br/&gt;Security Scans]</div>
<div class="line">            CircleCITests[CircleCI&lt;br/&gt;Test Coverage]</div>
<div class="line">            Codecov[Codecov&lt;br/&gt;Coverage Reports]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph SecurityScanning[Security Monitoring]</div>
<div class="line">            SAST[SAST Tools&lt;br/&gt;Bandit, CodeQL]</div>
<div class="line">            Dependency[Dependency Scan&lt;br/&gt;Snyk, Safety]</div>
<div class="line">            Container[Container Scan&lt;br/&gt;Trivy]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    HealthEndpoint --&gt; DockerHealth</div>
<div class="line">    DockerHealth --&gt; ComposeHealth</div>
<div class="line"> </div>
<div class="line">    GitHubSecurity --&gt; SAST</div>
<div class="line">    GitHubSecurity --&gt; Dependency</div>
<div class="line">    GitHubSecurity --&gt; Container</div>
<div class="line"> </div>
<div class="line">    CircleCITests --&gt; Codecov</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2754"></a>
8.7.2 Resource Monitoring</h3>
<h4><a class="anchor" id="autotoc_md2755"></a>
8.7.2.1 Health Check Implementation</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Level   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Endpoint   </td><td class="markdownTableBodyNone"><code>GET /api/health</code>   </td><td class="markdownTableBodyNone">Returns status and graph state    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Docker   </td><td class="markdownTableBodyNone"><code>HEALTHCHECK</code> instruction   </td><td class="markdownTableBodyNone">30s interval, 10s timeout    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Docker Compose   </td><td class="markdownTableBodyNone"><code>healthcheck</code> service config   </td><td class="markdownTableBodyNone">40s start period   </td></tr>
</table>
<p><b>Health Response Schema:</b></p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;status&quot;: &quot;healthy&quot;,</div>
<div class="line">  &quot;graph_initialized&quot;: true</div>
<div class="line">}</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md2756"></a>
8.7.2.2 Application Metrics Endpoint</h4>
<p><b>Endpoint:</b> <code>GET /api/metrics</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Metric   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>total_assets</code>   </td><td class="markdownTableBodyNone">Counter   </td><td class="markdownTableBodyNone">Count of nodes in graph    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>total_relationships</code>   </td><td class="markdownTableBodyNone">Counter   </td><td class="markdownTableBodyNone">Count of edges in graph    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>asset_classes</code>   </td><td class="markdownTableBodyNone">Dictionary   </td><td class="markdownTableBodyNone">Count per asset class    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>avg_degree</code>   </td><td class="markdownTableBodyNone">Gauge   </td><td class="markdownTableBodyNone">Mean connections per node    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>max_degree</code>   </td><td class="markdownTableBodyNone">Gauge   </td><td class="markdownTableBodyNone">Highest connected node    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>network_density</code>   </td><td class="markdownTableBodyNone">Gauge   </td><td class="markdownTableBodyNone">Edge ratio metric    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>relationship_density</code>   </td><td class="markdownTableBodyNone">Gauge   </td><td class="markdownTableBodyNone">Calculated density   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2757"></a>
8.7.3 Performance Metrics and SLAs</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Operation   </th><th class="markdownTableHeadNone">Target SLA   </th><th class="markdownTableHeadNone">Measurement Point    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Response (p95)   </td><td class="markdownTableBodyNone">&lt; 500ms   </td><td class="markdownTableBodyNone">Request to response    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visualization Rendering   </td><td class="markdownTableBodyNone">&lt; 2 seconds   </td><td class="markdownTableBodyNone">Data load to interactive    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Token Generation   </td><td class="markdownTableBodyNone">&lt; 100ms   </td><td class="markdownTableBodyNone">Credential to token    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Graph Initialization   </td><td class="markdownTableBodyNone">&lt; 3 seconds   </td><td class="markdownTableBodyNone">Application startup    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Relationship Discovery   </td><td class="markdownTableBodyNone">&lt; 500ms   </td><td class="markdownTableBodyNone">For 100 assets    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Initial Page Load   </td><td class="markdownTableBodyNone">&lt; 3 seconds   </td><td class="markdownTableBodyNone">Navigation to interactive   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2758"></a>
8.7.4 Logging Configuration</h3>
<h4><a class="anchor" id="autotoc_md2759"></a>
8.7.4.1 Backend Logging</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Setting   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Location    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Level   </td><td class="markdownTableBodyNone"><code>INFO</code>   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Logger   </td><td class="markdownTableBodyNone"><code>logging.getLogger(__name__)</code>   </td><td class="markdownTableBodyNone">Module-specific    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Format   </td><td class="markdownTableBodyNone">Python default   </td><td class="markdownTableBodyNone">Standard library   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2760"></a>
8.7.4.2 Log Point Catalog</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Log Point   </th><th class="markdownTableHeadNone">Level   </th><th class="markdownTableHeadNone">Content   </th><th class="markdownTableHeadNone">Location    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Graph initialization   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">Success/failure   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Application startup   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">Server binding, port   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Application shutdown   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">Shutdown notification   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Cache operations   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">Load/save success   </td><td class="markdownTableBodyNone"><code><a class="el" href="real__data__fetcher_8py.html">real_data_fetcher.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Authentication failures   </td><td class="markdownTableBodyNone">WARNING   </td><td class="markdownTableBodyNone">Failed login attempts   </td><td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Invalid CORS origins   </td><td class="markdownTableBodyNone">WARNING   </td><td class="markdownTableBodyNone">Skipped origin   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Request errors   </td><td class="markdownTableBodyNone">ERROR   </td><td class="markdownTableBodyNone">Exception details   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2761"></a>
8.7.5 Security Monitoring</h3>
<h4><a class="anchor" id="autotoc_md2762"></a>
8.7.5.1 CI/CD Security Scanning Matrix</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Tool   </th><th class="markdownTableHeadNone">Workflow   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Trigger    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Bandit   </td><td class="markdownTableBodyNone"><code>bandit.yml</code>   </td><td class="markdownTableBodyNone">Python SAST   </td><td class="markdownTableBodyNone">Push/PR    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CodeQL   </td><td class="markdownTableBodyNone"><code>codeql.yml</code>   </td><td class="markdownTableBodyNone">Multi-language SAST   </td><td class="markdownTableBodyNone">Push/PR/Schedule    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Semgrep   </td><td class="markdownTableBodyNone"><code>semgrep.yml</code>   </td><td class="markdownTableBodyNone">Pattern detection   </td><td class="markdownTableBodyNone">Push/PR    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Trivy   </td><td class="markdownTableBodyNone"><code>trivy.yml</code>   </td><td class="markdownTableBodyNone">Container scanning   </td><td class="markdownTableBodyNone">Push/PR/Weekly    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Hadolint   </td><td class="markdownTableBodyNone"><code>hadolint.yml</code>   </td><td class="markdownTableBodyNone">Dockerfile linting   </td><td class="markdownTableBodyNone">Push/PR    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Snyk   </td><td class="markdownTableBodyNone"><code>snyk-security.yml</code>   </td><td class="markdownTableBodyNone">Dependency scanning   </td><td class="markdownTableBodyNone">Push/PR    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OSSF Scorecard   </td><td class="markdownTableBodyNone"><code>scorecard.yml</code>   </td><td class="markdownTableBodyNone">Supply chain   </td><td class="markdownTableBodyNone">Push/Schedule    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">DevSkim   </td><td class="markdownTableBodyNone"><code>devskim.yml</code>   </td><td class="markdownTableBodyNone">Security linting   </td><td class="markdownTableBodyNone">Push/PR    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Safety   </td><td class="markdownTableBodyNone">CircleCI   </td><td class="markdownTableBodyNone">Python vulnerabilities   </td><td class="markdownTableBodyNone">Nightly   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2763"></a>
8.7.5.2 SARIF Integration</h4>
<p>All security scans upload results to GitHub Advanced Security via SARIF format:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Configuration   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Upload Action   </td><td class="markdownTableBodyNone"><code>github/codeql-action/upload-sarif@v3</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Permission   </td><td class="markdownTableBodyNone"><code>security-events: write</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Visibility   </td><td class="markdownTableBodyNone">GitHub Security tab   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2764"></a>
8.7.6 Rate Limiting Monitoring</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">Limit   </th><th class="markdownTableHeadNone">Window   </th><th class="markdownTableHeadNone">Response    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>POST /token</code>   </td><td class="markdownTableBodyNone">5 requests   </td><td class="markdownTableBodyNone">1 minute   </td><td class="markdownTableBodyNone">429 + Retry-After    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>GET /api/users/me</code>   </td><td class="markdownTableBodyNone">10 requests   </td><td class="markdownTableBodyNone">1 minute   </td><td class="markdownTableBodyNone">429 + Retry-After   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2765"></a>
8.7.7 Cost Monitoring</h3>
<h4><a class="anchor" id="autotoc_md2766"></a>
8.7.7.1 Vercel Cost Monitoring</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Implementation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Usage Dashboard   </td><td class="markdownTableBodyNone">Vercel project settings    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Spend Alerts   </td><td class="markdownTableBodyNone">Email notifications at thresholds    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Budget Limits   </td><td class="markdownTableBodyNone">$200 default on-demand cap    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Hard Limits   </td><td class="markdownTableBodyNone">Optional auto-pause at 100%   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2767"></a>
8.7.7.2 Container Registry Cost</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Registry   </th><th class="markdownTableHeadNone">Free Tier   </th><th class="markdownTableHeadNone">Overage    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">GHCR (public)   </td><td class="markdownTableBodyNone">Unlimited   </td><td class="markdownTableBodyNone">N/A    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">GHCR (private)   </td><td class="markdownTableBodyNone">1 GB storage, 1 GB transfer   </td><td class="markdownTableBodyNone">$0.25/GB storage   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2768"></a>
8.7.8 Future Monitoring Recommendations</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Recommended Tool   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Metrics Collection   </td><td class="markdownTableBodyNone">Prometheus + prometheus-fastapi-instrumentator   </td><td class="markdownTableBodyNone">RED metrics    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Distributed Tracing   </td><td class="markdownTableBodyNone">OpenTelemetry   </td><td class="markdownTableBodyNone">Request flow visualization    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Log Aggregation   </td><td class="markdownTableBodyNone">Loki or ELK Stack   </td><td class="markdownTableBodyNone">Centralized management    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visualization   </td><td class="markdownTableBodyNone">Grafana   </td><td class="markdownTableBodyNone">Unified dashboard    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Error Tracking   </td><td class="markdownTableBodyNone">Sentry   </td><td class="markdownTableBodyNone">Exception monitoring    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Alerting   </td><td class="markdownTableBodyNone">Prometheus Alertmanager   </td><td class="markdownTableBodyNone">Automated notifications   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2770"></a>
8.8 Database and Storage Infrastructure</h2>
<h3><a class="anchor" id="autotoc_md2771"></a>
8.8.1 Storage Architecture</h3>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph StorageArchitecture[Data Storage Architecture]</div>
<div class="line">        subgraph PrimaryStorage[Primary Storage]</div>
<div class="line">            InMemGraph[In-Memory Graph&lt;br/&gt;Dict-based Structure&lt;br/&gt;&lt; 500 nodes optimal]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph AuthStorage[Authentication Storage]</div>
<div class="line">            SQLiteAuth[(SQLite Database&lt;br/&gt;User Credentials&lt;br/&gt;DATABASE_URL)]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph CacheStorage[Cache Storage]</div>
<div class="line">            JSONCache[(JSON File Cache&lt;br/&gt;Atomic Writes&lt;br/&gt;REAL_DATA_CACHE_PATH)]</div>
<div class="line">            GraphCache[(Graph Cache&lt;br/&gt;Optional Serialization&lt;br/&gt;GRAPH_CACHE_PATH)]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph OptionalStorage[Optional Production Storage]</div>
<div class="line">            PostgreSQL[(PostgreSQL 15&lt;br/&gt;Full Persistence&lt;br/&gt;ASSET_GRAPH_DATABASE_URL)]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    InMemGraph --&gt; SQLiteAuth</div>
<div class="line">    InMemGraph --&gt; JSONCache</div>
<div class="line">    InMemGraph --&gt; GraphCache</div>
<div class="line">    InMemGraph -.-&gt; PostgreSQL</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2772"></a>
8.8.2 Primary Storage: In-Memory Graph</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Data Structure   </td><td class="markdownTableBodyNone"><code>Dict[source_id, List[Tuple[target_id, rel_type, strength]]]</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Implementation   </td><td class="markdownTableBodyNone"><code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Thread Safety   </td><td class="markdownTableBodyNone">Double-checked locking singleton pattern    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Size Constraint   </td><td class="markdownTableBodyNone">Optimal performance for &lt; 500 nodes   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2773"></a>
8.8.3 SQLite Authentication Database</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Purpose   </td><td class="markdownTableBodyNone">User credentials storage    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Implementation   </td><td class="markdownTableBodyNone"><code><a class="el" href="api_2database_8py.html">api/database.py</a></code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Environment Variable   </td><td class="markdownTableBodyNone"><code>DATABASE_URL</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Schema   </td><td class="markdownTableBodyNone"><code>user_credentials</code> table   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2774"></a>
8.8.4 PostgreSQL (Optional Production)</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute   </th><th class="markdownTableHeadNone">Specification    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Image   </td><td class="markdownTableBodyNone"><code>postgres:15-alpine</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Database   </td><td class="markdownTableBodyNone"><code>financial_assets</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">User   </td><td class="markdownTableBodyNone"><code>finuser</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Port   </td><td class="markdownTableBodyNone"><code>5432</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ORM   </td><td class="markdownTableBodyNone">SQLAlchemy &gt;= 2.0.0   </td></tr>
</table>
<p><b>Database Schema (migrations/001_initial.sql):</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Table   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>assets</code>   </td><td class="markdownTableBodyNone">Primary entity table    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>asset_relationships</code>   </td><td class="markdownTableBodyNone">Directed edge table    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>regulatory_events</code>   </td><td class="markdownTableBodyNone">Event records    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>regulatory_event_assets</code>   </td><td class="markdownTableBodyNone">Junction table   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2775"></a>
8.8.5 Caching Strategy</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Cache Type   </th><th class="markdownTableHeadNone">Implementation   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Real Data Cache   </td><td class="markdownTableBodyNone">JSON with atomic writes   </td><td class="markdownTableBodyNone"><code>REAL_DATA_CACHE_PATH</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Graph Cache   </td><td class="markdownTableBodyNone">JSON serialization   </td><td class="markdownTableBodyNone"><code>GRAPH_CACHE_PATH</code>   </td></tr>
</table>
<p><b>Atomic Write Pattern:</b></p>
<ol type="1">
<li>Write to NamedTemporaryFile</li>
<li>Flush and sync to disk</li>
<li><code>os.replace()</code> atomic rename</li>
<li>Guarantees no partial writes</li>
</ol>
<hr  />
<h2><a class="anchor" id="autotoc_md2777"></a>
8.9 Development Workflow Infrastructure</h2>
<h3><a class="anchor" id="autotoc_md2778"></a>
8.9.1 Local Development Setup</h3>
<p><b>Script:</b> <code>run-dev.sh</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Action   </th><th class="markdownTableHeadNone">Command   </th><th class="markdownTableHeadNone">Result    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Create venv   </td><td class="markdownTableBodyNone"><code>python -m venv venv</code>   </td><td class="markdownTableBodyNone">Virtual environment    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Activate venv   </td><td class="markdownTableBodyNone"><code>source venv/bin/activate</code>   </td><td class="markdownTableBodyNone">Environment active    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Install Python deps   </td><td class="markdownTableBodyNone"><code>pip install -r requirements.txt</code>   </td><td class="markdownTableBodyNone">Dependencies ready    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Start FastAPI   </td><td class="markdownTableBodyNone"><code>uvicorn <a class="el" href="namespaceapi_1_1main.html">api.main</a>:app --reload</code>   </td><td class="markdownTableBodyNone">Backend on 8000    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Install frontend deps   </td><td class="markdownTableBodyNone"><code>npm install</code>   </td><td class="markdownTableBodyNone">Node modules ready    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Start Next.js   </td><td class="markdownTableBodyNone"><code>npm run dev</code>   </td><td class="markdownTableBodyNone">Frontend on 3000   </td></tr>
</table>
<p><b>Access Points:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Service   </th><th class="markdownTableHeadNone">URL   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Frontend   </td><td class="markdownTableBodyNone"><a href="http://localhost:3000">http://localhost:3000</a>   </td><td class="markdownTableBodyNone">User interface    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Backend API   </td><td class="markdownTableBodyNone"><a href="http://localhost:8000">http://localhost:8000</a>   </td><td class="markdownTableBodyNone">API endpoints    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Docs   </td><td class="markdownTableBodyNone"><a href="http://localhost:8000/docs">http://localhost:8000/docs</a>   </td><td class="markdownTableBodyNone">OpenAPI documentation   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2779"></a>
8.9.2 Makefile Commands</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Command   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>make install</code>   </td><td class="markdownTableBodyNone">Install production dependencies    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>make install-dev</code>   </td><td class="markdownTableBodyNone">Install development dependencies    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>make test</code>   </td><td class="markdownTableBodyNone">Run tests with coverage    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>make lint</code>   </td><td class="markdownTableBodyNone">Run flake8 + pylint    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>make format</code>   </td><td class="markdownTableBodyNone">Format with black + isort    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>make type-check</code>   </td><td class="markdownTableBodyNone">Run mypy type checking    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>make check</code>   </td><td class="markdownTableBodyNone">Full quality check pipeline    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>make docker-build</code>   </td><td class="markdownTableBodyNone">Build Docker image    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>make docker-run</code>   </td><td class="markdownTableBodyNone">Run Docker container    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>make docker-compose-up</code>   </td><td class="markdownTableBodyNone">Start with docker-compose    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>make docker-shell</code>   </td><td class="markdownTableBodyNone">Shell into container   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2780"></a>
8.9.3 Pre-Commit Hooks</h3>
<p><b>Source:</b> <code>.pre-commit-config.yaml</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Hook   </th><th class="markdownTableHeadNone">Tool   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Configuration    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Formatting   </td><td class="markdownTableBodyNone">black   </td><td class="markdownTableBodyNone">v25.12.0   </td><td class="markdownTableBodyNone">Python 3    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Import Sorting   </td><td class="markdownTableBodyNone">isort   </td><td class="markdownTableBodyNone">v7.0.0   </td><td class="markdownTableBodyNone">profile: black    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Linting   </td><td class="markdownTableBodyNone">flake8   </td><td class="markdownTableBodyNone">v7.3.0   </td><td class="markdownTableBodyNone">+ flake8-docstrings    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Type Checking   </td><td class="markdownTableBodyNone">mypy   </td><td class="markdownTableBodyNone">v1.19.1   </td><td class="markdownTableBodyNone">&ndash;ignore-missing-imports    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Standard Hooks   </td><td class="markdownTableBodyNone">pre-commit   </td><td class="markdownTableBodyNone">latest   </td><td class="markdownTableBodyNone">trailing-whitespace, end-of-file-fixer   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2782"></a>
8.10 Network Architecture</h2>
<h3><a class="anchor" id="autotoc_md2783"></a>
8.10.1 Network Topology</h3>
<div class="fragment"><div class="line">flowchart TB</div>
<div class="line">    subgraph Internet[Public Internet]</div>
<div class="line">        Users([End Users])</div>
<div class="line">        Attackers([Potential Attackers])</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph EdgeSecurity[Edge Security Layer]</div>
<div class="line">        VercelEdge[Vercel Edge&lt;br/&gt;TLS Termination&lt;br/&gt;DDoS Protection]</div>
<div class="line">        CORS[CORS Middleware&lt;br/&gt;Origin Validation]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph ApplicationNetwork[Application Network]</div>
<div class="line">        subgraph RateLimiting[Rate Limiting]</div>
<div class="line">            SlowAPI[SlowAPI&lt;br/&gt;IP-based Throttling]</div>
<div class="line">        end</div>
<div class="line"> </div>
<div class="line">        subgraph Services[Application Services]</div>
<div class="line">            FastAPI[FastAPI Backend&lt;br/&gt;Port 8000]</div>
<div class="line">            NextJS[Next.js Frontend&lt;br/&gt;Port 3000]</div>
<div class="line">            Gradio[Gradio UI&lt;br/&gt;Port 7860]</div>
<div class="line">        end</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph DataNetwork[Data Network - Internal Only]</div>
<div class="line">        Graph[Graph Engine]</div>
<div class="line">        SQLite[(SQLite DB)]</div>
<div class="line">        Cache[(File Cache)]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph External[External APIs]</div>
<div class="line">        YahooFinance[Yahoo Finance&lt;br/&gt;HTTPS]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    Users --&gt; VercelEdge</div>
<div class="line">    Attackers --&gt; VercelEdge</div>
<div class="line">    VercelEdge --&gt; CORS</div>
<div class="line">    CORS --&gt; SlowAPI</div>
<div class="line">    SlowAPI --&gt; Services</div>
<div class="line"> </div>
<div class="line">    FastAPI --&gt; Graph</div>
<div class="line">    Graph --&gt; SQLite</div>
<div class="line">    Graph --&gt; Cache</div>
<div class="line">    Graph --&gt; YahooFinance</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2784"></a>
8.10.2 Port Exposure Matrix</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Port   </th><th class="markdownTableHeadNone">Service   </th><th class="markdownTableHeadNone">Protocol   </th><th class="markdownTableHeadNone">External Access    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3000   </td><td class="markdownTableBodyNone">Next.js Frontend   </td><td class="markdownTableBodyNone">HTTP/HTTPS   </td><td class="markdownTableBodyNone">Yes (via Vercel)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">7860   </td><td class="markdownTableBodyNone">Gradio UI   </td><td class="markdownTableBodyNone">HTTP   </td><td class="markdownTableBodyNone">Yes (Docker)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">8000   </td><td class="markdownTableBodyNone">FastAPI Backend   </td><td class="markdownTableBodyNone">HTTP/HTTPS   </td><td class="markdownTableBodyNone">Yes (via Vercel)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">5432   </td><td class="markdownTableBodyNone">PostgreSQL   </td><td class="markdownTableBodyNone">TCP   </td><td class="markdownTableBodyNone">No (internal only)   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2785"></a>
8.10.3 CORS Configuration</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Environment   </th><th class="markdownTableHeadNone">HTTP localhost   </th><th class="markdownTableHeadNone">HTTPS localhost   </th><th class="markdownTableHeadNone">Vercel URLs   </th><th class="markdownTableHeadNone">Custom HTTPS    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Development   </td><td class="markdownTableBodyNone">✅ Allowed   </td><td class="markdownTableBodyNone">✅ Allowed   </td><td class="markdownTableBodyNone">✅ Allowed   </td><td class="markdownTableBodyNone">✅ Allowed    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Production   </td><td class="markdownTableBodyNone">❌ Rejected   </td><td class="markdownTableBodyNone">✅ Allowed   </td><td class="markdownTableBodyNone">✅ Allowed   </td><td class="markdownTableBodyNone">✅ Allowed   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2787"></a>
8.11 Infrastructure Cost Summary</h2>
<h3><a class="anchor" id="autotoc_md2788"></a>
8.11.1 Cost Comparison Matrix</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Deployment Model   </th><th class="markdownTableHeadNone">Fixed Monthly   </th><th class="markdownTableHeadNone">Variable Costs   </th><th class="markdownTableHeadNone">Best For    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Local Development</b>   </td><td class="markdownTableBodyNone">$0   </td><td class="markdownTableBodyNone">$0   </td><td class="markdownTableBodyNone">Development    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Vercel Hobby</b>   </td><td class="markdownTableBodyNone">$0   </td><td class="markdownTableBodyNone">Overages possible   </td><td class="markdownTableBodyNone">Personal projects    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Vercel Pro</b>   </td><td class="markdownTableBodyNone">$20/user   </td><td class="markdownTableBodyNone">Bandwidth, CPU overage   </td><td class="markdownTableBodyNone">Small teams    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Docker Self-Hosted</b>   </td><td class="markdownTableBodyNone">Server cost   </td><td class="markdownTableBodyNone">N/A   </td><td class="markdownTableBodyNone">Full control    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Google Cloud Run</b>   </td><td class="markdownTableBodyNone">$0   </td><td class="markdownTableBodyNone">Usage-based (~$5-50/month)   </td><td class="markdownTableBodyNone">GCP integration   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2789"></a>
8.11.2 Resource Sizing Guidelines</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Scale   </th><th class="markdownTableHeadNone">Users   </th><th class="markdownTableHeadNone">Assets   </th><th class="markdownTableHeadNone">Recommended Deployment    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Development   </td><td class="markdownTableBodyNone">1-5   </td><td class="markdownTableBodyNone">&lt; 100   </td><td class="markdownTableBodyNone">Local, Vercel Hobby    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Small   </td><td class="markdownTableBodyNone">5-50   </td><td class="markdownTableBodyNone">&lt; 300   </td><td class="markdownTableBodyNone">Vercel Pro, Docker    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Medium   </td><td class="markdownTableBodyNone">50-500   </td><td class="markdownTableBodyNone">&lt; 500   </td><td class="markdownTableBodyNone">Vercel Pro + caching    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Large   </td><td class="markdownTableBodyNone">500+   </td><td class="markdownTableBodyNone">500+   </td><td class="markdownTableBodyNone">Requires architecture changes   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2791"></a>
8.12 Maintenance Procedures</h2>
<h3><a class="anchor" id="autotoc_md2792"></a>
8.12.1 Routine Maintenance</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Task   </th><th class="markdownTableHeadNone">Frequency   </th><th class="markdownTableHeadNone">Procedure    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Dependency Updates   </td><td class="markdownTableBodyNone">Weekly   </td><td class="markdownTableBodyNone">Review Dependabot PRs    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Security Scans   </td><td class="markdownTableBodyNone">Daily (automated)   </td><td class="markdownTableBodyNone">Review SARIF alerts    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Docker Image Refresh   </td><td class="markdownTableBodyNone">Weekly   </td><td class="markdownTableBodyNone">Rebuild with latest base    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Cache Cleanup   </td><td class="markdownTableBodyNone">As needed   </td><td class="markdownTableBodyNone">Clear <code>GRAPH_CACHE_PATH</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Log Review   </td><td class="markdownTableBodyNone">Weekly   </td><td class="markdownTableBodyNone">Check for error patterns   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2793"></a>
8.12.2 Emergency Procedures</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Scenario   </th><th class="markdownTableHeadNone">Detection   </th><th class="markdownTableHeadNone">Response    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Security Vulnerability   </td><td class="markdownTableBodyNone">SARIF alert, CVE notice   </td><td class="markdownTableBodyNone">Patch dependencies, redeploy    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Service Outage   </td><td class="markdownTableBodyNone">Health check failures   </td><td class="markdownTableBodyNone">Rollback to previous deployment    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Data Corruption   </td><td class="markdownTableBodyNone">Validation errors   </td><td class="markdownTableBodyNone">Clear cache, reinitialize    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Rate Limit Abuse   </td><td class="markdownTableBodyNone">429 response spike   </td><td class="markdownTableBodyNone">Review IP patterns, adjust limits   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2795"></a>
8.13 References</h2>
<h3><a class="anchor" id="autotoc_md2796"></a>
8.13.1 Configuration Files</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Path   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Dockerfile</code>   </td><td class="markdownTableBodyNone">Container image definition, security measures, health checks    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>docker-compose.yml</code>   </td><td class="markdownTableBodyNone">Service orchestration, volumes, environment    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>vercel.json</code>   </td><td class="markdownTableBodyNone">Serverless deployment configuration, routing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Makefile</code>   </td><td class="markdownTableBodyNone">Build automation commands    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.github/workflows/ci.yml</code>   </td><td class="markdownTableBodyNone">Primary CI pipeline configuration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.github/workflows/docker-publish.yml</code>   </td><td class="markdownTableBodyNone">Container image publishing    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.github/workflows/trivy.yml</code>   </td><td class="markdownTableBodyNone">Container security scanning    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.circleci/config.yml</code>   </td><td class="markdownTableBodyNone">Secondary CI platform configuration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.github/actions/ci-common/action.yml</code>   </td><td class="markdownTableBodyNone">Reusable CI composite action    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.pre-commit-config.yaml</code>   </td><td class="markdownTableBodyNone">Pre-commit hook configuration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.env.example</code>   </td><td class="markdownTableBodyNone">Environment variable template    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>pyproject.toml</code>   </td><td class="markdownTableBodyNone">Python project metadata and tooling    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>requirements.txt</code>   </td><td class="markdownTableBodyNone">Python dependencies    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>run-dev.sh</code>   </td><td class="markdownTableBodyNone">Development startup script    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>frontend/package.json</code>   </td><td class="markdownTableBodyNone">Frontend dependencies and scripts    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>migrations/001_initial.sql</code>   </td><td class="markdownTableBodyNone">Database schema definition   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2797"></a>
8.13.2 Documentation Files</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Path   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="DEPLOYMENT_8md.html">DEPLOYMENT.md</a></code>   </td><td class="markdownTableBodyNone">Deployment guide    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="DOCKER_8md.html">DOCKER.md</a></code>   </td><td class="markdownTableBodyNone">Docker deployment guide    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="VERCEL__DEPLOYMENT__CHECKLIST_8md.html">VERCEL_DEPLOYMENT_CHECKLIST.md</a></code>   </td><td class="markdownTableBodyNone">Deployment checklist    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="SECURITY_8md.html">SECURITY.md</a></code>   </td><td class="markdownTableBodyNone">Security best practices   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2798"></a>
8.13.3 Technical Specification Cross-References</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Section   </th><th class="markdownTableHeadNone">Relevance    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5.5 DEPLOYMENT ARCHITECTURE   </td><td class="markdownTableBodyNone">Deployment configurations    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6.5 Monitoring and Observability   </td><td class="markdownTableBodyNone">Monitoring implementation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">6.4 Security Architecture   </td><td class="markdownTableBodyNone">Security controls    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3.7 Development &amp; Deployment   </td><td class="markdownTableBodyNone">Development workflow    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2.6 Assumptions and Constraints   </td><td class="markdownTableBodyNone">System constraints    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3.6 Databases &amp; Storage   </td><td class="markdownTableBodyNone">Storage architecture    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3.5 Third-Party Services   </td><td class="markdownTableBodyNone">External dependencies   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2799"></a>
8.13.4 External References</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Resource   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Vercel Documentation   </td><td class="markdownTableBodyNone">Serverless deployment    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Docker Documentation   </td><td class="markdownTableBodyNone">Container configuration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">GitHub Actions Documentation   </td><td class="markdownTableBodyNone">CI/CD pipelines    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CircleCI Documentation   </td><td class="markdownTableBodyNone">Secondary CI platform   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md2800"></a>
9. Appendices</h1>
<h2><a class="anchor" id="autotoc_md2801"></a>
9.1 ADDITIONAL TECHNICAL INFORMATION</h2>
<p>This appendix consolidates supplementary technical reference material that complements the main specification sections, providing quick-reference tables for configuration, operational parameters, and implementation constants.</p>
<h3><a class="anchor" id="autotoc_md2802"></a>
9.1.1 Environment Variables Reference</h3>
<p>The system requires specific environment variables for proper operation, categorized by criticality and purpose.</p>
<h4><a class="anchor" id="autotoc_md2803"></a>
9.1.1.1 Required Environment Variables</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variable   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Example Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SECRET_KEY</code>   </td><td class="markdownTableBodyNone">JWT signing key for authentication   </td><td class="markdownTableBodyNone"><code>your-secure-secret-key</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>DATABASE_URL</code>   </td><td class="markdownTableBodyNone">SQLite authentication database connection   </td><td class="markdownTableBodyNone"><code>sqlite:///auth.db</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ADMIN_USERNAME</code>   </td><td class="markdownTableBodyNone">Initial admin user login credential   </td><td class="markdownTableBodyNone"><code>admin</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ADMIN_PASSWORD</code>   </td><td class="markdownTableBodyNone">Initial admin user password   </td><td class="markdownTableBodyNone"><code>secure-password</code>   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md2804"></a>
9.1.1.2 Optional Environment Variables</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variable   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ENV</code>   </td><td class="markdownTableBodyNone"><code>development</code>   </td><td class="markdownTableBodyNone">Environment mode (development/production)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ALLOWED_ORIGINS</code>   </td><td class="markdownTableBodyNone">(built-in defaults)   </td><td class="markdownTableBodyNone">Comma-separated CORS allowlist    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>USE_REAL_DATA_FETCHER</code>   </td><td class="markdownTableBodyNone"><code>false</code>   </td><td class="markdownTableBodyNone">Enable Yahoo Finance integration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>REAL_DATA_CACHE_PATH</code>   </td><td class="markdownTableBodyNone">None   </td><td class="markdownTableBodyNone">Yahoo Finance cache file location    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>GRAPH_CACHE_PATH</code>   </td><td class="markdownTableBodyNone">None   </td><td class="markdownTableBodyNone">Graph serialization cache location    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ASSET_GRAPH_DATABASE_URL</code>   </td><td class="markdownTableBodyNone">None   </td><td class="markdownTableBodyNone">SQLAlchemy ORM connection string    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>NEXT_PUBLIC_API_URL</code>   </td><td class="markdownTableBodyNone"><code><a href="http://localhost:8000">http://localhost:8000</a></code>   </td><td class="markdownTableBodyNone">Frontend API base URL    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ADMIN_EMAIL</code>   </td><td class="markdownTableBodyNone">None   </td><td class="markdownTableBodyNone">Admin user email address    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ADMIN_FULL_NAME</code>   </td><td class="markdownTableBodyNone">None   </td><td class="markdownTableBodyNone">Admin user display name    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ADMIN_DISABLED</code>   </td><td class="markdownTableBodyNone"><code>false</code>   </td><td class="markdownTableBodyNone">Disable admin account flag   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2805"></a>
9.1.2 Relationship Types Reference</h3>
<p>The graph engine supports eight relationship types with specific detection rules and directionality configurations.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Directionality   </th><th class="markdownTableHeadNone">Detection Rule    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>same_sector</code>   </td><td class="markdownTableBodyNone">Bidirectional   </td><td class="markdownTableBodyNone">Assets share identical sector value    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>corporate_bond_to_equity</code>   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">Bond <code>issuer_id</code> matches equity <code>id</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>commodity_exposure</code>   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">Equity sector linked to commodity type    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>currency_risk</code>   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">Asset currency ≠ "USD"    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>income_comparison</code>   </td><td class="markdownTableBodyNone">Bidirectional   </td><td class="markdownTableBodyNone">Dividend yield vs bond yield proximity    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>regulatory_impact</code>   </td><td class="markdownTableBodyNone">Directional   </td><td class="markdownTableBodyNone">Shared regulatory event reference    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>market_cap_similar</code>   </td><td class="markdownTableBodyNone">Bidirectional   </td><td class="markdownTableBodyNone">Market cap within 50% range    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>correlation</code>   </td><td class="markdownTableBodyNone">Bidirectional   </td><td class="markdownTableBodyNone">Price correlation exceeds threshold   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2806"></a>
9.1.3 HTTP Status Codes Reference</h3>
<p>The API returns standardized HTTP status codes with consistent error message formatting.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Code   </th><th class="markdownTableHeadNone">Meaning   </th><th class="markdownTableHeadNone">Usage Context    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">200   </td><td class="markdownTableBodyNone">OK   </td><td class="markdownTableBodyNone">Successful GET/POST request    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">400   </td><td class="markdownTableBodyNone">Bad Request   </td><td class="markdownTableBodyNone">Invalid input, inactive user account    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">401   </td><td class="markdownTableBodyNone">Unauthorized   </td><td class="markdownTableBodyNone">Invalid/expired token, missing credentials    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">403   </td><td class="markdownTableBodyNone">Forbidden   </td><td class="markdownTableBodyNone">Invalid CORS origin    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">404   </td><td class="markdownTableBodyNone">Not Found   </td><td class="markdownTableBodyNone">Asset or resource not found    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">422   </td><td class="markdownTableBodyNone">Validation Error   </td><td class="markdownTableBodyNone">Pydantic validation failure    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">429   </td><td class="markdownTableBodyNone">Too Many Requests   </td><td class="markdownTableBodyNone">Rate limit exceeded    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">500   </td><td class="markdownTableBodyNone">Internal Server Error   </td><td class="markdownTableBodyNone">Unexpected exception   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2807"></a>
9.1.4 Default Port Assignments</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Port   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FastAPI Backend   </td><td class="markdownTableBodyNone">8000   </td><td class="markdownTableBodyNone">REST API development server    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Next.js Frontend   </td><td class="markdownTableBodyNone">3000   </td><td class="markdownTableBodyNone">Modern UI development server    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Gradio UI   </td><td class="markdownTableBodyNone">7860   </td><td class="markdownTableBodyNone">Legacy Python UI server   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2808"></a>
9.1.5 Asset Class Color Scheme</h3>
<p>The visualization layer uses a consistent color scheme for asset class identification.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Asset Class   </th><th class="markdownTableHeadNone">Hex Color   </th><th class="markdownTableHeadNone">RGB Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Equity   </td><td class="markdownTableBodyNone">#1f77b4   </td><td class="markdownTableBodyNone">rgb(31, 119, 180)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Fixed Income   </td><td class="markdownTableBodyNone">#2ca02c   </td><td class="markdownTableBodyNone">rgb(44, 160, 44)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Commodity   </td><td class="markdownTableBodyNone">#ff7f0e   </td><td class="markdownTableBodyNone">rgb(255, 127, 14)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Currency   </td><td class="markdownTableBodyNone">#d62728   </td><td class="markdownTableBodyNone">rgb(214, 39, 40)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Derivative   </td><td class="markdownTableBodyNone">#9467bd   </td><td class="markdownTableBodyNone">rgb(148, 103, 189)   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2809"></a>
9.1.6 Visualization Guardrails</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter   </th><th class="markdownTableHeadNone">Default Value   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">MAX_NODES   </td><td class="markdownTableBodyNone">500   </td><td class="markdownTableBodyNone">Prevent browser memory exhaustion    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">MAX_EDGES   </td><td class="markdownTableBodyNone">2000   </td><td class="markdownTableBodyNone">Limit rendering complexity    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Seed   </td><td class="markdownTableBodyNone">42   </td><td class="markdownTableBodyNone">Deterministic 3D layout reproduction   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2810"></a>
9.1.7 Rate Limiting Configuration</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">Limit   </th><th class="markdownTableHeadNone">Window    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>POST /token</code>   </td><td class="markdownTableBodyNone">5 requests   </td><td class="markdownTableBodyNone">1 minute    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>GET /api/users/me</code>   </td><td class="markdownTableBodyNone">10 requests   </td><td class="markdownTableBodyNone">1 minute    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Other endpoints   </td><td class="markdownTableBodyNone">Unlimited   </td><td class="markdownTableBodyNone">N/A   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2811"></a>
9.1.8 Performance SLA Targets</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Operation   </th><th class="markdownTableHeadNone">Target SLA    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API Response (p95)   </td><td class="markdownTableBodyNone">&lt; 500ms    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visualization Rendering   </td><td class="markdownTableBodyNone">&lt; 2 seconds    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Token Generation   </td><td class="markdownTableBodyNone">&lt; 100ms    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Graph Initialization   </td><td class="markdownTableBodyNone">&lt; 3 seconds    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Relationship Discovery (100 assets)   </td><td class="markdownTableBodyNone">&lt; 500ms    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Initial Page Load   </td><td class="markdownTableBodyNone">&lt; 3 seconds   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2812"></a>
9.1.9 Timeout Configuration</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Timeout   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">JWT Token   </td><td class="markdownTableBodyNone">30 minutes   </td><td class="markdownTableBodyNone">Session expiration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Rate Limit Window   </td><td class="markdownTableBodyNone">1 minute   </td><td class="markdownTableBodyNone">Request counting period    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HTTP Client   </td><td class="markdownTableBodyNone">30 seconds   </td><td class="markdownTableBodyNone">API request timeout    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Health Check   </td><td class="markdownTableBodyNone">30 seconds   </td><td class="markdownTableBodyNone">Container probe interval   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2813"></a>
9.1.10 Yahoo Finance Supported Symbols</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Category   </th><th class="markdownTableHeadNone">Symbols    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Equities   </td><td class="markdownTableBodyNone">AAPL, MSFT, XOM, JPM    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Bond ETFs   </td><td class="markdownTableBodyNone">TLT, LQD, HYG    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Commodities   </td><td class="markdownTableBodyNone">GC=F (Gold), CL=F (Crude Oil), SI=F (Silver)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Currencies   </td><td class="markdownTableBodyNone">EURUSD=X, GBPUSD=X, JPYUSD=X   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2814"></a>
9.1.11 Sample Data Statistics</h3>
<p>The sample database provides baseline testing and offline development data.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Entity Type   </th><th class="markdownTableHeadNone">Count    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Total Assets   </td><td class="markdownTableBodyNone">19    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Regulatory Events   </td><td class="markdownTableBodyNone">4    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Asset Classes   </td><td class="markdownTableBodyNone">5 (all supported)   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2816"></a>
9.2 GLOSSARY</h2>
<p>This glossary defines key terms used throughout the Technical Specification, organized by domain.</p>
<h3><a class="anchor" id="autotoc_md2817"></a>
9.2.1 Financial Domain Terms</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Term   </th><th class="markdownTableHeadNone">Definition    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Asset</b>   </td><td class="markdownTableBodyNone">A financial instrument with tradeable value. <a class="el" href="classBase.html">Base</a> domain entity requiring id, symbol, name, asset_class, sector, and price fields.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Asset Class</b>   </td><td class="markdownTableBodyNone">Category classification for financial instruments. Supported values: Equity, Fixed Income, Commodity, Currency, Derivative.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Asset Relationship Graph</b>   </td><td class="markdownTableBodyNone">Core in-memory data structure storing assets as nodes and relationships as weighted edges in an adjacency list format.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Average Degree</b>   </td><td class="markdownTableBodyNone">Network metric representing the mean number of connections per node, calculated as (2 × total_relationships) / total_assets.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Bidirectional Relationship</b>   </td><td class="markdownTableBodyNone">A relationship type where the connection applies equally in both directions (e.g., same_sector, income_comparison).    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Bond</b>   </td><td class="markdownTableBodyNone">Fixed income security with specialized attributes: yield_to_maturity, coupon_rate, maturity_date, credit_rating, and issuer_id.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Commodity</b>   </td><td class="markdownTableBodyNone">Asset class representing tradeable goods contracts with attributes: contract_size, delivery_date, and volatility.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Commodity Exposure</b>   </td><td class="markdownTableBodyNone">Directional relationship linking equity companies to commodity price movements based on sector exposure.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Corporate Bond to Equity</b>   </td><td class="markdownTableBodyNone">Directional relationship linking bonds to issuing companies via issuer_id matching equity id.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Coupon Rate</b>   </td><td class="markdownTableBodyNone">Annual interest rate paid on a bond's face value, expressed as a percentage.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Credit Rating</b>   </td><td class="markdownTableBodyNone">Assessment of bond issuer creditworthiness, typically represented as letter grades (e.g., AAA, BBB).    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Currency</b>   </td><td class="markdownTableBodyNone">Asset class for foreign exchange pairs with attributes: exchange_rate, country, and central_bank_rate.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Currency Risk</b>   </td><td class="markdownTableBodyNone">Directional relationship for assets with non-USD currency exposure, indicating foreign exchange risk.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Derivative</b>   </td><td class="markdownTableBodyNone">Financial instrument whose value is derived from underlying assets. Reserved for future expansion.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Directional Relationship</b>   </td><td class="markdownTableBodyNone">A relationship type where the connection flows from source to target (e.g., corporate_bond_to_equity).    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Dividend Yield</b>   </td><td class="markdownTableBodyNone">Annual dividend payment as percentage of stock price, applicable to equity assets.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Earnings Per Share (EPS)</b>   </td><td class="markdownTableBodyNone">Company profitability metric calculated as net income divided by outstanding shares.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Equity</b>   </td><td class="markdownTableBodyNone">Stock/share ownership in a company with attributes: pe_ratio, dividend_yield, earnings_per_share, and book_value.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Fixed Income</b>   </td><td class="markdownTableBodyNone">Asset class for bonds and debt securities generating regular income payments.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Impact Score</b>   </td><td class="markdownTableBodyNone">Numerical measure (-1.0 to +1.0) representing regulatory event impact. Negative indicates adverse impact, positive indicates favorable.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Income Comparison</b>   </td><td class="markdownTableBodyNone">Bidirectional relationship comparing dividend yields to bond yields for cross-asset income analysis.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Market Cap</b>   </td><td class="markdownTableBodyNone">Market Capitalization; total market value of a company's outstanding shares.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Max Degree</b>   </td><td class="markdownTableBodyNone">Network metric representing the highest-connected node in the graph by edge count.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Network Density</b>   </td><td class="markdownTableBodyNone">Ratio of actual relationships to maximum possible relationships, calculated as total_edges / (nodes × (nodes-1) / 2).    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>P/E Ratio</b>   </td><td class="markdownTableBodyNone">Price-to-Earnings ratio; stock price divided by earnings per share, indicating valuation.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Regulatory Activity</b>   </td><td class="markdownTableBodyNone">Enumerated type of corporate or regulatory event: earnings_report, sec_filing, dividend_announcement, bond_issuance, acquisition, bankruptcy.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Regulatory Event</b>   </td><td class="markdownTableBodyNone">Corporate or regulatory activity affecting one or more assets with dated occurrence, description, and scored impact.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Relationship Strength</b>   </td><td class="markdownTableBodyNone">Normalized weight (0.0-1.0) indicating connection intensity between assets in a relationship.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Same Sector</b>   </td><td class="markdownTableBodyNone">Bidirectional relationship linking assets operating in the same industry sector classification.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Sector</b>   </td><td class="markdownTableBodyNone">Industry classification for assets (e.g., Technology, Energy, Financial Services, Healthcare).    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Yield to Maturity (YTM)</b>   </td><td class="markdownTableBodyNone">Total return anticipated on a bond if held until maturity, accounting for coupon payments and price difference.   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2818"></a>
9.2.2 Technical Architecture Terms</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Term   </th><th class="markdownTableHeadNone">Definition    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Adjacency List</b>   </td><td class="markdownTableBodyNone">Graph data structure where each node stores a list of connected nodes, implemented as Dict[str, List[Tuple[str, str, float]]].    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>App Router</b>   </td><td class="markdownTableBodyNone">Next.js 14 routing paradigm using file-system-based routing in the app/ directory with React Server Components.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Atomic Write</b>   </td><td class="markdownTableBodyNone">File operation pattern using NamedTemporaryFile + os.replace() to prevent data corruption during writes.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Bearer Token</b>   </td><td class="markdownTableBodyNone">HTTP authorization scheme where the token is passed in the Authorization header as "Bearer {token}".    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Context Manager</b>   </td><td class="markdownTableBodyNone">Python pattern using <code>with</code> statements for resource management, implemented as session_scope() for database transactions.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Dataclass</b>   </td><td class="markdownTableBodyNone">Python @dataclass decorator providing automatic <b>init</b>, <b>repr</b>, and field handling for domain models.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Dependency Injection</b>   </td><td class="markdownTableBodyNone">Design pattern where dependencies are passed to components rather than created internally, used in FastAPI route dependencies.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Double-Checked Locking</b>   </td><td class="markdownTableBodyNone">Thread-safe singleton pattern checking instance existence before and after acquiring lock to minimize contention.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b><a class="el" href="classEnum.html">Enum</a></b>   </td><td class="markdownTableBodyNone">Python enumeration type for type-safe constant values (e.g., AssetClass, RegulatoryActivity).    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Graph Engine</b>   </td><td class="markdownTableBodyNone">Core component managing asset relationships, 3D layout calculation, and network metrics computation.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Hybrid Storage</b>   </td><td class="markdownTableBodyNone">Architecture combining multiple storage mechanisms: in-memory graph, SQLite auth, optional ORM, and JSON cache.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Layered Architecture</b>   </td><td class="markdownTableBodyNone">System design separating concerns into Presentation, API, Business Logic, and Data layers for maintainability.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Lifespan Context Manager</b>   </td><td class="markdownTableBodyNone">FastAPI pattern for managing application startup/shutdown events using asynccontextmanager decorator.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Middleware</b>   </td><td class="markdownTableBodyNone">Software layer intercepting requests/responses for cross-cutting concerns (CORS, rate limiting, authentication).    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Monolithic Architecture</b>   </td><td class="markdownTableBodyNone">Single deployable unit containing all application components, as opposed to microservices.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Post-Init Validation</b>   </td><td class="markdownTableBodyNone">Dataclass validation in <b>post_init</b> method executing after instance creation for business rule enforcement.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Repository Pattern</b>   </td><td class="markdownTableBodyNone">Data access abstraction providing collection-like interface over storage, implemented as AssetGraphRepository.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Seed Value</b>   </td><td class="markdownTableBodyNone">Random number generator initialization value (42) for deterministic/reproducible 3D layouts.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Session Scope</b>   </td><td class="markdownTableBodyNone">Database transaction boundary context manager committing on success, rolling back on error.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Singleton Pattern</b>   </td><td class="markdownTableBodyNone">Design pattern ensuring only one instance of a class exists, applied to the graph instance with thread-safety.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Thread-Safe</b>   </td><td class="markdownTableBodyNone">Code safe for concurrent execution by multiple threads without race conditions.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Type Contract</b>   </td><td class="markdownTableBodyNone">Formal interface defining expected data types through Pydantic models and TypeScript interfaces.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Wide Table Design</b>   </td><td class="markdownTableBodyNone">Database schema with nullable columns for type-specific attributes in a single table for simpler queries.   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2819"></a>
9.2.3 UI/UX Terms</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Term   </th><th class="markdownTableHeadNone">Definition    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>3D Network Visualization</b>   </td><td class="markdownTableBodyNone">Interactive Plotly-based graph rendering with rotation, zoom, pan, and hover capabilities for spatial exploration.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>2D Network Visualization</b>   </td><td class="markdownTableBodyNone">Flat network view with selectable layout algorithms (spring, circular, grid) for static analysis.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Asset Explorer</b>   </td><td class="markdownTableBodyNone">Filterable, paginated table view for browsing assets by class and sector with direct detail access.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Color Mapping</b>   </td><td class="markdownTableBodyNone">Visual encoding scheme mapping asset classes to distinct colors for identification in visualizations.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Hover Text</b>   </td><td class="markdownTableBodyNone">Tooltip content displayed when cursor hovers over visualization elements showing asset details.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Metrics Dashboard</b>   </td><td class="markdownTableBodyNone">UI component displaying network statistics including node/edge counts and distribution analytics.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Schema Report</b>   </td><td class="markdownTableBodyNone">Auto-generated Markdown documentation of data models, relationships, and business rules.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Tabbed Interface</b>   </td><td class="markdownTableBodyNone">UI organization with multiple content areas accessible via tab controls (Gradio implements 6 tabs).   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2820"></a>
9.2.4 Infrastructure Terms</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Term   </th><th class="markdownTableHeadNone">Definition    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>ASGI Server</b>   </td><td class="markdownTableBodyNone">Asynchronous Server Gateway Interface server (Uvicorn) handling async HTTP requests for FastAPI.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Container Hardening</b>   </td><td class="markdownTableBodyNone">Security measures applied to Docker containers including non-root user execution and minimal base images.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Edge Network</b>   </td><td class="markdownTableBodyNone">Vercel's globally distributed CDN network for TLS termination and static asset delivery.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Health Check</b>   </td><td class="markdownTableBodyNone">HTTP endpoint probe (/api/health) returning system status for load balancer and orchestration verification.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Lambda Function</b>   </td><td class="markdownTableBodyNone">Serverless compute unit on Vercel handling individual API requests without persistent server.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Static Pool</b>   </td><td class="markdownTableBodyNone">SQLAlchemy connection pool configuration for in-memory SQLite maintaining single shared connection.   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2822"></a>
9.3 ACRONYMS</h2>
<p>This section provides expanded forms for all acronyms used throughout the Technical Specification.</p>
<h3><a class="anchor" id="autotoc_md2823"></a>
9.3.1 Standard Technical Acronyms</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Acronym   </th><th class="markdownTableHeadNone">Expansion    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">API   </td><td class="markdownTableBodyNone">Application Programming Interface    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ASGI   </td><td class="markdownTableBodyNone">Asynchronous Server Gateway Interface    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CDN   </td><td class="markdownTableBodyNone">Content Delivery Network    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CI/CD   </td><td class="markdownTableBodyNone">Continuous Integration/Continuous Deployment    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CLI   </td><td class="markdownTableBodyNone">Command Line Interface    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CORS   </td><td class="markdownTableBodyNone">Cross-Origin Resource Sharing    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CPU   </td><td class="markdownTableBodyNone">Central Processing Unit    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CRUD   </td><td class="markdownTableBodyNone">Create, Read, Update, Delete    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CSS   </td><td class="markdownTableBodyNone">Cascading Style Sheets    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">DAG   </td><td class="markdownTableBodyNone">Directed Acyclic Graph    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">DDL   </td><td class="markdownTableBodyNone">Data Definition Language    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">DNS   </td><td class="markdownTableBodyNone">Domain Name System    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">DOM   </td><td class="markdownTableBodyNone">Document Object Model    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">DRY   </td><td class="markdownTableBodyNone">Don't Repeat Yourself    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ERD   </td><td class="markdownTableBodyNone">Entity Relationship Diagram    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FK   </td><td class="markdownTableBodyNone">Foreign Key    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">GUI   </td><td class="markdownTableBodyNone">Graphical User Interface    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HTML   </td><td class="markdownTableBodyNone">HyperText Markup Language    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HTTP   </td><td class="markdownTableBodyNone">HyperText Transfer Protocol    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HTTPS   </td><td class="markdownTableBodyNone">HTTP Secure (over TLS)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">IDE   </td><td class="markdownTableBodyNone">Integrated Development Environment    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">IP   </td><td class="markdownTableBodyNone">Internet Protocol    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">JSON   </td><td class="markdownTableBodyNone">JavaScript Object Notation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">KPI   </td><td class="markdownTableBodyNone">Key Performance Indicator    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LTS   </td><td class="markdownTableBodyNone">Long-Term Support    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ORM   </td><td class="markdownTableBodyNone">Object-Relational Mapping    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PK   </td><td class="markdownTableBodyNone">Primary Key    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PR   </td><td class="markdownTableBodyNone">Pull Request    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">RAM   </td><td class="markdownTableBodyNone">Random Access Memory    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">REST   </td><td class="markdownTableBodyNone">Representational State Transfer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SDK   </td><td class="markdownTableBodyNone">Software Development Kit    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SLA   </td><td class="markdownTableBodyNone">Service Level Agreement    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SQL   </td><td class="markdownTableBodyNone">Structured Query Language    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SSR   </td><td class="markdownTableBodyNone">Server-Side Rendering    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">TLS   </td><td class="markdownTableBodyNone">Transport Layer Security    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">TTL   </td><td class="markdownTableBodyNone">Time To Live    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">UID   </td><td class="markdownTableBodyNone">User Identifier    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">UK   </td><td class="markdownTableBodyNone">Unique Key    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">URI   </td><td class="markdownTableBodyNone">Uniform Resource Identifier    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">URL   </td><td class="markdownTableBodyNone">Uniform Resource Locator    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">UTC   </td><td class="markdownTableBodyNone">Coordinated Universal Time    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">UUID   </td><td class="markdownTableBodyNone">Universally Unique Identifier    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">WSGI   </td><td class="markdownTableBodyNone">Web Server Gateway Interface    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">XML   </td><td class="markdownTableBodyNone">eXtensible Markup Language    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">YAML   </td><td class="markdownTableBodyNone">YAML Ain't Markup Language   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2824"></a>
9.3.2 Security &amp; Authentication Acronyms</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Acronym   </th><th class="markdownTableHeadNone">Expansion    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HMAC   </td><td class="markdownTableBodyNone">Hash-based Message Authentication Code    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HS256   </td><td class="markdownTableBodyNone">HMAC-SHA256 (JWT signing algorithm)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">JWT   </td><td class="markdownTableBodyNone">JSON Web Token    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">NIST   </td><td class="markdownTableBodyNone">National Institute of Standards and Technology    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">RBAC   </td><td class="markdownTableBodyNone">Role-Based Access Control    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SARIF   </td><td class="markdownTableBodyNone">Static Analysis Results Interchange Format    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SAST   </td><td class="markdownTableBodyNone">Static Application Security Testing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SHA   </td><td class="markdownTableBodyNone">Secure Hash Algorithm    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">TOTP   </td><td class="markdownTableBodyNone">Time-based One-Time Password    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">WAL   </td><td class="markdownTableBodyNone">Write-Ahead Logging   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2825"></a>
9.3.3 Financial Domain Acronyms</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Acronym   </th><th class="markdownTableHeadNone">Expansion    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">EPS   </td><td class="markdownTableBodyNone">Earnings Per Share    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ETF   </td><td class="markdownTableBodyNone">Exchange-Traded Fund    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FX   </td><td class="markdownTableBodyNone">Foreign Exchange    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">P/E   </td><td class="markdownTableBodyNone">Price-to-Earnings (ratio)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SEC   </td><td class="markdownTableBodyNone">Securities and Exchange Commission    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">YTM   </td><td class="markdownTableBodyNone">Yield to Maturity   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2826"></a>
9.3.4 Platform &amp; Tool Acronyms</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Acronym   </th><th class="markdownTableHeadNone">Expansion    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">GHCR   </td><td class="markdownTableBodyNone">GitHub Container Registry    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">MCP   </td><td class="markdownTableBodyNone">Model Context Protocol    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OSSF   </td><td class="markdownTableBodyNone">Open Source Security Foundation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ISO   </td><td class="markdownTableBodyNone">International Organization for Standardization   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2827"></a>
9.3.5 Version-Specific Designations</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Designation   </th><th class="markdownTableHeadNone">Meaning    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ISO 4217   </td><td class="markdownTableBodyNone">International standard for currency codes (e.g., USD, EUR)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ISO 8601   </td><td class="markdownTableBodyNone">International standard for date/time format (YYYY-MM-DD)   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2829"></a>
9.4 QUICK REFERENCE CARDS</h2>
<h3><a class="anchor" id="autotoc_md2830"></a>
9.4.1 API Endpoint Quick Reference</h3>
<div class="fragment"><div class="line">flowchart LR</div>
<div class="line">    subgraph PublicEndpoints[Public Endpoints]</div>
<div class="line">        Health[&quot;/api/health&quot;]</div>
<div class="line">        Assets[&quot;/api/assets&quot;]</div>
<div class="line">        AssetDetail[&quot;/api/assets/{id}&quot;]</div>
<div class="line">        Relationships[&quot;/api/relationships&quot;]</div>
<div class="line">        Metrics[&quot;/api/metrics&quot;]</div>
<div class="line">        Visualization[&quot;/api/visualization&quot;]</div>
<div class="line">        Classes[&quot;/api/asset-classes&quot;]</div>
<div class="line">        Sectors[&quot;/api/sectors&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph ProtectedEndpoints[Protected Endpoints]</div>
<div class="line">        Token[&quot;POST /token&quot;]</div>
<div class="line">        UserMe[&quot;/api/users/me&quot;]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    Client([Client]) --&gt; PublicEndpoints</div>
<div class="line">    Client --&gt; ProtectedEndpoints</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Authentication   </th><th class="markdownTableHeadNone">Rate Limited    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/health</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/token</code>   </td><td class="markdownTableBodyNone">POST   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">Yes (5/min)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/assets</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/assets/{id}</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/assets/{id}/relationships</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/relationships</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/metrics</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/visualization</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/asset-classes</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/sectors</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">No   </td><td class="markdownTableBodyNone">No    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/users/me</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">Yes (10/min)   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2831"></a>
9.4.2 Development Commands Quick Reference</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Task   </th><th class="markdownTableHeadNone">Command    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Start FastAPI Backend   </td><td class="markdownTableBodyNone"><code>uvicorn <a class="el" href="namespaceapi_1_1main.html">api.main</a>:app --reload --port 8000</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Start Next.js Frontend   </td><td class="markdownTableBodyNone"><code>cd frontend &amp;&amp; npm run dev</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Start Gradio UI   </td><td class="markdownTableBodyNone"><code>python <a class="el" href="app_8py.html">app.py</a></code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Run Python Tests   </td><td class="markdownTableBodyNone"><code>pytest</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Run Tests with Coverage   </td><td class="markdownTableBodyNone"><code>pytest --cov=api --cov=src --cov-report=html</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Run Frontend Tests   </td><td class="markdownTableBodyNone"><code>cd frontend &amp;&amp; npm test</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Docker Build   </td><td class="markdownTableBodyNone"><code>docker-compose up --build</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Lint Python Code   </td><td class="markdownTableBodyNone"><code>flake8 &amp;&amp; black --check . &amp;&amp; isort --check-only .</code>   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2832"></a>
9.4.3 Domain Model Validation Rules</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Entity   </th><th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Rule    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Asset   </td><td class="markdownTableBodyNone">id, symbol, name   </td><td class="markdownTableBodyNone">Non-empty string required    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Asset   </td><td class="markdownTableBodyNone">price   </td><td class="markdownTableBodyNone">Non-negative float required    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Asset   </td><td class="markdownTableBodyNone">market_cap   </td><td class="markdownTableBodyNone">Non-negative float (optional)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Asset   </td><td class="markdownTableBodyNone">currency   </td><td class="markdownTableBodyNone">3-character ISO code    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">RegulatoryEvent   </td><td class="markdownTableBodyNone">impact_score   </td><td class="markdownTableBodyNone">Range [-1.0, 1.0]    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">RegulatoryEvent   </td><td class="markdownTableBodyNone">date   </td><td class="markdownTableBodyNone">ISO 8601 format (YYYY-MM-DD)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Relationship   </td><td class="markdownTableBodyNone">strength   </td><td class="markdownTableBodyNone">Normalized range [0.0, 1.0]   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2834"></a>
9.5 DOCUMENT CROSS-REFERENCE INDEX</h2>
<p>This index maps key topics to their primary documentation locations within this Technical Specification.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Topic   </th><th class="markdownTableHeadNone">Primary Section(s)    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Asset Class Definitions   </td><td class="markdownTableBodyNone">1.2.2, 2.1.2, 6.2.2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Authentication System   </td><td class="markdownTableBodyNone">5.4.3, 6.4.2, 6.4.3    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CI/CD Pipeline   </td><td class="markdownTableBodyNone">8.6    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CORS Configuration   </td><td class="markdownTableBodyNone">5.4.5, 6.3.1.5, 6.4.5    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Database Schema   </td><td class="markdownTableBodyNone">5.6, 6.2.2, 6.2.3    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Deployment Options   </td><td class="markdownTableBodyNone">5.5, 8.2-8.5    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Environment Variables   </td><td class="markdownTableBodyNone">6.2.13, 6.3.6, 6.4.7    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Error Handling   </td><td class="markdownTableBodyNone">4.5, 5.4.2, 6.3.2.3    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Feature Catalog   </td><td class="markdownTableBodyNone">2.1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Graph Engine   </td><td class="markdownTableBodyNone">2.1.3, 5.1.2, 5.2    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Integration Architecture   </td><td class="markdownTableBodyNone">6.3    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Metrics &amp; Analytics   </td><td class="markdownTableBodyNone">2.1.5 (F-010), 4.3, 5.4.1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Rate Limiting   </td><td class="markdownTableBodyNone">2.1.4 (F-007), 5.4.4, 6.4.4    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Relationship Types   </td><td class="markdownTableBodyNone">1.2.2, 2.1.3, 6.2.2.3    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Security Architecture   </td><td class="markdownTableBodyNone">3.8, 6.4    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Technology Stack   </td><td class="markdownTableBodyNone">1.2.3, 3.1-3.4    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">UI Technologies   </td><td class="markdownTableBodyNone">7.2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Visualization Features   </td><td class="markdownTableBodyNone">2.1.5, 4.3.2, 7.3   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md2836"></a>
9.6 REFERENCES</h2>
<h3><a class="anchor" id="autotoc_md2837"></a>
9.6.1 Source Files Examined</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Path   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="app_8py.html">app.py</a></code>   </td><td class="markdownTableBodyNone">Gradio UI implementation with tabbed interface    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="api_2main_8py.html">api/main.py</a></code>   </td><td class="markdownTableBodyNone">FastAPI application with endpoints, CORS, rate limiting    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="auth_8py.html">api/auth.py</a></code>   </td><td class="markdownTableBodyNone">JWT authentication and user management    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="api_2database_8py.html">api/database.py</a></code>   </td><td class="markdownTableBodyNone">SQLite database connection management    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="financial__models_8py.html">src/models/financial_models.py</a></code>   </td><td class="markdownTableBodyNone">Domain model definitions and validation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="asset__graph_8py.html">src/logic/asset_graph.py</a></code>   </td><td class="markdownTableBodyNone">Graph engine implementation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="real__data__fetcher_8py.html">src/data/real_data_fetcher.py</a></code>   </td><td class="markdownTableBodyNone">Yahoo Finance integration with caching    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="sample__data_8py.html">src/data/sample_data.py</a></code>   </td><td class="markdownTableBodyNone">Sample database generation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="src_2data_2database_8py.html">src/data/database.py</a></code>   </td><td class="markdownTableBodyNone">SQLAlchemy ORM configuration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="db__models_8py.html">src/data/db_models.py</a></code>   </td><td class="markdownTableBodyNone">ORM model definitions    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="repository_8py.html">src/data/repository.py</a></code>   </td><td class="markdownTableBodyNone">Repository pattern implementation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="schema__report_8py.html">src/reports/schema_report.py</a></code>   </td><td class="markdownTableBodyNone">Schema documentation generator    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="graph__visuals_8py.html">src/visualizations/graph_visuals.py</a></code>   </td><td class="markdownTableBodyNone">3D visualization generation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="graph__2d__visuals_8py.html">src/visualizations/graph_2d_visuals.py</a></code>   </td><td class="markdownTableBodyNone">2D visualization generation    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="mcp__server_8py.html">mcp_server.py</a></code>   </td><td class="markdownTableBodyNone">Model Context Protocol server    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>migrations/001_initial.sql</code>   </td><td class="markdownTableBodyNone">Database DDL schema    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>requirements.txt</code>   </td><td class="markdownTableBodyNone">Python dependencies    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>frontend/package.json</code>   </td><td class="markdownTableBodyNone">Frontend dependencies    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Dockerfile</code>   </td><td class="markdownTableBodyNone">Container configuration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>docker-compose.yml</code>   </td><td class="markdownTableBodyNone">Container orchestration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>vercel.json</code>   </td><td class="markdownTableBodyNone">Serverless deployment configuration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.circleci/config.yml</code>   </td><td class="markdownTableBodyNone">CircleCI pipeline configuration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.github/workflows/</code>   </td><td class="markdownTableBodyNone">GitHub Actions workflow definitions   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2838"></a>
9.6.2 Technical Specification Sections Referenced</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Section   </th><th class="markdownTableHeadNone">Topic    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1.1 Executive Summary   </td><td class="markdownTableBodyNone">System overview and business context    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1.2 System Overview   </td><td class="markdownTableBodyNone">Architecture and technology stack    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2.1 Feature Catalog   </td><td class="markdownTableBodyNone">Complete feature descriptions    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2.6 Assumptions and Constraints   </td><td class="markdownTableBodyNone">System limitations    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3.4 Open Source Dependencies   </td><td class="markdownTableBodyNone">Dependency specifications    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3.5 Third-Party Services   </td><td class="markdownTableBodyNone">External integrations    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5.1 High-Level Architecture   </td><td class="markdownTableBodyNone">Architectural patterns    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">5.4 Cross-Cutting Concerns   </td><td class="markdownTableBodyNone">Logging, error handling, authentication    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5.5 Deployment Architecture   </td><td class="markdownTableBodyNone">Deployment options    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6.2 Database Design   </td><td class="markdownTableBodyNone">Schema and indexing    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">6.3 Integration Architecture   </td><td class="markdownTableBodyNone">API design and protocols    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6.4 Security Architecture   </td><td class="markdownTableBodyNone">Security framework    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">7.2 Core UI Technologies   </td><td class="markdownTableBodyNone">Frontend specifications    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">8.6 CI/CD Pipeline   </td><td class="markdownTableBodyNone">Build and deployment automation   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md2839"></a>
9.6.3 External Standards Referenced</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Standard   </th><th class="markdownTableHeadNone">Usage    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ISO 4217   </td><td class="markdownTableBodyNone">Currency code validation (3-character format)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ISO 8601   </td><td class="markdownTableBodyNone">Date format validation (YYYY-MM-DD)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OpenAPI 3.x   </td><td class="markdownTableBodyNone">API documentation specification    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">OAuth2   </td><td class="markdownTableBodyNone">Bearer token authentication scheme    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">RFC 7519   </td><td class="markdownTableBodyNone">JSON Web Token standard   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.10.0-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://penify.dev/"><img class="footer" src="https://www.penify.dev/penify-logo.svg" width="104" height="31" alt="doxygen"/></a> </li>
  </ul>
</div>
</body>
</html>
