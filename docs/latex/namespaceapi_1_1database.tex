\doxysection{api.\+database Namespace Reference}
\hypertarget{namespaceapi_1_1database}{}\label{namespaceapi_1_1database}\index{api.database@{api.database}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item
str \mbox{\hyperlink{namespaceapi_1_1database_adaae779a24d119d106ff0a16ba2fc908}{\+\_\+get\+\_\+database\+\_\+url}} ()
\item
str \mbox{\hyperlink{namespaceapi_1_1database_a67db33fa9ae24bc163341385dbd406ae}{\+\_\+resolve\+\_\+sqlite\+\_\+path}} (str url)
\item
bool \mbox{\hyperlink{namespaceapi_1_1database_a2b55d2e5b55f35ea1fdaefbf1fd87ac3}{\+\_\+is\+\_\+memory\+\_\+db}} (str\texorpdfstring{$\vert$}{|}None path=None)
\item
sqlite3.\+Connection \mbox{\hyperlink{namespaceapi_1_1database_add5bd37c7ccad20f0844cf169de107d2}{\+\_\+connect}} ()
\item
Iterator\mbox{[}sqlite3.\+Connection\mbox{]} \mbox{\hyperlink{namespaceapi_1_1database_a6e6aa213df0f9401217ec521935184c5}{get\+\_\+connection}} ()
\item
\mbox{\hyperlink{namespaceapi_1_1database_a19f8482578343a9585b0b18cf5517654}{\+\_\+cleanup\+\_\+memory\+\_\+connection}} ()
\item
None \mbox{\hyperlink{namespaceapi_1_1database_ad11e531eb65a89c7f8f2b4a41dd57b7d}{execute}} (str query, tuple\texorpdfstring{$\vert$}{|}list\texorpdfstring{$\vert$}{|}None parameters=None)
\item
\mbox{\hyperlink{namespaceapi_1_1database_a71b75b8190d8ed80254f80faa05a7948}{fetch\+\_\+one}} (str query, tuple\texorpdfstring{$\vert$}{|}list\texorpdfstring{$\vert$}{|}None parameters=None)
\item
\mbox{\hyperlink{namespaceapi_1_1database_ac1c087e886aa857ebb7fb847b74b896f}{fetch\+\_\+value}} (str query, tuple\texorpdfstring{$\vert$}{|}list\texorpdfstring{$\vert$}{|}None parameters=None)
\item
None \mbox{\hyperlink{namespaceapi_1_1database_a60790c5dbf753da6b2bccf09d471b534}{initialize\+\_\+schema}} ()
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item
str \mbox{\hyperlink{namespaceapi_1_1database_a5014ed8f23fc4c5f66b950f75619ad58}{DATABASE\+\_\+\+URL}} = \mbox{\hyperlink{namespaceapi_1_1database_adaae779a24d119d106ff0a16ba2fc908}{\+\_\+get\+\_\+database\+\_\+url}}()
\item
str \mbox{\hyperlink{namespaceapi_1_1database_ade7aafc0c3e9df952ce813ab06dd518f}{DATABASE\+\_\+\+PATH}} = \mbox{\hyperlink{namespaceapi_1_1database_a67db33fa9ae24bc163341385dbd406ae}{\+\_\+resolve\+\_\+sqlite\+\_\+path}}(\mbox{\hyperlink{namespaceapi_1_1database_a5014ed8f23fc4c5f66b950f75619ad58}{DATABASE\+\_\+\+URL}})
\item
sqlite3 \mbox{\hyperlink{namespaceapi_1_1database_a648f6bb53e1820a79b97c45ee1850419}{\+\_\+\+MEMORY\+\_\+\+CONNECTION}} = None
\item
\mbox{\hyperlink{namespaceapi_1_1database_aabb3043c4751dac46f440c64ebbca1ae}{\+\_\+\+MEMORY\+\_\+\+CONNECTION\+\_\+\+LOCK}} = threading.\+Lock()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}Lightweight database helpers for the API layer.\end{DoxyVerb}


\doxysubsection{Function Documentation}
\Hypertarget{namespaceapi_1_1database_a19f8482578343a9585b0b18cf5517654}\index{api.database@{api.database}!\_cleanup\_memory\_connection@{\_cleanup\_memory\_connection}}
\index{\_cleanup\_memory\_connection@{\_cleanup\_memory\_connection}!api.database@{api.database}}
\doxysubsubsection{\texorpdfstring{\_cleanup\_memory\_connection()}{\_cleanup\_memory\_connection()}}
{\footnotesize\ttfamily \label{namespaceapi_1_1database_a19f8482578343a9585b0b18cf5517654}
api.\+database.\+\_\+cleanup\+\_\+memory\+\_\+connection (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Clean up the global memory connection when the program exits.\end{DoxyVerb}
 \Hypertarget{namespaceapi_1_1database_add5bd37c7ccad20f0844cf169de107d2}\index{api.database@{api.database}!\_connect@{\_connect}}
\index{\_connect@{\_connect}!api.database@{api.database}}
\doxysubsubsection{\texorpdfstring{\_connect()}{\_connect()}}
{\footnotesize\ttfamily \label{namespaceapi_1_1database_add5bd37c7ccad20f0844cf169de107d2}
 sqlite3.\+Connection api.\+database.\+\_\+connect (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Open a configured SQLite connection for the module's database path.


Returns a persistent shared connection when the configured database is
in-memory; for file-backed databases, returns a new connection instance.
The connection has type detection enabled (PARSE_DECLTYPES), allows use from
multiple threads (check_same_thread=False) and uses sqlite3.Row for rows.
When the database path is a URI beginning with "file:" the connection is
opened with URI handling enabled.

Returns:
    sqlite3.Connection: A sqlite3 connection to the configured
        DATABASE_PATH (shared for in-memory, new per call for file-backed).
\end{DoxyVerb}
 Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceapi_1_1database_add5bd37c7ccad20f0844cf169de107d2_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceapi_1_1database_add5bd37c7ccad20f0844cf169de107d2_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespaceapi_1_1database_adaae779a24d119d106ff0a16ba2fc908}\index{api.database@{api.database}!\_get\_database\_url@{\_get\_database\_url}}
\index{\_get\_database\_url@{\_get\_database\_url}!api.database@{api.database}}
\doxysubsubsection{\texorpdfstring{\_get\_database\_url()}{\_get\_database\_url()}}
{\footnotesize\ttfamily \label{namespaceapi_1_1database_adaae779a24d119d106ff0a16ba2fc908}
 str api.\+database.\+\_\+get\+\_\+database\+\_\+url (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Read the DATABASE_URL environment variable and return its value.

Returns:
    The value of the `DATABASE_URL` environment variable.

Raises:
    ValueError: If the `DATABASE_URL` environment variable is not set.
\end{DoxyVerb}
 \Hypertarget{namespaceapi_1_1database_a2b55d2e5b55f35ea1fdaefbf1fd87ac3}\index{api.database@{api.database}!\_is\_memory\_db@{\_is\_memory\_db}}
\index{\_is\_memory\_db@{\_is\_memory\_db}!api.database@{api.database}}
\doxysubsubsection{\texorpdfstring{\_is\_memory\_db()}{\_is\_memory\_db()}}
{\footnotesize\ttfamily \label{namespaceapi_1_1database_a2b55d2e5b55f35ea1fdaefbf1fd87ac3}
 bool api.\+database.\+\_\+is\+\_\+memory\+\_\+db (\begin{DoxyParamCaption}\item[{str \texorpdfstring{$\vert$}{|} None }]{path}{ = {\ttfamily None}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Determine whether the given or configured database refers to an in-memory
SQLite database.

Parameters:
    path (str | None): Optional database path or URI to evaluate.
    If omitted, the configured DATABASE_PATH is used.
Returns:
    True if the path (or configured database) is an in-memory SQLite database.
    For example, ":memory:" or "file::memory:?cache=shared", False otherwise.
\end{DoxyVerb}
 Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceapi_1_1database_a2b55d2e5b55f35ea1fdaefbf1fd87ac3_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespaceapi_1_1database_a67db33fa9ae24bc163341385dbd406ae}\index{api.database@{api.database}!\_resolve\_sqlite\_path@{\_resolve\_sqlite\_path}}
\index{\_resolve\_sqlite\_path@{\_resolve\_sqlite\_path}!api.database@{api.database}}
\doxysubsubsection{\texorpdfstring{\_resolve\_sqlite\_path()}{\_resolve\_sqlite\_path()}}
{\footnotesize\ttfamily \label{namespaceapi_1_1database_a67db33fa9ae24bc163341385dbd406ae}
 str api.\+database.\+\_\+resolve\+\_\+sqlite\+\_\+path (\begin{DoxyParamCaption}\item[{str}]{url}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}Resolve a SQLite URL to either a filesystem path or the special
in-memory indicator.

Accepts SQLite URLs with schemes like `sqlite:///relative.db`,
`sqlite:////absolute/path.db`, and `sqlite:///:memory:`.
Percent-encodings in the URL path are decoded before resolution.
For in-memory URLs (`:memory:` or `/:memory:`)
the literal string `":memory:"` is returned.
URI-style memory databases like `sqlite:///file::memory:?cache=shared`
are returned as-is.

Parameters:
    url (str): SQLite URL to resolve.

Returns:
    str: Filesystem path for file-based URLs,
         or the literal string `":memory:"` for in-memory databases,
         or the original path for URI-style memory databases.
\end{DoxyVerb}
 \Hypertarget{namespaceapi_1_1database_ad11e531eb65a89c7f8f2b4a41dd57b7d}\index{api.database@{api.database}!execute@{execute}}
\index{execute@{execute}!api.database@{api.database}}
\doxysubsubsection{\texorpdfstring{execute()}{execute()}}
{\footnotesize\ttfamily \label{namespaceapi_1_1database_ad11e531eb65a89c7f8f2b4a41dd57b7d}
 None api.\+database.\+execute (\begin{DoxyParamCaption}\item[{str}]{query}{, }\item[{tuple \texorpdfstring{$\vert$}{|} list \texorpdfstring{$\vert$}{|} None }]{parameters}{ = {\ttfamily None}}\end{DoxyParamCaption})}

\begin{DoxyVerb}Execute a SQL write statement and commit the transaction using the module's
managed SQLite connection.

Parameters:
    query (str): SQL statement to execute.
    parameters (tuple | list | None): Sequence of values to bind to the statement;
        use `None` or an empty sequence if there are no parameters.
\end{DoxyVerb}
 Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceapi_1_1database_ad11e531eb65a89c7f8f2b4a41dd57b7d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceapi_1_1database_ad11e531eb65a89c7f8f2b4a41dd57b7d_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespaceapi_1_1database_a71b75b8190d8ed80254f80faa05a7948}\index{api.database@{api.database}!fetch\_one@{fetch\_one}}
\index{fetch\_one@{fetch\_one}!api.database@{api.database}}
\doxysubsubsection{\texorpdfstring{fetch\_one()}{fetch\_one()}}
{\footnotesize\ttfamily \label{namespaceapi_1_1database_a71b75b8190d8ed80254f80faa05a7948}
api.\+database.\+fetch\+\_\+one (\begin{DoxyParamCaption}\item[{str}]{query}{, }\item[{tuple \texorpdfstring{$\vert$}{|} list \texorpdfstring{$\vert$}{|} None }]{parameters}{ = {\ttfamily None}}\end{DoxyParamCaption})}

\begin{DoxyVerb}Retrieve the first row produced by an SQL query.

Parameters:
    query (str): SQL statement to execute.
    parameters (tuple | list | None): Optional sequence of parameters
        to bind into the query.

Returns:
    sqlite3.Row | None: The first row of the result set
        as a `sqlite3.Row`, or `None` if the query returned no rows.
\end{DoxyVerb}
 Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceapi_1_1database_a71b75b8190d8ed80254f80faa05a7948_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceapi_1_1database_a71b75b8190d8ed80254f80faa05a7948_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespaceapi_1_1database_ac1c087e886aa857ebb7fb847b74b896f}\index{api.database@{api.database}!fetch\_value@{fetch\_value}}
\index{fetch\_value@{fetch\_value}!api.database@{api.database}}
\doxysubsubsection{\texorpdfstring{fetch\_value()}{fetch\_value()}}
{\footnotesize\ttfamily \label{namespaceapi_1_1database_ac1c087e886aa857ebb7fb847b74b896f}
api.\+database.\+fetch\+\_\+value (\begin{DoxyParamCaption}\item[{str}]{query}{, }\item[{tuple \texorpdfstring{$\vert$}{|} list \texorpdfstring{$\vert$}{|} None }]{parameters}{ = {\ttfamily None}}\end{DoxyParamCaption})}

\begin{DoxyVerb}Fetches the first column value from the first row of a query result.

Parameters:
    query (str): SQL query to execute; may include parameter placeholders.
    parameters (tuple | list | None): Sequence of parameters for the query
        placeholders.

Returns:
    The first column value if a row is returned, `None` otherwise.
\end{DoxyVerb}
 Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceapi_1_1database_ac1c087e886aa857ebb7fb847b74b896f_cgraph}
\end{center}
\end{figure}
\Hypertarget{namespaceapi_1_1database_a6e6aa213df0f9401217ec521935184c5}\index{api.database@{api.database}!get\_connection@{get\_connection}}
\index{get\_connection@{get\_connection}!api.database@{api.database}}
\doxysubsubsection{\texorpdfstring{get\_connection()}{get\_connection()}}
{\footnotesize\ttfamily \label{namespaceapi_1_1database_a6e6aa213df0f9401217ec521935184c5}
 Iterator\mbox{[}sqlite3.\+Connection\mbox{]} api.\+database.\+get\+\_\+connection (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Provide a context-managed SQLite connection for the configured database.

For file-backed databases the connection is closed when the context exits;
for in-memory databases the shared connection is kept open.

Returns:
    sqlite3.Connection: The SQLite connection â€” closed on context exit for
        file-backed databases, kept open for in-memory databases.
\end{DoxyVerb}
 Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceapi_1_1database_a6e6aa213df0f9401217ec521935184c5_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceapi_1_1database_a6e6aa213df0f9401217ec521935184c5_icgraph}
\end{center}
\end{figure}
\Hypertarget{namespaceapi_1_1database_a60790c5dbf753da6b2bccf09d471b534}\index{api.database@{api.database}!initialize\_schema@{initialize\_schema}}
\index{initialize\_schema@{initialize\_schema}!api.database@{api.database}}
\doxysubsubsection{\texorpdfstring{initialize\_schema()}{initialize\_schema()}}
{\footnotesize\ttfamily \label{namespaceapi_1_1database_a60790c5dbf753da6b2bccf09d471b534}
 None api.\+database.\+initialize\+\_\+schema (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Create the `user_credentials` table if it does not already exist.

The table has the following columns:
- `id`: INTEGER PRIMARY KEY AUTOINCREMENT
- `username`: TEXT, unique and not null
- `email`: TEXT
- `full_name`: TEXT
- `hashed_password`: TEXT, not null
- `disabled`: INTEGER, not null, defaults to 0
\end{DoxyVerb}
 Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceapi_1_1database_a60790c5dbf753da6b2bccf09d471b534_cgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\Hypertarget{namespaceapi_1_1database_a648f6bb53e1820a79b97c45ee1850419}\index{api.database@{api.database}!\_MEMORY\_CONNECTION@{\_MEMORY\_CONNECTION}}
\index{\_MEMORY\_CONNECTION@{\_MEMORY\_CONNECTION}!api.database@{api.database}}
\doxysubsubsection{\texorpdfstring{\_MEMORY\_CONNECTION}{\_MEMORY\_CONNECTION}}
{\footnotesize\ttfamily \label{namespaceapi_1_1database_a648f6bb53e1820a79b97c45ee1850419}
sqlite3 api.\+database.\+\_\+\+MEMORY\+\_\+\+CONNECTION = None\hspace{0.3cm}{\ttfamily [protected]}}

\Hypertarget{namespaceapi_1_1database_aabb3043c4751dac46f440c64ebbca1ae}\index{api.database@{api.database}!\_MEMORY\_CONNECTION\_LOCK@{\_MEMORY\_CONNECTION\_LOCK}}
\index{\_MEMORY\_CONNECTION\_LOCK@{\_MEMORY\_CONNECTION\_LOCK}!api.database@{api.database}}
\doxysubsubsection{\texorpdfstring{\_MEMORY\_CONNECTION\_LOCK}{\_MEMORY\_CONNECTION\_LOCK}}
{\footnotesize\ttfamily \label{namespaceapi_1_1database_aabb3043c4751dac46f440c64ebbca1ae}
api.\+database.\+\_\+\+MEMORY\+\_\+\+CONNECTION\+\_\+\+LOCK = threading.\+Lock()\hspace{0.3cm}{\ttfamily [protected]}}

\Hypertarget{namespaceapi_1_1database_ade7aafc0c3e9df952ce813ab06dd518f}\index{api.database@{api.database}!DATABASE\_PATH@{DATABASE\_PATH}}
\index{DATABASE\_PATH@{DATABASE\_PATH}!api.database@{api.database}}
\doxysubsubsection{\texorpdfstring{DATABASE\_PATH}{DATABASE\_PATH}}
{\footnotesize\ttfamily \label{namespaceapi_1_1database_ade7aafc0c3e9df952ce813ab06dd518f}
str api.\+database.\+DATABASE\+\_\+\+PATH = \mbox{\hyperlink{namespaceapi_1_1database_a67db33fa9ae24bc163341385dbd406ae}{\+\_\+resolve\+\_\+sqlite\+\_\+path}}(\mbox{\hyperlink{namespaceapi_1_1database_a5014ed8f23fc4c5f66b950f75619ad58}{DATABASE\+\_\+\+URL}})}

\Hypertarget{namespaceapi_1_1database_a5014ed8f23fc4c5f66b950f75619ad58}\index{api.database@{api.database}!DATABASE\_URL@{DATABASE\_URL}}
\index{DATABASE\_URL@{DATABASE\_URL}!api.database@{api.database}}
\doxysubsubsection{\texorpdfstring{DATABASE\_URL}{DATABASE\_URL}}
{\footnotesize\ttfamily \label{namespaceapi_1_1database_a5014ed8f23fc4c5f66b950f75619ad58}
str api.\+database.\+DATABASE\+\_\+\+URL = \mbox{\hyperlink{namespaceapi_1_1database_adaae779a24d119d106ff0a16ba2fc908}{\+\_\+get\+\_\+database\+\_\+url}}()}
